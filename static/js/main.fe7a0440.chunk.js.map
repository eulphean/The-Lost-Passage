{"version":3,"sources":["assets/skybox/soundscape.mp3","components/Managers/ExhibitionManager.js","components/Managers/AudioManager.js","components/Utilities/Utility.js","components/Managers/CameraControl.js","components/Managers/LightingManager.js","components/Managers/RendererManager.js","components/Managers/PatternManager.js","components/Environment/Target.js","models/pigeon_back.glb","components/Environment/GPUPigeon.js","components/Managers/GPURenderer.js","shaders/fragmentShaderVelocity.glsl","shaders/fragmentShaderPosition.glsl","components/Managers/PigeonManager.js","components/Managers/RaycastManager.js","components/Utilities/Websocket.js","components/Managers/Helper.js","components/Managers/SkyboxManager.js","assets/icons/pigeon.svg","components/Utilities/ServerGui.js","components/Interface/GuiPanel.js","assets/skybox/Front.mp4","components/Interface/World.js","components/Utilities/CommonStyles.js","assets/info/gaugan.mp4","components/Interface/PassengerPigeons.js","assets/info/pigeon.mp4","components/Interface/ClimateStatement.js","components/Interface/Footer.js","assets/sponsors/beFantastic.jpg","assets/sponsors/artahack.jpg","assets/sponsors/supernormal.jpg","assets/sponsors/dara.jpg","assets/headshots/amay.jpg","assets/headshots/shao.jpg","assets/headshots/yu.jpg","assets/headshots/ong.jpg","components/Interface/About.js","components/Interface/SectionPanel.js","components/Interface/ContentPanel.js","assets/icons/mute.svg","assets/icons/volume.svg","components/Interface/Navigation.js","components/Interface/EnterPanel.js","assets/info/mobile_video.mp4","components/App.js","index.js"],"names":["this","isExhibition","subscribers","window","addEventListener","e","key","forEach","listener","push","p5","MicParams","Bass","Mid","Treble","LowMid","HighMid","Audio","soundObj","env","soundObject","adsr","attackTime","attackLevel","decayTime","decayLevel","releaseTime","releaseLevel","set","play","triggerAttack","loop","pause","triggerRelease","sketch","s","audioManagerCbk","mic","fft","canAnalyze","preload","sound","loadSound","soundscape","Envelope","audioCallback","audioCbk","setup","noCanvas","initMic","console","log","navigator","mediaDevices","getUserMedia","audio","then","AudioIn","start","FFT","setInput","getSources","devices","d","kind","label","deviceId","draw","analyze","bass","map","getEnergy","mid","treble","lowMid","highMid","trigger","release","myP5","audioManagerReady","bind","isPermanentlyMute","isAudioManagerReady","ExhibitionManager","subscribe","onExhibitionUpdate","micOn","reset","getRandomNum","max","min","Math","random","OrbitParams","EnableControls","EnablePan","AutoRotate","RotateSpeed","EnableKeys","zoom","cameraCorners","x","y","z","CameraControl","camera","THREE","innerWidth","innerHeight","position","lookAt","frustumCulled","mouse","animationStopped","currentIdx","onMouseMoveBound","onMouseMove","num","scene","cameraUpdates","cos","sin","TWEEN","removeEventListener","onMouseClickBound","event","clientX","clientY","deltaY","onAnimationComplete","to","easing","Cubic","Out","onComplete","onMouseClick","calcNewCameraIdx","idx","floor","length","LightingManager","hemiLight","color","setHSL","groundColor","add","dirLight","multiplyScalar","RendererParams","DrawCalls","RendererManager","renderer","antialias","setSize","setPixelRatio","devicePixelRatio","outputEncoding","animate","setAnimationLoop","domElement","render","width","height","info","calls","PatternParams","PatternType","PatternTypes","EllipseParams","Origin","Radii","Amplitude","Speed","Direction","RoseCurveParams","Radius","Phase","NumPetals","Sinusoidal","Pattern","patternObj","theta_rad","amp","isClockwise","dir","originPos","pos","moveFactor","move","targetPos","targetConst","maxTheta","r","EllipsePattern","radX","radx","radZ","radz","PI","updateGuiParams","xPos","cartesianX","zPos","cartesianZ","yPos","cartesianY","updateTheta","degToRad","RosePattern","rad","phase","ph","numPetals","numP","isSin","PatternManager","curPatternType","amplitude","ellipseConstructor","curPattern","radius","isSinusoidal","roseConstructor","update","getTargetPos","TargetParams","ShowTarget","MaxTargetRadius","CurrentTargetRadius","Target","geometry","material","emissive","wireframe","transparent","opacity","mesh","targetPosition","now","setVector","setVisibility","scale","v","copy","visible","WIDTH","BIRDS","GPUPigeon","onFinishedCallback","durationAnimation","vertexPerBird","indicesPerBird","textureAnimation","birdGeometry","loadPigeon","GLTFLoader","loadAsync","model","gltf","animations","round","duration","birdGeo","children","morphAttributes","getAttribute","count","index","array","tHeight","nextPowerOf2","tWidth","tData","Float32Array","i","j","offset","curMorph","nextMorph","lerpAmount","d0","d1","undefined","lerp","vertices","reference","seeds","indices","totalVertices","birdColArray","newBirdColArray","skip","bIndex","bird","setAttribute","Uint16Array","setIndex","n","pow","ceil","value1","value2","amount","setDrawRange","GPURenderer","gpuCompute","GPUComputationRenderer","dtPosition","createTexture","dtVelocity","fillPositionTexture","fillVelocityTexture","velocityVariable","addVariable","positionVariable","setVariableDependencies","positionUniforms","uniforms","velocityUniforms","value","PigeonParams","Attraction","Seperation","Alignment","Cohesion","MaxSpeed","SpeedLerp","wrapS","wrapT","error","init","shoot","delta","boundingBox","compute","texture","theArray","image","data","k","kl","getCurrentRenderTarget","IsPigeonManagerReady","Freedom","Size","Count","PigeonManager","patternManager","target","isFlockInShock","previousSepValue","previousSpeedValue","clock","pigeonShader","gpuRenderer","shootCount","setTargetPattern","pigeon","initPigeons","getDelta","oldTime","getPositionRenderTarget","getVelocityRenderTarget","mapRange","recoverFromShock","number","inMin","inMax","outMin","outMax","pausePigeons","geoMaterial","vertexColors","flatShading","side","roughness","metalness","onBeforeCompile","shader","texturePosition","textureVelocity","time","size","token","insert","vertexShader","replace","birdMesh","rotation","castShadow","receiveShadow","newPatternType","RaycastManager","shootPigeonCallback","raycaster","shootPigeon","isIntersecting","targetMesh","shouldAnimate","setFromCamera","objects","intersectObject","siteURL","herokuURL","socket","io","reconnection","reconnectionDelay","reconnectionAttempts","Infinity","once","handlePresetsCbk","on","logTime","handlePresets","presetName","json","payload","emit","readPresetsCallback","isSafari","safari","_defs","_g","SkyboxParams","ShowSkybox","ShowBoundingBox","BoundingBoxScalar","IsSkyboxReady","SkyboxManager","videoRef","rightTexture","current","center","flipY","leftTexture","topTexture","bottomTexture","materialArray","t","cubeMesh","createBoundingBox","lastBoundingBoxScalar","computeBoundingBox","expandByScalar","boundingBoxMesh","updateBoundingBox","GuiParams","Preset","Presets","ServerGui","containerComponent","gui","Pane","title","container","expanded","registerPlugin","EssentialsPlugin","addInput","presetOptions","buildPresets","fpsGraph","addBlade","view","lineCount","addMonitor","f0","addFolder","f1","patternFolder","currentPatternType","buildPatternTypeOptions","buildPatterns","ellipseParamsFolder","roseCurveParamsFolder","step","showPatternParams","pigeonParamsFolder","f3","f4","addButton","onSavePreset","onDeletePreset","Websocket","readAllPresets","onReceivePresets","hidden","guiJson","JSON","parse","importPreset","name","config","text","stringify","defaultPresetJSON","disposePresets","disposePatterns","exportPreset","preset","_","find","p","sortBy","unshift","saveGuiPreset","alert","remove","deletePreset","presetJson","presetList","dispose","options","onPresetSelected","patternTypeOptions","Ellipse","RoseCurve","patternList","onPatternSelected","ev","patternChangeUpdate","callback","styles","top","right","zIndex","GuiPanel","props","state","guiRef","React","createRef","ref","style","subscribeForPatternChange","Component","Radium","IsWorldReady","overflow","crosshair","cursor","video","display","World","worldRef","navRef","panelRef","frontVideoRef","backVideoRef","leftVideoRef","rightVideoRef","topVideoRef","bottomVideoRef","background","cameraControl","lightingManager","skyboxManager","raycastManager","onShootPigeon","rendererManager","pigeonManager","videoLoadProgress","onWindowResize","document","updateAnimationStatus","rendererDomElement","getDomElement","appendChild","getFpsGraph","onPatternChanged","createSkybox","renderThree","checkIfReady","id","type","src","front","playsInline","onCanPlay","onVideoLoaded","begin","getBoundingBox","getPigeonParamFolder","disabled","getCamera","monitorDrawCalls","end","aspect","updateProjectionMatrix","updateSize","status","AudioManager","getCurPatternType","setupTarget","setupPigeonGPU","initialTween","onInitialCameraAnimationDone","setNewPatternType","elementScrollIntoView","behavior","block","fontSize","padding","fontFamily","flexDirection","justifyContent","ppVideo","objectFit","content","textAlign","marginTop","letterSpacing","PassengerPigeons","autoPlay","muted","pp","ClimateStatement","gaugan","website","backgroundColor","paddingTop","paddingBottom","Footer","alignItems","team","member","marginBottom","marginLeft","marginRight","photo","borderRadius","infoContainer","location","moreMargin","sponsors","imgLink","maxWidth","About","kianPeng","getKianPeng","amay","getAmay","shao","getShao","yu","getYu","href","rel","beFantastic","alt","artahack","supernormal","dara","ong","SectionPanel","containerRef","panel","getPanel","PanelTitle","PIGEONS","CLIMATE","ABOUT","setTimeout","ContentPanel","pigeonPanelRef","climatePanelRef","aboutPanelRef","panelNum","panelTitle","scrollTo","_excluded","_extends","Object","assign","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgPigeon","_ref","svgRef","titleId","viewBox","xmlnsXlink","xmlns","in","values","xlinkHref","fill","fillRule","stroke","clipPath","transform","ForwardRef","SvgMute","strokeWidth","strokeLinejoin","strokeLinecap","SvgVolume","absoluteContainer","visibility","contentContainer","homeTitle","titleContainer","textShadow","hover","homeButton","colorFlick","animation","animationName","keyframes","animationDirection","homeHover","svg","muteSvg","soundButton","buttonCollection","bottom","Navigation","isPlayingSoundInitialState","isMobile","isHoveringPigeons","isHoveringClimate","isHoveringAbout","isHomeButtonHovering","showHomeButton","isPlayingSound","pigeonStyle","climateStyle","aboutStyle","getHomeButton","getSoundButton","onClick","onMouseEnter","onHoverPigeons","onMouseLeave","onHoverClimate","onHoverAbout","button","setSound","setState","buttonStyle","onHomeButtonClick","onHomeButtonHover","hovering","onClickNavTitle","onClickHomeButton","pulse","left","loadContainer","svgContainer","loadTitle","flash","bounceOut","animationDuration","animationTimingFunction","svgSimplePulse","zoomIn","animationFillMode","borderStyle","borderColor","borderWidth","topMessage","paddingLeft","paddingRight","leftMessage","rightMessage","bottomMessage","headsupContainer","hContent","hContentSmall","EnterPanel","isLoading","isHovering","isDisabled","containerStyle","getLoader","getTitle","messages","getMessages","animStyles","headsup","getMobileHeadsup","Fragment","onHoverOn","onHoverOff","onEnter","onAnimationEnd","onStartAnimationEnd","onEnterWorld","hasFinishedLoading","onLoadComplete","containerRelative","panelStyles","panelVisible","videoCanvas","App","showContentPanel","showNavPanel","showEnterPanel","contentPanelRef","mobileVideoRef","enterPanelRef","shouldPlay","onExhibitionUpdated","navPanel","getNavPanel","enterPanel","getEnterPanel","contentPanel","getContentPanel","worldContent","getWorldContent","videoNode","mobilevideo","contentPanelStyles","beginWorld","enterWorld","scroll","setMobileVideoReady","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.fe7a0440.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/soundscape.227cee43.mp3\";","/*\n  Name: ExhibitionManager.js\n  Author: Amay Kataria\n  Date: 03/20/2021\n  Description: Manager used to control the exhibition mode. \n*/\n\nclass ExhibitionManager {\n    constructor() {\n        this.isExhibition = false; \n        this.subscribers = []; \n\n        window.addEventListener('keypress', (e) => {\n            if (e.key === 'e') {\n                this.isExhibition = !this.isExhibition; \n                this.subscribers.forEach(listener => {\n                    listener(); \n                });\n            }\n        }); \n    }\n\n    subscribe(listener) {\n        this.subscribers.push(listener); \n    }\n} \n\n// Keep a single instance. \nexport default new ExhibitionManager();\n\n// On button press - Update camera (simple rotation), audio manager (setup mic), now the bird \n// responds to audio. \n// Simple. ","/*\r\n  Name: AudioManager.js\r\n  Author: Amay Kataria\r\n  Date: 08/19/2021\r\n  Description: This is where the p5 engine is integrated into the system. The class exposes an \r\n  object called p5 that we can use to call into the methods. Please keep in mind we don't \r\n  create a canvas and just use it to get the audio functionality. If we want to draw somehting \r\n  in 2D, let's talk about it. \r\n*/\r\n\r\n// NOTE: p5 library is loaded through index.html script tags.\r\n// We assign it to a variable that we want to use.\r\n\r\nimport soundscape from '../../assets/skybox/soundscape.mp3'\r\nimport ExhibitionManager from './ExhibitionManager';\r\n// import gunshot from '../../assets/skybox/gunshot.mp3'\r\n\r\nlet p5 = window.p5;  \r\n\r\nexport let MicParams = {\r\n    Bass: 0,\r\n    Mid: 0,\r\n    Treble: 0,\r\n    LowMid: 0,\r\n    HighMid: 0\r\n}\r\n\r\nclass Audio {\r\n    constructor(soundObj, env) {\r\n        this.soundObject = soundObj;\r\n        this.adsr = env; \r\n    }\r\n\r\n    setAdsr(attackTime, attackLevel, decayTime, decayLevel, releaseTime, releaseLevel) {\r\n        // ADSR parameters\r\n        this.adsr.set(attackTime, attackLevel, decayTime, decayLevel, releaseTime, releaseLevel); \r\n    }\r\n\r\n    play() {\r\n        this.soundObject.play();\r\n        this.adsr.play(this.soundObject); \r\n    }\r\n\r\n    trigger() {\r\n        this.soundObject.play();\r\n        this.adsr.triggerAttack(this.soundObject); \r\n        this.soundObject.loop();\r\n    }\r\n\r\n    release() {\r\n        this.soundObject.pause();\r\n        this.adsr.triggerRelease(this.soundObject);\r\n    }\r\n}\r\n\r\n// Use this p5 sketch to load all audio. \r\nvar sketch = (s) => {\r\n    // Single array that holds all the audio files. \r\n    let soundObject = '';\r\n    let audioManagerCbk; \r\n    let mic = '';\r\n    let fft = '';\r\n    let canAnalyze = false; \r\n\r\n    s.preload = () => {\r\n        // Soundscape \r\n        let sound = s.loadSound(soundscape, () => {\r\n            let env = new p5.Envelope(5.0, 0.2, 2.5, 0.1, 1.5, 0.);\r\n            soundObject = new Audio(sound, env); \r\n            // Audio manager is ready now. \r\n            audioManagerCbk();\r\n        }); \r\n    }\r\n\r\n    s.audioCallback = (audioCbk) => {\r\n        audioManagerCbk = audioCbk;\r\n    }\r\n\r\n    s.setup = () => {\r\n        s.noCanvas(); // Don't creat a canvas\r\n    };\r\n\r\n    s.initMic = () => {\r\n        console.log(navigator);\r\n        navigator.mediaDevices.getUserMedia({audio: true})\r\n        .then(() => {\r\n            // Once the user gives the permission, then we setup the microphone.\r\n            canAnalyze = true;\r\n            mic = new p5.AudioIn();\r\n            mic.start();\r\n            fft = new p5.FFT();\r\n            fft.setInput(mic);\r\n            \r\n            mic.getSources().then(devices => {\r\n                // Enumerate devices to see what input devices are present. \r\n                devices.forEach(d => {\r\n                    console.log(d.kind + \": \" + d.label + \" id = \" + d.deviceId);\r\n                });\r\n            }); \r\n        });\r\n\r\n    }\r\n\r\n    s.draw = () => {\r\n        if (canAnalyze) {\r\n            fft.analyze();\r\n            let bass = s.map(fft.getEnergy('bass'), 0, 255, 0, 1); \r\n            let mid = s.map(fft.getEnergy('mid'), 0, 255, 0, 1);\r\n            let treble = s.map(fft.getEnergy('treble'), 0, 255, 0, 1);\r\n            let lowMid = s.map(fft.getEnergy('lowMid'), 0, 255, 0, 1);\r\n            let highMid = s.map(fft.getEnergy('highMid'), 0, 255, 0, 1);\r\n\r\n            // Bind the fft outputs to these variables.  \r\n            MicParams.Bass = bass;\r\n            MicParams.Mid = mid; \r\n            MicParams.Treble = treble;\r\n            MicParams.LowMid = lowMid;\r\n            MicParams.HighMid = highMid;\r\n        }\r\n    };\r\n\r\n    s.trigger = () => {\r\n        soundObject.trigger(); \r\n    }\r\n\r\n    s.release = () => {\r\n        soundObject.release();\r\n    }\r\n};\r\n\r\nclass AudioManager {\r\n    constructor() {\r\n        this.myP5 = new p5(sketch);\r\n        this.myP5.audioCallback(this.audioManagerReady.bind(this));\r\n        this.isPermanentlyMute = false; \r\n        this.isAudioManagerReady = false; \r\n\r\n        ExhibitionManager.subscribe(this.onExhibitionUpdate.bind(this));\r\n    }\r\n\r\n    onExhibitionUpdate() {\r\n        let isExhibition = ExhibitionManager.isExhibition; \r\n        if (isExhibition) {\r\n            // Turn off audio\r\n            // this.release(); \r\n            // Turn on Microphone\r\n            this.micOn();\r\n        }\r\n    }\r\n\r\n    audioManagerReady() {\r\n        this.isAudioManagerReady = true;\r\n        console.log('Audio Manager Ready'); \r\n    }\r\n\r\n    micOn() {\r\n        this.myP5.initMic();\r\n    }\r\n\r\n    reset() {\r\n        this.myP5.reset();\r\n    }\r\n\r\n    trigger() {\r\n        this.myP5.trigger(); \r\n    }\r\n\r\n    release() {\r\n        this.myP5.release();\r\n    }\r\n}\r\n\r\n// Singleton - Only a single instance please.\r\nexport default new AudioManager();","const getRandomNum = (max = 0, min = 0) => {\n    return Math.random() * (max - min) + min;\n}\n\nconst map_range = (value, low1, high1, low2, high2) => {\n    return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\n\nconst azimuth = (v) => {\n    return Math.atan2(v.x, v.z);\n}\n\nconst inclination = (v) => {\n    return Math.acos(v.y / v.length());\n}\n\nconst axisRotation = (axis_x, axis_y, axis_z, angle_radians, q) => {\n    var norm = Math.sqrt(axis_x * axis_x + axis_y * axis_y + axis_z * axis_z);\n    axis_x /= norm;\n    axis_y /= norm;\n    axis_z /= norm;\n    var cos = Math.cos(angle_radians / 2);\n    var sin = Math.sin(angle_radians / 2);\n    q.set(axis_x * sin, axis_y * sin, axis_z * sin, cos); \n}\n\nexport {\n    getRandomNum,\n    map_range,\n    azimuth,\n    inclination,\n    axisRotation\n}","/*\r\n  Name: CameraControl.js\r\n  Author: Amay Kataria\r\n  Date: 09/24/2021\r\n  Description: A module that handles camera and user interaction component.\r\n*/\r\n\r\nimport * as THREE from 'three'\r\nimport * as TWEEN from \"@tweenjs/tween.js\"\r\nimport '../Utilities/Utility'\r\nimport { getRandomNum } from '../Utilities/Utility';\r\nimport ExhibitionManager from './ExhibitionManager';\r\n\r\nexport let OrbitParams = {\r\n    EnableControls: false,\r\n    EnablePan: true,\r\n    AutoRotate: false,\r\n    RotateSpeed: 0.1, \r\n    EnableKeys: true\r\n};\r\n\r\nconst zoom = 250; \r\nlet cameraCorners = [\r\n    {x: zoom, y: 0, z: 0},\r\n    {x:-zoom, y: 0, z: 0},\r\n    {x: 50, y: zoom, z: 0},\r\n    {x: 50, y: -zoom, z: 0},\r\n    {x: 0, y: 0, z: zoom}, // Initial camera\r\n    {x:0, y: 0, z: -zoom}\r\n];\r\n\r\nclass CameraControl {\r\n    constructor() {\r\n        // Camera Setup\r\n        // (FOV, AspectRatio, Near Clipping, Far Clipping)\r\n        this.camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.innerHeight, 0.05, 20000);\r\n        this.camera.position.set(10000, 7000, 500); \r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0));\r\n        this.camera.frustumCulled = true; \r\n\r\n        this.mouse = new THREE.Vector2(0, 0);\r\n        this.animationStopped = false;\r\n        this.currentIdx = 4; // Starting position of the camera. \r\n\r\n        // Mouse activites\r\n        this.onMouseMoveBound = this.onMouseMove.bind(this); \r\n        window.addEventListener('mousemove', this.onMouseMoveBound, false);\r\n        this.num = 0; \r\n        //window.addEventListener('wheel', this.onMouseWheel.bind(this), false);\r\n        ExhibitionManager.subscribe(this.onExhibitionUpdate.bind(this));\r\n\r\n    }\r\n\r\n    update(scene) {\r\n        // Once the camera animation stopped, return the control back to user\r\n        if (this.animationStopped){\r\n            // Now we need to know how to update the positions. \r\n            this.cameraUpdates();\r\n        }\r\n\r\n        this.camera.lookAt(scene.position);\r\n\r\n        let isExhibition = ExhibitionManager.isExhibition; \r\n        // Start a very simple camera rotation.\r\n        if (isExhibition) {\r\n           this.num += 0.001;\r\n           this.camera.position.z = zoom/4 * Math.cos(this.num);\r\n           this.camera.position.y = zoom * Math.sin(this.num);\r\n           this.camera.position.x = zoom * Math.cos(this.num);\r\n        } else {\r\n            TWEEN.update();\r\n        }\r\n    }\r\n\r\n    onExhibitionUpdate() {\r\n        let isExhibition = ExhibitionManager.isExhibition; \r\n        if (isExhibition) {\r\n            console.log('Event Remove')\r\n            // Remove mouseMove, click events. \r\n            window.removeEventListener('mousemove', this.onMouseMoveBound, false);\r\n            window.removeEventListener('click', this.onMouseClickBound, false); \r\n        }\r\n    }\r\n\r\n    onMouseMove(event) {\r\n        this.mouse.x = (event.clientX - window.innerWidth / 2) * 0.3;\r\n        this.mouse.y = (event.clientY - window.innerHeight / 2) * 0.7;\r\n    }\r\n    \r\n    onMouseWheel(event) {\r\n        this.zoom += event.deltaY * 0.1;\r\n        // Constrain the zoom within the reasonable range\r\n        this.zoom = Math.min(Math.max(100, this.zoom), 300);\r\n    }\r\n\r\n    initialTween(onAnimationComplete) {\r\n        let tween = new TWEEN.Tween(this.camera.position)\r\n        .to(cameraCorners[this.currentIdx], 4000)\r\n        .easing(TWEEN.Easing.Cubic.Out)\r\n        .onComplete(() => {\r\n          // Animation has finished. \r\n          this.animationStopped = true;\r\n\r\n          // Now, show the nav panel.\r\n          onAnimationComplete();\r\n\r\n          // Hook the event once the animation completes\r\n          this.onMouseClickBound = this.onMouseClick.bind(this);\r\n          window.addEventListener('click', this.onMouseClickBound, false);\r\n        }); \r\n\r\n        tween.start(); \r\n    }\r\n\r\n    onMouseClick(event) {\r\n        this.calcNewCameraIdx(); \r\n\r\n        // Tween to that location. \r\n        let tween = new TWEEN.Tween(this.camera.position)\r\n        .to(cameraCorners[this.currentIdx], 4000)\r\n        .easing(TWEEN.Easing.Cubic.Out)\r\n        .onComplete(() => {\r\n            // Animation has stopped. \r\n            this.animationStopped = true; \r\n        }); \r\n\r\n        tween.start();\r\n        this.animationStopped = false;\r\n    }\r\n\r\n    calcNewCameraIdx() {\r\n        let idx = Math.floor(getRandomNum(0, cameraCorners.length));\r\n        while (idx === this.currentIdx) {\r\n            idx = Math.floor(getRandomNum(0, cameraCorners.length)); \r\n        }\r\n\r\n        this.currentIdx = idx; \r\n    }\r\n\r\n    cameraUpdates() {\r\n        switch (this.currentIdx) {\r\n            case 0: {\r\n                this.camera.position.x = zoom;\r\n                this.camera.position.y += (this.mouse.y - this.camera.position.y) * .025;\r\n                this.camera.position.z += (this.mouse.x - this.camera.position.z) * .025;\r\n                break;\r\n            }\r\n\r\n            case 1: {\r\n                this.camera.position.x = -zoom;\r\n                this.camera.position.y += (this.mouse.y - this.camera.position.y) * .025;\r\n                this.camera.position.z += (this.mouse.x - this.camera.position.z) * .025;\r\n                break; \r\n            }\r\n\r\n            case 2: {\r\n                this.camera.position.x += (this.mouse.y - this.camera.position.x) * .025;\r\n                this.camera.position.y = zoom; \r\n                this.camera.position.z += (this.mouse.x - this.camera.position.z) * .025;\r\n                break;\r\n            }\r\n\r\n            case 3: {\r\n                this.camera.position.x +=  (this.mouse.x - this.camera.position.x) * .025;\r\n                this.camera.position.y = -zoom; \r\n                this.camera.position.z += (this.mouse.y - this.camera.position.z) * .025;\r\n                break;\r\n            }\r\n\r\n            case 4: {\r\n                this.camera.position.x += (this.mouse.x - this.camera.position.x) * .025;\r\n                this.camera.position.y += (this.mouse.y - this.camera.position.y) * .025; \r\n                this.camera.position.z = zoom;\r\n                break;\r\n            }\r\n\r\n            case 5: {\r\n                this.camera.position.x += (this.mouse.x - this.camera.position.x) * .025;\r\n                this.camera.position.y += (this.mouse.y - this.camera.position.y) * .025; \r\n                this.camera.position.z = -zoom;\r\n                break;\r\n            }\r\n\r\n            default: {\r\n                break; \r\n            }\r\n        }\r\n    }\r\n\r\n    getCamera() {\r\n        return this.camera;\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default CameraControl;","/*\r\n  Name: LightingManager.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: Lighting module to control all the lights in the world. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\nclass LightingManager {\r\n    constructor(scene) {\r\n      // Lights\r\n      const hemiLight = new THREE.HemisphereLight(0xffdeff, 0xffffff, 1.6);\r\n      hemiLight.color.setHSL(0.6, 1, 0.6);\r\n      hemiLight.groundColor.setHSL(0.095, 1, 0.75);\r\n      hemiLight.position.set(0, 50, 0);\r\n      scene.add(hemiLight);\r\n\r\n      const dirLight = new THREE.DirectionalLight(0x00CED1, 0.6);\r\n      dirLight.color.setHSL( 0.1, 1, 0.95 );\r\n      dirLight.position.set( - 1, 1.75, 1 );\r\n      dirLight.position.multiplyScalar( 30 );\r\n      scene.add(dirLight);\r\n    }\r\n} \r\n\r\nexport default LightingManager;","/*\r\n  Name: RendererManager.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: Core renderer manager. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\nexport let RendererParams = {\r\n    DrawCalls: 0\r\n}\r\n\r\nclass RendererManager {\r\n    constructor() {\r\n        // Core renderer. \r\n        this.renderer = new THREE.WebGLRenderer({\r\n            antialias: true\r\n        }); \r\n        //this.renderer.setClearColor('white', 1);    // Set renderer properties\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        this.renderer.setPixelRatio(window.devicePixelRatio);\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding; \r\n    }\r\n\r\n    setAnimationLoop(animate) {\r\n        this.renderer.setAnimationLoop(animate);\r\n    }\r\n\r\n    getDomElement() {\r\n        return this.renderer.domElement; \r\n    }\r\n\r\n    render(scene, camera) {\r\n        this.renderer.render(scene, camera);\r\n    }\r\n\r\n    updateSize(width, height) {\r\n        this.renderer.setSize(width, height); \r\n    }\r\n\r\n    monitorDrawCalls() {\r\n        RendererParams.DrawCalls = this.renderer.info.render.calls;\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default RendererManager;\r\n","/*\n  Name: PatternManager.js\n  Author: Amay Kataria\n  Date: 09/21/2021\n  Description: A class that holds two different patterns for birds. These are configured using \n  two param objects that are exposed in the GUI. \n*/\n\nimport * as THREE from 'three'\n\n// Pattern exports for the GUI\nexport let PatternParams = {\n    PatternType: '' // Build the list in ServerGui. Ellipse / Rose-Curve\n}; \nexport let PatternTypes = {\n    Ellipse: 0,\n    RoseCurve: 1\n}\n\n// Ellipse Params\nexport let EllipseParams = {\n    Origin: {x: 0, y: 6, z: 0},\n    Radii: {x: 10, y: 10},\n    Amplitude: 0,\n    Speed: 0.3, \n    Direction: true\n}  \n\n// Rose-Curve Params\nexport let RoseCurveParams = {\n    Origin: {x: 0, y: 6, z: 0},\n    Radius: 5,\n    Phase: 0.5, \n    NumPetals: 3, \n    Amplitude: 0,\n    Sinusoidal: true,\n    Direction: true,\n    Speed: 0.3\n}\n\nclass Pattern {\n    constructor(patternObj) {\n        this.theta_rad = 0; \n        this.amp = patternObj.amp;  \n        this.isClockwise = patternObj.dir; \n        this.originPos = patternObj.pos; \n        this.moveFactor = patternObj.move; \n        this.targetPos = new THREE.Vector3(0, 0, 0); // Agents follow this target. \n        this.targetConst = new THREE.Vector3(0, 0, 0);\n    }\n\n    updateTheta(maxTheta) {\n        // Update theta based on direction. \n        this.theta_rad = this.isClockwise ? \n            this.theta_rad + this.moveFactor : \n            this.theta_rad - this.moveFactor; \n\n        // Reset theta. \n        this.theta_rad = this.theta_rad >= maxTheta ? 0 : this.theta_rad;\n    }\n\n    cartesianX(r) {\n        return this.originPos.x + r * Math.cos(this.theta_rad);\n    }\n\n    cartesianZ(r) {\n        return this.originPos.z + r * Math.sin(this.theta_rad);\n    }\n    \n    cartesianY(r) {\n        return this.originPos.y + this.amp * Math.sin(this.theta_rad);\n    }\n\n    getTargetPos() {\n        //return this.targetPos; \n        return this.targetPos;\n    }\n}\n\nexport const ellipseConstructor = (originPos, radX, radZ, amplitude, isClockwise, moveFactor) => {\n    return {\n        pos: originPos, // C\n        radx: radX,\n        radz: radZ,\n        amp: amplitude, // C\n        dir: isClockwise, // C\n        move: moveFactor // C\n    }; \n}\n\nexport class EllipsePattern extends Pattern {\n    constructor(patternObj) {\n        super(patternObj); \n        this.radX = patternObj.radx; \n        this.radZ = patternObj.radz; \n        this.maxTheta = 2*Math.PI; \n    }\n\n    update() {\n        this.updateGuiParams(); \n        // Ellipse: Cartesian coordinates. \n        let xPos = this.cartesianX(this.radX); // Defines polar curve. \n        let zPos = this.cartesianZ(this.radZ); // Define polar curve. \n        let yPos = this.cartesianY(); // Defines height. \n        this.targetPos.set(xPos, yPos, zPos); \n\n        this.updateTheta(this.maxTheta); \n    }\n\n    updateGuiParams() {\n        this.originPos.set(EllipseParams.Origin.x, EllipseParams.Origin.y, EllipseParams.Origin.z);\n        this.radX = EllipseParams.Radii.x;\n        this.radZ = EllipseParams.Radii.y;\n        this.amp = EllipseParams.Amplitude; \n        this.moveFactor = THREE.Math.degToRad(EllipseParams.Speed); \n        this.isClockwise = EllipseParams.Direction; \n    }   \n}\n\nexport const roseConstructor = (originPos, radius, phase, numPetals, amplitude, isSinusoidal, isClockwise, moveFactor) => {\n    return {\n        pos: originPos, // C\n        rad: radius,\n        ph: phase, \n        numP: numPetals,\n        amp: amplitude, // C\n        isSin: isSinusoidal,\n        dir: isClockwise, // C\n        move: moveFactor // C\n    }\n}\n\n// r = asin(b + cTheta); \n// r = acos(b + cTheta); \n// a = radius\n// b = phase\n// c = numPetals\nexport class RosePattern extends Pattern {\n    constructor(patternObj) {\n        super(patternObj); \n        this.rad = patternObj.rad; \n        this.phase = patternObj.ph; \n        this.numPetals = patternObj.numP;\n        this.isSin = patternObj.isSin; \n        this.maxTheta = Math.PI; \n    }\n\n    update() {\n        this.updateGuiParams(); \n\n        let xPos, yPos, zPos; \n        let r = this.isSin ? this.rad * Math.sin(this.phase + this.numPetals * this.theta_rad) : \n            this.rad * Math.cos(this.phase + this.numPetals * this.theta_rad)\n\n        xPos = this.cartesianX(r); // Defines polar curve. \n        zPos = this.cartesianZ(r); // Defines polar curve. \n        yPos = this.cartesianY(); // Defines height. \n\n        this.targetPos.set(xPos, yPos, zPos); \n\n        this.updateTheta(this.maxTheta);\n    }\n\n    updateGuiParams() {\n        this.originPos.set(RoseCurveParams.Origin.x, RoseCurveParams.Origin.y, RoseCurveParams.Origin.z); \n        this.rad = RoseCurveParams.Radius; \n        this.phase = RoseCurveParams.Phase;\n        this.amp = RoseCurveParams.Amplitude; \n        this.numPetals = RoseCurveParams.NumPetals;\n        this.isSin = RoseCurveParams.Sinusoidal; \n        this.isClockwise = RoseCurveParams.Direction; \n        this.moveFactor = THREE.Math.degToRad(RoseCurveParams.Speed); \n    }\n}\n\nexport class PatternManager {\n    setTargetPattern(curPatternType) {\n        if (curPatternType === PatternTypes.Ellipse) {\n            console.log('Creating Ellipse Pattern');\n            let pos = new THREE.Vector3(0, 6, 0); // Target position\n            let radX = 10; \n            let radZ = 10;\n            let amp = 0; \n            let dir = true; \n            let moveFactor = THREE.Math.degToRad(0.3); \n            let patternObj = ellipseConstructor(pos, radX, radZ, amp, dir, moveFactor); \n            this.curPattern = new EllipsePattern(patternObj); \n        } else if (curPatternType === PatternTypes.RoseCurve) {\n            // Initialize Rose-Curve pattern. \n            console.log('Creating Rose-Curve Pattern');\n            let pos = new THREE.Vector3(0, 6, 0); \n            let rad = 10; \n            let phase = 0.5; \n            let numPetals = 3; \n            let amp = 0;\n            let isSin = true; \n            let dir = true; \n            let moveFactor = THREE.Math.degToRad(0.3); \n            let patternObj = roseConstructor(pos, rad, phase, numPetals, amp, isSin, dir, moveFactor);\n            this.curPattern = new RosePattern(patternObj);\n        }\n    }\n\n    update() {\n        if (this.curPattern) {\n            this.curPattern.update(); \n            return this.curPattern.getTargetPos();\n        }        \n    }\n}","import * as THREE from 'three';\n\nexport let TargetParams = {\n    ShowTarget: true,\n    MaxTargetRadius: 100.0,\n    CurrentTargetRadius: 0\n}\n\nexport default class Target {\n    constructor(scene) {\n        let geometry = new THREE.SphereGeometry(1, 12, 12);\n        let material = new THREE.MeshLambertMaterial(); \n        material.emissive = new THREE.Color('#FF0000');\n        material.wireframe = false;\n        material.transparent = true; \n        material.opacity = 0.5; \n        this.mesh = new THREE.Mesh(geometry, material);\n\n        scene.add(this.mesh);\n\n        // geometry = new THREE.SphereGeometry(1, 100, 100);\n        // geometry.position = new THREE.Vector3(0, 0, 0);\n        // geometry.scale (10, 10, 10);\n        // material = new THREE.MeshLambertMaterial(); \n        // material.emissive = new THREE.Color('#FF0000');\n        // material.wireframe = false;\n        // let newMesh  = new THREE.Mesh(geometry, material);\n\n        // scene.add(newMesh);\n    }\n\n    update(targetPosition, now) {\n        this.setVector(targetPosition);\n        this.setVisibility(TargetParams.ShowTarget);\n        let scale = TargetParams.MaxTargetRadius + Math.sin(now * 0.001) * TargetParams.MaxTargetRadius / 3.0; \n        this.mesh.scale.set(scale, scale, scale);\n        TargetParams.CurrentTargetRadius = scale; \n    }\n\n    getVector() {\n        return this.mesh.position; \n    }\n\n    setVector(v) {\n        this.mesh.position.copy(v);\n    }\n\n    setVisibility(v) {\n        this.mesh.visible = v;\n    }\n}","export default __webpack_public_path__ + \"static/media/pigeon_back.0a8e5722.glb\";","/*\r\n  Author: Amay Kataria\r\n  Date: 10/21/2021\r\n  Title: GPUPigeon.js\r\n  Description: A class that loads the pigeon geometry and prepares it as the \r\n  buffer geometry to be sent to the GPU. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'\r\nimport model from '../../models/pigeon_back.glb'; \r\n\r\n// WIDTH - Determines the max birds that can be created. \r\nexport const WIDTH = 50; \r\nexport const BIRDS = WIDTH * WIDTH; \r\n\r\nclass GPUPigeon {\r\n    constructor(onFinishedCallback) {\r\n        // Declare all the variables that I need to access. \r\n        this.durationAnimation = ''; \r\n        this.vertexPerBird = '';\r\n        this.indicesPerBird = '';\r\n        this.textureAnimation = ''; \r\n        this.birdGeometry = new THREE.BufferGeometry(); \r\n\r\n        // Maybe call this once the GUI is ready. \r\n        // ONCE the GUI variables are available, then \r\n        // we call this. \r\n        this.loadPigeon(onFinishedCallback); \r\n    }\r\n\r\n    loadPigeon(onFinishedCallback) {\r\n        let loader = new GLTFLoader(); \r\n        loader.loadAsync(model).then((gltf) => {\r\n            // Animation \r\n            const animations = gltf.animations;\r\n            this.durationAnimation = Math.round(animations[0].duration * 60);\r\n\r\n            // Geometry\r\n            const birdGeo = gltf.scene.children[0].geometry;\r\n\r\n            // All the morph positions. There are 8 targets for this geometry\r\n            // Each position contains the actual positions of each vertex. \r\n            const morphAttributes = birdGeo.morphAttributes.position;    \r\n\r\n            this.vertexPerBird = birdGeo.getAttribute('position').count;\r\n            this.indicesPerBird = birdGeo.index.array.length; \r\n\r\n            // Prepare animation texture. \r\n            const tHeight = this.nextPowerOf2(this.durationAnimation);\r\n            const tWidth = this.nextPowerOf2(this.vertexPerBird);\r\n            // Every vertex has (x, y, z) coords so mult by 3. \r\n            const tData = new Float32Array(3 * tWidth * tHeight); \r\n\r\n            for ( let i = 0; i < tWidth; i ++ ) {\r\n                for ( let j = 0; j < tHeight; j ++ ) {\r\n                    const offset = j * tWidth * 3;\r\n        \r\n                    const curMorph = Math.floor(j / this.durationAnimation * morphAttributes.length);\r\n                    const nextMorph = (curMorph + 1) % morphAttributes.length;\r\n                    const lerpAmount = j / this.durationAnimation * morphAttributes.length % 1;\r\n        \r\n                    // Only fill animation data up till duration of animation. \r\n                    if (j < this.durationAnimation) {\r\n                        // d0, d1 are actual vertex positions in the morphAttributes\r\n                        let d0, d1; \r\n        \r\n                        // For the duration of the animation, we calculate the transition\r\n                        // between the morph positions at each duration and store it in tData\r\n                        // tData contains the vertex position at each duration of an animation \r\n                        // for a single bird. \r\n                        d0 = morphAttributes[curMorph].array[i * 3];\r\n                        d1 = morphAttributes[nextMorph].array[i * 3];\r\n        \r\n                        if (d0 !== undefined && d1 !== undefined) \r\n                            tData[offset + i * 3] = this.lerp(d0, d1, lerpAmount);\r\n        \r\n                        d0 = morphAttributes[ curMorph ].array[ i * 3 + 1 ];\r\n                        d1 = morphAttributes[ nextMorph ].array[ i * 3 + 1 ];\r\n        \r\n                        if (d0 !== undefined && d1 !== undefined) \r\n                            tData[offset + i * 3 + 1] = this.lerp(d0, d1, lerpAmount);\r\n        \r\n                        d0 = morphAttributes[curMorph].array[i * 3 + 2];\r\n                        d1 = morphAttributes[nextMorph].array[i * 3 + 2];\r\n        \r\n                        if (d0 !== undefined && d1 !== undefined) \r\n                            tData[offset + i * 3 + 2] = this.lerp(d0, d1, lerpAmount);\r\n                    }\r\n                }\r\n            }\r\n            \r\n            // Here we define our Data texture based on the tData that we just prepared. \r\n            // DataTexture is inherited from Texture (this is how a texture is internally stored in Three.js)\r\n            this.textureAnimation = new THREE.DataTexture(tData, tWidth, tHeight, THREE.RGBFormat, THREE.FloatType);\r\n            // textureAnimation.needsUpdate = false; // Don't need this since texture is not updating\r\n\r\n            // Prepare the BUFFER GEOMETRY. \r\n            const vertices = [], color = [], reference = [], seeds = [], indices = [];\r\n            const totalVertices = this.vertexPerBird * BIRDS * 3; // TOTAL VERTICES IN THE SCENE. \r\n\r\n            // NOTE: Blender exports color attribute with RGBA. We need to filter out\r\n            // Alpha values from it and just use 3 channel color. \r\n            let birdColArray = birdGeo.getAttribute('color').array; \r\n            let newBirdColArray = []; \r\n            let skip = 3; \r\n            for (let i = 0, j = 0; i < birdColArray.length; i++) {\r\n                if (i % skip === 0 && i !== 0) {\r\n                    // Skip alpha from the array.\r\n                    skip = skip + 4; \r\n                } else {\r\n                    newBirdColArray[j] = birdColArray[i];\r\n                    j++; \r\n                }\r\n            }\r\n\r\n             // Prepare color and vertices attribute for the buffer. \r\n            // This buffer geometry is a collection of all the vertices \r\n            // of birds that are in the scene. So it's a single geometry that will be\r\n            // renderered per frame. Thus, Draw Call = 1\r\n            for (let i = 0; i < totalVertices; i ++ ) {\r\n                const bIndex = i % (this.vertexPerBird * 3);\r\n                vertices.push(birdGeo.getAttribute('position').array[bIndex]);\r\n                color.push(newBirdColArray[bIndex]);\r\n            }\r\n\r\n            // Seeds & References are for Animation of each bird. \r\n            // It's some strange arithmetic that I don't understand.\r\n            // But it's necessary to store the index of each frame in the animation. \r\n            // It's solid and we don't have to touch it at all.\r\n            let r = Math.random();\r\n            for (let i = 0; i < this.vertexPerBird * BIRDS; i ++) {\r\n                const bIndex = i % (this.vertexPerBird);\r\n                const bird = Math.floor(i / this.vertexPerBird);\r\n                if (bIndex === 0) r = Math.random();\r\n                const j = ~ ~ bird;\r\n                const x = (j % WIDTH) / WIDTH;\r\n                const y = ~ ~ (j / WIDTH) / WIDTH;\r\n                reference.push(x, y, bIndex / tWidth, this.durationAnimation / tHeight);\r\n                seeds.push(bird, r, Math.random(), Math.random());\r\n            }\r\n\r\n            // We need to push the indices for each bird that is getting added to this geometry. \r\n            // Incoming geometry has an index array that represents something realted to the vertices \r\n            // of the triangles that are added to the geometry. \r\n            for (let i = 0; i < this.indicesPerBird * BIRDS; i++) {\r\n                const offset = Math.floor(i / this.indicesPerBird) * this.vertexPerBird; // CRITICAL FIX: Contribute back to Three.js\r\n                indices.push(birdGeo.index.array[i % this.indicesPerBird] + offset);\r\n            }\r\n\r\n            this.birdGeometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(vertices), 3));\r\n            // Don't need this - we are not doing anything with it in the shader for now. \r\n            // BirdGeometry.setAttribute('birdColor', new THREE.BufferAttribute( new Uint16Array( color ), 3,true)); \r\n            this.birdGeometry.setAttribute('color', new THREE.BufferAttribute(new Uint16Array(color), 3, true));\r\n            this.birdGeometry.setAttribute('reference', new THREE.BufferAttribute(new Float32Array(reference), 4));\r\n            this.birdGeometry.setAttribute('seeds', new THREE.BufferAttribute(new Float32Array(seeds), 4));\r\n            this.birdGeometry.setIndex(indices);\r\n\r\n            // This is done loading, so now I can init\r\n            // full pigeons. \r\n\r\n            onFinishedCallback(); \r\n        });\r\n    }\r\n\r\n    nextPowerOf2(n) {\r\n        return Math.pow(2, Math.ceil(Math.log(n) / Math.log(2)));\r\n    }\r\n    \r\n    lerp(value1, value2, amount) {\r\n        amount = Math.max(Math.min( amount, 1 ), 0);\r\n        return value1 + (value2 - value1) * amount;\r\n    }\r\n\r\n    setDrawRange(count) {\r\n        this.birdGeometry.setDrawRange(0, this.indicesPerBird * count);\r\n    }\r\n}\r\n\r\nexport default GPUPigeon; ","/*\r\n  Author: Amay Kataria\r\n  Date: 10/21/2021\r\n  Title: GPURenderer.js\r\n  Description: This handles all the logic related to GPUComputationRenderer that we \r\n  use to calculate velocity and position updates of the pigeon. \r\n*/\r\n\r\n\r\nimport * as THREE from 'three'\r\nimport { WIDTH } from '../Environment/GPUPigeon.js'\r\nimport { PigeonParams } from './PigeonManager.js';\r\nimport { GPUComputationRenderer } from \"three/examples/jsm/misc/GPUComputationRenderer.js\";\r\nimport fragmentShaderPosition from '../../shaders/fragmentShaderPosition.glsl'\r\nimport fragmentShaderVelocity from '../../shaders/fragmentShaderVelocity.glsl'\r\nimport { TargetParams } from '../Environment/Target.js';\r\n\r\nexport let IsGPURendererReady = false; \r\n\r\nclass GPURenderer {\r\n    constructor(renderer) {\r\n        this.gpuCompute = new GPUComputationRenderer(WIDTH, WIDTH, renderer); \r\n        \r\n        // Textures for position and velocity computations. \r\n        // Each texture is WIDTH x WIDTH wide. Each texel holds \r\n        // 4 floats (RGBA) for computation. Array is divided in chunks of 4. \r\n        // This texture is of type THREE.DataTexture, which actually stores\r\n        // the data of a Three.js Texture. \r\n        const dtPosition = this.gpuCompute.createTexture();\r\n        const dtVelocity = this.gpuCompute.createTexture(); \r\n        this.fillPositionTexture(dtPosition);\r\n        this.fillVelocityTexture(dtVelocity); \r\n\r\n        // Variables are the ones that are actually undergoing computation in the GPURenderer. \r\n        // (VariableName, Shader, DataTexture)\r\n        // Each variable contains 'material' property, which is of type THREE.ShaderMaterial\r\n        this.velocityVariable = this.gpuCompute.addVariable(\"textureVelocity\", fragmentShaderVelocity, dtVelocity);\r\n        this.positionVariable = this.gpuCompute.addVariable(\"texturePosition\", fragmentShaderPosition, dtPosition);\r\n\r\n        // Set the dependencies between variables and their data textures will be available between each other. \r\n        // For example in fragmentShaderVelocity, the dataTexture for position is available. \r\n        this.gpuCompute.setVariableDependencies(this.velocityVariable, [this.positionVariable, this.velocityVariable]);\r\n        this.gpuCompute.setVariableDependencies(this.positionVariable, [this.positionVariable, this.velocityVariable]);\r\n\r\n        // Retrieve uniforms from ShaderMaterial, so it can be populated with custom uniforms. \r\n        this.positionUniforms = this.positionVariable.material.uniforms;\r\n        this.velocityUniforms = this.velocityVariable.material.uniforms;\r\n\r\n        // Position uniforms. \r\n        // TIME\r\n        this.positionUniforms[\"uTime\"] = { value: 0.0 };\r\n        this.positionUniforms[\"uDelta\"] = { value: 0.0 };\r\n        this.positionUniforms[\"uPause\"] = { value: false };\r\n\r\n        // Velocity uniforms. \r\n        // TIME \r\n        this.velocityUniforms[\"uTime\"] = { value: 1.0 };\r\n        this.velocityUniforms[\"uDelta\"] = { value: 0.0 };\r\n\r\n        // FLOCK \r\n        this.velocityUniforms[\"uAttractionForce\"] = { value: PigeonParams.Attraction }\r\n        this.velocityUniforms[\"uSeperationForce\"] = { value: PigeonParams.Seperation };\r\n        this.velocityUniforms[\"uAlignmentForce\"] = { value: PigeonParams.Alignment };\r\n        this.velocityUniforms[\"uCohesionForce\"] = { value: PigeonParams.Cohesion };\r\n        this.velocityUniforms[\"uShoot\"] = { value: false }; \r\n\r\n        // TARGET\r\n        this.velocityUniforms[\"uTargetPosition\"] = { value: new THREE.Vector3() };\r\n        this.velocityUniforms['uTargetRadius'] = { value: TargetParams.CurrentTargetRadius };\r\n\r\n        // SPEED\r\n        this.velocityUniforms[\"uMaxAgentSpeed\"] = { value: PigeonParams.MaxSpeed };\r\n        this.velocityUniforms[\"uSpeedLerp\"] = { value: PigeonParams.SpeedLerp };\r\n\r\n        // BOUNDING BOX\r\n        this.velocityUniforms[\"uBoundingBoxMin\"] = { value: new THREE.Vector3() };\r\n        this.velocityUniforms[\"uBoundingBoxMax\"] = { value: new THREE.Vector3() };\r\n        \r\n        // Velocity variable.\r\n        this.velocityVariable.wrapS = THREE.ClampToEdgeWrapping;\r\n        this.velocityVariable.wrapT = THREE.ClampToEdgeWrapping;\r\n\r\n        // Position variable. \r\n        this.positionVariable.wrapS = THREE.ClampToEdgeWrapping;\r\n        this.positionVariable.wrapT = THREE.ClampToEdgeWrapping;\r\n\r\n        // A simple test to make sure GPURenderer has everything. \r\n        const error = this.gpuCompute.init();\r\n\r\n        if ( error !== null ) {\r\n            console.error( error );\r\n        }\r\n        \r\n        // GPU Renderer is ready. \r\n        IsGPURendererReady = true;\r\n\r\n        this.pause = false;\r\n        this.shoot = false; \r\n        console.log('GPU Renderer Ready.') \r\n    } \r\n\r\n    update(delta, now, targetPosition, boundingBox) {\r\n        // GPGPU shader uniform values that are changing on every frame.\r\n\r\n        // RESET\r\n        this.positionUniforms[\"uPause\"].value = this.pause;\r\n\r\n        // TIME\r\n        this.positionUniforms[\"uDelta\"].value = delta; \r\n        this.positionUniforms[\"uTime\"].value = now;\r\n        this.velocityUniforms[\"uDelta\"].value = delta;\r\n        this.velocityUniforms[\"uTime\"].value = now;\r\n\r\n        // FLOCK \r\n        this.velocityUniforms[\"uAttractionForce\"].value = PigeonParams.Attraction;\r\n        this.velocityUniforms['uSeperationForce'].value = PigeonParams.Seperation; \r\n        this.velocityUniforms['uAlignmentForce'].value = PigeonParams.Alignment;\r\n        this.velocityUniforms['uCohesionForce'].value = PigeonParams.Cohesion;\r\n        this.velocityUniforms['uShoot'].value = this.shoot;\r\n\r\n        // console.log(PigeonParams.Seperation);\r\n\r\n        // TARGET\r\n        this.velocityUniforms['uTargetPosition'].value.set(targetPosition.x, targetPosition.y, targetPosition.z);\r\n        this.velocityUniforms['uTargetRadius'].value = TargetParams.CurrentTargetRadius;\r\n\r\n        // SPEED\r\n        this.velocityUniforms['uMaxAgentSpeed'].value = PigeonParams.MaxSpeed; \r\n        this.velocityUniforms[\"uSpeedLerp\"].value = PigeonParams.SpeedLerp;\r\n\r\n        // BOUNDING BOX\r\n        this.velocityUniforms[\"uBoundingBoxMin\"].value.set(boundingBox.min.x, boundingBox.min.y, boundingBox.min.z);\r\n        this.velocityUniforms[\"uBoundingBoxMax\"].value.set(boundingBox.max.x, boundingBox.max.y, boundingBox.max.z); \r\n\r\n        // Compute velocity and position shaders and \r\n        // populate the vel and pos textures with new values.\r\n        this.gpuCompute.compute();\r\n\r\n        // Make sure it's not resetting again \r\n        // until actually reset. \r\n        if (this.pause) {\r\n            this.pause = false;\r\n        }\r\n\r\n        // @Yu-jeng - Decide when to turn the\r\n        // value to false. Right now, we turn it \r\n        // on, shader receives it once and then we turn \r\n        // it off. Since this will be like a single impact, \r\n        // maybe this is okay. \r\n        if (this.shoot) {\r\n            this.shoot = false; \r\n        }\r\n    }\r\n\r\n    // Starting positions. \r\n    fillPositionTexture(texture) {\r\n        // Size of this array is actually WIDTH x WIDTH * 4;\r\n        const theArray = texture.image.data;\r\n        // Each texel is 4 floats. \r\n        for (let k = 0, kl = theArray.length; k < kl; k += 4) {\r\n            // Can remove BOUNDS they are all emanate from the center. \r\n            // const x = Math.random() * BOUNDS;\r\n            // const y = Math.random() * BOUNDS;\r\n            // const z = Math.random() * BOUNDS;\r\n            const x = Math.random() - 0.5;\r\n            const y = Math.random() - 0.5;\r\n            const z = Math.random() - 0.5;\r\n\r\n            // 4th. \r\n            theArray[k + 0] = x;\r\n            theArray[k + 1] = y;\r\n            theArray[k + 2] = z;\r\n            theArray[k + 3] = 1;\r\n        }\r\n    }\r\n\r\n    // Starting velocities. \r\n    fillVelocityTexture(texture) {\r\n        const theArray = texture.image.data;\r\n        for ( let k = 0, kl = theArray.length; k < kl; k += 4 ) {\r\n            const x = Math.random() - 0.5;\r\n            const y = Math.random() - 0.5;\r\n            const z = Math.random() - 0.5;\r\n\r\n            theArray[k + 0] = x * 5.0;\r\n            theArray[k + 1] = y * 5.0;\r\n            theArray[k + 2] = z * 5.0;\r\n            theArray[k + 3] = 1;\r\n        }\r\n    }\r\n\r\n    getPositionRenderTarget() {\r\n        return this.gpuCompute.getCurrentRenderTarget(this.positionVariable).texture; \r\n    }\r\n\r\n    getVelocityRenderTarget() {\r\n        return this.gpuCompute.getCurrentRenderTarget(this.velocityVariable).texture;\r\n    }\r\n\r\n    pausePigeons() {\r\n        this.pause = true; \r\n    }\r\n\r\n    shootPigeons() {\r\n        this.shoot = true; \r\n    }\r\n}\r\n\r\nexport default GPURenderer;","export default \"/*\\r\\n  Name: fragmentShaderVelocity.js\\r\\n  Author: Amay Kataria\\r\\n  Date: 10/21/2021\\r\\n  Description: Core shader responsible for everything related to how to the velocity of each pigeon in the flock changes. \\r\\n*/\\r\\n\\r\\n/*\\r\\n*   UNIFORMS\\r\\n*/\\r\\n\\r\\n// TIME\\r\\nuniform float uTime;\\r\\nuniform float uDelta;\\r\\n\\r\\n// FLOCK\\r\\nuniform float uAttractionForce;\\r\\nuniform float uSeperationForce; \\r\\nuniform float uAlignmentForce;\\r\\nuniform float uCohesionForce;\\r\\nuniform float uSpeedLerp;\\r\\nuniform bool uShoot; \\r\\n\\r\\n// TARGET\\r\\nuniform vec3 uTargetPosition; \\r\\nuniform float uTargetRadius;\\r\\n\\r\\n// SPEED\\r\\nuniform float uMaxAgentSpeed; \\r\\n\\r\\n// BOUNDING BOX\\r\\nuniform vec3 uBoundingBoxMin; \\r\\nuniform vec3 uBoundingBoxMax; \\r\\n\\r\\n// Resolution is passed by default from GPUComputationRenderer\\r\\n// That is WIDTH x WIDTH, with which we initialized it. \\r\\nconst float width = resolution.x;\\r\\nconst float height = resolution.y;\\r\\n\\r\\n/*\\r\\n* CONSTANTS\\r\\n*/\\r\\nconst float PI = 3.141592653589793;\\r\\nconst float PI_2 = PI * 2.0;\\r\\n\\r\\n/*\\r\\n* GLOBAL VARIABLES \\r\\n* Reused across the shader. \\r\\n*/\\r\\nvec3 acceleration = vec3(0.0);\\r\\nvec3 selfPosition, selfVelocity; \\r\\nvec3 borders = vec3(0.0);\\r\\nvec3 vDesired = vec3(0.0);\\r\\n\\r\\nfloat tempForce = 0.0;\\r\\n\\r\\n// A simple random function. \\r\\nfloat rand(vec2 co){\\r\\n    return fract(sin( dot( co.xy, vec2(12.9898,78.233) ) ) * 43758.5453);\\r\\n}\\r\\n\\r\\n// 2D rot matrix. \\r\\nmat2 get2dRotateMatrix(float _angle) {\\r\\n    return mat2(cos(_angle), - sin(_angle), sin(_angle), cos(_angle));\\r\\n}\\r\\n\\r\\nvec3 updateTargetPosition() {\\r\\n    mat2 rotateMatrix = get2dRotateMatrix(-PI/2.0); \\r\\n    vec3 newTargetPosition = uTargetPosition; \\r\\n    newTargetPosition.xz = rotateMatrix * newTargetPosition.xz; \\r\\n    return newTargetPosition; \\r\\n}\\r\\n\\r\\nbool containsPoint(vec3 point) {\\r\\n    return point.x < uBoundingBoxMin.x || point.x > uBoundingBoxMax.x ||\\r\\n\\t\\t\\tpoint.y < uBoundingBoxMin.y || point.y > uBoundingBoxMax.y ||\\r\\n\\t\\t\\tpoint.z < uBoundingBoxMin.z || point.z > uBoundingBoxMax.z ? false : true;\\r\\n}\\r\\n\\r\\nvec3 boundingBoxCheck(vec3 newVelocity) {\\r\\n    bool contains = containsPoint(selfPosition);\\r\\n\\r\\n    if (contains == true) {\\r\\n        // Which side of the border is the pigeon closer to\\r\\n        borders.x = abs(uBoundingBoxMax.x - selfPosition.x) < abs(uBoundingBoxMin.x - selfPosition.x) ? uBoundingBoxMax.x: uBoundingBoxMin.x;\\r\\n        borders.y = abs(uBoundingBoxMax.y - selfPosition.y) < abs(uBoundingBoxMin.y - selfPosition.y) ? uBoundingBoxMax.y: uBoundingBoxMin.y;\\r\\n        borders.z = abs(uBoundingBoxMax.z - selfPosition.z) < abs(uBoundingBoxMin.z - selfPosition.z) ? uBoundingBoxMax.z: uBoundingBoxMin.z;\\r\\n\\r\\n        // Set a vector that points away from the edges \\r\\n        vec3 diffVec = selfPosition - borders;\\r\\n\\r\\n        // Save the current box size in sumVec temporarily \\r\\n        vec3 boxSize = vec3(uBoundingBoxMax.x - uBoundingBoxMin.x, uBoundingBoxMax.y - uBoundingBoxMin.y, uBoundingBoxMax.z - uBoundingBoxMin.z);\\r\\n\\r\\n        // Normalize the value according a portion of the boxsize \\r\\n        boxSize /= 10.0;\\r\\n        diffVec /= boxSize;\\r\\n\\r\\n        // Scale up the value exponentially accoring to the normalized value\\r\\n        for (int i = 0; i <= 2; i++) {\\r\\n            tempForce = exp(1.5 - abs(diffVec[i]));\\r\\n            vDesired[i] = tempForce * sign(diffVec[i]);\\r\\n        }\\r\\n        newVelocity += vDesired;\\r\\n    } else {\\r\\n        // Reflect back towards center. \\r\\n        vec3 dir = vec3(0.) - selfPosition;\\r\\n        newVelocity = normalize(dir) * uMaxAgentSpeed;\\r\\n    }\\r\\n\\r\\n    return newVelocity; \\r\\n}\\r\\n\\r\\nvec3 updateBehavior() {   \\r\\n    float zoneRadius = uSeperationForce + uAlignmentForce + uCohesionForce;\\r\\n    float seperationThresh = uSeperationForce / zoneRadius;\\r\\n    float alignmentThresh = (uSeperationForce + uAlignmentForce) / zoneRadius;\\r\\n    float cohesionThresh = 1.0 - alignmentThresh; \\r\\n    float zoneRadiusSquared = zoneRadius * zoneRadius;\\r\\n\\r\\n    // Alignment, cohesion, seperation. \\r\\n    vec3 neighborPos, neighborVel; \\r\\n    vec3 newVelocity = selfVelocity; \\r\\n    for (float y = 0.0; y < height; y++) {\\r\\n        for (float x = 0.0; x < width; x++) {\\r\\n            vec2 ref = vec2(x, y) / resolution.xy; \\r\\n            vec3 neighborPos = texture2D(texturePosition, ref).xyz;\\r\\n            vec3 neighborVel = texture2D(textureVelocity, ref).xyz; \\r\\n\\r\\n            vec3 dir = neighborPos - selfPosition;\\r\\n            float dist = length(dir);\\r\\n\\r\\n            // Am I comparing to myself? Pass then. \\r\\n            if (dist < 0.0001) { \\r\\n                continue;\\r\\n            }\\r\\n\\r\\n            // Is this Agent outside my zone radius? Pass then. \\r\\n            float distSquared = dist * dist;\\r\\n            if (distSquared > zoneRadiusSquared) {\\r\\n                continue;\\r\\n            } else {\\r\\n                // How much in my zone is it? \\r\\n                float neighborThresh = (distSquared / zoneRadiusSquared); \\r\\n\\r\\n                // Within seperation threshold? \\r\\n                // Move apart for comfort.\\r\\n                if (neighborThresh < seperationThresh) {\\r\\n                    float f = (seperationThresh / neighborThresh - 1.0) * uDelta;\\r\\n                    newVelocity -= normalize(dir) * (f);\\r\\n                } else if (neighborThresh < alignmentThresh) { \\r\\n                    // Within alignment threshold, align with neighbor. \\r\\n                    float threshDelta = alignmentThresh - seperationThresh; \\r\\n                    float adjustedThresh = (neighborThresh - seperationThresh) / threshDelta; \\r\\n                    float f = (0.5 - cos(adjustedThresh * PI_2) * 0.5 + 0.5) * uDelta; \\r\\n                    newVelocity += normalize(neighborVel) * f; \\r\\n                } else if (neighborThresh < cohesionThresh) {\\r\\n                    // Attraction / Cohesion - move closer.\\r\\n                    float threshDelta = cohesionThresh - alignmentThresh; \\r\\n                    float adjustedThresh = (neighborThresh - alignmentThresh) / threshDelta;\\r\\n                    float f = (0.5 - (cos(adjustedThresh * PI_2) * -0.5 + 0.5)) * uDelta;\\r\\n                    newVelocity += normalize(dir) * f;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    return newVelocity; \\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n    // gl_FragCoord are pixel coordinates, but we need textureCoordinates\\r\\n    // to access the actual texel from the texture. We use this formula to\\r\\n    // calculate texture coordinate using resolution that is sent by default \\r\\n    // to the shader. \\r\\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\\r\\n    \\r\\n    // texturePosition, textureVelocity are data textures sent as we added them\\r\\n    // as dependencies while initializing our GPUComputationRenderer. \\r\\n    // This is the position (x, y, z) and velocity (x, y, z) for each bird, all being \\r\\n    // calculated and operated on in parallel. \\r\\n    selfPosition = texture2D(texturePosition, uv).xyz;\\r\\n    selfVelocity = texture2D(textureVelocity, uv).xyz;\\r\\n\\r\\n    // Adjust target position. \\r\\n    vec3 updatedTargetPos = updateTargetPosition();\\r\\n\\r\\n    // Cohesion, Seperation, Alignment\\r\\n    vec3 newVelocity = updateBehavior(); \\r\\n\\r\\n    // Moving target response. \\r\\n    vec3 dirToTarget = updatedTargetPos - selfPosition; \\r\\n    float distToTarget = length(dirToTarget);\\r\\n    if (distToTarget < uTargetRadius) {\\r\\n        float f = (1.0 - (distToTarget / uTargetRadius)) *  uAttractionForce;\\r\\n        newVelocity += normalize(dirToTarget) * f; \\r\\n    }\\r\\n\\r\\n    // Check if agent is in bounding box. \\r\\n    newVelocity = boundingBoxCheck(newVelocity); \\r\\n\\r\\n    // Clamp velocity. \\r\\n    if (length(newVelocity) > uMaxAgentSpeed) {\\r\\n        newVelocity = normalize(newVelocity) * uMaxAgentSpeed;\\r\\n    }\\r\\n\\r\\n    newVelocity = mix(newVelocity, selfVelocity, uDelta * 0.001);\\r\\n\\r\\n    // Output a velocity that is stored in the texture. \\r\\n    gl_FragColor = vec4(newVelocity, 1.0);\\r\\n}\";","export default \"/*\\r\\n  Name: fragmentShaderPosition.js\\r\\n  Author: Amay Kataria\\r\\n  Date: 10/21/2021\\r\\n  Description: Core shader for updating the position of each pigeon in the flock. \\r\\n*/\\r\\n\\r\\nuniform float uTime;\\r\\nuniform float uDelta;\\r\\nuniform bool uPause;\\r\\n\\r\\n// This influence how quick the pigeon advances to the position. \\r\\n// Maybe bring this in from the GUI. \\r\\nfloat posInfluence = 5.0; \\r\\n\\r\\nvoid main()\\t{\\r\\n    // Calculate texture coordinates from pixel coordinates (gl_FragColor)\\r\\n    // resolution is passed as a default uniform, which is stored as WIDTH,\\r\\n    // HEIGHT as initialized in GPUComputationRenderer.\\r\\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\\r\\n\\r\\n    // Store this to work on later. \\r\\n    vec4 tempPos = texture2D(texturePosition, uv); \\r\\n    vec3 position = tempPos.xyz;\\r\\n    vec3 velocity = texture2D(textureVelocity, uv).xyz;\\r\\n\\r\\n    // By default we set this \\r\\n    float phase = tempPos.w;\\r\\n    phase = mod((phase + uDelta + length( velocity.xz ) * uDelta * 3. + max(velocity.y, 0.0 ) * uDelta * 6.), 62.83);\\r\\n\\r\\n    vec3 newPosition = position + velocity * uDelta * posInfluence;\\r\\n\\r\\n    // When paused, return current position.\\r\\n    if (uPause == true) {\\r\\n      newPosition = position;\\r\\n    }\\r\\n    \\r\\n    gl_FragColor = vec4(newPosition, phase);\\r\\n}\";","/*\r\n  Name: PigeonManager.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: Container class that manages all the pigeons that are created in the world. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\n// import GPUPigeon from '../Environment/GPUPigeon.js'\r\nimport { PatternManager } from './PatternManager';\r\nimport Target from '../Environment/Target'\r\nimport GPUPigeon from '../Environment/GPUPigeon.js';\r\nimport { BIRDS } from '../Environment/GPUPigeon.js'\r\nimport GPURenderer from './GPURenderer.js';\r\nimport { MicParams } from './AudioManager';\r\n\r\n// Set this to true when everything has been loaded. \r\nexport let IsPigeonManagerReady = false; \r\n\r\n// PARAMS shared between GPURenderer \r\n// and PigeonManager. \r\nexport let PigeonParams = {\r\n    Attraction: 5.0,\r\n    Seperation: 20.0,\r\n    Alignment: 20.0,\r\n    Cohesion: 20.0,\r\n    Freedom: 0.75,\r\n    MaxSpeed: 20.0,\r\n    SpeedLerp: 0.1,\r\n    Size: 0.1,\r\n    Count: BIRDS\r\n}\r\n\r\nconst KillFactor = 250; \r\n\r\nclass PigeonManager {\r\n    constructor(scene) {\r\n        // Manages the moving target for the flock. \r\n        this.patternManager = new PatternManager(); \r\n\r\n        // Create the target object that the pigeons are following. \r\n        this.target = new Target(scene);\r\n\r\n        // State varables for shooting related behaviours\r\n        this.isFlockInShock = false;\r\n        this.previousSepValue = 0.0;\r\n        this.previousSpeedValue = 0.0;\r\n\r\n        // Clock, required for animation of the agents. \r\n        this.clock = new THREE.Clock(); \r\n\r\n        // Shader to set the uniforms on.\r\n        this.pigeonShader = ''; \r\n\r\n        // GPURenderer\r\n        this.gpuRenderer = '';\r\n\r\n        // Keep track of how many times user interacted.\r\n        this.shootCount = 0; \r\n    }\r\n    \r\n    setupTarget(curPatternType) {\r\n        // Create the target pattern.\r\n        this.patternManager.setTargetPattern(curPatternType); \r\n    }   \r\n\r\n    // Do this when we are doing the loading routine. \r\n    setupPigeonGPU(renderer, scene) {\r\n        // Initialize pigeon and set renderer etc. \r\n        this.pigeon = new GPUPigeon(this.initPigeons.bind(this, renderer, scene)); \r\n    }\r\n\r\n    update(boundingBox) {\r\n        if (IsPigeonManagerReady) {\r\n            let targetPosition = this.patternManager.update();\r\n\r\n            // If we have a valid target position, begin updating.\r\n            if (targetPosition) {\r\n                let delta = this.clock.getDelta();\r\n                let now = this.clock.oldTime;\r\n\r\n                // Update target. \r\n                this.target.update(targetPosition, now);\r\n\r\n                // Computer GPU values. \r\n                this.gpuRenderer.update(delta, now, targetPosition, boundingBox); \r\n                // Bird material's uniform value that is changing every frame. \r\n                if (this.pigeonShader) {\r\n                    this.pigeonShader.uniforms[\"time\"].value = now / 1000;\r\n                    this.pigeonShader.uniforms[\"delta\"].value = delta;\r\n\r\n                    // Bing pigeon size.\r\n                    this.pigeonShader.uniforms['size'].value = PigeonParams.Size; \r\n\r\n                    // Extract the data textures for Position and Velocity from GPURenderer and set it to the uniforms\r\n                    // of the bird's material to set the new location of the vertices in the BufferGeometry. \r\n                    this.pigeonShader.uniforms[\"texturePosition\"].value = this.gpuRenderer.getPositionRenderTarget();\r\n                    this.pigeonShader.uniforms[\"textureVelocity\"].value = this.gpuRenderer.getVelocityRenderTarget();\r\n                }\r\n\r\n                // Bind pigeon count.\r\n                this.pigeon.setDrawRange(PigeonParams.Count); \r\n            }\r\n\r\n            // Map mic params to seperation. \r\n            let v = this.mapRange(MicParams.HighMid, 0, 0.8, 20, 100);\r\n            PigeonParams.Seperation = v; \r\n\r\n            v = this.mapRange(MicParams.Treble, 0, 0.8, 15, 60); \r\n            PigeonParams.MaxSpeed = v; \r\n\r\n            v = this.mapRange(MicParams.Bass, 0, 0.8, 12, 3); \r\n            PigeonParams.Alignment = v; \r\n\r\n            // The flock will only recover from shock if they were indeed in shock\r\n            if (this.isFlockInShock){\r\n                this.recoverFromShock() ;\r\n            }\r\n        }\r\n    }\r\n\r\n    mapRange (number, inMin, inMax, outMin, outMax) {\r\n        return (number - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;\r\n    }\r\n\r\n    pausePigeons() {\r\n        if (this.gpuRenderer) {\r\n            this.gpuRenderer.pausePigeons();\r\n        }\r\n    }\r\n\r\n    initPigeons(renderer, scene) {\r\n        const geometry = this.pigeon.birdGeometry;\r\n\r\n        // simple standard material, which we will override to animate all the geometry\r\n        // that has been assigned into Bird Geometry. \r\n        const geoMaterial = new THREE.MeshStandardMaterial({\r\n            vertexColors: true,\r\n            flatShading: true,\r\n            side: THREE.DoubleSide,\r\n            roughness: 0,\r\n            metalness: 0\r\n        });\r\n\r\n        // Shader hook - to add some content before we actually compile\r\n        // the MeshStandardMaterial. We get access to the actual MeshStandard\r\n        // shader in this hook. \r\n        geoMaterial.onBeforeCompile = (shader) => {\r\n            // Add uniforms to the shader that will be used. \r\n            // Some uniforms are changing in every frame like texturePosition\r\n            // and textureVelocity, so we update that in animate().\r\n            shader.uniforms.texturePosition = { value: null };\r\n            shader.uniforms.textureVelocity = { value: null }; \r\n            // TextureAnimation is DataTexture for the animation that we prepared when loading our geometry. \r\n            shader.uniforms.textureAnimation = { value: this.pigeon.textureAnimation }; // Never have to update again.\r\n            shader.uniforms.time = { value: 1.0 };\r\n\r\n            shader.uniforms.size = { value: 0.2 };\r\n            shader.uniforms.delta = { value: 0.0 }; \r\n\r\n            // Replace token with token + insert. \r\n            let token = '#define STANDARD';\r\n            let insert = /* glsl that we will insert after STANDARD */\r\n            `\r\n                attribute vec4 reference;\r\n                attribute vec4 seeds;\r\n                uniform sampler2D texturePosition;\r\n                uniform sampler2D textureVelocity;\r\n                uniform sampler2D textureAnimation;\r\n                uniform float size;\r\n                uniform float time;\r\n            `;\r\n\r\n            // Add GLSL in MaterialShader. \r\n            shader.vertexShader = shader.vertexShader.replace( token, token + insert );\r\n\r\n            // Replace token with token + insert.\r\n            // NOTE: This shader is basically using positionData, velocityData, and animationData to update the position\r\n            // of each vertex in the Buffer Geometry. All the computation that happens on the GPU gets fed into this \r\n            // calculation to update the position of each vertex in the BufferGeometry based on the position, velocity, and animation \r\n            // frame that a bird is on. We don't need to touch this shader at all - This is rock solid. As we update the position and \r\n            // velocity shaders, this should just do the right thing. \r\n            token = '#include <begin_vertex>';\r\n            insert = /* glsl */\r\n            `\r\n                vec4 tmpPos = texture2D(texturePosition, reference.xy);\r\n\r\n                vec3 pos = tmpPos.xyz;\r\n                vec3 velocity = normalize(texture2D(textureVelocity, reference.xy).xyz);\r\n                vec3 aniPos = texture2D(textureAnimation, vec2(reference.z, mod(time + (seeds.x) * ((0.0004 + seeds.y / 10000.0) + normalize(velocity) / 20000.0), reference.w))).xyz;\r\n                vec3 newPosition = position;\r\n\r\n                newPosition = mat3(modelMatrix) * (newPosition + aniPos);\r\n                newPosition *= size + seeds.y * size * 0.2;\r\n\r\n                velocity.z *= -1.;\r\n                float xz = length(velocity.xz);\r\n                float xyz = 1.;\r\n                float x = sqrt(1. - velocity.y * velocity.y);\r\n\r\n                float cosry = velocity.x / xz;\r\n                float sinry = velocity.z / xz;\r\n\r\n                float cosrz = x / xyz;\r\n                float sinrz = velocity.y / xyz;\r\n\r\n                mat3 maty =  mat3(cosry, 0, -sinry, 0, 1, 0, sinry, 0, cosry);\r\n                mat3 matz =  mat3(cosrz , sinrz, 0, -sinrz, cosrz, 0, 0, 0,1);\r\n\r\n                newPosition =  maty * matz * newPosition;\r\n                newPosition += pos;\r\n\r\n                vec3 transformed = vec3(newPosition);\r\n            `;\r\n\r\n            // Insert GLSL into the shader. \r\n            shader.vertexShader = shader.vertexShader.replace(token, insert);\r\n\r\n            // Save shader to be accessed later in animate()\r\n            this.pigeonShader = shader;\r\n        };\r\n\r\n        // Use the BufferGeometry + MeshStandardMaterial (overridden) to create a mesh. \r\n        const birdMesh = new THREE.Mesh(geometry, geoMaterial);\r\n        birdMesh.rotation.y = Math.PI/2;\r\n        birdMesh.castShadow = true;\r\n        birdMesh.receiveShadow = true;\r\n        \r\n        scene.add(birdMesh);\r\n\r\n        // Initialize GPUComputationRenderer\r\n        this.gpuRenderer = new GPURenderer(renderer); \r\n\r\n        // All setup done, fire it away. \r\n        IsPigeonManagerReady = true;\r\n        console.log('Pigeon Manager Ready'); \r\n    }\r\n\r\n    shootPigeon() {\r\n        console.log('Pigeon Renderer: Shoot Pigeon');\r\n        \r\n        if (!this.isFlockInShock){\r\n            // Remember where the previous states are\r\n            this.previousSepValue = PigeonParams.Seperation;\r\n            this.previousSpeedValue = PigeonParams.MaxSpeed;\r\n            console.log(`Seperation value when shot : ${this.previousSepValue}`)\r\n            // Increase separation and maxSpeed abruptly \r\n            PigeonParams.Seperation *= 2.5;\r\n            PigeonParams.MaxSpeed *= 1.8;\r\n\r\n            // // Reduce the pigeons. \r\n            if (PigeonParams.Count > 0) {\r\n                this.shootCount++; \r\n                PigeonParams.Count = PigeonParams.Count - this.shootCount * KillFactor; \r\n            }\r\n            \r\n            this.isFlockInShock = true;\r\n        }\r\n        return this.isFlockInShock\r\n    }\r\n\r\n    setNewPatternType(newPatternType) {\r\n        this.patternManager.setTargetPattern(newPatternType);\r\n        console.log('Setting pattern');\r\n    }\r\n\r\n    recoverFromShock() {\r\n        if (PigeonParams.Seperation > this.previousSepValue){\r\n            // Separation and max speed would decay overtime to recover from gun shot\r\n            PigeonParams.Seperation *= 0.999;\r\n            PigeonParams.MaxSpeed *= 0.999;\r\n        } else {\r\n            // Pigeons are recovered from gun shot, setting the params back to their previous values\r\n            PigeonParams.Seperation = this.previousSepValue;\r\n            PigeonParams.MaxSpeed = this.previousSpeedValue;\r\n            console.log(`Seperation value after recovered : ${PigeonParams.Seperation}`)\r\n            this.previousSepValue = 0.0;\r\n            this.previousSpeedValue = 0.0\r\n            this.isFlockInShock = false;\r\n        }        \r\n    }\r\n} \r\n\r\nexport default PigeonManager;","/*\r\n  Name: RaycastManager.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: Core raycast manager. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\nclass RaycastManager {\r\n    constructor(shootPigeonCallback) {\r\n        this.raycaster = new THREE.Raycaster();\r\n        this.mouse = new THREE.Vector2(); \r\n\r\n        this.shootPigeon = shootPigeonCallback;\r\n        this.isIntersecting = false;  \r\n\r\n        // Hook this to the right click mechanism. \r\n        // Listen for mouse events for raycaster.  \r\n        // window.addEventListener('click', this.onMouseClick.bind(this), false);\r\n\r\n        this.clock = new THREE.Clock(); \r\n    }\r\n\r\n    intersect(camera, targetMesh, shouldAnimate) {\r\n        if (shouldAnimate) {\r\n            this.raycaster.setFromCamera(this.mouse, camera);\r\n\r\n            // Do we intersect with the target mesh? \r\n            const objects = this.raycaster.intersectObject(targetMesh); \r\n            this.isIntersecting = objects.length > 0;\r\n        }\r\n    }\r\n\r\n    onMouseClick() {\r\n        // let elapsedTime = this.clock.getDelta(); \r\n        // if (this.isIntersecting && elapsedTime > COOLDOWN_PERIOD) {\r\n        //     this.shootPigeon();            \r\n        // }\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default RaycastManager;\r\n","/*\r\n  Name: Websocket.js\r\n  Author: Amay Kataria\r\n  Date: 09/24/2021\r\n  Description: Class responsible for communication with the webserver. We use websockets\r\n  technology for this. Here we have the websocket client, which communicates with backend\r\n  server over websockets.\r\n*/\r\n\r\nimport io  from 'socket.io-client'\r\n\r\n//const localhostURL = \"http://localhost:5000\";\r\nconst herokuURL = \"https://befantastic-martha.herokuapp.com\";\r\n\r\nclass Websocket {\r\n  constructor() {\r\n      this.siteURL = herokuURL + '/app'; \r\n\r\n      this.socket = io(this.siteURL, {\r\n          reconnection: true,\r\n          reconnectionDelay: 500,\r\n          reconnectionAttempts: Infinity\r\n      });\r\n\r\n      this.socket.once('connect', this.subscribe.bind(this));\r\n      this.handlePresetsCbk = ''; \r\n  }\r\n\r\n  subscribe() {\r\n      console.log('Connected');\r\n\r\n      // Subscribe to incoming events from the webserver here. \r\n      this.socket.on('time', this.logTime.bind(this));\r\n      this.socket.on('receivePresets', this.handlePresets.bind(this));\r\n  }\r\n\r\n  handlePresets(data) {\r\n    this.handlePresetsCbk(data); \r\n  }\r\n\r\n  // ----------------------- DATABASE CALLS --------------------- //\r\n  saveGuiPreset(presetName, json) {\r\n      let payload = {\r\n          'name':  presetName, \r\n          'data': json\r\n      }\r\n      this.socket.emit('savePreset', payload); \r\n  }\r\n\r\n  readAllPresets(readPresetsCallback) {\r\n    console.log('Query Socket Presets.');\r\n    this.socket.emit('getPresets'); \r\n    this.handlePresetsCbk = readPresetsCallback; // Subscribe to receive data when the call completes. \r\n  }\r\n\r\n  deletePreset(presetName) {\r\n    this.socket.emit('deletePreset', presetName);\r\n  }\r\n\r\n  // -------------------- DON'T CHANGE THESE -------------------    \r\n  disconnect() {\r\n      console.log('Socket Server Disconnected.');\r\n  }\r\n\r\n  logTime(data) {\r\n      //console.log('Socket Connection Alive: ' + data);\r\n  }\r\n}\r\n\r\nexport default new Websocket();\r\n\r\n\r\n","\r\nexport function isIOSDevice() {\r\n    return !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);\r\n}\r\n\r\nexport function isSafari() {\r\n    return window.safari !== undefined;\r\n}","/*\r\n  Name: SkyboxManager.js\r\n  Author: Amay Kataria\r\n  Date: 10/19/2021\r\n  Description: Core Skybox Manager that does everything related to the skybox. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\nimport { isSafari } from './Helper';\r\n\r\n// User interface Params\r\nexport let SkyboxParams = {\r\n    ShowSkybox: true,\r\n    ShowBoundingBox: true,\r\n    BoundingBoxScalar: 0 // Control the size of the bounding box using this scalar. \r\n}\r\n\r\nexport let IsSkyboxReady = false; \r\n\r\nclass SkyboxManager {\r\n    createSkybox(scene, videoRef) {\r\n        // Right video texture. \r\n        const rightTexture = new THREE.VideoTexture(videoRef.current);\r\n        rightTexture.center = new THREE.Vector2(0.5, 0.5);\r\n        rightTexture.rotation = Math.PI;\r\n        rightTexture.flipY = false;\r\n\r\n        // Left video texture. \r\n        const leftTexture = new THREE.VideoTexture(videoRef.current);\r\n        leftTexture.center = new THREE.Vector2(0.5, 0.5);\r\n        leftTexture.rotation = Math.PI;\r\n        leftTexture.flipY = false;\r\n\r\n        // Top video texture. \r\n        const topTexture = new THREE.VideoTexture(videoRef.current);\r\n\r\n        // Texture wrapping broken on safari. \r\n        if (isSafari()) {\r\n            topTexture.wrapS = THREE.ClampToEdgeWrapping;\r\n            topTexture.wrapT = THREE.ClampToEdgeWrapping; \r\n        } else {\r\n            topTexture.wrapS = THREE.MirroredRepeatWrapping;\r\n            topTexture.wrapT = THREE.MirroredRepeatWrapping;\r\n            // topTexture.offset = new THREE.Vector2(1.5, 1.5);\r\n            // topTexture.repeat = new THREE.Vector2(0.25, 0.25);\r\n            topTexture.center = new THREE.Vector2(0.25, 0.25);\r\n            topTexture.rotation = Math.PI;\r\n            topTexture.flipY = false;\r\n        }\r\n\r\n        // Bottom video texture. \r\n        const bottomTexture = new THREE.VideoTexture(videoRef.current);\r\n        if (isSafari()) {\r\n            bottomTexture.wrapS = THREE.ClampToEdgeWrapping;\r\n            bottomTexture.wrapT = THREE.ClampToEdgeWrapping; \r\n        } else {\r\n            bottomTexture.wrapS = THREE.MirroredRepeatWrapping;\r\n            bottomTexture.wrapT = THREE.MirroredRepeatWrapping;\r\n            bottomTexture.center = new THREE.Vector2(0.5, 1.0);\r\n            bottomTexture.rotation = Math.PI / 2;\r\n            bottomTexture.flipY = false;\r\n        }\r\n\r\n        // Back video texture. \r\n        const backTexture = new THREE.VideoTexture(videoRef.current);\r\n\r\n        // Front video texture. \r\n        const frontTexture = new THREE.VideoTexture(videoRef.current);\r\n        \r\n        // [right, left, top, bottom, back, front] - DO NOT CHANGE THE ARRAY ORDER. \r\n        let textureArray = [rightTexture, leftTexture, topTexture, bottomTexture, backTexture, frontTexture];\r\n        let materialArray = textureArray.map(t => {\r\n            return new THREE.MeshBasicMaterial({\r\n                map: t,\r\n                side: THREE.DoubleSide\r\n            }); \r\n        });\r\n\r\n        // Reuse this variable in other parts.\r\n        const geometry = new THREE.BoxGeometry(800, 800, 800); \r\n\r\n        // Material array is automatically arranged to the faces. \r\n        this.cubeMesh = new THREE.Mesh(geometry, materialArray);\r\n        scene.add(this.cubeMesh);\r\n        \r\n        this.createBoundingBox(scene); \r\n        this.lastBoundingBoxScalar = SkyboxParams.BoundingBoxScalar; \r\n\r\n        // Skybox is ready. \r\n        IsSkyboxReady = true; \r\n        console.log('Skybox Ready.')\r\n    }\r\n\r\n    createBoundingBox(scene) {\r\n        // Computer a bounding box from the Skybox geometry. \r\n        this.cubeMesh.geometry.computeBoundingBox();\r\n\r\n        // Extract and update the THREE.Box3 bounding box from it. \r\n        this.boundingBox = this.cubeMesh.geometry.boundingBox;\r\n        this.boundingBox.expandByScalar(SkyboxParams.BoundingBoxScalar); // Set how much scale down you want. \r\n        \r\n        // This is the red mesh that you see on the screen, which is added to the scene for the Bounding Box\r\n        this.boundingBoxMesh = new THREE.BoxHelper(this.cubeMesh, new THREE.Color(1, 0, 0));\r\n        this.boundingBoxMesh.visible = SkyboxParams.ShowBoundingBox;\r\n        scene.add(this.boundingBoxMesh); \r\n    }\r\n\r\n    getBoundingBox() {\r\n        // This returns boundingBox of type THREE.Box3. It's the true BoundingBox. \r\n        // You can run helper functions like intersects, isPointInside, etc on this. \r\n        if (this.boundingBox) {\r\n            return this.boundingBox; \r\n        }\r\n    }\r\n\r\n    update() {\r\n        this.cubeMesh.visible = SkyboxParams.ShowSkybox;\r\n        this.boundingBoxMesh.visible = SkyboxParams.ShowBoundingBox; \r\n\r\n        // Has BoundedBox Scalar changed?\r\n        // Update the bounded box! \r\n        if (SkyboxParams.BoundingBoxScalar !== this.lastBoundingBoxScalar) {\r\n            this.updateBoundingBox(); \r\n            this.lastBoundingBoxScalar = SkyboxParams.BoundingBoxScalar; \r\n        }\r\n    }\r\n\r\n    updateBoundingBox() {\r\n        // Create a new bounding box from original bbMesh.\r\n        this.cubeMesh.geometry.computeBoundingBox();\r\n        this.boundingBox = this.cubeMesh.geometry.boundingBox;\r\n        this.boundingBox.expandByScalar(SkyboxParams.BoundingBoxScalar); // Set how much scale down you want. \r\n\r\n        // Update the bounding box mesh on the screen with respect to bbMesh. \r\n        this.boundingBoxMesh.update(this.cubeMesh); \r\n    }\r\n\r\n    getMesh() {\r\n        return this.cubeMesh; \r\n    }\r\n} \r\n\r\nexport default SkyboxManager;","var _defs, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPigeon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"106px\",\n    height: \"159px\",\n    viewBox: \"0 0 106 159\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"filter\", {\n    id: \"filter_1\"\n  }, /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n    in: \"SourceGraphic\",\n    type: \"matrix\",\n    values: \"0 0 0 0 0.827451 0 0 0 0 0.827451 0 0 0 0 0.827451 0 0 0 1 0\"\n  })), /*#__PURE__*/React.createElement(\"filter\", {\n    id: \"filter_2\"\n  }, /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n    in: \"SourceGraphic\",\n    type: \"matrix\",\n    values: \"0 0 0 0 0.40392157 0 0 0 0 0.45490196 0 0 0 0 0.6117647 0 0 0 1 0\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0L105.925 0L105.925 158.126L0 158.126L0 0Z\",\n    id: \"path_1\"\n  }), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"mask_1\"\n  }, /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#path_1\"\n  })))), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Pigeon_Silhouette_clip_art\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0L105.925 0L105.925 158.126L0 158.126L0 0Z\",\n    id: \"Background\",\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#mask_1)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"layer2\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g3204\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.96014 49.8085L11.7452 41.9783L12.8327 35.8882L13.0503 27.188L13.7028 21.0979L15.2253 15.2253L18.9229 8.70017L22.8379 4.13258L29.5806 0.652514L37.4107 0L41.7608 1.52253L45.2409 3.91508L46.5459 7.83015L44.5884 9.13518L43.9359 12.1802L46.3284 15.4428L43.5008 17.4003L38.9333 21.0979L38.0632 24.3605L37.8457 30.0156L41.3258 38.2808L45.6759 44.1534L49.8085 51.1135L52.201 56.1161L50.2435 59.8137L46.3284 60.0312L43.7183 63.9463L39.8033 69.6014L38.7157 76.779L40.2383 85.4792L46.1109 94.6144L50.6785 96.7894L52.8535 101.792L58.2911 102.88L62.2062 108.317L70.6889 108.317L75.6915 108.1L87.4367 112.015L91.1343 111.797L101.139 120.497L105.925 124.847L97.2244 123.325L93.5268 125.282L83.9566 122.02L76.9965 118.757L71.7764 115.277L67.8613 113.537L63.5112 115.712L60.0312 117.235L61.7712 121.15L60.2487 133.548L57.6386 141.813L58.9436 145.293L61.9887 144.858L59.5962 148.773L57.8561 155.516L57.8561 158.126L55.2461 157.691L53.9411 151.383L45.6759 153.776L40.4558 155.081L36.7582 154.646L37.4107 153.123L40.6733 151.818L44.5884 150.513L39.3683 150.295L36.9757 150.078L35.0182 147.468L41.1083 147.033L48.0684 147.468L52.8535 145.293L54.1586 136.81L54.8111 131.155L52.8535 129.198L49.156 123.542L49.3735 117.67L48.5034 114.842L40.2383 113.537L38.9333 116.365L39.3683 121.15L40.8908 124.195L38.7157 128.328L35.6707 132.243L32.6256 137.68L32.8431 141.16L35.4532 142.683L40.4558 141.813L42.1958 142.465L38.9333 144.858L35.8882 144.858L32.6256 144.423L31.3206 147.903L32.8431 154.211L28.9281 151.383L28.2755 147.468L25.013 147.685L17.1828 150.078L12.8327 152.035L9.78769 152.035L11.3102 148.773L15.8778 147.468L21.7504 145.728L16.3128 145.728L10.0052 146.163L8.26516 144.423L8.70017 142.465L13.0503 143.335L19.3579 143.118L25.448 142.465L28.4931 137.463L31.1031 130.285L31.1031 128.545L28.7106 124.195L27.623 116.582L26.1005 111.797L19.3579 103.967L13.2678 97.8769L7.39514 88.0892L2.17504 77.214L0.217504 67.4263L0 60.9012L3.91508 54.3761L6.96014 49.8085L6.96014 49.8085Z\",\n    id: \"path2420\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.04251 7.1488L0 3.77865L0.306375 1.22551L1.94039 0L5.00415 2.04251L9.08918 4.28928L10.5189 6.22967L11.6423 8.78281L9.39556 8.47643L6.74029 7.45517L4.28927 7.25092L2.04251 7.1488L2.04251 7.1488Z\",\n    transform: \"translate(45.268066 8.334961)\",\n    id: \"path3194\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.5402 0L12.7657 2.65526L12.8678 6.94455L10.8253 8.98706L7.35304 9.39556L5.92329 10.8253L3.06377 14.8082L1.12338 19.3018L0 23.1825L1.02125 28.3909L3.16589 33.293L6.43391 39.012L9.29343 42.28L11.9487 42.9949L13.8891 46.2629L14.8082 48.1012L20.0166 50.1437L22.5698 54.1266L25.9399 55.4542L32.9866 55.1479L33.8036 52.0841L39.012 50.4501L39.4205 46.5693L39.2162 43.1992L41.1566 42.3821L40.2375 36.9695L37.378 31.3526L37.378 35.744L36.1525 41.5651L32.4759 45.4459L29.1058 49.5309L24.9186 49.6331L20.2209 46.9778L18.689 44.1183L21.5485 45.0374L26.1442 47.0799L29.5143 44.1183L33.3951 41.2588L35.6418 36.4589L36.0504 30.6377L34.7227 26.9612L31.5568 22.4676L28.5952 16.7486L25.7357 11.4381L22.3655 6.12754L17.5656 1.73614L11.5402 0L11.5402 0Z\",\n    transform: \"translate(40.059692 51.944336)\",\n    id: \"path3196\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.8295 18.2805L19.9145 17.5656L18.689 14.5018L21.5485 13.787L15.3188 8.7828L16.6465 12.3572L16.1359 14.3997L7.25092 14.5018L3.06377 13.787L4.28927 11.7444L10.3147 12.2551L14.0933 12.2551L12.7657 6.74029L9.39555 1.63401L7.76154 0L7.9658 3.57439L6.22967 3.77865L6.74029 8.88493L5.00415 10.6211L2.24676 12.153L0 13.1742L1.22551 14.8082L5.31053 15.8295L12.3572 17.9741L15.8295 18.2805L15.8295 18.2805Z\",\n    transform: \"translate(74.37427 92.28516)\",\n    id: \"path3198\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.88537 8.22331L7.06916 7.93477L8.80039 6.05928L8.94466 2.88537L7.3577 0.721344L3.46245 0L1.58695 2.16403L0 5.19367L2.88537 8.22331L2.88537 8.22331Z\",\n    transform: \"translate(28.639648 3.0722656)\",\n    id: \"path3200\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.432807 4.32806L0 2.59683L1.15415 0.577074L3.31818 0L4.47233 1.00988L5.0494 3.17391L3.75099 5.33794L0.432807 4.32806L0.432807 4.32806Z\",\n    transform: \"translate(31.092163 4.661133)\",\n    id: \"path3202\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  })))))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPigeon);\nexport default __webpack_public_path__ + \"static/media/pigeon.efb3d8a2.svg\";\nexport { ForwardRef as ReactComponent };","/*\r\n  Name: ServerGui.js\r\n  Author: Amay Kataria\r\n  Date: 09/24/2021\r\n  Description: A tweakpane GUI implementation that stores and loads presets from a backend server. \r\n  The data is transmitted across using a Websocket connection that is maintained throughout the\r\n  lifetime of the application. \r\n*/\r\n\r\nimport { Pane } from 'tweakpane';\r\nimport * as EssentialsPlugin from '@tweakpane/plugin-essentials';\r\nimport _ from 'lodash';\r\n\r\nimport Websocket from './Websocket';\r\n\r\nimport { TargetParams } from '../Environment/Target.js';\r\nimport { PatternParams, PatternTypes, EllipseParams, RoseCurveParams } from '../Managers/PatternManager.js';\r\nimport { PigeonParams } from '../Managers/PigeonManager';\r\nimport { OrbitParams } from '../Managers/CameraControl.js'\r\nimport { SkyboxParams } from '../Managers/SkyboxManager';\r\nimport { RendererParams } from '../Managers/RendererManager';\r\nimport { MicParams } from '../Managers/AudioManager';\r\n\r\n// Set this to true when all presets have been received by this. \r\nexport let IsGUIReady = false; \r\n\r\n// Local params for the GUI. \r\n// Presets is a dynamically populated prop (critical)\r\nlet GuiParams = {\r\n    Preset: 'Global',\r\n    Presets: ''\r\n}\r\nconst PRESETS_IDX = 1; \r\nconst PATTERN_TYPE_IDX =0; \r\n\r\nclass ServerGui {\r\n    constructor(containerComponent) {\r\n        this.gui = new Pane({title: 'Pigeon GUI', container: containerComponent, expanded: true});\r\n        this.gui.registerPlugin(EssentialsPlugin);\r\n\r\n        // Preset name\r\n        this.gui.addInput(GuiParams, 'Preset');\r\n        \r\n        // Presets.\r\n        this.presetOptions = []; // Backup object of all the preset options. // Saves the truth. \r\n        this.buildPresets(); \r\n\r\n        // FPS\r\n        this.fpsGraph = this.gui.addBlade({\r\n            view: 'fpsgraph',\r\n            label: 'FPS',\r\n            lineCount: 2,\r\n        });\r\n\r\n        this.gui.addMonitor(RendererParams, 'DrawCalls');\r\n\r\n        // Orbit controls. \r\n        let f0 = this.gui.addFolder({ title: 'Orbit Controls', expanded: false });\r\n        f0.addInput(OrbitParams, 'EnableControls', {label: 'Enable Controls'});\r\n        f0.addInput(OrbitParams, 'EnablePan', {label: 'Enable Panning'});\r\n        f0.addInput(OrbitParams, 'AutoRotate', {label: 'Enable AutoRotate'});\r\n        f0.addInput(OrbitParams, 'RotateSpeed', { label: 'Rotation Speed', min: 0.1, max: 1.0 });\r\n        f0.addInput(OrbitParams, 'EnableKeys', {label: 'Enable Keys'});\r\n\r\n        // World Parameters.\r\n        let f1 = this.gui.addFolder({ title: 'Target Params', expanded: false });\r\n        f1.addInput(TargetParams, 'ShowTarget', {label: 'Show Target'});\r\n        f1.addInput(TargetParams, 'MaxTargetRadius', {label: 'Max Target Radius', min: 50.0, max: 400.0}); \r\n        f1.addMonitor(TargetParams, 'CurrentTargetRadius', {label: 'Current Target Radius'}); \r\n\r\n        // Pattern Parameters.\r\n        this.patternFolder = this.gui.addFolder({ title: 'Pattern Params', expanded: false });\r\n        this.currentPatternType = PatternTypes.Ellipse; \r\n        this.buildPatternTypeOptions(); // Default pattern type.\r\n        this.buildPatterns(); \r\n\r\n        // Ellipse Parameters. \r\n        this.ellipseParamsFolder = this.patternFolder.addFolder({ title: 'Ellipse Pattern Params', expanded: true });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Origin');\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Radii', {\r\n            x: { min: 0, max: 200 },\r\n            y: { min: 0, max: 200 }\r\n        });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Amplitude', { min: 0, max: 300 });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Speed', { min: 0, max: 2 });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Direction'); \r\n\r\n        this.roseCurveParamsFolder = this.patternFolder.addFolder({ title: 'Rose-Curve Pattern Params', expanded: false });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Origin');\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Radius', { min: 1, max: 800 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Phase', { min: 0, max: 10 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'NumPetals', { min: 1, max: 10, step: 1 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Amplitude', { min: 0, max: 800 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Sinusoidal');\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Direction');\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Speed', { min: 0, max: 2 });\r\n\r\n        // Show the params based on the current pattern selected.\r\n        this.showPatternParams();\r\n\r\n        this.pigeonParamsFolder = this.gui.addFolder({ title: 'Pigeon Params', expanded: false});\r\n        this.pigeonParamsFolder.addInput(PigeonParams, 'Size', {label: 'Size', min: 0, max: 1, step: 0.01}); \r\n        this.pigeonParamsFolder.addInput(PigeonParams, 'Attraction', {label: 'Attraction Force', min: 0, max: 100, step: 1}); \r\n        this.pigeonParamsFolder.addInput(PigeonParams, 'Seperation', {label: 'Seperation Force', min: 0, max: 100, step: 1}); \r\n        this.pigeonParamsFolder.addInput(PigeonParams, 'Alignment', {label: 'Alignment Force', min: 0, max: 100, step: 1}); \r\n        this.pigeonParamsFolder.addInput(PigeonParams, 'Cohesion', {label: 'Cohesion Force', min: 0, max: 100, step: 1}); \r\n        this.pigeonParamsFolder.addInput(PigeonParams, 'MaxSpeed', {label: 'Max Agent Speed', min: 1, max: 200, step: 0.1});\r\n        this.pigeonParamsFolder.addInput(PigeonParams, 'SpeedLerp', {label: 'Speed Lerp', min: 0, max: 1, step: 0.01});\r\n        this.pigeonParamsFolder.addInput(PigeonParams, 'Count', {label: 'Count', min: 0, max: PigeonParams.Count, step: 1}); \r\n    \r\n        let f3 = this.gui.addFolder({ title: 'Skybox Params', expanded: false});\r\n        f3.addInput(SkyboxParams, 'ShowSkybox');\r\n        f3.addInput(SkyboxParams, 'ShowBoundingBox');\r\n        f3.addInput(SkyboxParams, 'BoundingBoxScalar', {min: -50, max: 0});\r\n        \r\n        let f4 = this.gui.addFolder({ title: 'Microphone Params', expanded: true});\r\n        f4.addMonitor(MicParams, 'Bass');\r\n        f4.addMonitor(MicParams, 'Mid');\r\n        f4.addMonitor(MicParams, 'Treble');\r\n        f4.addMonitor(MicParams, 'LowMid');\r\n        f4.addMonitor(MicParams, 'HighMid');\r\n\r\n        // Buttons\r\n        this.gui.addButton({title: 'Save Preset'}).on('click', this.onSavePreset.bind(this));       \r\n        this.gui.addButton({title: 'Delete Preset'}).on('click', this.onDeletePreset.bind(this));\r\n\r\n        // Read presets from the database. \r\n        Websocket.readAllPresets(this.onReceivePresets.bind(this)); \r\n\r\n        // Hide the gui by default. \r\n        this.gui.hidden = true;\r\n\r\n        // \r\n        window.addEventListener('keypress', (e) => {\r\n            if (e.key === 'h') {\r\n                this.gui.hidden = !this.gui.hidden; \r\n            }\r\n        }); \r\n    }\r\n\r\n    onPresetSelected(event) {\r\n        // The value of the select preset is the JSON value. \r\n        let guiJson = JSON.parse(event.value); \r\n        this.gui.importPreset(guiJson);\r\n    }\r\n\r\n    onReceivePresets(data) {\r\n        console.log('All the presets received:');\r\n        console.log(data);\r\n\r\n        // If there are valid presets. \r\n        if (data.length > 0) {\r\n            // Build preset options. \r\n            data.forEach(d => {\r\n                let name = d['name'];\r\n                let config = d['config'];\r\n                // We push here rather than unshift because it's okay to just read this is in the order\r\n                // the entries were pushed in the database. \r\n                this.presetOptions.push({ text: name, value: JSON.stringify(config)});\r\n            }); \r\n            \r\n            // Dispose pattern type list. \r\n            // this.patternTypeList.dispose();   \r\n\r\n            // Get the first preset and set the GUI with that. \r\n            let defaultPresetJSON = data[0]['config'];\r\n            this.gui.importPreset(defaultPresetJSON);\r\n\r\n            // Rebuild the preset controller using this.presetOptions. \r\n            this.disposePresets();\r\n            this.buildPresets();\r\n\r\n            // Build Pattern type options. \r\n            this.currentPatternType = defaultPresetJSON['PatternType'];  \r\n            this.buildPatternTypeOptions(); \r\n            this.disposePatterns();\r\n            this.buildPatterns(); \r\n            this.showPatternParams();\r\n\r\n            // All presets received and everything is built. \r\n            IsGUIReady = true; \r\n            console.log('GUI Ready');\r\n        }\r\n    }\r\n\r\n    onSavePreset() {\r\n        let presetName = GuiParams.Preset; \r\n        if (presetName.length > 0) {\r\n            // Clear the presets first. \r\n            this.disposePresets(); \r\n            let json = this.gui.exportPreset(); \r\n\r\n            // Does this preset exist? \r\n            let preset = _.find(this.presetOptions, p => {\r\n                return p.text === presetName;\r\n            });\r\n\r\n            if (preset) {\r\n                // Update local json of the preset.\r\n                console.log('Preset Exists. Updating database and local copy of the preset.');\r\n                preset.value = JSON.stringify(json);\r\n                // NOTE: Update the preset options array to maintain the order of the updated presets. \r\n                // Unfortunately, we need to rebuild the presets everytime and we want to make sure \r\n                // the order of presets doesn't change. \r\n                this.presetOptions = _.sortBy(this.presetOptions, ({text}) => { \r\n                    return text === presetName ? 0: 1;\r\n                });\r\n            } else {\r\n                console.log('Preset doesnt exist. New entry in the database.');\r\n                this.presetOptions.unshift({ text: presetName, value: JSON.stringify(json)} );\r\n            }\r\n\r\n            // Update database. \r\n            Websocket.saveGuiPreset(presetName, json); \r\n\r\n            // Rebuild the presets. \r\n            this.buildPresets(); \r\n        } else {\r\n            alert('Not an empty entry please.');\r\n        }\r\n    }\r\n\r\n    onDeletePreset() {\r\n        if (this.presetOptions.length > 0) {\r\n            let presetName = GuiParams.Preset; \r\n            console.log('Deleting preset: ' + presetName);\r\n\r\n            // Remove that element from the array. \r\n            // Updates the original array. \r\n            _.remove(this.presetOptions, p => p.text === presetName); \r\n\r\n            // Delete the preset from the database. \r\n            Websocket.deletePreset(presetName); \r\n\r\n            // Rebuild the preset list. \r\n            this.disposePresets(); \r\n            this.buildPresets();\r\n\r\n            // Maybe I'm the last entry in the database. \r\n            if (this.presetOptions.length > 0) {\r\n                // Get preset options for the first preset options entry. \r\n                let presetJson = this.presetOptions[0].value; \r\n                this.gui.importPreset(JSON.parse(presetJson));\r\n            }\r\n        }\r\n    }\r\n\r\n    disposePresets() {\r\n        GuiParams.Presets = '';\r\n        this.presetList.dispose();\r\n    }\r\n\r\n    buildPresets() {\r\n        this.presetList = this.gui.addInput(GuiParams, 'Presets', {\r\n            index: PRESETS_IDX,\r\n            options: this.presetOptions\r\n        }); \r\n        this.presetList.on('change', this.onPresetSelected.bind(this));\r\n    }\r\n\r\n    buildPatternTypeOptions() {\r\n        if (this.currentPatternType === PatternTypes.Ellipse) {\r\n            this.patternTypeOptions = { Ellipse: PatternTypes.Ellipse, RoseCurve: PatternTypes.RoseCurve };\r\n        } else if (this.currentPatternType === PatternTypes.RoseCurve) {\r\n            this.patternTypeOptions = { RoseCurve: PatternTypes.RoseCurve, Ellipse: PatternTypes.Ellipse };\r\n        } else {\r\n            this.patternTypeOptions = { Ellipse: PatternTypes.Ellipse, RoseCurve: PatternTypes.RoseCurve }; // Default pattern type. \r\n        }\r\n    }\r\n\r\n    disposePatterns() {\r\n        this.patternList.dispose();\r\n    }\r\n\r\n    buildPatterns() {\r\n        this.patternList = this.patternFolder.addInput(PatternParams, 'PatternType', {\r\n            label: 'Pattern Type',\r\n            index: PATTERN_TYPE_IDX,\r\n            options: this.patternTypeOptions\r\n        }); \r\n        this.patternList.on('change', this.onPatternSelected.bind(this)); \r\n    }\r\n\r\n    onPatternSelected(ev) {\r\n        this.currentPatternType = ev.value;\r\n        this.showPatternParams();\r\n\r\n        // Fire the callback to notify that the pattern has changed.\r\n        this.patternChangeUpdate(this.currentPatternType); \r\n    }\r\n\r\n    showPatternParams() {\r\n        if (this.currentPatternType === PatternTypes.Ellipse) {\r\n            this.ellipseParamsFolder.hidden = false; \r\n            this.roseCurveParamsFolder.hidden = true; \r\n        } else if (this.currentPatternType === PatternTypes.RoseCurve) {\r\n            this.ellipseParamsFolder.hidden = true; \r\n            this.roseCurveParamsFolder.hidden = false;\r\n        }\r\n    }\r\n\r\n    subscribeForPatternChange(callback) {\r\n        this.patternChangeUpdate = callback; \r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default ServerGui;","/*\r\n  Name: GuiPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: This is the container component where the GUI is placed in the project. It needs to be outside \r\n  the way of the title. We just move it slightly lower from the top. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\nimport ServerGui from '../Utilities/ServerGui';\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'absolute',\r\n        top: '30px',\r\n        right: '35px',\r\n        zIndex: 2\r\n    }\r\n};\r\n\r\nclass GuiPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n\r\n    this.guiRef = React.createRef();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref={this.guiRef} style={styles.container}></div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    let containerComponent = this.guiRef.current; \r\n    this.gui = new ServerGui(containerComponent); \r\n  }\r\n\r\n  getFpsGraph() {\r\n      return this.gui.fpsGraph; \r\n  }\r\n\r\n  subscribeForPatternChange(callback) {\r\n    this.gui.subscribeForPatternChange(callback);\r\n  }\r\n\r\n  getCurPatternType() {\r\n    return this.gui.currentPatternType; \r\n  }\r\n\r\n  getPigeonParamFolder() {\r\n    return this.gui.pigeonParamsFolder;\r\n  }\r\n}\r\n\r\nexport default Radium(GuiPanel);","export default __webpack_public_path__ + \"static/media/Front.1bc35914.mp4\";","/*\n  Name: World.js\n  Author: Amay Kataria\n  Date: 08/19/2021\n  Description: This is where Three.js world is initialized. It's the entry point for the three-dimensional \n  world and creating all elements. \n*/\n\nimport React from 'react'\nimport Radium from 'radium'\nimport * as THREE from 'three'\nimport { elementScrollIntoView } from 'seamless-scroll-polyfill'\n\nimport AudioManager from '../Managers/AudioManager.js'\n\n// Utility components\n// import Terrain from '../Environment/Terrain.js'\nimport CameraControl from '../Managers/CameraControl.js'\nimport LightingManager from '../Managers/LightingManager.js'\nimport RendererManager from '../Managers/RendererManager.js'\nimport PigeonManager from '../Managers/PigeonManager.js'\nimport RaycastManager from '../Managers/RaycastManager.js'\n\n// Interface components. \nimport GuiPanel from './GuiPanel.js'\n\n// Clouds video. \nimport front from '../../assets/skybox/Front.mp4'\nimport SkyboxManager, { IsSkyboxReady } from '../Managers/SkyboxManager.js'\n\n// Set this flag to true when the world has loaded all the videos \n// has created the three.js canvas.\nexport let IsWorldReady = false; \n\n// NOTE: Change this when we have more videos loading. \nconst NUM_VIDEOS_LOADED = 1; \n\nconst styles = {\n  container: {\n    width: '100%', \n    height: '100%',\n    overflow: 'hidden'\n  },\n\n  crosshair: {\n    cursor: 'crosshair'\n  },\n\n  video: {\n    display: 'none'\n  }\n};\n\nclass World extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state={};\n\n    // Animation flag. \n    this.shouldAnimate = true; \n\n    // Reference to the components that need to be accesed. \n    this.worldRef = React.createRef(); \n    this.guiRef = React.createRef(); \n    this.navRef = React.createRef(); \n    this.panelRef = React.createRef(); \n\n    // Video ref. \n    this.frontVideoRef = React.createRef();\n    this.backVideoRef = React.createRef(); \n    this.leftVideoRef = React.createRef();\n    this.rightVideoRef = React.createRef();\n    this.topVideoRef = React.createRef();\n    this.bottomVideoRef = React.createRef();\n    \n    // 3D scene object where everything is added. \n    this.scene = new THREE.Scene(); \n    this.scene.background = new THREE.Color('#F9FDFF');\n\n    // Camera & Interactive controls module. \n    this.cameraControl = new CameraControl(); \n\n    // Lights.\n    this.lightingManager = new LightingManager(this.scene); \n\n    // Simple instance. Nothing happens here. \n    this.skyboxManager = new SkyboxManager(); \n\n    // Raycaster. \n    this.raycastManager = new RaycastManager(this.onShootPigeon.bind(this)); \n\n    // Three.js Renderer\n    this.rendererManager = new RendererManager(); \n\n    // Pigeons\n    this.pigeonManager = new PigeonManager(this.scene); \n\n    this.videoLoadProgress = []; \n\n    // Subscribe to events. \n    window.addEventListener('resize', this.onWindowResize.bind(this));\n    document.addEventListener('visibilitychange', event => {\n      if (document.hidden) {\n        this.updateAnimationStatus(false); \n      } else {\n        this.updateAnimationStatus(true);\n      }\n    }); \n  }\n\n  componentDidMount() {\n    // Mount the canvas at the current div. \n    let rendererDomElement = this.rendererManager.getDomElement(); \n    this.worldRef.current.appendChild(rendererDomElement); \n\n    // Get the handle to the FPS graph component. \n    this.fpsGraph = this.guiRef.current.getFpsGraph(); \n    this.guiRef.current.subscribeForPatternChange(this.onPatternChanged.bind(this));\n\n    // this.frontVideoRef.current.src = front_url;\n\n    // Setup texture on the skybox now that the video component is mounted. \n    this.skyboxManager.createSkybox(this.scene, this.frontVideoRef);\n\n    // Initialize the recursive rendering call. \n    this.rendererManager.setAnimationLoop(this.renderThree.bind(this)); \n\n    this.checkIfReady(); \n  }\n\n  // Component render. \n  render() {\n    return (\n      <div style={styles.container} ref={this.worldRef}>\n        <GuiPanel ref={this.guiRef} />\n        <video id={'front'} ref={this.frontVideoRef} type='video/mp4' src={front} preload='true' playsInline loop style={styles.video} onCanPlay={this.onVideoLoaded.bind(this) } />\n      </div>\n    );\n  }\n\n  onVideoLoaded() {\n    if (this.videoLoadProgress.length < NUM_VIDEOS_LOADED) {\n      this.videoLoadProgress.push(true);\n      this.checkIfReady(); \n    }\n  }\n\n  checkIfReady() {\n    // Make sure to change length of the videos here. \n    if (this.videoLoadProgress.length === NUM_VIDEOS_LOADED && IsSkyboxReady) {\n      IsWorldReady = true; \n      console.log('World Ready.');\n    }\n  }\n\n  // CORE Three.js recursive render loop. \n  renderThree() {\n    this.fpsGraph.begin();\n      // Pass the bounding box to the pigeon manager for creating bounds for agents. \n      if (this.pigeonManager) {\n        let boundingBox = this.skyboxManager.getBoundingBox(); \n        this.pigeonManager.update(boundingBox);\n        \n        // Once the flock is no longer in shock, enable the pigeon params again\n        if (!this.pigeonManager.isFlockInShock && this.guiRef.current.getPigeonParamFolder().disabled){\n          this.guiRef.current.getPigeonParamFolder().disabled = false;\n        }\n      }\n      \n      this.cameraControl.update(this.scene);\n\n      // This renders each frame. \n      this.rendererManager.render(this.scene, this.cameraControl.getCamera());   \n      \n      this.skyboxManager.update();   \n\n      this.rendererManager.monitorDrawCalls();\n      \n      // Don't do this.\n      // // Wait till the camera animation has stopped before beginning Raycasting. \n      // if (this.cameraControl.animationStopped) {\n      //   let mesh = this.skyboxManager.getMesh(); \n      //   // Intersect with bounding box mesh? \n      //   if (mesh) {\n      //     this.raycastManager.intersect(this.cameraControl.camera, mesh, this.shouldAnimate); \n      //   }\n      // }\n    this.fpsGraph.end();\n  }\n\n  onWindowResize() {\n    if (this.cameraControl) {\n      let camera = this.cameraControl.getCamera(); \n      camera.aspect = window.innerWidth / window.innerHeight; \n      camera.updateProjectionMatrix(); \n      this.rendererManager.updateSize(window.innerWidth, window.innerHeight);\n    }\n  }\n\n  updateAnimationStatus(status) {  \n    this.shouldAnimate = status; \n    if (status) {\n      this.rendererManager.setAnimationLoop(this.renderThree.bind(this));\n      if (AudioManager.isPermanentlyMute) {\n        // Don't retrigger\n      } else {\n        AudioManager.trigger();\n      }\n    } else {\n      // Pause\n      this.pigeonManager.pausePigeons();\n      this.rendererManager.setAnimationLoop(null);\n      if (AudioManager.isPermanentlyMute) {\n        // Don't do anything\n      } else {\n        AudioManager.release();\n      }\n    }\n  }\n\n  // Instantiate pigeon geometry. \n  beginWorld() {\n    // Start playing all the videos.\n    this.frontVideoRef.current.play();\n    console.log('Playing all videos.');\n\n    // Target setup.\n    let currentPatternType = this.guiRef.current.getCurPatternType();  \n    this.pigeonManager.setupTarget(currentPatternType);\n\n    // GPUPigeon and GPURenderer\n    this.pigeonManager.setupPigeonGPU(this.rendererManager.renderer, this.scene);\n  }\n\n  enterWorld() {\n    // Animate the camera zooming into the skybox. \n    this.cameraControl.initialTween(this.props.onInitialCameraAnimationDone); \n  }\n\n  onPatternChanged(newPatternType) {\n    this.pigeonManager.setNewPatternType(newPatternType);\n  }\n\n  onShootPigeon() {\n    if (this.shouldAnimate) {\n      let isFlockInShock = this.pigeonManager.shootPigeon();\n      if (isFlockInShock){\n        // If the flock is in shock, disable the pigeon param temporarily\n        // to avoid further value adjustment during this process.\n        // The gui will be enabled again when the pigeons are no longer in shock\n        let pigeonParams = this.guiRef.current.getPigeonParamFolder();\n        pigeonParams.disabled = true;\n      }\n    }     \n  }\n\n  scrollTo() {\n    elementScrollIntoView(this.worldRef.current, {\n      behavior: 'smooth',\n      block: 'start'\n    });\n  }\n}\n\nexport default Radium(World);\n","const color = {\n    white: '#ffffff',\n    darkWithAlpha: 'rgb(0, 0, 0, 0.4)',\n    button: 'rgb(255, 255, 255, 0.4)',\n    link: '#D34C00',\n    panel: '#E7EFE0',\n    lightBlue: '#E6E9EC',\n    darkBlue: '#67749C',\n    midGrey: '#B2B6C2',\n    brown: '#91614B',\n    purple: '#5C5884',\n    orange: '#B5604C'\n};\n\nconst fontSize = {\n    extraSmall: '8px',\n    verySmall: '12px',\n    lessSmall: '14px',\n    small: '16px',\n    lessBig: '18px',\n    big: '20px',\n    littleBig: '22px',\n    veryBig: '24px',\n    extraBig: '28px',\n    huge: '32px',\n    veryHuge: '36px',\n    extraHuge: '40px',\n    massive: '44px',\n    veryMassive: '48px',\n    extraMassive: '52px',\n    enormous: '56px',\n    veryEnormous: '60px',\n    extraEnormous: '64px',\n    insane: '68px',\n    veryInsane: '72px',\n    extraInsane: '76px',\n    gaia: '80px',\n    veryGaia: '84px',\n    extraGaia: '88px'\n};\n\nconst padding = {\n    // Increments of 4\n    extraSmall: '4px',\n    verySmall: '8px',\n    small: '12px',\n    // Incremenets of 8\n    lessBig: '18px',\n    big : '20px',\n    littleBig: '24px',\n    veryBig : '28px',\n    extraBig : '36px',\n    // Increments of 12\n    huge: '52px',\n    veryHuge: '64px',\n    extraHuge: '76px',\n    // Incremenets of 16\n    massive: '92px',\n    veryMassive: '108px',\n    extraMassive: '124px',\n    // Increment of 20\n    enourmous: '100px',\n    veryEnormous: '120px',\n    extraEnormous: '140px',\n    // Increment of 40\n    insane: '160px',\n    veryInsane: '200px',\n    extraInsane: '240px'\n\n};\n\nconst fontFamily = {\n    bebas: 'bebas',\n    mont: 'montserrat',\n    tenor: 'tenorsans'\n};\n\n\nexport { color, fontSize, fontFamily, padding };","export default __webpack_public_path__ + \"static/media/gaugan.a23390f4.mp4\";","/*\r\n  Name: PassengerPigeons.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: This is the Passenger Pigeons component that gets rendered within the Section Panel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { color, fontFamily, padding, fontSize } from '../Utilities/CommonStyles';\r\nimport pp from '../../assets/info/gaugan.mp4'\r\n\r\nconst styles = {\r\n    container: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n\r\n      '@media (min-width: 1200px)': {\r\n        flexDirection: 'row',\r\n        justifyContent: 'center'\r\n      }\r\n    },\r\n\r\n    ppVideo: {\r\n      width: '100%',\r\n\r\n      '@media (min-width: 1200px)': {\r\n        width: '300px',\r\n        objectFit: 'cover'\r\n      }\r\n    },\r\n\r\n    content: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      justifyContent: 'center'\r\n    },\r\n    \r\n    title: {\r\n      textAlign: 'center',\r\n      color: color.darkBlue,\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.veryBig,\r\n      marginTop: padding.big,\r\n      letterSpacing: 1,\r\n\r\n      '@media (min-width: 768px)': {\r\n        fontSize: fontSize.extraBig\r\n      },\r\n      \r\n      '@media (min-width: 1024px)': {\r\n\r\n      },\r\n\r\n      '@media (min-width: 1200px)': {\r\n        fontSize: fontSize.huge\r\n      }\r\n    },\r\n\r\n    info: {\r\n      fontFamily: fontFamily.tenor,\r\n      padding: padding.small,\r\n      fontSize: fontSize.lessSmall,\r\n      color: color.darkBlue,\r\n\r\n      '@media (min-width: 768px)': {\r\n        fontSize: fontSize.lessSmall\r\n      },\r\n      \r\n      '@media (min-width: 1024px)': {\r\n        fontSize: fontSize.small\r\n      },\r\n\r\n      '@media (min-width: 1200px)': {\r\n        fontSize: fontSize.lessBig\r\n      },\r\n\r\n      '@media (min-width: 1400px)': {\r\n        fontSize: fontSize.big\r\n      }\r\n    }\r\n};\r\n\r\nconst contentA = \"The Lost Passage is a digitally reconstructed environment of a swarm of artificial passenger pigeons, which went extinct in the early 20th century. They once grew to a population of over 5 billion in the 1800s before going into extinction within four decades due to human intervention. The last known flock of these pigeons was raised in careful captivity at University of Chicago and migrated through cargo trains across North America every year.\";\r\nconst contentB = \"In their new digital home on the internet, they inhabit a never-ending, sublime, yet destitute memory of a lost landscape. However, paradoxically they are confined within the six walls of this space. By using artificial intelligence and machine learning, The Lost Passage reflects upon the historical moment of passenger pigeons holocene extinction and resurrects a memory of this lost species.\";\r\n\r\nclass PassengerPigeons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <video style={styles.ppVideo} autoPlay playsInline muted loop src={pp} />\r\n        <div style={styles.content}>\r\n          <div style={styles.title}>\r\n            THE LOST PASSAGE\r\n          </div>\r\n          <div style={styles.info}>\r\n            {contentA}\r\n            <br /><br />\r\n            {contentB}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(PassengerPigeons);","export default __webpack_public_path__ + \"static/media/pigeon.fbcc625c.mp4\";","/*\r\n  Name: ClimateStatement.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: This is the Climate Statement component that gets rendered within the Section Panel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { color, fontFamily, padding, fontSize } from '../Utilities/CommonStyles';\r\nimport gaugan from '../../assets/info/pigeon.mp4'\r\n\r\nconst styles = {\r\n    container: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n\r\n        '@media (min-width: 1200px)': {\r\n          flexDirection: 'row',\r\n          justifyContent: 'center'\r\n        }\r\n    },\r\n\r\n    video: {\r\n      width: '100%',\r\n\r\n      '@media (min-width: 1200px)': {\r\n        width: '300px',\r\n        objectFit: 'cover'\r\n      }\r\n    },\r\n\r\n    content: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      justifyContent: 'center'\r\n    },\r\n    \r\n    title: {\r\n      textAlign: 'center',\r\n      color: color.darkBlue,\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.veryBig,\r\n      marginTop: padding.big,\r\n      letterSpacing: 1,\r\n\r\n      '@media (min-width: 768px)': {\r\n        fontSize: fontSize.extraBig\r\n      },\r\n      \r\n      '@media (min-width: 1024px)': {\r\n\r\n      },\r\n\r\n      '@media (min-width: 1200px)': {\r\n        fontSize: fontSize.huge\r\n      }\r\n    },\r\n\r\n    info: {\r\n      fontFamily: fontFamily.tenor,\r\n      padding: padding.small,\r\n      fontSize: fontSize.lessSmall,\r\n      color: color.darkBlue,\r\n\r\n      '@media (min-width: 768px)': {\r\n        fontSize: fontSize.lessSmall\r\n      },\r\n      \r\n      '@media (min-width: 1024px)': {\r\n        fontSize: fontSize.small\r\n      },\r\n\r\n      '@media (min-width: 1200px)': {\r\n        fontSize: fontSize.lessBig\r\n      },\r\n\r\n      '@media (min-width: 1400px)': {\r\n        fontSize: fontSize.big\r\n      }\r\n    }\r\n};\r\n\r\nconst contentA = \"It was a grim awakening in 1914 when the passenger pigeons faced extinction. This displayed the capability of industrial humanity, which annihilated even the most plentiful of natural resources. The Lost Passage reappropriates the past to pose questions about our future - how many extinct species will it take to recalibrate our self-interests? Can we reverse the damage that has been done due to our need for power, control, and authority over other living beings? \";\r\nconst contentB = \"Perhaps through the lens of this work, the audience may reflect upon our lack of empathy towards other living beings, our guileful ways of harming others for self-interests, and our problematic perception that nature is the implacable enemy that needs to be civilized, contained, and controlled.\";\r\n \r\n\r\n\r\nclass ClimateStatement extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.content}>\r\n          <div style={styles.title}>\r\n            CLIMATE STATEMENT\r\n          </div>\r\n          <div style={styles.info}>\r\n            {contentA}\r\n            <br /><br />\r\n            {contentB}\r\n          </div>\r\n        </div>\r\n        <video style={styles.video} src={gaugan} autoPlay playsInline muted loop/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(ClimateStatement);","/*\r\n  Name: Footer.js\r\n  Author: Amay Kataria\r\n  Date: 10/27/2021\r\n  Description: A simple footer components\r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { color, fontFamily, padding, fontSize } from '../Utilities/CommonStyles';\r\n\r\nconst styles = {\r\n    container: {\r\n      marginTop: padding.veryBig, \r\n      color: color.darkBlue,\r\n      fontFamily: fontFamily.tenor   \r\n    },\r\n\r\n    website: {      \r\n      letterSpacing: 2.0, \r\n      fontSize: fontSize.verySmall,\r\n      width: '100vw',\r\n      backgroundColor: color.darkBlue,\r\n      paddingTop: padding.extraSmall,\r\n      paddingBottom: padding.extraSmall,\r\n      color: color.lightBlue,\r\n      textAlign: 'center',\r\n      \r\n      '@media (orientation: landscape)': {\r\n        fontSize: fontSize.lessSmall\r\n      },\r\n\r\n      '@media (min-width: 768px)': {\r\n        fontSize: fontSize.lessSmall\r\n      },\r\n      \r\n      '@media (min-width: 1024px)': {\r\n        fontSize: fontSize.small\r\n      },\r\n\r\n      '@media (min-width: 1200px)': {\r\n        fontSize: fontSize.lessBig\r\n      }\r\n    }\r\n};\r\n\r\nclass Footer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.website}>thelostpassage.art, 2021</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(Footer);","export default __webpack_public_path__ + \"static/media/beFantastic.5719ed1c.jpg\";","export default __webpack_public_path__ + \"static/media/artahack.afc70d6b.jpg\";","export default __webpack_public_path__ + \"static/media/supernormal.04eff6ee.jpg\";","export default __webpack_public_path__ + \"static/media/dara.5d8346a9.jpg\";","export default __webpack_public_path__ + \"static/media/amay.0c2f5e8c.jpg\";","export default __webpack_public_path__ + \"static/media/shao.92ba0127.jpg\";","export default __webpack_public_path__ + \"static/media/yu.bcabd1ce.jpg\";","export default __webpack_public_path__ + \"static/media/ong.d510c1bd.jpg\";","/*\r\n  Name: About.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: This is the About Us component that gets rendered within the Section Panel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport Footer from './Footer';\r\nimport { color, fontFamily, fontSize, padding } from '../Utilities/CommonStyles';\r\nimport beFantastic from '../../assets/sponsors/beFantastic.jpg';\r\nimport artahack from '../../assets/sponsors/artahack.jpg';\r\nimport supernormal from '../../assets/sponsors/supernormal.jpg';\r\nimport dara from '../../assets/sponsors/dara.jpg';\r\nimport amay from '../../assets/headshots/amay.jpg';\r\nimport shao from '../../assets/headshots/shao.jpg';\r\nimport yu from '../../assets/headshots/yu.jpg';\r\nimport ong from '../../assets/headshots/ong.jpg';\r\n\r\nconst styles = {\r\n    container: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        width: '100%',\r\n        flexDirection: 'column'\r\n    },\r\n\r\n    title: {\r\n      textAlign: 'center',\r\n      color: color.darkBlue,\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.veryBig,\r\n      marginTop: padding.big,\r\n      letterSpacing: 1,\r\n\r\n      '@media (min-width: 768px)': {\r\n        fontSize: fontSize.extraBig\r\n      },\r\n      \r\n      '@media (min-width: 1024px)': {\r\n\r\n      },\r\n\r\n      '@media (min-width: 1200px)': {\r\n        fontSize: fontSize.huge\r\n      }\r\n    },\r\n\r\n    team: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      marginTop: padding.small,\r\n\r\n      '@media (orientation: landscape)': {\r\n        flexDirection: 'row',\r\n        width: '100%',\r\n        justifyContent: 'center'\r\n      },\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': {\r\n        flexDirection: 'row',\r\n        width: '100%',\r\n        justifyContent: 'center'\r\n      }\r\n    },\r\n\r\n    member: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      marginTop: padding.small,\r\n      marginBottom: padding.small,\r\n      // marginLeft: padding.huge,\r\n      // paddingRight: padding.huge,\r\n\r\n      '@media (orientation: landscape)': {\r\n        marginLeft: padding.lessBig,\r\n        marginRight: padding.lessBig        \r\n      },\r\n\r\n      '@media (min-width: 768px)': {\r\n        marginLeft: padding.lessBig,\r\n        marginRight: padding.lessBig        \r\n      },\r\n\r\n      '@media (min-width: 1024px)': {\r\n        marginLeft: padding.big,\r\n        marginRight: padding.big        \r\n      },\r\n\r\n      '@media (min-width: 1200px)': {\r\n        marginLeft: padding.veryBig,\r\n        marginRight: padding.veryBig        \r\n      },\r\n\r\n      '@media (min-width: 1400px)': {\r\n        marginLeft: padding.huge,\r\n        marginRight: padding.huge        \r\n      }\r\n    },\r\n\r\n    photo: {\r\n      width: '125px',\r\n      height: '125px',\r\n      borderRadius: '75px',\r\n      backgroundColor: color.midGrey,\r\n\r\n      '@media (orientation: landscape)': {\r\n        width: '100px',\r\n        height: '100px',\r\n        borderRadius: '75px'\r\n      },\r\n\r\n      '@media (min-width: 1200px)': {\r\n        width: '150px',\r\n        height: '150px',\r\n        borderRadius: '100px'\r\n      }\r\n    },\r\n\r\n    infoContainer: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      fontFamily: fontFamily.tenor,\r\n      marginTop: padding.small\r\n    },\r\n\r\n    name: {\r\n      color: color.brown,\r\n      fontSize: fontSize.small,\r\n      textAlign: 'center',\r\n      width: '100%',\r\n\r\n      '@media (orientation: landscape)': {\r\n        fontSize: fontSize.lessSmall\r\n      },\r\n\r\n      '@media (min-width: 768px)': {\r\n        fontSize: fontSize.lessBig\r\n      },\r\n      \r\n      '@media (min-width: 1024px)': {\r\n        fontSize: fontSize.big\r\n      },\r\n\r\n      '@media (min-width: 1200px)': {\r\n        fontSize: fontSize.big\r\n      },\r\n\r\n      '@media (min-width: 1400px)': {\r\n        fontSize: fontSize.big\r\n      }\r\n    },\r\n\r\n    location: {\r\n      color: color.darkBlue,\r\n      fontSize: fontSize.lessSmall,\r\n      textAlign: 'center',\r\n\r\n      '@media (orientation: landscape)': {\r\n        fontSize: fontSize.verySmall\r\n      },\r\n\r\n      '@media (min-width: 768px)': {\r\n        fontSize: fontSize.small\r\n      },\r\n      \r\n      '@media (min-width: 1024px)': {\r\n        fontSize: fontSize.lessBig\r\n      },\r\n\r\n      '@media (min-width: 1200px)': {\r\n        fontSize: fontSize.lessBig\r\n      },\r\n\r\n      '@media (min-width: 1400px)': {\r\n        fontSize: fontSize.lessBig\r\n      }\r\n    },\r\n\r\n    moreMargin: {\r\n      marginTop: padding.veryBig\r\n    },\r\n\r\n    sponsors: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      marginTop: padding.small,\r\n\r\n      '@media (orientation: landscape)': {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-evenly'\r\n      },\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-evenly'\r\n      },\r\n      \r\n      '@media (min-width: 1024px)': {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-evenly'\r\n      }\r\n    },\r\n    \r\n    image: {\r\n      width: '100%'\r\n    },\r\n\r\n    imgLink: {\r\n      marginTop: padding.small,\r\n\r\n      width: '50%',\r\n\r\n      '@media (orientation: landscape)': {\r\n        width: '20%',\r\n      },\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': {\r\n        width: '20%'\r\n      },\r\n\r\n      '@media (min-width: 1024px)': {\r\n        maxWidth:'275px' \r\n      }\r\n    }\r\n};\r\n\r\nclass About extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let kianPeng = this.getKianPeng();\r\n    let amay = this.getAmay();\r\n    let shao = this.getShao();\r\n    let yu = this.getYu();\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.title}>\r\n          THE TEAM\r\n        </div>   \r\n        <div style={styles.team}>\r\n          {amay}\r\n          {shao}\r\n          {yu}\r\n          {kianPeng}\r\n        </div>\r\n        <div style={[styles.title, styles.moreMargin]}>\r\n            SUPPORTED BY\r\n          </div>\r\n        <div style={styles.sponsors}>\r\n          <a style={styles.imgLink} href='https://www.dara.network/bftogether/' target='_blank' rel=\"noreferrer\">\r\n            <img style={styles.image} src={beFantastic} alt='befantastic'/>\r\n          </a>\r\n          <a style={styles.imgLink} href='https://artahack.io/' target='_blank' rel=\"noreferrer\">\r\n            <img style={styles.image} src={artahack} alt='artahack'/>\r\n          </a>\r\n          <a style={styles.imgLink} href='https://www.instagram.com/supernormal.space/?hl=en' target='_blank' rel=\"noreferrer\">\r\n            <img style={styles.image} src={supernormal} alt='supernormal'/>\r\n          </a>\r\n          <a style={styles.imgLink} href='https://dara.network/' target='_blank' rel=\"noreferrer\">\r\n            <img style={styles.image} src={dara} alt='dara'/>\r\n          </a>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getKianPeng() {\r\n    return (\r\n      <a href='https://www.ongkianpeng.art/' target='_blank' rel=\"noreferrer\" style={styles.member}>\r\n        <img src={ong} alt='ong' style={styles.photo} />\r\n        <div style={styles.infoContainer}>\r\n          <div style={styles.name}>Ong Kian-Peng</div>\r\n          <div style={styles.location}>Mentor</div>\r\n          <div style={styles.location}>Singapore</div>\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n\r\n  getAmay() {\r\n    return (\r\n      <a href='https://amaykataria.com' target='_blank' rel=\"noreferrer\"  style={styles.member}>\r\n        <img src={amay} alt='amay' style={styles.photo} />       \r\n        <div style={styles.infoContainer}>\r\n          <div style={styles.name}>Amay Kataria</div>\r\n          <div style={styles.location}>New-Media Artist</div>\r\n          <div style={styles.location}>USA</div>\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n\r\n  getShao() {\r\n    return (\r\n      <a href='https://www.linkedin.com/in/kshaohui/' target='_blank' rel=\"noreferrer\"  style={styles.member}>\r\n        <img src={shao} alt='shao' style={styles.photo} />\r\n        <div style={styles.infoContainer}>\r\n          <div style={styles.name}>Shaohui Kwok</div>\r\n          <div style={styles.location}>Cultural Producer</div>\r\n          <div style={styles.location}>Singapore</div>\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n  \r\n  getYu() {\r\n    return (\r\n      <a href='https://www.linkedin.com/in/yu-jeng-kuo-696133aa/' target='_blank' rel=\"noreferrer\"  style={styles.member}>\r\n        <img src={yu} alt='yu' style={styles.photo} />\r\n        <div style={styles.infoContainer}>\r\n          <div style={styles.name}>Yu-Jeng Kuo</div>\r\n          <div style={styles.location}>Software Engineer</div>\r\n          <div style={styles.location}>Singapore</div>\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(About);","/*\r\n  Name: SectionPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/30/2021\r\n  Description: Each section that contains information about the website. This content is passed in from ContentPanel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\nimport { elementScrollIntoView } from 'seamless-scroll-polyfill'\r\n\r\nimport { PanelTitle } from './ContentPanel';\r\nimport PassengerPigeons from './PassengerPigeons'\r\nimport ClimateStatement from './ClimateStatement'\r\nimport About from './About'\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        //background: '-webkit-linear-gradient(top, #e6e9ec 0%,#f9fdff 100%)', /* Chrome10-25,Safari5.1-6 */\r\n        // background: '#e6e9ec',\r\n        // background: '-moz-linear-gradient(top, #e6e9ec 0%, #f9fdff 100%)', /* FF3.6-15 */\r\n        // background: '-webkit-linear-gradient(top, #e6e9ec 0%,#f9fdff 100%)', /* Chrome10-25,Safari5.1-6 */\r\n        background: 'linear-gradient(to bottom, #e6e9ec 0%,#f9fdff 100%)' /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\r\n    }\r\n};\r\n\r\nclass SectionPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n\r\n    this.containerRef = React.createRef(); \r\n  }\r\n\r\n  render() {\r\n    let panel = this.getPanel(); \r\n    return (\r\n      <div style={styles.container} ref={this.containerRef}>\r\n        {panel}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getPanel() {\r\n    if (this.props.title === PanelTitle.PIGEONS) {\r\n      return <PassengerPigeons />\r\n    } else if (this.props.title === PanelTitle.CLIMATE) {\r\n      return <ClimateStatement />\r\n    } else if (this.props.title === PanelTitle.ABOUT) {\r\n      return <About />\r\n    }\r\n  }\r\n\r\n  scrollTo() {\r\n    setTimeout(() => {\r\n      elementScrollIntoView(this.containerRef.current, {\r\n        behavior: 'smooth',\r\n        block: 'start'\r\n      });\r\n    }, 50); // Give a little timeout so the panel can be made visible first.\r\n  }\r\n}\r\n\r\nexport default Radium(SectionPanel);","/*\r\n  Name: ContentPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/30/2021\r\n  Description: Collection of information panels that contain information about the website. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport SectionPanel from './SectionPanel';\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    }\r\n};\r\n\r\nexport const PanelTitle = {\r\n  PIGEONS: 'PASSENGER PIGEONS',\r\n  CLIMATE: 'CLIMATE STATEMENT',\r\n  ABOUT: 'ABOUT US'\r\n}\r\n\r\nclass ContentPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n\r\n    this.pigeonPanelRef = React.createRef();\r\n    this.climatePanelRef = React.createRef();\r\n    this.aboutPanelRef = React.createRef(); \r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <SectionPanel ref={this.pigeonPanelRef} title={PanelTitle.PIGEONS} panelNum={0} />\r\n        <SectionPanel ref={this.climatePanelRef} title={PanelTitle.CLIMATE} panelNum={1} />\r\n        <SectionPanel ref={this.aboutPanelRef} title={PanelTitle.ABOUT} panelNum={0} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  scroll(panelTitle) {\r\n    if (panelTitle === PanelTitle.PIGEONS) {\r\n      this.pigeonPanelRef.current.scrollTo();\r\n    } else if (panelTitle === PanelTitle.CLIMATE) {\r\n      this.climatePanelRef.current.scrollTo();\r\n    } else if (panelTitle === PanelTitle.ABOUT) {\r\n      this.aboutPanelRef.current.scrollTo(); \r\n    }\r\n  }\r\n}\r\n\r\nexport default Radium(ContentPanel);","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMute(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"67px\",\n    height: \"54px\",\n    viewBox: \"0 0 67 54\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Mute\",\n    transform: \"translate(2.5 2.5)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M33.389 0L16.235 14.837L0 14.837L0 33.93L15.989 33.93L33.389 48.981L33.389 0L33.389 0Z\",\n    id: \"Shape\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"inherit\",\n    strokeWidth: 5,\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Shape\",\n    transform: \"translate(42.671387 14.730957)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 0L0 19\",\n    id: \"Line\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"#FFFFFF\",\n    strokeWidth: 5,\n    strokeLinecap: \"square\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.5 0L19 19\",\n    id: \"Line-2\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"#FFFFFF\",\n    strokeWidth: 5,\n    strokeLinecap: \"square\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMute);\nexport default __webpack_public_path__ + \"static/media/mute.b0ed1c4e.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVolume(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"39px\",\n    height: \"54px\",\n    viewBox: \"0 0 39 54\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Volume\",\n    transform: \"translate(2.5 2.5)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M33.389 0L16.235 14.837L0 14.837L0 33.93L15.989 33.93L33.389 48.981L33.389 0L33.389 0Z\",\n    id: \"Shape\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"inherit\",\n    strokeWidth: 5,\n    strokeLinejoin: \"round\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgVolume);\nexport default __webpack_public_path__ + \"static/media/volume.e241ae20.svg\";\nexport { ForwardRef as ReactComponent };","/*\r\n  Name: Navigation.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: This components holds the title of the project and the about button\r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { fontFamily, color, fontSize, padding } from '../Utilities/CommonStyles.js'\r\nimport { PanelTitle } from './ContentPanel.js';\r\nimport { ReactComponent as Pigeon } from '../../assets/icons/pigeon.svg'\r\nimport { ReactComponent as Mute } from '../../assets/icons/mute.svg'\r\nimport { ReactComponent as Volume } from '../../assets/icons/volume.svg'\r\nimport { isMobile } from 'react-device-detect';\r\nimport AudioManager from '../Managers/AudioManager.js';\r\n\r\nconst animation = {\r\n  color: Radium.keyframes({\r\n    '0%': {\r\n      backgroundColor: color.darkBlue\r\n    },\r\n    '50%': {\r\n      backgroundColor: color.purple,\r\n    },\r\n    '100%': {\r\n      backgroundColor: color.orange,\r\n    }\r\n  })\r\n}\r\n\r\nconst styles = {\r\n    absoluteContainer: {\r\n      position: 'absolute',\r\n      width: '100%',\r\n      height: '100%',\r\n      display: 'flex',\r\n      flexDirection: 'column', \r\n      alignItems: 'center',\r\n      visibility: 'visible',     \r\n      zIndex: 1,\r\n\r\n      '@media (min-width: 768px) and (orientation: landscape)': {\r\n        alignItems: 'flex-start'\r\n      }\r\n    },\r\n\r\n    contentContainer: {\r\n      padding: padding.veryBig\r\n    },\r\n\r\n    hidden: {\r\n      visibility: 'hidden'\r\n    },\r\n\r\n    homeTitle: {\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.huge,\r\n      letterSpacing: 2,\r\n      color: color.darkBlue,\r\n      cursor: 'default',\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': {\r\n        fontSize: fontSize.veryHuge,\r\n      },\r\n\r\n      '@media (min-width: 1024px)': {\r\n        fontSize: fontSize.extraHuge,\r\n      }\r\n    },\r\n\r\n    titleContainer: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n\r\n      '@media (min-width: 768px) and (orientation: landscape)': {\r\n        alignItems: 'flex-start'\r\n      }\r\n    },\r\n\r\n    title: {\r\n        fontFamily: fontFamily.tenor,\r\n        fontSize: fontSize.big,\r\n        letterSpacing: 2,\r\n        color: color.darkBlue,\r\n        cursor: 'crosshair',\r\n        paddingTop: padding.verySmall,\r\n        textShadow: '1px 1px 3px ' + color.darkBlue,\r\n\r\n        '@media (min-width: 768px) and (orientation: portrait)': {\r\n          fontSize: fontSize.veryBig\r\n        },\r\n\r\n        '@media (min-width: 1024px)': {\r\n          fontSize: fontSize.veryBig\r\n        }\r\n    },\r\n\r\n    hover: {\r\n      color: color.orange,\r\n      textShadow: '1px 1px 3px ' + color.orange,\r\n    },\r\n\r\n    homeButton: {\r\n      backgroundColor: color.darkBlue,\r\n      padding: padding.verySmall,\r\n      width: fontSize.big,\r\n      height: fontSize.big,\r\n      borderRadius: fontSize.big,\r\n      marginBottom: padding.extraSmall,\r\n\r\n      '@media (min-width: 1024px)': {\r\n        padding: padding.verySmall,\r\n        borderRadius: fontSize.extraBig,\r\n        width: fontSize.extraHuge,\r\n        height: fontSize.extraHuge,\r\n      }\r\n    },\r\n\r\n    colorFlick: {\r\n      animation: 'x 3s ease-in-out infinite',\r\n      animationName: animation.color,\r\n      animationDirection: 'alternate'\r\n    },\r\n\r\n    homeHover: {\r\n      backgroundColor: color.brown\r\n    },\r\n\r\n    svg: {\r\n      width: '100%',\r\n      height: '100%',\r\n      fill: 'white'\r\n    },\r\n\r\n    muteSvg: {\r\n      width: '90%',\r\n      height: '90%',\r\n      fill: 'white'\r\n    },\r\n\r\n    soundButton: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      backgroundColor: color.darkBlue,\r\n      padding: padding.verySmall,\r\n      width: fontSize.big,\r\n      height: fontSize.big,\r\n      borderRadius: fontSize.big,\r\n      zIndex: 1,\r\n\r\n      '@media (min-width: 1024px)': {\r\n        padding: padding.verySmall,\r\n        borderRadius: fontSize.extraBig,\r\n        width: fontSize.extraHuge,\r\n        height: fontSize.extraHuge,\r\n      }\r\n    },\r\n\r\n    buttonCollection: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      position: 'fixed',\r\n      right: padding.verySmall, \r\n      bottom: padding.veryBig,\r\n      zIndex: 1,\r\n\r\n      '@media (min-width: 1024px)': {\r\n        right: padding.small,\r\n      }\r\n    }\r\n};\r\n\r\nclass Navigation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // On iOS we never are playing sound in the beginning. So we are paused by default. \r\n    let isPlayingSoundInitialState = isMobile ? false : true; \r\n\r\n    this.state={ \r\n      isHoveringPigeons: false,\r\n      isHoveringClimate: false,\r\n      isHoveringAbout: false,\r\n      isHomeButtonHovering: false, \r\n      showHomeButton: false,\r\n      isPlayingSound: isPlayingSoundInitialState\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let pigeonStyle = this.state.isHoveringPigeons ? [styles.title, styles.hover] : styles.title;\r\n    let climateStyle = this.state.isHoveringClimate ? [styles.title, styles.hover] : styles.title;\r\n    let aboutStyle = this.state.isHoveringAbout ? [styles.title, styles.hover] : styles.title; \r\n    let homeButton = this.getHomeButton(); \r\n    let soundButton = this.getSoundButton();\r\n    return (\r\n      <div style={styles.absoluteContainer}>\r\n        <div style={styles.contentContainer}>\r\n          <div style={styles.homeTitle}>THE LOST PASSAGE</div>\r\n          <div style={styles.titleContainer}>\r\n            <div style={pigeonStyle}\r\n                onClick={this.onClick.bind(this, PanelTitle.PIGEONS)}\r\n                onMouseEnter={this.onHoverPigeons.bind(this)} \r\n                onMouseLeave={this.onHoverPigeons.bind(this)}>\r\n              ABOUT\r\n            </div>\r\n            <div style={climateStyle} \r\n              onClick={this.onClick.bind(this, PanelTitle.CLIMATE)}\r\n              onMouseEnter={this.onHoverClimate.bind(this)}\r\n              onMouseLeave={this.onHoverClimate.bind(this)}>\r\n              CLIMATE\r\n            </div>\r\n            <div style={aboutStyle}\r\n                onClick={this.onClick.bind(this, PanelTitle.ABOUT)}\r\n                onMouseEnter={this.onHoverAbout.bind(this)}\r\n                onMouseLeave={this.onHoverAbout.bind(this)}>\r\n              TEAM\r\n            </div>\r\n          </div>\r\n          <div style={styles.buttonCollection}>\r\n            {homeButton}\r\n            {soundButton}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getSoundButton() {\r\n    let button = this.state.isPlayingSound ? <Volume style={styles.muteSvg} /> : <Mute style={styles.muteSvg} />;\r\n    return (\r\n      <div onClick={this.setSound.bind(this)} style={[styles.soundButton, styles.colorFlick]} >\r\n         {button}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  setSound() {\r\n    let isPlaying = this.state.isPlayingSound; \r\n    if (isPlaying) {\r\n      AudioManager.release();\r\n      AudioManager.isPermanentlyMute = true; // We are muting it permanently, so sound isn't affected from anywhere else. \r\n    } else {\r\n      // Trigger the sound\r\n      AudioManager.trigger();\r\n    } \r\n\r\n    // Update state\r\n    this.setState({\r\n      isPlayingSound: !this.state.isPlayingSound\r\n    });\r\n  }\r\n\r\n  getHomeButton() {\r\n    let buttonStyle = this.state.showHomeButton ? [styles.homeButton, styles.colorFlick] : [styles.homeButton, styles.hidden];\r\n    buttonStyle = this.state.isHomeButtonHovering ? [styles.homeButton, styles.homeHover] : buttonStyle; \r\n    return (\r\n      <div style={buttonStyle}\r\n          onClick={this.onHomeButtonClick.bind(this)}\r\n          onMouseEnter={this.onHomeButtonHover.bind(this)}\r\n          onMouseLeave={this.onHomeButtonHover.bind(this)}>\r\n        <Pigeon style={styles.svg} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onHomeButtonHover() {    \r\n    if (isMobile) {\r\n      // Don't update anything\r\n    } else {\r\n      let hovering = this.state.isHomeButtonHovering; \r\n      this.setState({\r\n        isHomeButtonHovering: !hovering\r\n      }); \r\n    }    \r\n  }\r\n\r\n  onHoverPigeons() {\r\n    if (isMobile) {\r\n      // Don't update anything.\r\n    } else {\r\n      let hovering = this.state.isHoveringPigeons;\r\n      this.setState({\r\n        isHoveringPigeons: !hovering\r\n      }); \r\n    }\r\n  }\r\n\r\n  onHoverClimate() {\r\n    if (isMobile) {\r\n      // Don't update anything\r\n    } else {\r\n      let hovering = this.state.isHoveringClimate;\r\n      this.setState({\r\n        isHoveringClimate: !hovering\r\n      }); \r\n    }\r\n  }\r\n\r\n  onHoverAbout() {\r\n    if (isMobile) {\r\n      // Don't update anything. \r\n    } else {\r\n      let hovering = this.state.isHoveringAbout;\r\n      this.setState({\r\n        isHoveringAbout: !hovering\r\n      }); \r\n    }\r\n  }\r\n\r\n  onClick(panelTitle) {\r\n    this.props.onClickNavTitle(panelTitle);\r\n    this.setState({\r\n      showHomeButton: true\r\n    });\r\n  }\r\n\r\n  onHomeButtonClick() {\r\n    this.props.onClickHomeButton(); \r\n    setTimeout(() => {\r\n      this.setState({\r\n        showHomeButton: false\r\n      }); \r\n    }, 250);\r\n  }\r\n}\r\n\r\nexport default Radium(Navigation);","/*\r\n  Name: EnterPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: This is the first panel that the user sees. It's the overlay panel when the user comes to the website. \r\n  It has a transparent finish so one can see the terrain underneath it. It shows the title of the project and the \r\n  Enter button to enter the website. \r\n*/\r\n\r\nimport React from 'react'\r\n\r\nimport Radium from 'radium'\r\nimport { bounceOut, zoomIn } from 'react-animations'\r\nimport { fontFamily, color, fontSize, padding } from '../Utilities/CommonStyles.js'\r\nimport { ReactComponent as Pigeon } from '../../assets/icons/pigeon.svg'\r\nimport { IsPigeonManagerReady } from '../Managers/PigeonManager.js'\r\nimport AudioManager from '../Managers/AudioManager.js'\r\nimport { IsWorldReady } from './World.js'\r\nimport { isMobile } from 'react-device-detect'\r\n\r\nconst Mobile_Timeout = 3000; // 3.5 seconds\r\n\r\nconst FLASH_DURATION = '1.5s';\r\nconst TopMessage = \"\\\"They existed in billions, but today they are lost and revered only in museums.\\\"\";\r\nconst BottomMessage = \"\\\"May we gather the strength to confront the reality of our climate condition.\\\"\";\r\nconst LeftMessage = \"\\\"A cruel and blind human intervention led to the extinction of this species.\\\"\";\r\nconst RightMessage = \"\\\"No matter how abundant something is-if one's not careful, one can lose it.\\\"\";\r\n\r\nconst animation = {\r\n  pulse: Radium.keyframes({\r\n    '0%': {\r\n      transform: 'scale(1.0)'\r\n    },\r\n    '50%': {\r\n      transform: 'scale(2.0)',\r\n    },\r\n    '100%': {\r\n      transform: 'scale(1.0)',\r\n    }\r\n  })\r\n}\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'fixed',\r\n        top: '0%',\r\n        left: '0%',\r\n        bottom: '0%',\r\n        right: '0%',\r\n        overflow: 'hidden',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 1,\r\n        // background: '#e6e9ec',\r\n        // background: '-moz-linear-gradient(top, #e6e9ec 0%, #f9fdff 100%)', /* FF3.6-15 */\r\n        // background: '-webkit-linear-gradient(top, #e6e9ec 0%,#f9fdff 100%)', /* Chrome10-25,Safari5.1-6 */\r\n        background: 'linear-gradient(to bottom, #e6e9ec 0%,#f9fdff 100%)' /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\r\n    },\r\n\r\n    title: {\r\n        fontFamily: fontFamily.bebas,\r\n        fontSize: fontSize.veryHuge,\r\n        textAlign: 'center',\r\n        maxWidth: '200px',\r\n        letterSpacing: 5,\r\n        opacity: 1,\r\n        color: color.darkBlue,\r\n        \r\n        '@media (min-width: 568px)': {\r\n          maxWidth: '100%'\r\n        },\r\n\r\n        '@media (min-width: 768px) and (orientation: portrait)': {\r\n          fontSize: fontSize.massive\r\n        },\r\n\r\n        '@media (min-width: 1024px) and (orientation: landscape)': {\r\n          fontSize: fontSize.extraInsane,\r\n        },\r\n\r\n        '@media (min-width: 1024px) and (orientation: portrait)': {\r\n          fontSize: fontSize.extraInsane,\r\n        }\r\n    },\r\n\r\n    loadContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center'\r\n    },\r\n\r\n    svgContainer: {\r\n      fontSize: fontSize.veryBig,\r\n    },\r\n\r\n    loadTitle: {\r\n      fontFamily: fontFamily.mont,\r\n      fontSize: fontSize.verySmall,\r\n      color: color.darkBlue,\r\n      marginTop: padding.big,\r\n\r\n      '@media (min-width: 1024px)': {\r\n        fontSize: fontSize.small\r\n      }\r\n    },\r\n\r\n    svg: {\r\n      width: '25px',\r\n      height: '25px',\r\n      fill: color.darkBlue,\r\n\r\n      '@media (minWidth: 1024px)': {\r\n        width: '90%',\r\n        height: '90%',\r\n      }\r\n    },\r\n\r\n    flash: {\r\n      animationName: Radium.keyframes(bounceOut, 'bounceOut'),\r\n      animationDuration: FLASH_DURATION,\r\n      animationTimingFunction: 'ease-in-out'\r\n    },\r\n\r\n    svgSimplePulse: {\r\n      animation: 'x 5s linear infinite',\r\n      animationName: animation.pulse\r\n    },\r\n  \r\n    zoom: {\r\n      animationName: Radium.keyframes(zoomIn, 'zoom'),\r\n      animationDuration: '5.0s', // LOAD TIME...\r\n      animationTimingFunction: 'ease-in-out',\r\n      animationFillMode: 'forwards'\r\n    },\r\n\r\n    button: {\r\n        fontFamily: fontFamily.mont,\r\n        color: color.darkBlue,\r\n        fontSize: fontSize.lessBig,\r\n        borderStyle: 'solid',\r\n        borderColor: color.darkBlue,\r\n        borderWidth: '2px',\r\n        marginTop: padding.small,\r\n        padding: padding.verySmall,\r\n        letterSpacing: '2px',\r\n        cursor: 'crosshair',\r\n\r\n        '@media (min-width: 1024px)': {\r\n          fontSize: fontSize.extraBig,\r\n          letterSpacing: '4px',\r\n          borderWidth: '4px',\r\n        }\r\n    },\r\n\r\n    hover: {\r\n      backgroundColor: color.midGrey,\r\n      color: color.white\r\n    },\r\n\r\n    topMessage: {\r\n      position: 'absolute',\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.verySmall,\r\n      textAlign: 'center',\r\n      paddingLeft: padding.verySmall,\r\n      paddingRight: padding.verySmall,\r\n      fontFamily: fontFamily.tenor,\r\n      top: '15px',\r\n\r\n      '@media (orientation: landscape)': {\r\n        fontSize: fontSize.verySmall\r\n      },\r\n\r\n      '@media (min-width: 768px) and (orientation: landscape)': {\r\n        fontSize: fontSize.verySmall\r\n      },\r\n\r\n      '@media (min-width: 568px)': {\r\n        maxWidth: '80%'\r\n      },\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': {\r\n        fontSize: fontSize.lessBig\r\n      },\r\n\r\n      '@media (min-width: 1024px) and (orientation: landscape)': {\r\n        fontSize: fontSize.lessBig,\r\n        top: '30px'\r\n      }\r\n    },\r\n\r\n    leftMessage: {\r\n      position: 'absolute',\r\n      textAlign: 'center',\r\n      maxWidth: '300px',\r\n      left: '-130px',\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.verySmall,\r\n      fontFamily: fontFamily.tenor,\r\n      transform: 'rotate(-90deg)',\r\n\r\n      '@media (orientation: landscape)': {\r\n        fontSize: fontSize.lessSmall\r\n      },\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': { \r\n        maxWidth: '100%',\r\n        fontSize: fontSize.lessBig,\r\n        left: '-250px'\r\n      },\r\n\r\n      '@media (min-width: 1024px) and (orientation: landscape)': {\r\n        fontSize: fontSize.small,\r\n        maxWidth: '100%',\r\n        left: '-250px'\r\n      },\r\n\r\n      '@media (min-width: 1200px) and (orientation: landscape)': {\r\n        left: '-80px'\r\n      }\r\n    },\r\n\r\n    rightMessage: {\r\n      position: 'absolute',\r\n      right: '-130px',\r\n      textAlign: 'center',\r\n      maxWidth: '300px',\r\n      fontSize: fontSize.verySmall,\r\n      fontFamily: fontFamily.tenor,\r\n      color: color.darkBlue, \r\n      transform: 'rotate(90deg)',\r\n\r\n      '@media (orientation: landscape)': {\r\n        fontSize: fontSize.lessSmall\r\n      },\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': { \r\n        maxWidth: '100%',\r\n        fontSize: fontSize.lessBig,\r\n        right: '-250px'\r\n      },\r\n\r\n      '@media (min-width: 1024px) and (orientation: landscape)': {\r\n        fontSize: fontSize.small,\r\n        maxWidth: '100%',\r\n        right: '-250px'\r\n      },\r\n\r\n      '@media (min-width: 1200px) and (orientation: landscape)': {\r\n        right: '-80px'\r\n      }\r\n    },\r\n\r\n    bottomMessage: {\r\n      position: 'absolute',\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.verySmall,\r\n      fontFamily: fontFamily.tenor,\r\n      paddingLeft: padding.big,\r\n      paddingRight: padding.big,\r\n      textAlign: 'center',\r\n      bottom: '15px',\r\n\r\n      '@media (orientation: landscape)': {\r\n        fontSize: fontSize.verySmall\r\n      },\r\n\r\n      '@media (min-width: 568px)': {\r\n        maxWidth: '80%'\r\n      },\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': {\r\n        fontSize: fontSize.lessBig\r\n      },\r\n\r\n      '@media (min-width: 1024px) and (orientation: landscape)': {\r\n        fontSize: fontSize.lessBig,\r\n        bottom: '30px'\r\n      }\r\n    },\r\n\r\n    headsupContainer: {\r\n      marginTop: padding.lessBig,\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      maxWidth: '200px',\r\n\r\n      '@media (max-width: 800px) and (orientation: landscape)': {\r\n        marginTop: padding.small\r\n      },\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': {\r\n        maxWidth: '300px'\r\n      },\r\n\r\n      '@media (min-width: 1024px) and (orientation: portrait)': {\r\n        maxWidth: '400px'\r\n      },\r\n    },\r\n\r\n    hContent: {\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.lessSmall,\r\n      fontFamily: fontFamily.tenor,\r\n      textAlign: 'center',\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': {\r\n        fontSize: fontSize.small\r\n      },\r\n\r\n      '@media (min-width: 1024px) and (orientation: portrait)': {\r\n        fontSize: fontSize.big\r\n      },\r\n    },\r\n\r\n    hContentSmall: {\r\n      fontSize: fontSize.verySmall,\r\n\r\n      '@media (min-width: 768px) and (orientation: portrait)': {\r\n        fontSize: fontSize.lessSmall\r\n      },\r\n\r\n      '@media (min-width: 1024) and (orientation: portrait)': {\r\n        fontSize: fontSize.lessBig\r\n      },\r\n    }\r\n};\r\n\r\nclass EnterPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // Initial render of the component. \r\n    // NOTE: Whenever a component's state is updated, render is called. \r\n    this.state={\r\n        isLoading: false,\r\n        isHovering: false,\r\n        isDisabled: true        \r\n    };\r\n  }\r\n\r\n  // Overriding React function. \r\n  render() {\r\n    let containerStyle = styles.container;\r\n    let content = this.state.isLoading ? this.getLoader() : this.getTitle(); \r\n    let messages = this.getMessages();\r\n    return (\r\n      <div style={containerStyle}>\r\n        {content}\r\n        {messages}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getLoader() {\r\n    let animStyles = [styles.svgContainer, styles.svgSimplePulse];\r\n    return (\r\n      <div style={styles.loadContainer}>\r\n        <div style={animStyles}>\r\n        <Pigeon style={styles.svg} />\r\n       </div>\r\n       <div style={styles.loadTitle}>\r\n         Getting things ready ...\r\n       </div>\r\n      </div>\r\n\r\n    );\r\n  }\r\n\r\n  getTitle() {\r\n    let buttonStyle = this.state.isHovering ? [styles.button, styles.hover] : [styles.button]; \r\n    let headsup = !this.state.isDisabled && isMobile ? this.getMobileHeadsup() : <React.Fragment></React.Fragment>;\r\n    let button = this.state.isDisabled ? <React.Fragment></React.Fragment> : (\r\n      <button \r\n      disabled={this.state.isDisabled}\r\n      onMouseEnter={this.onHoverOn.bind(this)} \r\n      onMouseLeave={this.onHoverOff.bind(this)} \r\n      onClick={this.onEnter.bind(this)} \r\n      style={buttonStyle}>ENTER</button>\r\n    ); \r\n    return (\r\n        <React.Fragment>\r\n            <div style={[styles.title, styles.flash]}\r\n                onAnimationEnd={this.onStartAnimationEnd.bind(this)}>THE LOST PASSAGE</div>\r\n            {button}  \r\n            {headsup}\r\n        </React.Fragment>\r\n    );\r\n  }\r\n\r\n  getMobileHeadsup() {\r\n    return (\r\n      <div style={styles.headsupContainer}>\r\n        <div style={styles.hContent}>Using a mobile device?</div>\r\n        <div style={[styles.hContent, styles.hContentSmall]}>For the full interactive experience, use desktop or laptop.</div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  getMessages() {\r\n    return (\r\n      <React.Fragment>\r\n        <div style={styles.topMessage}>{TopMessage}</div>\r\n        <div style={styles.leftMessage}>{LeftMessage}</div>\r\n        <div style={styles.rightMessage}>{RightMessage}</div>\r\n        <div style={styles.bottomMessage}>{BottomMessage}</div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onEnter() {\r\n    // Give a small delay, so this doesn't block the animation thread. \r\n    setTimeout(() => {\r\n      this.props.onEnterWorld();\r\n    }, 50);\r\n\r\n    // Begin animation. \r\n    this.setState({\r\n        isLoading: true\r\n    });\r\n\r\n    // Keep check if I'm ready. \r\n    this.checkIfReady(); \r\n  }\r\n\r\n  checkIfReady() {\r\n    if (isMobile) {\r\n      setTimeout(() => {\r\n        this.hasFinishedLoading();\r\n      }, Mobile_Timeout); \r\n    } else {\r\n      setTimeout(() => {\r\n        if (IsPigeonManagerReady && IsWorldReady && AudioManager.isAudioManagerReady) {\r\n          this.hasFinishedLoading(); \r\n        } else {\r\n          this.checkIfReady();\r\n        }\r\n      }, 250); \r\n    }\r\n  }\r\n\r\n  hasFinishedLoading() {\r\n    console.log('Has Finished Loading');\r\n    // Tel the world that load is complete. \r\n    this.props.onLoadComplete(); \r\n  }\r\n  \r\n  onHoverOn() {\r\n    if (!this.state.isDisabled) {\r\n      this.setState({\r\n        isHovering: true\r\n      }); \r\n    }\r\n  }\r\n\r\n  onHoverOff() {\r\n    if (!this.state.isDisabled) {\r\n      this.setState({\r\n        isHovering: false\r\n      }); \r\n    }\r\n  }\r\n\r\n  onStartAnimationEnd() {\r\n    // Enable the button now. \r\n    this.setState({\r\n      isDisabled: false\r\n    }); \r\n  }\r\n}\r\n\r\nexport default Radium(EnterPanel);","export default __webpack_public_path__ + \"static/media/mobile_video.632d8245.mp4\";","/*\n  Name: App.js\n  Author: Amay Kataria\n  Date: 08/19/2021\n  Description: Entry point for the application.\n*/\n\nimport React from 'react'\nimport Radium from 'radium'\n\nimport World from './Interface/World.js'\nimport ContentPanel from './Interface/ContentPanel.js';\nimport Navigation from './Interface/Navigation.js'\nimport EnterPanel from './Interface/EnterPanel.js';\nimport AudioManager from './Managers/AudioManager.js';\nimport { isMobile } from 'react-device-detect'\nimport { elementScrollIntoView } from 'seamless-scroll-polyfill'\n\nimport mobilevideo from '../assets/info/mobile_video.mp4'\nimport ExhibitionManager from './Managers/ExhibitionManager.js';\n\nconst styles = {\n  container: {\n    position: 'fixed',\n    top: '0%',\n    bottom: '0%',\n    left: '0%',\n    right: '0%',\n    display: 'flex',\n    flexDirection: 'column',\n    overflow: 'hidden'\n  },\n\n  containerRelative: {\n    position: 'relative'\n  },\n\n  panelStyles: {\n    position: 'relative',\n    display: 'none'\n  },\n\n  panelVisible: {\n    display: 'block'\n  },\n\n  videoCanvas: {\n    position: 'relative',\n    height: '100vh',\n    width: '100vw',\n    objectFit: 'cover',\n    overflow: 'hidden'\n  }\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state={\n      showContentPanel: false,\n      showNavPanel: false,\n      showEnterPanel: true\n    };\n\n    this.worldRef = React.createRef(); \n    this.contentPanelRef = React.createRef();\n    this.navRef = React.createRef();\n    this.mobileVideoRef = React.createRef();\n    this.enterPanelRef = React.createRef(); \n\n    this.shouldPlay = false; \n\n    ExhibitionManager.subscribe(this.onExhibitionUpdated.bind(this));\n  }\n\n  render() {\n    let navPanel = this.state.showNavPanel ? this.getNavPanel() : <React.Fragment></React.Fragment>;\n    let enterPanel = this.state.showEnterPanel ? this.getEnterPanel() : <React.Fragment></React.Fragment>;\n    let contentPanel = this.getContentPanel();\n    let worldContent = this.getWorldContent();\n    let containerStyle = this.state.showContentPanel ? [styles.container, styles.containerRelative] : [styles.container];\n    return (\n      <div style={containerStyle}>\n        {worldContent}\n        {navPanel}\n        {enterPanel}\n        {contentPanel}\n      </div>\n    );\n  }\n\n  onExhibitionUpdated() {\n    let isExhibition = ExhibitionManager.isExhibition; \n    if (isExhibition) {\n      this.setState({\n        showNavPanel: false\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (this.mobileVideoRef.current) {\n      this.mobileVideoRef.current.addEventListener('playing', () => {\n        console.log('Beginning to play the video.');\n        if (!this.shouldPlay) {\n          this.mobileVideoRef.current.pause();\n        }\n      });\n    }\n  }\n\n  getWorldContent() {\n    let videoNode = (\n      <video style={styles.videoCanvas} ref={this.mobileVideoRef} preload='metadata' autoPlay playsInline muted loop>\n        <source src={mobilevideo} />\n      </video>\n    );\n\n    let content = isMobile ? videoNode :\n    (\n      <World ref={this.worldRef} onInitialCameraAnimationDone={this.onInitialCameraAnimationDone.bind(this)} />\n    ); \n\n    return content; \n  }\n\n  getNavPanel() {\n    return (\n      <Navigation ref={this.navRef} \n        onClickNavTitle={this.onClickNavTitle.bind(this)} \n        onClickHomeButton={this.onClickHomeButton.bind(this)}/>\n    );\n  }\n\n  getEnterPanel() {\n    return (\n      <EnterPanel \n        ref={this.enterPanelRef}\n        onEnterWorld={this.onEnterWorld.bind(this)} \n        onLoadComplete={this.onLoadComplete.bind(this)}\n      />\n    );\n  }\n\n  getContentPanel() {\n    let contentPanelStyles = this.state.showContentPanel ? [styles.panelStyles, styles.panelVisible] : [styles.panelStyles];\n    return (\n      <div style={contentPanelStyles}>\n        <ContentPanel ref={this.contentPanelRef} />\n      </div>\n    );\n  }\n\n  onEnterWorld() {\n    if (isMobile) {\n      // Don't do anything. \n    } else {\n      this.worldRef.current.beginWorld();\n    }\n  }\n\n  onLoadComplete() {\n    if (isMobile) {\n      // if (isIOSDevice()) {\n      //   // Don't do anything. Since we can't play audio\n      //   // on iOS until a user directly interacts.\n      // } else {\n      //   // On Android this works. \n      //   AudioManager.trigger();\n      // }\n\n      // Start playing the video.\n      this.shouldPlay = true; \n      this.mobileVideoRef.current.play();\n      this.onInitialCameraAnimationDone();\n    } else {\n      // Trigger sound.\n      AudioManager.trigger();\n      // Begin zoom into the world. \n      this.worldRef.current.enterWorld(); \n    }\n       \n    this.setState({\n      showEnterPanel: false\n    });\n  }\n\n  onInitialCameraAnimationDone() {\n    this.setState({\n      showNavPanel: true\n    });\n  }\n    \n  onClickNavTitle(panelTitle) {\n    // Show the content panel now. \n    this.setState({\n      showContentPanel: true\n    });\n\n    // Trigger scroll.\n    this.contentPanelRef.current.scroll(panelTitle);\n\n    if (isMobile) {\n      // Pause the video\n    } else {\n      // Stop Renderer\n      this.worldRef.current.updateAnimationStatus(false); \n    }\n  }\n\n  onClickHomeButton() {\n    if (isMobile) {\n      // Scroll back up to the video. \n      elementScrollIntoView(this.mobileVideoRef.current, {\n        behavior: 'smooth',\n        block: 'start'\n      });\n    } else {\n      this.worldRef.current.scrollTo(); \n      this.worldRef.current.updateAnimationStatus(true);\n    }\n\n    setTimeout(() => {\n      this.setState({\n        showContentPanel: false\n      });\n    }, 1000); // Give a little timeout so the panel can be made visible first.\n  }\n\n  onMobileVideoLoaded() {\n    this.enterPanelRef.current.setMobileVideoReady(); \n  }\n}\n\nexport default Radium(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './font/stylesheet.css';\nimport App from './components/App';\nimport {StyleRoot} from 'radium'\n\n// Use StyleRoot to enable keyframes and media queries for Javascript type\n// styles with Radium in components. \n// Single render function for the entire application. \nReactDOM.render(<StyleRoot><App /></StyleRoot>, document.getElementById('root'));"],"sourceRoot":""}