(this["webpackJsonpVirtual-Companion"]=this["webpackJsonpVirtual-Companion"]||[]).push([[0],{112:function(e,t,i){e.exports=i(159)},117:function(e,t,i){},118:function(e,t,i){},159:function(e,t,i){"use strict";i.r(t);var n=i(3),a=i.n(n),s=i(76),r=i.n(s),o=(i(117),i(118),i(0)),l=i(2),h=i(4),c=i(5),u=i(7),d=i(1),p=i(33),f=i(77),m=i.n(f),g=new p.a,v=function(){function e(t){Object(o.a)(this,e),this.loadTerrain(t)}return Object(l.a)(e,[{key:"loadTerrain",value:function(e){var t=this;g.load(m.a,(function(i){t.terrain=i.scene,t.parent=new d.Group,t.parent.add(t.terrain),t.parent.frustumCulled=!1,t.parent.castShadow=!0,t.parent.receiveShadow=!0,t.terrainPosition=t.parent.position,t.terrainRotation=t.parent.rotation,t.terrainScale=t.parent.scale,t.terrainScale.set(100,100,100),e.add(t.parent)}),void 0,(function(e){console.error(e)}))}},{key:"getMesh",value:function(){return this.parent}}]),e}(),y=i(78),P=i.n(y)()(d),b={EnableControls:!1,EnablePan:!0,AutoRotate:!1,RotateSpeed:.1,EnableKeys:!0},S=function(){function e(){Object(o.a)(this,e),this.camera=new d.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.05,2e4),this.camera.position.set(0,125,50),this.camera.lookAt(new d.Vector3(0,0,0)),this.camera.frustumCulled=!0,this.controls=new P(this.camera)}return Object(l.a)(e,[{key:"update",value:function(){this.updateControls()}},{key:"updateControls",value:function(){this.controls.update(),this.controls.enablePan=b.EnablePan,this.controls.autoRotate=b.AutoRotate,this.controls.autoRotateSpeed=b.RotateSpeed,this.controls.enabled=b.EnableControls,this.controls.enableKeys=b.EnableKeys}},{key:"getCamera",value:function(){return this.camera}}]),e}(),k=function e(t){Object(o.a)(this,e);var i=new d.DirectionalLight(16777215);i.intensity=1,i.position.set(0,100,0).normalize(),t.add(i)},w=function(){function e(){Object(o.a)(this,e),this.renderer=new d.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(741907,1),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=d.sRGBEncoding}return Object(l.a)(e,[{key:"getDomElement",value:function(){return this.renderer.domElement}},{key:"render",value:function(e,t){this.renderer.render(e,t)}}]),e}(),O={PatternType:""},x=0,C=1,F={Origin:{x:0,y:6,z:0},Radii:{x:10,y:10},Amplitude:0,Speed:.3,Direction:!0},R={Origin:{x:0,y:6,z:0},Radius:5,Phase:.5,NumPetals:3,Amplitude:0,Sinusoidal:!0,Direction:!0,Speed:.3},j=function(){function e(t){Object(o.a)(this,e),this.theta_rad=0,this.amp=t.amp,this.isClockwise=t.dir,this.originPos=t.pos,this.moveFactor=t.move,this.targetPos=new d.Vector3(0,0,0)}return Object(l.a)(e,[{key:"updateTheta",value:function(e){this.theta_rad=this.isClockwise?this.theta_rad+this.moveFactor:this.theta_rad-this.moveFactor,this.theta_rad=this.theta_rad>=e?0:this.theta_rad}},{key:"cartesianX",value:function(e){return this.originPos.x+e*Math.cos(this.theta_rad)}},{key:"cartesianZ",value:function(e){return this.originPos.z+e*Math.sin(this.theta_rad)}},{key:"cartesianY",value:function(e){return this.originPos.y+this.amp*Math.sin(this.theta_rad)}},{key:"getTargetPos",value:function(){return this.targetPos}}]),e}(),T=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).radX=e.radx,n.radZ=e.radz,n.maxTheta=2*Math.PI,n}return Object(l.a)(i,[{key:"update",value:function(){this.updateGuiParams();var e=this.cartesianX(this.radX),t=this.cartesianZ(this.radZ),i=this.cartesianY();this.targetPos.set(e,i,t),this.updateTheta(this.maxTheta)}},{key:"updateGuiParams",value:function(){this.originPos.set(F.Origin.x,F.Origin.y,F.Origin.z),this.radX=F.Radii.x,this.radZ=F.Radii.y,this.amp=F.Amplitude,this.moveFactor=d.Math.degToRad(F.Speed),this.isClockwise=F.Direction}}]),i}(j),E=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).rad=e.rad,n.phase=e.ph,n.numPetals=e.numP,n.isSin=e.isSin,n.maxTheta=Math.PI,n}return Object(l.a)(i,[{key:"update",value:function(){var e,t,i;this.updateGuiParams();var n=this.isSin?this.rad*Math.sin(this.phase+this.numPetals*this.theta_rad):this.rad*Math.cos(this.phase+this.numPetals*this.theta_rad);e=this.cartesianX(n),i=this.cartesianZ(n),t=this.cartesianY(),this.targetPos.set(e,t,i),this.updateTheta(this.maxTheta)}},{key:"updateGuiParams",value:function(){this.originPos.set(R.Origin.x,R.Origin.y,R.Origin.z),this.rad=R.Radius,this.phase=R.Phase,this.amp=R.Amplitude,this.numPetals=R.NumPetals,this.isSin=R.Sinusoidal,this.isClockwise=R.Direction,this.moveFactor=d.Math.degToRad(R.Speed)}}]),i}(j),M=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"setTargetPattern",value:function(e){if(e===x){console.log("Creating Ellipse Pattern");var t=function(e,t,i,n,a,s){return{pos:e,radx:t,radz:i,amp:n,dir:a,move:s}}(new d.Vector3(0,6,0),10,10,0,!0,d.Math.degToRad(.3));this.curPattern=new T(t)}else if(e===C){console.log("Creating Rose-Curve Pattern");var i=function(e,t,i,n,a,s,r,o){return{pos:e,rad:t,ph:i,numP:n,amp:a,isSin:s,dir:r,move:o}}(new d.Vector3(0,6,0),10,.5,3,0,!0,!0,d.Math.degToRad(.3));this.curPattern=new E(i)}}},{key:"update",value:function(){if(this.curPattern)return this.curPattern.update(),this.curPattern.getTargetPos()}}]),e}(),A=i(6),I=i(111),V=function(){function e(t,i){Object(o.a)(this,e);var n=new A.c(0,0,0),a=new A.c(0,0,0);n.x=t.x-i,n.y=t.y-i,n.z=t.z-i,a.x=t.x+i,a.y=t.y+i,a.z=t.z+i,this.tree=new I.a(n,a,0,2)}return Object(l.a)(e,[{key:"insertPoint",value:function(e,t){this.tree.insert(e,t)}},{key:"scanForPoints",value:function(e,t){return this.tree.findPoints(e,t,!0)}},{key:"pointCount",value:function(){return this.tree.pointCount}}]),e}(),D=function(){function e(){Object(o.a)(this,e),this.flockOctree={}}return Object(l.a)(e,[{key:"update",value:function(e,t){this.setupOctree(e,t)}},{key:"setupOctree",value:function(e,t){var i=this;this.flockOctree=new V(e,20),t.forEach((function(e){i.flockOctree.insertPoint(e.position,e)}))}},{key:"getNeighbours",value:function(e){var t=[];return this.flockOctree.scanForPoints(e,5).forEach((function(e){var i=e.data;t.push(i)})),t}}]),e}(),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.random()*(e-t)+t},L=function(e,t,i,n,a){var s=Math.sqrt(e*e+t*t+i*i);e/=s,t/=s,i/=s;var r=Math.cos(n/2),o=Math.sin(n/2);a.set(e*o,t*o,i*o,r)},G={MaxForce:.01,SmoothFactor:.01,SeperationForce:1.2,CohesionForce:.5,AlignmentForce:.2},N=function(){function e(){Object(o.a)(this,e),this.position=new d.Vector3(20*Math.random(),2,0),this.velocity=new d.Vector3(.1,.1,.1),this.acceleration=new d.Vector3(0,0,0),this.rotationA=new d.Quaternion,this.rotationB=new d.Quaternion,this.fSteer=new d.Vector3(0,0,0),this.vDesired=new d.Vector3(0,0,0),this.sumVec=new d.Vector3(0,0,0),this.diffVec=new d.Vector3(0,0,0),this.maxSpeed=z(.015,.05),this.maxSlowDownSpeed=0,this.slowDownTolerance=.2*.2,this.arriveTolerance=1e-4,this.target=new d.Vector3(0,0,0)}return Object(l.a)(e,[{key:"updateAgent",value:function(e){this.seekTarget(),this.flock(e),this.updatePosition()}},{key:"seekTarget",value:function(){this.seek(),this.applyForce()}},{key:"flock",value:function(e){e.length>0&&(this.seperation(e),this.applyForce(),this.cohesion(e),this.applyForce(),this.align(e),this.applyForce())}},{key:"updatePosition",value:function(){this.sumVec.addVectors(this.velocity,this.acceleration),this.velocity=this.velocity.lerp(this.sumVec,G.SmoothFactor),this.velocity.clampLength(-9999,this.maxSpeed),this.position.add(this.velocity),this.acceleration.multiplyScalar(0)}},{key:"applyForce",value:function(){this.acceleration.add(this.fSteer)}},{key:"seek",value:function(){this.vDesired.subVectors(this.target,this.position),this.vDesired.normalize();var e,t,i,n,a,s=this.vDesired.lengthSq();if(s<this.slowDownTolerance&&s>this.arriveTolerance){var r=(e=s,t=this.slowDownTolerance,i=this.arriveTolerance,n=this.maxSpeed,a=this.maxSlowDownSpeed,n+(a-n)*(e-t)/(i-t));this.vDesired.multiplyScalar(r)}else this.vDesired.multiplyScalar(this.maxSpeed);this.fSteer.subVectors(this.vDesired,this.velocity),this.fSteer.clampLength(-99999,G.MaxForce)}},{key:"seperation",value:function(e){var t=this;this.fSteer.set(0,0,0),this.sumVec.set(0,0,0),e.length>0&&(e.forEach((function(e){t.diffVec.subVectors(t.position,e.position),t.diffVec.normalize(),t.diffVec.divideScalar(t.diffVec.length()),t.sumVec.add(t.diffVec)})),this.sumVec.divideScalar(e.length),this.sumVec.lengthSq()>0&&(this.sumVec.normalize(),this.sumVec.clampLength(-99999,this.maxSpeed),this.fSteer.subVectors(this.sumVec,this.velocity),this.fSteer.clampLength(-99999,G.MaxForce),this.fSteer.multiplyScalar(G.SeperationForce)))}},{key:"cohesion",value:function(e){var t=this;this.target.set(0,0,0),this.fSteer.set(0,0,0),e.length>0&&(e.forEach((function(e){t.target.add(e.position)})),this.target.divideScalar(e.length),this.seek(),this.fSteer.multiplyScalar(G.CohesionForce))}},{key:"align",value:function(e){var t=this;this.fSteer.set(0,0,0),e.length>0&&(e.forEach((function(e){t.fSteer.add(e.velocity)})),this.fSteer.divideScalar(e.length),this.fSteer.normalize(),this.fSteer.multiplyScalar(this.maxSpeed),this.fSteer.sub(this.velocity),this.fSteer.clampLength(-99999,G.MaxForce),this.fSteer.multiplyScalar(G.AlignmentForce))}},{key:"setTarget",value:function(e){this.target.copy(e)}}]),e}(),_=i(79),B=i.n(_),W=new p.a,H=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this)).loadPigeon(e),n}return Object(l.a)(i,[{key:"loadPigeon",value:function(e){var t=this;W.load(B.a,(function(i){t.pigeon=i.scene,t.pigeon.name="pChild",t.parent=new d.Group,t.parent.add(t.pigeon),t.parent.frustumCulled=!1,t.parent.castShadow=!0,t.parent.receiveShadow=!0,t.parent.name="pigeon",t.agentPosition=t.parent.position,t.agentRotation=t.parent.rotation,t.agentScale=t.parent.scale,t.agentAnimations=i.animations,t.agentScale.set(.5,.5,.5),t.animationMixer=new d.AnimationMixer(t.parent);var n=t.animationMixer.clipAction(t.agentAnimations[0]);t.randSeed=z(.3,.8),n.play(),e.add(t.parent)}),void 0,(function(e){console.error(e)}))}},{key:"update",value:function(e,t){this.animationMixer&&(this.animationMixer.update(e*this.randSeed),this.updateAgent(t),this.syncPosition(),this.syncRotation())}},{key:"syncPosition",value:function(){this.parent.position.copy(this.position)}},{key:"syncRotation",value:function(){var e,t,i;i=this.velocity,e=Math.atan2(i.x,i.z),t=function(e){return Math.acos(e.y/e.length())}(this.velocity),L(0,1,0,e,this.rotationA),L(0,0,1,t-Math.PI/2,this.rotationB),this.rotationA.multiply(this.rotationB),this.parent.setRotationFromQuaternion(this.rotationA)}}]),i}(N),J=function(){function e(t){Object(o.a)(this,e);var i=new d.SphereGeometry(.2,15,15),n=new d.MeshLambertMaterial({color:new d.Color(1,0,0),wireframe:!1});this.mesh=new d.Mesh(i,n),t.add(this.mesh)}return Object(l.a)(e,[{key:"getVector",value:function(){return this.mesh.position}},{key:"setVector",value:function(e){this.mesh.position.copy(e)}},{key:"setVisibility",value:function(e){this.mesh.visible=e}}]),e}(),U={ShowTarget:!0},X=function(){function e(){Object(o.a)(this,e),this.octreeManager=new D,this.patternManager=new M,this.pigeons=[],this.clock=new d.Clock}return Object(l.a)(e,[{key:"setup",value:function(e,t){console.log("Pigeon Manager Pattern: "+t),this.spawnPigeons(e),this.target=new J(e),this.patternManager.setTargetPattern(t)}},{key:"update",value:function(){var e=this;if(this.pigeons.length>0){var t=this.patternManager.update();if(t){this.target.setVector(t),this.target.setVisibility(U.ShowTarget),this.octreeManager.update(t,this.pigeons);var i=[],n=this.clock.getDelta();this.pigeons.forEach((function(a){a.setTarget(t),i=e.octreeManager.getNeighbours(a.position),a.update(n,i)}))}}}},{key:"setNewPatternType",value:function(e){this.patternManager.setTargetPattern(e)}},{key:"spawnPigeons",value:function(e){for(var t=0;t<50;t++){var i=new H(e);this.pigeons.push(i)}}}]),e}(),Z=i(80),K=i(81),q=i(43),Q=i.n(q),Y=i(82),$=i.n(Y),ee=new(function(){function e(){Object(o.a)(this,e),this.siteURL="https://befantastic-martha.herokuapp.com/app",this.socket=$()(this.siteURL,{reconnection:!0,reconnectionDelay:500,reconnectionAttempts:1/0}),this.socket.once("connect",this.subscribe.bind(this)),this.handlePresetsCbk=""}return Object(l.a)(e,[{key:"subscribe",value:function(){console.log("Connected"),this.socket.on("time",this.logTime.bind(this)),this.socket.on("receivePresets",this.handlePresets.bind(this))}},{key:"handlePresets",value:function(e){this.handlePresetsCbk(e)}},{key:"saveGuiPreset",value:function(e,t){var i={name:e,data:t};this.socket.emit("savePreset",i)}},{key:"readAllPresets",value:function(e){this.socket.emit("getPresets"),this.handlePresetsCbk=e}},{key:"deletePreset",value:function(e){this.socket.emit("deletePreset",e)}},{key:"disconnect",value:function(){console.log("Socket Server Disconnected.")}},{key:"logTime",value:function(e){}}]),e}()),te={Preset:"Global",Presets:""},ie=function(){function e(t){Object(o.a)(this,e),this.gui=new Z.Pane({title:"Pigeon GUI",container:t,expanded:!1}),this.gui.registerPlugin(K),this.gui.addInput(te,"Preset"),this.presetOptions=[],this.buildPresets(),this.fpsGraph=this.gui.addBlade({view:"fpsgraph",label:"FPS",lineCount:2});var i=this.gui.addFolder({title:"Orbit Controls",expanded:!0});i.addInput(b,"EnableControls",{label:"Enable Controls"}),i.addInput(b,"EnablePan",{label:"Enable Panning"}),i.addInput(b,"AutoRotate",{label:"Enable AutoRotate"}),i.addInput(b,"RotateSpeed",{label:"Rotation Speed",min:.1,max:1}),i.addInput(b,"EnableKeys",{label:"Enable Keys"}),this.gui.addFolder({title:"Target Params",expanded:!0}).addInput(U,"ShowTarget",{label:"Show Target"}),this.patternFolder=this.gui.addFolder({title:"Pattern Params",expanded:!0}),this.buildPatternTypeOptions(x),this.buildPatterns(),this.ellipseParamsFolder=this.patternFolder.addFolder({title:"Ellipse Pattern Params",expanded:!0}),this.ellipseParamsFolder.addInput(F,"Origin"),this.ellipseParamsFolder.addInput(F,"Radii",{x:{min:0,max:50},y:{min:0,max:50}}),this.ellipseParamsFolder.addInput(F,"Amplitude",{min:0,max:10}),this.ellipseParamsFolder.addInput(F,"Speed",{min:0,max:2}),this.ellipseParamsFolder.addInput(F,"Direction"),this.roseCurveParamsFolder=this.patternFolder.addFolder({title:"Rose-Curve Pattern Params",expanded:!0}),this.roseCurveParamsFolder.addInput(R,"Origin"),this.roseCurveParamsFolder.addInput(R,"Radius",{min:1,max:50}),this.roseCurveParamsFolder.addInput(R,"Phase",{min:0,max:10}),this.roseCurveParamsFolder.addInput(R,"NumPetals",{min:1,max:10,step:1}),this.roseCurveParamsFolder.addInput(R,"Amplitude",{min:0,max:10}),this.roseCurveParamsFolder.addInput(R,"Sinusoidal"),this.roseCurveParamsFolder.addInput(R,"Direction"),this.roseCurveParamsFolder.addInput(R,"Speed",{min:0,max:2});var n=this.gui.addFolder({title:"Agent Params",expanded:!0});n.addInput(G,"MaxForce",{label:"Max Force",min:.005,max:2,step:.005}),n.addInput(G,"SmoothFactor",{label:"Smooth Factor",min:.005,max:.1,step:.005}),n.addInput(G,"SeperationForce",{label:"Seperation Force",min:.5,max:2,step:.1}),n.addInput(G,"CohesionForce",{label:"Cohesion Force",min:.1,max:2,step:.1}),n.addInput(G,"AlignmentForce",{label:"Alignment Force",min:0,max:2,step:.1}),this.gui.addButton({title:"Save Preset"}).on("click",this.onSavePreset.bind(this)),this.gui.addButton({title:"Delete Preset"}).on("click",this.onDeletePreset.bind(this)),this.gui.addButton({title:"Show Panel"}).on("click",this.onShowPanel.bind(this)),this.gui.addButton({title:"Spawn Agents"}).on("click",this.onSpawnAgents.bind(this)),ee.readAllPresets(this.onReceivePresets.bind(this))}return Object(l.a)(e,[{key:"onPresetSelected",value:function(e){var t=JSON.parse(e.value);this.gui.importPreset(t)}},{key:"onReceivePresets",value:function(e){var t=this;if(console.log("All the presets received:"),console.log(e),e.length>0){e.forEach((function(e){var i=e.name,n=e.config;t.presetOptions.push({text:i,value:JSON.stringify(n)})}));var i=e[0].config;this.gui.importPreset(i),this.disposePresets(),this.buildPresets(),this.currentPatternType=i.PatternType,this.buildPatternTypeOptions(),this.disposePatterns(),this.buildPatterns(),this.showPatternParams()}}},{key:"onSavePreset",value:function(){var e=te.Preset;if(e.length>0){this.disposePresets();var t=this.gui.exportPreset(),i=Q.a.find(this.presetOptions,(function(t){return t.text===e}));i?(console.log("Preset Exists. Updating database and local copy of the preset."),i.value=JSON.stringify(t),this.presetOptions=Q.a.sortBy(this.presetOptions,(function(t){return t.text===e?0:1}))):(console.log("Preset doesnt exist. New entry in the database."),this.presetOptions.unshift({text:e,value:JSON.stringify(t)})),ee.saveGuiPreset(e,t),this.buildPresets()}else alert("Not an empty entry please.")}},{key:"onDeletePreset",value:function(){if(this.presetOptions.length>0){var e=te.Preset;if(console.log("Deleting preset: "+e),Q.a.remove(this.presetOptions,(function(t){return t.text===e})),ee.deletePreset(e),this.disposePresets(),this.buildPresets(),this.presetOptions.length>0){var t=this.presetOptions[0].value;this.gui.importPreset(JSON.parse(t))}}}},{key:"disposePresets",value:function(){te.Presets="",this.presetList.dispose()}},{key:"buildPresets",value:function(){this.presetList=this.gui.addInput(te,"Presets",{index:1,options:this.presetOptions}),this.presetList.on("change",this.onPresetSelected.bind(this))}},{key:"buildPatternTypeOptions",value:function(){this.currentPatternType===x?this.patternTypeOptions={Ellipse:x,RoseCurve:C}:this.currentPatternType===C?this.patternTypeOptions={RoseCurve:C,Ellipse:x}:this.patternTypeOptions={Ellipse:x,RoseCurve:C}}},{key:"disposePatterns",value:function(){this.patternList.dispose()}},{key:"buildPatterns",value:function(){this.patternList=this.patternFolder.addInput(O,"PatternType",{label:"Pattern Type",index:0,options:this.patternTypeOptions}),this.patternList.on("change",this.onPatternSelected.bind(this))}},{key:"onPatternSelected",value:function(e){this.currentPatternType=e.value,this.showPatternParams(),this.patternChangeUpdate(this.currentPatternType)}},{key:"showPatternParams",value:function(){this.currentPatternType===x?(this.ellipseParamsFolder.hidden=!1,this.roseCurveParamsFolder.hidden=!0):this.currentPatternType===C&&(this.ellipseParamsFolder.hidden=!0,this.roseCurveParamsFolder.hidden=!1)}},{key:"subscribeForPatternChange",value:function(e){this.patternChangeUpdate=e}},{key:"subscribeShowPanel",value:function(e){this.onShowPanelCallback=e}},{key:"onShowPanel",value:function(){this.onShowPanelCallback()}},{key:"subscribeSpawnAgents",value:function(e){this.onSpawnAgentCallback=e}},{key:"onSpawnAgents",value:function(){this.onSpawnAgentCallback()}}]),e}(),ne={container:{position:"absolute",top:"150px",right:"20px"}},ae=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).state={},n.guiRef=a.a.createRef(),n}return Object(l.a)(i,[{key:"render",value:function(){return a.a.createElement("div",{ref:this.guiRef,style:ne.container})}},{key:"componentDidMount",value:function(){var e=this.guiRef.current;this.gui=new ie(e),this.gui.subscribeShowPanel(this.onShowPanel.bind(this)),this.gui.subscribeSpawnAgents(this.onSpawnAgents.bind(this))}},{key:"getFpsGraph",value:function(){return this.gui.fpsGraph}},{key:"onShowPanel",value:function(){this.props.onShowInfoPanel()}},{key:"onSpawnAgents",value:function(){this.props.onSpawnAgents()}},{key:"subscribeForPatternChange",value:function(e){this.gui.subscribeForPatternChange(e)}},{key:"getCurPatternType",value:function(){return this.gui.currentPatternType}}]),i}(a.a.Component),se=Object(u.a)(ae),re="#ffffff",oe="#E7EFE0",le="24px",he="44px",ce="28px",ue="36px",de="d-dinregular",pe="warsaw_gothic",fe={container:{position:"absolute",top:"0%",width:"100vw",height:"100vh",backgroundColor:"rgb(0, 0, 0, 0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:0},hide:{visibility:"hidden"},title:{fontFamily:pe,fontSize:"52px",letterSpacing:5,opacity:1,color:re},loading:{fontFamily:de,fontSize:le,color:re},button:{fontFamily:de,color:re,fontSize:le,borderStyle:"solid",borderWidth:"2px",padding:"8px",paddingLeft:ce,paddingRight:ce,cursor:"default"}},me=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).state={isHidden:!1,isLoading:!1},n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.state.isHidden?[fe.container,fe.hide]:fe.container,t=this.state.isLoading?this.getLoader():this.getTitle();return a.a.createElement("div",{style:e},t)}},{key:"getLoader",value:function(){return a.a.createElement("div",{style:fe.loading},"Loading ...")}},{key:"getTitle",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:fe.title},"MARTHA.I"),a.a.createElement("div",{onClick:this.onEnter.bind(this),style:fe.button},"ENTER"))}},{key:"onEnter",value:function(){this.setState({isLoading:!0}),this.props.onEnterWorld(),setTimeout(this.hasFinishedLoading.bind(this),0)}},{key:"hasFinishedLoading",value:function(){this.setState({isHidden:!0}),this.props.onLoadComplete()}}]),i}(a.a.Component),ge=Object(u.a)(me),ve={floatIn:u.a.keyframes({"0%":{top:"-100px"},"50%":{top:"-50px"},"100%":{top:"0px"}}),floatOut:u.a.keyframes({"0%":{top:"0"},"50%":{top:"-50px"},"100%":{top:"-100px"}})},ye={container:{position:"absolute",width:"100%",top:"-100px"},content:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:ue,alignSelf:"center"},animateIn:{animation:"x 2s linear 1 forwards",animationName:ve.floatIn},animateOut:{animation:"x 2s linear 1 forwards",animationName:ve.floatOut},title:{fontFamily:pe,fontSize:he,letterSpacing:5,opacity:1,color:re,cursor:"default"},about:{fontFamily:de,color:re,fontSize:he,cursor:"default"}},Pe=0,be=1,Se=2,ke=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).state={aniState:Pe},n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.state.aniState===be?[ye.container,ye.animateIn]:this.state.aniState===Se?[ye.container,ye.animateOut]:ye.container;return a.a.createElement("div",{style:e},a.a.createElement("div",{style:ye.content},a.a.createElement("div",{style:ye.title},"MARTHA.I"),a.a.createElement("div",{style:ye.title},"ABOUT")))}},{key:"updateTitle",value:function(){this.state.aniState===Pe?this.setState({aniState:be}):this.state.aniState===be?this.setState({aniState:Se}):this.state.aniState===Se&&this.setState({aniState:be})}}]),i}(a.a.Component),we=Object(u.a)(ke),Oe={slideIn:u.a.keyframes({"0%":{left:"-500px"},"50%":{left:"-250px"},"100%":{left:"0px"}}),slideOut:u.a.keyframes({"0%":{left:"0px"},"50%":{left:"-250px"},"100%":{left:"-500px"}})},xe={container:{position:"absolute",top:"0%",width:"500px",height:"100%",left:"-500px",backgroundColor:oe},content:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:ue,alignSelf:"center"},animateIn:{animation:"x 2s linear 1 forwards",animationName:Oe.slideIn},animateOut:{animation:"x 2s linear 1 forwards",animationName:Oe.slideOut},title:{fontFamily:pe,fontSize:he,letterSpacing:5,opacity:1,color:re,cursor:"default"},about:{fontFamily:de,color:re,fontSize:he,cursor:"default"}},Ce=0,Fe=1,Re=2,je=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).state={aniState:Ce},n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.state.aniState===Fe?[xe.container,xe.animateIn]:this.state.aniState===Re?[xe.container,xe.animateOut]:xe.container;return a.a.createElement("div",{style:e},a.a.createElement("div",{style:xe.content}))}},{key:"updatePanel",value:function(){this.state.aniState===Ce?this.setState({aniState:Fe}):this.state.aniState===Fe?this.setState({aniState:Re}):this.state.aniState===Re&&this.setState({aniState:Fe})}}]),i}(a.a.Component),Te=Object(u.a)(je),Ee={container:{width:"100vw",height:"100vh",overflow:"hidden"}},Me=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).state={},n.worldRef=a.a.createRef(),n.guiRef=a.a.createRef(),n.titleRef=a.a.createRef(),n.panelRef=a.a.createRef(),n.scene=new d.Scene,n.cameraControl=new S,n.lightingManager=new k(n.scene),n.pigeonManager=new X,n.terrain=new v(n.scene),n.rendererManager=new w,n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var e=this.rendererManager.getDomElement();this.worldRef.current.appendChild(e),this.fpsGraph=this.guiRef.current.getFpsGraph(),this.guiRef.current.subscribeForPatternChange(this.onPatternChanged.bind(this)),this.initializeRender()}},{key:"render",value:function(){return a.a.createElement("div",{style:Ee.container,ref:this.worldRef},a.a.createElement(se,{ref:this.guiRef,onShowInfoPanel:this.onShowInfoPanel.bind(this),onSpawnAgents:this.onSpawnAgents.bind(this)}),a.a.createElement(ge,{onEnterWorld:this.onEnterWorld.bind(this),onLoadComplete:this.onLoadComplete.bind(this)}),a.a.createElement(we,{ref:this.titleRef}),a.a.createElement(Te,{ref:this.panelRef}))}},{key:"initializeRender",value:function(){this.fpsGraph.begin(),this.pigeonManager.update(),this.cameraControl.update(),this.rendererManager.render(this.scene,this.cameraControl.getCamera()),this.fpsGraph.end(),requestAnimationFrame(this.initializeRender.bind(this))}},{key:"onEnterWorld",value:function(){var e=this.guiRef.current.getCurPatternType();this.pigeonManager.setup(this.scene,e)}},{key:"onLoadComplete",value:function(){this.titleRef.current.updateTitle()}},{key:"onShowInfoPanel",value:function(){this.panelRef.current.updatePanel(),this.titleRef.current.updateTitle()}},{key:"onPatternChanged",value:function(e){this.pigeonManager.setNewPatternType(e)}},{key:"onSpawnAgents",value:function(){this.pigeonManager.spawnPigeons(this.scene)}}]),i}(a.a.Component),Ae=Object(u.a)(Me),Ie=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).state={},n.worldRef=a.a.createRef(),n}return Object(l.a)(i,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(Ae,{ref:this.worldRef}))}}]),i}(a.a.Component),Ve=Object(u.a)(Ie),De=i(53);r.a.render(a.a.createElement(De.a,null,a.a.createElement(Ve,null)),document.getElementById("root"))},77:function(e,t,i){e.exports=i.p+"static/media/world.9a0ad0bd.glb"},79:function(e,t,i){e.exports=i.p+"static/media/Bird_simple.d1d4aa0b.glb"}},[[112,1,2]]]);
//# sourceMappingURL=main.18367e53.chunk.js.map