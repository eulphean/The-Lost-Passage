(this.webpackJsonpTheLostPassage=this.webpackJsonpTheLostPassage||[]).push([[0],{124:function(e,t,i){},125:function(e,t,i){},244:function(e,t,i){"use strict";i.r(t);var n,o,r,a=i(6),s=i.n(a),l=i(85),c=i.n(l),u=(i(124),i(125),i(0)),h=i(1),d=i(3),p=i(4),f=i(11),m=i(12),g=i(2),v=i(46),y=i(86),b=i.n(y),x=i(49),P=(b()(g),{EnableControls:!1,EnablePan:!0,AutoRotate:!1,RotateSpeed:.1,EnableKeys:!0}),j=function(){function e(){Object(u.a)(this,e),this.camera=new g.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.05,2e4),this.camera.position.set(1e4,7e3,500),this.camera.lookAt(new g.Vector3(0,0,0)),this.camera.frustumCulled=!0,this.mouse=new g.Vector2(0,0),this.zoom=250,this.animationStopped=!1,window.addEventListener("mousemove",this.onMouseMove.bind(this),!1),window.addEventListener("wheel",this.onMouseWheel.bind(this),!1)}return Object(h.a)(e,[{key:"update",value:function(e){this.animationStopped&&(this.camera.position.x+=.01*(this.mouse.x-this.camera.position.x),this.camera.position.y+=.01*(-this.mouse.y-this.camera.position.y),this.camera.position.z=this.zoom),this.camera.lookAt(e.position),x.c()}},{key:"onMouseMove",value:function(e){this.mouse.x=.4*(e.clientX-window.innerWidth/2),this.mouse.y=.8*(e.clientY-window.innerHeight/2)}},{key:"onMouseWheel",value:function(e){this.zoom+=.1*e.deltaY,this.zoom=Math.min(Math.max(100,this.zoom),400)}},{key:"initialTween",value:function(e){var t=this;new x.b(this.camera.position).to({x:0,y:0,z:this.zoom},4e3).easing(x.a.Cubic.Out).onComplete((function(){t.animationStopped=!0,e()})).start()}},{key:"updateControls",value:function(){this.controls.update(),this.controls.enablePan=P.EnablePan,this.controls.autoRotate=P.AutoRotate,this.controls.autoRotateSpeed=P.RotateSpeed,this.controls.enabled=P.EnableControls,this.controls.enableKeys=P.EnableKeys}},{key:"getCamera",value:function(){return this.camera}}]),e}(),L=function e(t){Object(u.a)(this,e);var i=new g.HemisphereLight(16768767,16777215,1.6);i.color.setHSL(.6,1,.6),i.groundColor.setHSL(.095,1,.75),i.position.set(0,50,0),t.add(i);var n=new g.DirectionalLight(52945,.6);n.color.setHSL(.1,1,.95),n.position.set(-1,1.75,1),n.position.multiplyScalar(30),t.add(n)},w={DrawCalls:0},O=function(){function e(){Object(u.a)(this,e),this.renderer=new g.WebGLRenderer({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=g.sRGBEncoding}return Object(h.a)(e,[{key:"setAnimationLoop",value:function(e){this.renderer.setAnimationLoop(e)}},{key:"getDomElement",value:function(){return this.renderer.domElement}},{key:"render",value:function(e,t){this.renderer.render(e,t)}},{key:"updateSize",value:function(e,t){this.renderer.setSize(e,t)}},{key:"monitorDrawCalls",value:function(){w.DrawCalls=this.renderer.info.render.calls}}]),e}(),k={PatternType:""},S=0,T=1,C={Origin:{x:0,y:6,z:0},Radii:{x:10,y:10},Amplitude:0,Speed:.3,Direction:!0},M={Origin:{x:0,y:6,z:0},Radius:5,Phase:.5,NumPetals:3,Amplitude:0,Sinusoidal:!0,Direction:!0,Speed:.3},B=function(){function e(t){Object(u.a)(this,e),this.theta_rad=0,this.amp=t.amp,this.isClockwise=t.dir,this.originPos=t.pos,this.moveFactor=t.move,this.targetPos=new g.Vector3(0,0,0),this.targetConst=new g.Vector3(0,0,0)}return Object(h.a)(e,[{key:"updateTheta",value:function(e){this.theta_rad=this.isClockwise?this.theta_rad+this.moveFactor:this.theta_rad-this.moveFactor,this.theta_rad=this.theta_rad>=e?0:this.theta_rad}},{key:"cartesianX",value:function(e){return this.originPos.x+e*Math.cos(this.theta_rad)}},{key:"cartesianZ",value:function(e){return this.originPos.z+e*Math.sin(this.theta_rad)}},{key:"cartesianY",value:function(e){return this.originPos.y+this.amp*Math.sin(this.theta_rad)}},{key:"getTargetPos",value:function(){return this.targetPos}}]),e}(),R=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).radX=e.radx,n.radZ=e.radz,n.maxTheta=2*Math.PI,n}return Object(h.a)(i,[{key:"update",value:function(){this.updateGuiParams();var e=this.cartesianX(this.radX),t=this.cartesianZ(this.radZ),i=this.cartesianY();this.targetPos.set(e,i,t),this.updateTheta(this.maxTheta)}},{key:"updateGuiParams",value:function(){this.originPos.set(C.Origin.x,C.Origin.y,C.Origin.z),this.radX=C.Radii.x,this.radZ=C.Radii.y,this.amp=C.Amplitude,this.moveFactor=g.Math.degToRad(C.Speed),this.isClockwise=C.Direction}}]),i}(B),A=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).rad=e.rad,n.phase=e.ph,n.numPetals=e.numP,n.isSin=e.isSin,n.maxTheta=Math.PI,n}return Object(h.a)(i,[{key:"update",value:function(){var e,t,i;this.updateGuiParams();var n=this.isSin?this.rad*Math.sin(this.phase+this.numPetals*this.theta_rad):this.rad*Math.cos(this.phase+this.numPetals*this.theta_rad);e=this.cartesianX(n),i=this.cartesianZ(n),t=this.cartesianY(),this.targetPos.set(e,t,i),this.updateTheta(this.maxTheta)}},{key:"updateGuiParams",value:function(){this.originPos.set(M.Origin.x,M.Origin.y,M.Origin.z),this.rad=M.Radius,this.phase=M.Phase,this.amp=M.Amplitude,this.numPetals=M.NumPetals,this.isSin=M.Sinusoidal,this.isClockwise=M.Direction,this.moveFactor=g.Math.degToRad(M.Speed)}}]),i}(B),z=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,[{key:"setTargetPattern",value:function(e){if(e===S){console.log("Creating Ellipse Pattern");var t=function(e,t,i,n,o,r){return{pos:e,radx:t,radz:i,amp:n,dir:o,move:r}}(new g.Vector3(0,6,0),10,10,0,!0,g.Math.degToRad(.3));this.curPattern=new R(t)}else if(e===T){console.log("Creating Rose-Curve Pattern");var i=function(e,t,i,n,o,r,a,s){return{pos:e,rad:t,ph:i,numP:n,amp:o,isSin:r,dir:a,move:s}}(new g.Vector3(0,6,0),10,.5,3,0,!0,!0,g.Math.degToRad(.3));this.curPattern=new A(i)}}},{key:"update",value:function(){if(this.curPattern)return this.curPattern.update(),this.curPattern.getTargetPos()}}]),e}(),F={ShowTarget:!0,MaxTargetRadius:100,CurrentTargetRadius:0},E=function(){function e(t){Object(u.a)(this,e);var i=new g.SphereGeometry(1,12,12),n=new g.MeshLambertMaterial;n.emissive=new g.Color("#000000"),n.wireframe=!1,n.transparent=!0,n.opacity=.2,this.mesh=new g.Mesh(i,n),t.add(this.mesh)}return Object(h.a)(e,[{key:"update",value:function(e,t){this.setVector(e),this.setVisibility(F.ShowTarget);var i=F.MaxTargetRadius+Math.sin(.001*t)*F.MaxTargetRadius/3;this.mesh.scale.set(i,i,i),F.CurrentTargetRadius=i}},{key:"getVector",value:function(){return this.mesh.position}},{key:"setVector",value:function(e){this.mesh.position.copy(e)}},{key:"setVisibility",value:function(e){this.mesh.visible=e}}]),e}(),V=i(87),I=i.p+"static/media/pigeon_back.0a8e5722.glb",D=50,H=2500,U=function(){function e(t){Object(u.a)(this,e),this.durationAnimation="",this.vertexPerBird="",this.indicesPerBird="",this.textureAnimation="",this.birdGeometry=new g.BufferGeometry,this.loadPigeon(t)}return Object(h.a)(e,[{key:"loadPigeon",value:function(e){var t=this;(new V.a).loadAsync(I).then((function(i){var n=i.animations;t.durationAnimation=Math.round(60*n[0].duration);var o=i.scene.children[0].geometry,r=o.morphAttributes.position;t.vertexPerBird=o.getAttribute("position").count,t.indicesPerBird=o.index.array.length;for(var a=t.nextPowerOf2(t.durationAnimation),s=t.nextPowerOf2(t.vertexPerBird),l=new Float32Array(3*s*a),c=0;c<s;c++)for(var u=0;u<a;u++){var h=u*s*3,d=Math.floor(u/t.durationAnimation*r.length),p=(d+1)%r.length,f=u/t.durationAnimation*r.length%1;if(u<t.durationAnimation){var m=void 0,v=void 0;m=r[d].array[3*c],v=r[p].array[3*c],void 0!==m&&void 0!==v&&(l[h+3*c]=t.lerp(m,v,f)),m=r[d].array[3*c+1],v=r[p].array[3*c+1],void 0!==m&&void 0!==v&&(l[h+3*c+1]=t.lerp(m,v,f)),m=r[d].array[3*c+2],v=r[p].array[3*c+2],void 0!==m&&void 0!==v&&(l[h+3*c+2]=t.lerp(m,v,f))}}t.textureAnimation=new g.DataTexture(l,s,a,g.RGBFormat,g.FloatType);for(var y=[],b=[],x=[],P=[],j=[],L=t.vertexPerBird*H*3,w=o.getAttribute("color").array,O=[],k=3,S=0,T=0;S<w.length;S++)S%k===0&&0!==S?k+=4:(O[T]=w[S],T++);for(var C=0;C<L;C++){var M=C%(3*t.vertexPerBird);y.push(o.getAttribute("position").array[M]),b.push(O[M])}for(var B=Math.random(),R=0;R<t.vertexPerBird*H;R++){var A=R%t.vertexPerBird,z=Math.floor(R/t.vertexPerBird);0===A&&(B=Math.random());var F=~~z,E=F%D/D,V=~~(F/D)/D;x.push(E,V,A/s,t.durationAnimation/a),P.push(z,B,Math.random(),Math.random())}for(var I=0;I<t.indicesPerBird*H;I++){var U=Math.floor(I/t.indicesPerBird)*t.vertexPerBird;j.push(o.index.array[I%t.indicesPerBird]+U)}t.birdGeometry.setAttribute("position",new g.BufferAttribute(new Float32Array(y),3)),t.birdGeometry.setAttribute("color",new g.BufferAttribute(new Uint16Array(b),3,!0)),t.birdGeometry.setAttribute("reference",new g.BufferAttribute(new Float32Array(x),4)),t.birdGeometry.setAttribute("seeds",new g.BufferAttribute(new Float32Array(P),4)),t.birdGeometry.setIndex(j),e()}))}},{key:"nextPowerOf2",value:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))}},{key:"lerp",value:function(e,t,i){return e+(t-e)*(i=Math.max(Math.min(i,1),0))}},{key:"setDrawRange",value:function(e){this.birdGeometry.setDrawRange(0,this.indicesPerBird*e)}}]),e}(),G=i(88),N=function(){function e(t){Object(u.a)(this,e),this.gpuCompute=new G.a(D,D,t);var i=this.gpuCompute.createTexture(),n=this.gpuCompute.createTexture();this.fillPositionTexture(i),this.fillVelocityTexture(n),this.velocityVariable=this.gpuCompute.addVariable("textureVelocity","/*\r\n  Name: fragmentShaderVelocity.js\r\n  Author: Amay Kataria\r\n  Date: 10/21/2021\r\n  Description: Core shader responsible for everything related to how to the velocity of each pigeon in the flock changes. \r\n*/\r\n\r\n/*\r\n*   UNIFORMS\r\n*/\r\n\r\n// TIME\r\nuniform float uTime;\r\nuniform float uDelta;\r\n\r\n// FLOCK\r\nuniform float uAttractionForce;\r\nuniform float uSeperationForce; \r\nuniform float uAlignmentForce;\r\nuniform float uCohesionForce;\r\nuniform float uSpeedLerp;\r\nuniform bool uShoot; \r\n\r\n// TARGET\r\nuniform vec3 uTargetPosition; \r\nuniform float uTargetRadius;\r\n\r\n// SPEED\r\nuniform float uMaxAgentSpeed; \r\n\r\n// BOUNDING BOX\r\nuniform vec3 uBoundingBoxMin; \r\nuniform vec3 uBoundingBoxMax; \r\n\r\n// Resolution is passed by default from GPUComputationRenderer\r\n// That is WIDTH x WIDTH, with which we initialized it. \r\nconst float width = resolution.x;\r\nconst float height = resolution.y;\r\n\r\n/*\r\n* CONSTANTS\r\n*/\r\nconst float PI = 3.141592653589793;\r\nconst float PI_2 = PI * 2.0;\r\n\r\n/*\r\n* GLOBAL VARIABLES \r\n* Reused across the shader. \r\n*/\r\nvec3 acceleration = vec3(0.0);\r\nvec3 selfPosition, selfVelocity; \r\nvec3 borders = vec3(0.0);\r\nvec3 vDesired = vec3(0.0);\r\n\r\nfloat tempForce = 0.0;\r\n\r\n// A simple random function. \r\nfloat rand(vec2 co){\r\n    return fract(sin( dot( co.xy, vec2(12.9898,78.233) ) ) * 43758.5453);\r\n}\r\n\r\n// 2D rot matrix. \r\nmat2 get2dRotateMatrix(float _angle) {\r\n    return mat2(cos(_angle), - sin(_angle), sin(_angle), cos(_angle));\r\n}\r\n\r\nvec3 updateTargetPosition() {\r\n    mat2 rotateMatrix = get2dRotateMatrix(-PI/2.0); \r\n    vec3 newTargetPosition = uTargetPosition; \r\n    newTargetPosition.xz = rotateMatrix * newTargetPosition.xz; \r\n    return newTargetPosition; \r\n}\r\n\r\nbool containsPoint(vec3 point) {\r\n    return point.x < uBoundingBoxMin.x || point.x > uBoundingBoxMax.x ||\r\n\t\t\tpoint.y < uBoundingBoxMin.y || point.y > uBoundingBoxMax.y ||\r\n\t\t\tpoint.z < uBoundingBoxMin.z || point.z > uBoundingBoxMax.z ? false : true;\r\n}\r\n\r\nvec3 boundingBoxCheck(vec3 newVelocity) {\r\n    bool contains = containsPoint(selfPosition);\r\n\r\n    if (contains == true) {\r\n        // Which side of the border is the pigeon closer to\r\n        borders.x = abs(uBoundingBoxMax.x - selfPosition.x) < abs(uBoundingBoxMin.x - selfPosition.x) ? uBoundingBoxMax.x: uBoundingBoxMin.x;\r\n        borders.y = abs(uBoundingBoxMax.y - selfPosition.y) < abs(uBoundingBoxMin.y - selfPosition.y) ? uBoundingBoxMax.y: uBoundingBoxMin.y;\r\n        borders.z = abs(uBoundingBoxMax.z - selfPosition.z) < abs(uBoundingBoxMin.z - selfPosition.z) ? uBoundingBoxMax.z: uBoundingBoxMin.z;\r\n\r\n        // Set a vector that points away from the edges \r\n        vec3 diffVec = selfPosition - borders;\r\n\r\n        // Save the current box size in sumVec temporarily \r\n        vec3 boxSize = vec3(uBoundingBoxMax.x - uBoundingBoxMin.x, uBoundingBoxMax.y - uBoundingBoxMin.y, uBoundingBoxMax.z - uBoundingBoxMin.z);\r\n\r\n        // Normalize the value according a portion of the boxsize \r\n        boxSize /= 10.0;\r\n        diffVec /= boxSize;\r\n\r\n        // Scale up the value exponentially accoring to the normalized value\r\n        for (int i = 0; i <= 2; i++) {\r\n            tempForce = exp(1.5 - abs(diffVec[i]));\r\n            vDesired[i] = tempForce * sign(diffVec[i]);\r\n        }\r\n        newVelocity += vDesired;\r\n    } else {\r\n        // Reflect back towards center. \r\n        vec3 dir = vec3(0.) - selfPosition;\r\n        newVelocity = normalize(dir) * uMaxAgentSpeed;\r\n    }\r\n\r\n    return newVelocity; \r\n}\r\n\r\nvec3 updateBehavior() {   \r\n    float zoneRadius = uSeperationForce + uAlignmentForce + uCohesionForce;\r\n    float seperationThresh = uSeperationForce / zoneRadius;\r\n    float alignmentThresh = (uSeperationForce + uAlignmentForce) / zoneRadius;\r\n    float cohesionThresh = 1.0 - alignmentThresh; \r\n    float zoneRadiusSquared = zoneRadius * zoneRadius;\r\n\r\n    // Alignment, cohesion, seperation. \r\n    vec3 neighborPos, neighborVel; \r\n    vec3 newVelocity = selfVelocity; \r\n    for (float y = 0.0; y < height; y++) {\r\n        for (float x = 0.0; x < width; x++) {\r\n            vec2 ref = vec2(x, y) / resolution.xy; \r\n            vec3 neighborPos = texture2D(texturePosition, ref).xyz;\r\n            vec3 neighborVel = texture2D(textureVelocity, ref).xyz; \r\n\r\n            vec3 dir = neighborPos - selfPosition;\r\n            float dist = length(dir);\r\n\r\n            // Am I comparing to myself? Pass then. \r\n            if (dist < 0.0001) { \r\n                continue;\r\n            }\r\n\r\n            // Is this Agent outside my zone radius? Pass then. \r\n            float distSquared = dist * dist;\r\n            if (distSquared > zoneRadiusSquared) {\r\n                continue;\r\n            } else {\r\n                // How much in my zone is it? \r\n                float neighborThresh = (distSquared / zoneRadiusSquared); \r\n\r\n                // Within seperation threshold? \r\n                // Move apart for comfort.\r\n                if (neighborThresh < seperationThresh) {\r\n                    float f = (seperationThresh / neighborThresh - 1.0) * uDelta;\r\n                    newVelocity -= normalize(dir) * (f);\r\n                } else if (neighborThresh < alignmentThresh) { \r\n                    // Within alignment threshold, align with neighbor. \r\n                    float threshDelta = alignmentThresh - seperationThresh; \r\n                    float adjustedThresh = (neighborThresh - seperationThresh) / threshDelta; \r\n                    float f = (0.5 - cos(adjustedThresh * PI_2) * 0.5 + 0.5) * uDelta; \r\n                    newVelocity += normalize(neighborVel) * f; \r\n                } else if (neighborThresh < cohesionThresh) {\r\n                    // Attraction / Cohesion - move closer.\r\n                    float threshDelta = cohesionThresh - alignmentThresh; \r\n                    float adjustedThresh = (neighborThresh - alignmentThresh) / threshDelta;\r\n                    float f = (0.5 - (cos(adjustedThresh * PI_2) * -0.5 + 0.5)) * uDelta;\r\n                    newVelocity += normalize(dir) * f;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return newVelocity; \r\n}\r\n\r\nvoid main() {\r\n    // gl_FragCoord are pixel coordinates, but we need textureCoordinates\r\n    // to access the actual texel from the texture. We use this formula to\r\n    // calculate texture coordinate using resolution that is sent by default \r\n    // to the shader. \r\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n    \r\n    // texturePosition, textureVelocity are data textures sent as we added them\r\n    // as dependencies while initializing our GPUComputationRenderer. \r\n    // This is the position (x, y, z) and velocity (x, y, z) for each bird, all being \r\n    // calculated and operated on in parallel. \r\n    selfPosition = texture2D(texturePosition, uv).xyz;\r\n    selfVelocity = texture2D(textureVelocity, uv).xyz;\r\n\r\n    // Adjust target position. \r\n    vec3 updatedTargetPos = updateTargetPosition();\r\n\r\n    // Cohesion, Seperation, Alignment\r\n    vec3 newVelocity = updateBehavior(); \r\n\r\n    // Moving target response. \r\n    vec3 dirToTarget = updatedTargetPos - selfPosition; \r\n    float distToTarget = length(dirToTarget);\r\n    if (distToTarget < uTargetRadius) {\r\n        float f = (1.0 - (distToTarget / uTargetRadius)) *  uAttractionForce;\r\n        newVelocity += normalize(dirToTarget) * f; \r\n    }\r\n\r\n    // Check if agent is in bounding box. \r\n    newVelocity = boundingBoxCheck(newVelocity); \r\n\r\n    // Clamp velocity. \r\n    if (length(newVelocity) > uMaxAgentSpeed) {\r\n        newVelocity = normalize(newVelocity) * uMaxAgentSpeed;\r\n    }\r\n\r\n    newVelocity = mix(newVelocity, selfVelocity, uDelta * 0.001);\r\n\r\n    // Output a velocity that is stored in the texture. \r\n    gl_FragColor = vec4(newVelocity, 1.0);\r\n}",n),this.positionVariable=this.gpuCompute.addVariable("texturePosition","/*\r\n  Name: fragmentShaderPosition.js\r\n  Author: Amay Kataria\r\n  Date: 10/21/2021\r\n  Description: Core shader for updating the position of each pigeon in the flock. \r\n*/\r\n\r\nuniform float uTime;\r\nuniform float uDelta;\r\nuniform bool uPause;\r\n\r\n// This influence how quick the pigeon advances to the position. \r\n// Maybe bring this in from the GUI. \r\nfloat posInfluence = 5.0; \r\n\r\nvoid main()\t{\r\n    // Calculate texture coordinates from pixel coordinates (gl_FragColor)\r\n    // resolution is passed as a default uniform, which is stored as WIDTH,\r\n    // HEIGHT as initialized in GPUComputationRenderer.\r\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n\r\n    // Store this to work on later. \r\n    vec4 tempPos = texture2D(texturePosition, uv); \r\n    vec3 position = tempPos.xyz;\r\n    vec3 velocity = texture2D(textureVelocity, uv).xyz;\r\n\r\n    // By default we set this \r\n    float phase = tempPos.w;\r\n    phase = mod((phase + uDelta + length( velocity.xz ) * uDelta * 3. + max(velocity.y, 0.0 ) * uDelta * 6.), 62.83);\r\n\r\n    vec3 newPosition = position + velocity * uDelta * posInfluence;\r\n\r\n    // When paused, return current position.\r\n    if (uPause == true) {\r\n      newPosition = position;\r\n    }\r\n    \r\n    gl_FragColor = vec4(newPosition, phase);\r\n}",i),this.gpuCompute.setVariableDependencies(this.velocityVariable,[this.positionVariable,this.velocityVariable]),this.gpuCompute.setVariableDependencies(this.positionVariable,[this.positionVariable,this.velocityVariable]),this.positionUniforms=this.positionVariable.material.uniforms,this.velocityUniforms=this.velocityVariable.material.uniforms,this.positionUniforms.uTime={value:0},this.positionUniforms.uDelta={value:0},this.positionUniforms.uPause={value:!1},this.velocityUniforms.uTime={value:1},this.velocityUniforms.uDelta={value:0},this.velocityUniforms.uAttractionForce={value:_.Attraction},this.velocityUniforms.uSeperationForce={value:_.Seperation},this.velocityUniforms.uAlignmentForce={value:_.Alignment},this.velocityUniforms.uCohesionForce={value:_.Cohesion},this.velocityUniforms.uShoot={value:!1},this.velocityUniforms.uTargetPosition={value:new g.Vector3},this.velocityUniforms.uTargetRadius={value:F.CurrentTargetRadius},this.velocityUniforms.uMaxAgentSpeed={value:_.MaxSpeed},this.velocityUniforms.uSpeedLerp={value:_.SpeedLerp},this.velocityUniforms.uBoundingBoxMin={value:new g.Vector3},this.velocityUniforms.uBoundingBoxMax={value:new g.Vector3},this.velocityVariable.wrapS=g.ClampToEdgeWrapping,this.velocityVariable.wrapT=g.ClampToEdgeWrapping,this.positionVariable.wrapS=g.ClampToEdgeWrapping,this.positionVariable.wrapT=g.ClampToEdgeWrapping;var o=this.gpuCompute.init();null!==o&&console.error(o),!0,this.pause=!1,this.shoot=!1,console.log("GPU Renderer Ready.")}return Object(h.a)(e,[{key:"update",value:function(e,t,i,n){this.positionUniforms.uPause.value=this.pause,this.positionUniforms.uDelta.value=e,this.positionUniforms.uTime.value=t,this.velocityUniforms.uDelta.value=e,this.velocityUniforms.uTime.value=t,this.velocityUniforms.uAttractionForce.value=_.Attraction,this.velocityUniforms.uSeperationForce.value=_.Seperation,this.velocityUniforms.uAlignmentForce.value=_.Alignment,this.velocityUniforms.uCohesionForce.value=_.Cohesion,this.velocityUniforms.uShoot.value=this.shoot,this.velocityUniforms.uTargetPosition.value.set(i.x,i.y,i.z),this.velocityUniforms.uTargetRadius.value=F.CurrentTargetRadius,this.velocityUniforms.uMaxAgentSpeed.value=_.MaxSpeed,this.velocityUniforms.uSpeedLerp.value=_.SpeedLerp,this.velocityUniforms.uBoundingBoxMin.value.set(n.min.x,n.min.y,n.min.z),this.velocityUniforms.uBoundingBoxMax.value.set(n.max.x,n.max.y,n.max.z),this.gpuCompute.compute(),this.pause&&(this.pause=!1),this.shoot&&(this.shoot=!1)}},{key:"fillPositionTexture",value:function(e){for(var t=e.image.data,i=0,n=t.length;i<n;i+=4){var o=Math.random()-.5,r=Math.random()-.5,a=Math.random()-.5;t[i+0]=o,t[i+1]=r,t[i+2]=a,t[i+3]=1}}},{key:"fillVelocityTexture",value:function(e){for(var t=e.image.data,i=0,n=t.length;i<n;i+=4){var o=Math.random()-.5,r=Math.random()-.5,a=Math.random()-.5;t[i+0]=5*o,t[i+1]=5*r,t[i+2]=5*a,t[i+3]=1}}},{key:"getPositionRenderTarget",value:function(){return this.gpuCompute.getCurrentRenderTarget(this.positionVariable).texture}},{key:"getVelocityRenderTarget",value:function(){return this.gpuCompute.getCurrentRenderTarget(this.velocityVariable).texture}},{key:"pausePigeons",value:function(){this.pause=!0}},{key:"shootPigeons",value:function(){this.shoot=!0}}]),e}(),W=!1,_={Attraction:5,Seperation:20,Alignment:20,Cohesion:20,Freedom:.75,MaxSpeed:5,SpeedLerp:.1,Size:.2,Count:H},K=function(){function e(t){Object(u.a)(this,e),this.patternManager=new z,this.target=new E(t),this.clock=new g.Clock,this.pigeonShader="",this.gpuRenderer=""}return Object(h.a)(e,[{key:"setupTarget",value:function(e){this.patternManager.setTargetPattern(e)}},{key:"setupPigeonGPU",value:function(e,t){this.pigeon=new U(this.initPigeons.bind(this,e,t))}},{key:"update",value:function(e){if(W){var t=this.patternManager.update();if(t){var i=this.clock.getDelta(),n=this.clock.oldTime;this.target.update(t,n),this.gpuRenderer.update(i,n,t,e),this.pigeonShader&&(this.pigeonShader.uniforms.time.value=n/1e3,this.pigeonShader.uniforms.delta.value=i,this.pigeonShader.uniforms.size.value=_.Size,this.pigeonShader.uniforms.texturePosition.value=this.gpuRenderer.getPositionRenderTarget(),this.pigeonShader.uniforms.textureVelocity.value=this.gpuRenderer.getVelocityRenderTarget()),this.pigeon.setDrawRange(_.Count)}}}},{key:"pausePigeons",value:function(){this.gpuRenderer&&this.gpuRenderer.pausePigeons()}},{key:"initPigeons",value:function(e,t){var i=this,n=this.pigeon.birdGeometry,o=new g.MeshStandardMaterial({vertexColors:!0,flatShading:!0,side:g.DoubleSide,roughness:0,metalness:0});o.onBeforeCompile=function(e){e.uniforms.texturePosition={value:null},e.uniforms.textureVelocity={value:null},e.uniforms.textureAnimation={value:i.pigeon.textureAnimation},e.uniforms.time={value:1},e.uniforms.size={value:.2},e.uniforms.delta={value:0};var t="#define STANDARD",n="\n                attribute vec4 reference;\n                attribute vec4 seeds;\n                uniform sampler2D texturePosition;\n                uniform sampler2D textureVelocity;\n                uniform sampler2D textureAnimation;\n                uniform float size;\n                uniform float time;\n            ";e.vertexShader=e.vertexShader.replace(t,t+n),t="#include <begin_vertex>",n="\n                vec4 tmpPos = texture2D(texturePosition, reference.xy);\n\n                vec3 pos = tmpPos.xyz;\n                vec3 velocity = normalize(texture2D(textureVelocity, reference.xy).xyz);\n                vec3 aniPos = texture2D(textureAnimation, vec2(reference.z, mod(time + (seeds.x) * ((0.0004 + seeds.y / 10000.0) + normalize(velocity) / 20000.0), reference.w))).xyz;\n                vec3 newPosition = position;\n\n                newPosition = mat3(modelMatrix) * (newPosition + aniPos);\n                newPosition *= size + seeds.y * size * 0.2;\n\n                velocity.z *= -1.;\n                float xz = length(velocity.xz);\n                float xyz = 1.;\n                float x = sqrt(1. - velocity.y * velocity.y);\n\n                float cosry = velocity.x / xz;\n                float sinry = velocity.z / xz;\n\n                float cosrz = x / xyz;\n                float sinrz = velocity.y / xyz;\n\n                mat3 maty =  mat3(cosry, 0, -sinry, 0, 1, 0, sinry, 0, cosry);\n                mat3 matz =  mat3(cosrz , sinrz, 0, -sinrz, cosrz, 0, 0, 0,1);\n\n                newPosition =  maty * matz * newPosition;\n                newPosition += pos;\n\n                vec3 transformed = vec3(newPosition);\n            ",e.vertexShader=e.vertexShader.replace(t,n),i.pigeonShader=e};var r=new g.Mesh(n,o);r.rotation.y=Math.PI/2,r.castShadow=!0,r.receiveShadow=!0,t.add(r),this.gpuRenderer=new N(e),W=!0,console.log("Pigeon Manager Ready")}},{key:"shootPigeon",value:function(){console.log("Pigeon Renderer: Shoot Pigeon"),this.gpuRenderer&&this.gpuRenderer.shootPigeons()}},{key:"setNewPatternType",value:function(e){this.patternManager.setTargetPattern(e),console.log("Setting pattern")}}]),e}(),Z=function(){function e(t){Object(u.a)(this,e),this.raycaster=new g.Raycaster,this.mouse=new g.Vector2,this.shootPigeon=t,this.isIntersecting=!1,window.addEventListener("click",this.onMouseClick.bind(this),!1),this.clock=new g.Clock}return Object(h.a)(e,[{key:"onMouseMove",value:function(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1}},{key:"intersect",value:function(e,t,i){if(i){this.raycaster.setFromCamera(this.mouse,e);var n=this.raycaster.intersectObject(t);this.isIntersecting=n.length>0}}},{key:"onMouseClick",value:function(){var e=this.clock.getDelta();console.log(e),this.isIntersecting&&e>5&&this.shootPigeon()}}]),e}(),q=i(89),X=i(90),Y=i(50),J=i.n(Y),Q=i(91),$=i.n(Q),ee=new(function(){function e(){Object(u.a)(this,e),this.siteURL="https://befantastic-martha.herokuapp.com/app",this.socket=$()(this.siteURL,{reconnection:!0,reconnectionDelay:500,reconnectionAttempts:1/0}),this.socket.once("connect",this.subscribe.bind(this)),this.handlePresetsCbk=""}return Object(h.a)(e,[{key:"subscribe",value:function(){console.log("Connected"),this.socket.on("time",this.logTime.bind(this)),this.socket.on("receivePresets",this.handlePresets.bind(this))}},{key:"handlePresets",value:function(e){this.handlePresetsCbk(e)}},{key:"saveGuiPreset",value:function(e,t){var i={name:e,data:t};this.socket.emit("savePreset",i)}},{key:"readAllPresets",value:function(e){this.socket.emit("getPresets"),this.handlePresetsCbk=e}},{key:"deletePreset",value:function(e){this.socket.emit("deletePreset",e)}},{key:"disconnect",value:function(){console.log("Socket Server Disconnected.")}},{key:"logTime",value:function(e){}}]),e}()),te={ShowSkybox:!0,ShowBoundingBox:!0,BoundingBoxScalar:0},ie=!1,ne=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,[{key:"createSkybox",value:function(e,t,i,n,o,r,a){var s=[new g.VideoTexture(o.current),new g.VideoTexture(n.current),new g.VideoTexture(r.current),new g.VideoTexture(a.current),new g.VideoTexture(i.current),new g.VideoTexture(t.current)].map((function(e){return new g.MeshBasicMaterial({map:e,side:g.DoubleSide})})),l=new g.BoxGeometry(800,800,800);this.cubeMesh=new g.Mesh(l,s),e.add(this.cubeMesh),this.createBoundingBox(e),this.lastBoundingBoxScalar=te.BoundingBoxScalar,ie=!0,console.log("Skybox Ready.")}},{key:"createBoundingBox",value:function(e){this.cubeMesh.geometry.computeBoundingBox(),this.boundingBox=this.cubeMesh.geometry.boundingBox,this.boundingBox.expandByScalar(te.BoundingBoxScalar),this.boundingBoxMesh=new g.BoxHelper(this.cubeMesh,new g.Color(1,0,0)),this.boundingBoxMesh.visible=te.ShowBoundingBox,e.add(this.boundingBoxMesh)}},{key:"getBoundingBox",value:function(){if(this.boundingBox)return this.boundingBox}},{key:"update",value:function(){this.cubeMesh.visible=te.ShowSkybox,this.boundingBoxMesh.visible=te.ShowBoundingBox,te.BoundingBoxScalar!==this.lastBoundingBoxScalar&&(this.updateBoundingBox(),this.lastBoundingBoxScalar=te.BoundingBoxScalar)}},{key:"updateBoundingBox",value:function(){this.cubeMesh.geometry.computeBoundingBox(),this.boundingBox=this.cubeMesh.geometry.boundingBox,this.boundingBox.expandByScalar(te.BoundingBoxScalar),this.boundingBoxMesh.update(this.cubeMesh)}},{key:"getMesh",value:function(){return this.cubeMesh}}]),e}(),oe=!1,re={Preset:"Global",Presets:""},ae=function(){function e(t){var i=this;Object(u.a)(this,e),this.gui=new q.Pane({title:"Pigeon GUI",container:t,expanded:!1}),this.gui.registerPlugin(X),this.gui.addInput(re,"Preset"),this.presetOptions=[],this.buildPresets(),this.fpsGraph=this.gui.addBlade({view:"fpsgraph",label:"FPS",lineCount:2}),this.gui.addMonitor(w,"DrawCalls");var n=this.gui.addFolder({title:"Orbit Controls",expanded:!0});n.addInput(P,"EnableControls",{label:"Enable Controls"}),n.addInput(P,"EnablePan",{label:"Enable Panning"}),n.addInput(P,"AutoRotate",{label:"Enable AutoRotate"}),n.addInput(P,"RotateSpeed",{label:"Rotation Speed",min:.1,max:1}),n.addInput(P,"EnableKeys",{label:"Enable Keys"});var o=this.gui.addFolder({title:"Target Params",expanded:!0});o.addInput(F,"ShowTarget",{label:"Show Target"}),o.addInput(F,"MaxTargetRadius",{label:"Max Target Radius",min:50,max:400}),o.addMonitor(F,"CurrentTargetRadius",{label:"Current Target Radius"}),this.patternFolder=this.gui.addFolder({title:"Pattern Params",expanded:!0}),this.currentPatternType=S,this.buildPatternTypeOptions(),this.buildPatterns(),this.ellipseParamsFolder=this.patternFolder.addFolder({title:"Ellipse Pattern Params",expanded:!0}),this.ellipseParamsFolder.addInput(C,"Origin"),this.ellipseParamsFolder.addInput(C,"Radii",{x:{min:0,max:200},y:{min:0,max:200}}),this.ellipseParamsFolder.addInput(C,"Amplitude",{min:0,max:300}),this.ellipseParamsFolder.addInput(C,"Speed",{min:0,max:2}),this.ellipseParamsFolder.addInput(C,"Direction"),this.roseCurveParamsFolder=this.patternFolder.addFolder({title:"Rose-Curve Pattern Params",expanded:!0}),this.roseCurveParamsFolder.addInput(M,"Origin"),this.roseCurveParamsFolder.addInput(M,"Radius",{min:1,max:400}),this.roseCurveParamsFolder.addInput(M,"Phase",{min:0,max:10}),this.roseCurveParamsFolder.addInput(M,"NumPetals",{min:1,max:10,step:1}),this.roseCurveParamsFolder.addInput(M,"Amplitude",{min:0,max:400}),this.roseCurveParamsFolder.addInput(M,"Sinusoidal"),this.roseCurveParamsFolder.addInput(M,"Direction"),this.roseCurveParamsFolder.addInput(M,"Speed",{min:0,max:2}),this.showPatternParams();var r=this.gui.addFolder({title:"Pigeon Params",expanded:!0});r.addInput(_,"Size",{label:"Size",min:0,max:1,step:.01}),r.addInput(_,"Attraction",{label:"Attraction Force",min:0,max:100,step:1}),r.addInput(_,"Seperation",{label:"Seperation Force",min:0,max:100,step:1}),r.addInput(_,"Alignment",{label:"Alignment Force",min:0,max:100,step:1}),r.addInput(_,"Cohesion",{label:"Cohesion Force",min:0,max:100,step:1}),r.addInput(_,"MaxSpeed",{label:"Max Agent Speed",min:1,max:200,step:.1}),r.addInput(_,"SpeedLerp",{label:"Speed Lerp",min:0,max:1,step:.01}),r.addInput(_,"Count",{label:"Count",min:0,max:_.Count,step:1});var a=this.gui.addFolder({title:"Skybox Params",expanded:!0});a.addInput(te,"ShowSkybox"),a.addInput(te,"ShowBoundingBox"),a.addInput(te,"BoundingBoxScalar",{min:-50,max:0}).on("change",this.onBoundedBoxScalarChange.bind(this)),this.gui.addButton({title:"Save Preset"}).on("click",this.onSavePreset.bind(this)),this.gui.addButton({title:"Delete Preset"}).on("click",this.onDeletePreset.bind(this)),ee.readAllPresets(this.onReceivePresets.bind(this)),this.gui.hidden=!0,window.addEventListener("keypress",(function(e){"h"===e.key&&(i.gui.hidden=!i.gui.hidden)}))}return Object(h.a)(e,[{key:"onPresetSelected",value:function(e){var t=JSON.parse(e.value);this.gui.importPreset(t)}},{key:"onReceivePresets",value:function(e){var t=this;if(console.log("All the presets received:"),console.log(e),e.length>0){e.forEach((function(e){var i=e.name,n=e.config;t.presetOptions.push({text:i,value:JSON.stringify(n)})}));var i=e[0].config;this.gui.importPreset(i),this.disposePresets(),this.buildPresets(),this.currentPatternType=i.PatternType,this.buildPatternTypeOptions(),this.disposePatterns(),this.buildPatterns(),this.showPatternParams(),oe=!0,console.log("GUI Ready")}}},{key:"onSavePreset",value:function(){var e=re.Preset;if(e.length>0){this.disposePresets();var t=this.gui.exportPreset(),i=J.a.find(this.presetOptions,(function(t){return t.text===e}));i?(console.log("Preset Exists. Updating database and local copy of the preset."),i.value=JSON.stringify(t),this.presetOptions=J.a.sortBy(this.presetOptions,(function(t){return t.text===e?0:1}))):(console.log("Preset doesnt exist. New entry in the database."),this.presetOptions.unshift({text:e,value:JSON.stringify(t)})),ee.saveGuiPreset(e,t),this.buildPresets()}else alert("Not an empty entry please.")}},{key:"onDeletePreset",value:function(){if(this.presetOptions.length>0){var e=re.Preset;if(console.log("Deleting preset: "+e),J.a.remove(this.presetOptions,(function(t){return t.text===e})),ee.deletePreset(e),this.disposePresets(),this.buildPresets(),this.presetOptions.length>0){var t=this.presetOptions[0].value;this.gui.importPreset(JSON.parse(t))}}}},{key:"disposePresets",value:function(){re.Presets="",this.presetList.dispose()}},{key:"buildPresets",value:function(){this.presetList=this.gui.addInput(re,"Presets",{index:1,options:this.presetOptions}),this.presetList.on("change",this.onPresetSelected.bind(this))}},{key:"buildPatternTypeOptions",value:function(){this.currentPatternType===S?this.patternTypeOptions={Ellipse:S,RoseCurve:T}:this.currentPatternType===T?this.patternTypeOptions={RoseCurve:T,Ellipse:S}:this.patternTypeOptions={Ellipse:S,RoseCurve:T}}},{key:"disposePatterns",value:function(){this.patternList.dispose()}},{key:"buildPatterns",value:function(){this.patternList=this.patternFolder.addInput(k,"PatternType",{label:"Pattern Type",index:0,options:this.patternTypeOptions}),this.patternList.on("change",this.onPatternSelected.bind(this))}},{key:"onPatternSelected",value:function(e){this.currentPatternType=e.value,this.showPatternParams(),this.patternChangeUpdate(this.currentPatternType)}},{key:"showPatternParams",value:function(){this.currentPatternType===S?(this.ellipseParamsFolder.hidden=!1,this.roseCurveParamsFolder.hidden=!0):this.currentPatternType===T&&(this.ellipseParamsFolder.hidden=!0,this.roseCurveParamsFolder.hidden=!1)}},{key:"subscribeForPatternChange",value:function(e){this.patternChangeUpdate=e}},{key:"onBoundedBoxScalarChange",value:function(e){}}]),e}(),se=i(5),le={container:{position:"absolute",top:"30px",right:"35px"}},ce=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={},n.guiRef=s.a.createRef(),n}return Object(h.a)(i,[{key:"render",value:function(){return Object(se.jsx)("div",{ref:this.guiRef,style:le.container})}},{key:"componentDidMount",value:function(){var e=this.guiRef.current;this.gui=new ae(e)}},{key:"getFpsGraph",value:function(){return this.gui.fpsGraph}},{key:"subscribeForPatternChange",value:function(e){this.gui.subscribeForPatternChange(e)}},{key:"getCurPatternType",value:function(){return this.gui.currentPatternType}}]),i}(s.a.Component),ue=Object(f.a)(ce),he=i.p+"static/media/front.b8b47d5c.mp4",de=i.p+"static/media/back.4ecafa9e.mp4",pe=i.p+"static/media/top.7fc2b771.mp4",fe=i.p+"static/media/bottom.a29ea400.mp4",me=i.p+"static/media/left.3f0b9e35.mp4",ge=i.p+"static/media/right.05bf51bd.mp4",ve=!1,ye={container:{width:"100vw",height:"100vh",overflow:"hidden"},crosshair:{cursor:"crosshair"},video:{display:"none"}},be=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={},n.shouldAnimate=!0,n.worldRef=s.a.createRef(),n.guiRef=s.a.createRef(),n.navRef=s.a.createRef(),n.panelRef=s.a.createRef(),n.frontVideoRef=s.a.createRef(),n.backVideoRef=s.a.createRef(),n.leftVideoRef=s.a.createRef(),n.rightVideoRef=s.a.createRef(),n.topVideoRef=s.a.createRef(),n.bottomVideoRef=s.a.createRef(),n.scene=new g.Scene,n.scene.background=new g.Color("#F9FDFF"),n.cameraControl=new j,n.lightingManager=new L(n.scene),n.skyboxManager=new ne,n.raycastManager=new Z(n.onShootPigeon.bind(Object(m.a)(n))),n.rendererManager=new O,n.pigeonManager=new K(n.scene),n.videoLoadProgress=[],window.addEventListener("resize",n.onWindowResize.bind(Object(m.a)(n))),document.addEventListener("visibilitychange",(function(e){document.hidden?n.updateAnimationStatus(!1):n.updateAnimationStatus(!0)})),n}return Object(h.a)(i,[{key:"componentDidMount",value:function(){var e=this.rendererManager.getDomElement();this.worldRef.current.appendChild(e),this.fpsGraph=this.guiRef.current.getFpsGraph(),this.guiRef.current.subscribeForPatternChange(this.onPatternChanged.bind(this)),this.skyboxManager.createSkybox(this.scene,this.frontVideoRef,this.backVideoRef,this.leftVideoRef,this.rightVideoRef,this.topVideoRef,this.bottomVideoRef),this.rendererManager.setAnimationLoop(this.renderThree.bind(this)),this.checkIfReady()}},{key:"render",value:function(){return Object(se.jsxs)("div",{style:ye.container,ref:this.worldRef,children:[Object(se.jsx)(ue,{ref:this.guiRef}),Object(se.jsx)("video",{id:"front",ref:this.frontVideoRef,playsInline:!0,loop:!0,src:he,style:ye.video,onCanPlay:this.onVideoLoaded.bind(this)}),Object(se.jsx)("video",{id:"back",ref:this.backVideoRef,playsInline:!0,loop:!0,src:de,style:ye.video,onCanPlay:this.onVideoLoaded.bind(this)}),Object(se.jsx)("video",{id:"left",ref:this.leftVideoRef,playsInline:!0,loop:!0,src:me,style:ye.video,onCanPlay:this.onVideoLoaded.bind(this)}),Object(se.jsx)("video",{id:"right",ref:this.rightVideoRef,playsInline:!0,loop:!0,src:ge,style:ye.video,onCanPlay:this.onVideoLoaded.bind(this)}),Object(se.jsx)("video",{id:"top",ref:this.topVideoRef,playsInline:!0,loop:!0,src:pe,style:ye.video,onCanPlay:this.onVideoLoaded.bind(this)}),Object(se.jsx)("video",{id:"bottom",ref:this.bottomVideoRef,playsInline:!0,loop:!0,src:fe,style:ye.video,onCanPlay:this.onVideoLoaded.bind(this)})]})}},{key:"onVideoLoaded",value:function(){this.videoLoadProgress.length<6&&(this.videoLoadProgress.push(!0),this.checkIfReady())}},{key:"checkIfReady",value:function(){6===this.videoLoadProgress.length&&ie&&(ve=!0,console.log("World Ready."))}},{key:"renderThree",value:function(){if(this.fpsGraph.begin(),this.pigeonManager){var e=this.skyboxManager.getBoundingBox();this.pigeonManager.update(e)}if(this.cameraControl.update(this.scene),this.rendererManager.render(this.scene,this.cameraControl.getCamera()),this.skyboxManager.update(),this.rendererManager.monitorDrawCalls(),this.cameraControl.animationStopped){var t=this.skyboxManager.getMesh();t&&this.raycastManager.intersect(this.cameraControl.camera,t,this.shouldAnimate)}this.fpsGraph.end()}},{key:"onWindowResize",value:function(){if(this.cameraControl){var e=this.cameraControl.getCamera();e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),this.rendererManager.updateSize(window.innerWidth,window.innerHeight)}}},{key:"updateAnimationStatus",value:function(e){this.shouldAnimate=e,e?this.rendererManager.setAnimationLoop(this.renderThree.bind(this)):(this.pigeonManager.pausePigeons(),this.rendererManager.setAnimationLoop(null))}},{key:"beginWorld",value:function(){this.frontVideoRef.current.play(),this.backVideoRef.current.play(),this.leftVideoRef.current.play(),this.rightVideoRef.current.play(),this.topVideoRef.current.play(),this.bottomVideoRef.current.play(),console.log("Playing all videos.");var e=this.guiRef.current.getCurPatternType();this.pigeonManager.setupTarget(e),this.pigeonManager.setupPigeonGPU(this.rendererManager.renderer,this.scene)}},{key:"enterWorld",value:function(){this.cameraControl.initialTween(this.props.onInitialCameraAnimationDone)}},{key:"onPatternChanged",value:function(e){this.pigeonManager.setNewPatternType(e)}},{key:"onShootPigeon",value:function(){this.shouldAnimate&&this.pigeonManager.shootPigeon()}},{key:"scrollTo",value:function(){Object(v.elementScrollIntoView)(this.worldRef.current,{behavior:"smooth",block:"start"})}}]),i}(s.a.Component),xe=Object(f.a)(be),Pe=i(10),je="#ffffff",Le="#67749C",we="#B2B6C2",Oe="#91614B",ke="#5C5884",Se="#B5604C",Te="12px",Ce="14px",Me="16px",Be="18px",Re="20px",Ae="24px",ze="28px",Fe="32px",Ee="40px",Ve="44px",Ie="52px",De="76px",He="80px",Ue="4px",Ge="8px",Ne="12px",We="20px",_e="28px",Ke="52px",Ze="64px",qe="bebas",Xe="montserrat",Ye="tenorsans",Je=i.p+"static/media/pigeon.fbcc625c.mp4",Qe={container:{display:"flex",flexDirection:"row"},ppVideo:{width:"600px",height:"100%",objectFit:"fill"},content:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},title:{letterSpacing:5,fontFamily:qe,fontSize:Ee,marginTop:_e,color:Le},info:{letterSpacing:3,lineSpacing:2,fontFamily:Ye,fontSize:Re,color:Le,padding:_e}},$e=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={},n}return Object(h.a)(i,[{key:"render",value:function(){return Object(se.jsxs)("div",{style:Qe.container,children:[Object(se.jsx)("div",{style:Qe.image,children:Object(se.jsx)("video",{style:Qe.ppVideo,autoPlay:!0,playsInline:!0,muted:!0,loop:!0,src:Je})}),Object(se.jsxs)("div",{style:Qe.content,children:[Object(se.jsx)("div",{style:Qe.title,children:"PASSENGER PIGEONS"}),Object(se.jsx)("div",{style:Qe.info,children:"It is obvious, that the organization of the treatment results in a complete compliance with The Facility of Environmental Flexibility (Hubert Agee in The Book of the Emergency Planning) It's a well-known fact that the major accomplishments, such as the continuing setting doctrine, the flexible production planning, the ability bias or the predictable behavior may share attitudes on the major outcomes. The situation is quite a successful matter. To be honest, the continuing hierarchy doctrine and growth opportunities of it are quite high.It's a well-known fact that the major accomplishments, such as the continuing setting doctrine, the flexible production planning, the ability bias or the predictable behavior may share attitudes on the major outcomes.It a well-known fact that the major accomplishments, such as the...."})]})]})}}]),i}(s.a.Component),et=Object(f.a)($e),tt=i.p+"static/media/gaugan.8b3dea59.mp4",it={container:{display:"flex",flexDirection:"row"},video:{width:"600px",height:"100%",objectFit:"fill"},content:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},title:{letterSpacing:5,fontFamily:qe,fontSize:Ee,marginTop:_e,color:Le},info:{letterSpacing:3,lineSpacing:2,fontFamily:Ye,fontSize:Re,color:Le,padding:_e}},nt=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={},n}return Object(h.a)(i,[{key:"render",value:function(){return Object(se.jsxs)("div",{style:it.container,children:[Object(se.jsxs)("div",{style:it.content,children:[Object(se.jsx)("div",{style:it.title,children:"CLIMATE STATEMENT"}),Object(se.jsx)("div",{style:it.info,children:"It is obvious, that the organization of the treatment results in a complete compliance with The Facility of Environmental Flexibility (Hubert Agee in The Book of the Emergency Planning) It's a well-known fact that the major accomplishments, such as the continuing setting doctrine, the flexible production planning, the ability bias or the predictable behavior may share attitudes on the major outcomes. The situation is quite a successful matter. To be honest, the continuing hierarchy doctrine and growth opportunities of it are quite high.It's a well-known fact that the major accomplishments, such as the continuing setting doctrine, the flexible production planning, the ability bias or the predictable behavior may share attitudes on the major outcomes.Its a well-known fact that the major accomplishments, such as the...."})]}),Object(se.jsx)("div",{style:it.videoCanvas,children:Object(se.jsx)("video",{style:it.video,src:tt,playsInline:!0,loop:!0,autoPlay:!0,muted:!0})})]})}}]),i}(s.a.Component),ot=Object(f.a)(nt),rt={container:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:Ke,color:Le,fontFamily:Ye},website:{letterSpacing:5,fontSize:Ce},message:{color:Se,marginTop:Ue,letterSpacing:3,fontSize:Ce,fontStyle:"italic"}},at=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={},n}return Object(h.a)(i,[{key:"render",value:function(){return Object(se.jsxs)("div",{style:rt.container,children:[Object(se.jsx)("div",{style:rt.website,children:"thelostpassage.art, \xa9 2021"}),Object(se.jsx)("div",{style:rt.message,children:"crafted with love, care, and hope."})]})}}]),i}(s.a.Component),st=Object(f.a)(at),lt=i.p+"static/media/beFantastic.5719ed1c.jpg",ct=i.p+"static/media/artahack.afc70d6b.jpg",ut=i.p+"static/media/supernormal.04eff6ee.jpg",ht=i.p+"static/media/dara.5d8346a9.jpg",dt=i.p+"static/media/amay.0c2f5e8c.jpg",pt=i.p+"static/media/shao.92ba0127.jpg",ft=i.p+"static/media/yu.bcabd1ce.jpg",mt=i.p+"static/media/ong2.d510c1bd.jpg",gt={container:{display:"flex",alignItems:"center",width:"100%",flexDirection:"column",paddingTop:_e,paddingBottom:Ne},title:{letterSpacing:5,fontFamily:qe,fontSize:Ee,marginTop:_e,color:Le},team:{display:"flex",flexDirection:"row",marginTop:Ke,width:"100%",justifyContent:"center"},member:{display:"flex",flexDirection:"column",alignItems:"center",paddingLeft:Ke,paddingRight:Ke},photo:{width:"150px",height:"150px",borderRadius:"75px",backgroundColor:we},infoContainer:{display:"flex",flexDirection:"column",alignItems:"center",fontFamily:Ye,marginTop:Ne},name:{color:Oe,fontSize:Re},location:{color:Le,fontSize:Me},moreMargin:{marginTop:Ze},sponsors:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",marginTop:Ke,width:"100%"},image:{objectFit:"contain"}},vt=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={},n}return Object(h.a)(i,[{key:"render",value:function(){var e=this.getKianPeng(),t=this.getAmay(),i=this.getShao(),n=this.getYu();return Object(se.jsxs)("div",{style:gt.container,children:[Object(se.jsx)("div",{style:gt.title,children:"ABOUT THE TEAM"}),Object(se.jsxs)("div",{style:gt.team,children:[e,t,i,n]}),Object(se.jsxs)("div",{style:gt.sponsors,children:[Object(se.jsx)("img",{width:"350px",style:gt.image,src:lt,alt:"befantastic"}),Object(se.jsx)("img",{width:"300px",style:gt.image,src:ct,alt:"artahack"}),Object(se.jsx)("img",{width:"300px",style:gt.image,src:ut,alt:"supernormal"}),Object(se.jsx)("img",{width:"300px",style:gt.image,src:ht,alt:"dara"})]}),Object(se.jsx)(st,{})]})}},{key:"getKianPeng",value:function(){return Object(se.jsxs)("a",{href:"https://www.ongkianpeng.art/",target:"_blank",rel:"noreferrer",style:gt.member,children:[Object(se.jsx)("img",{src:mt,alt:"ong",style:gt.photo}),Object(se.jsxs)("div",{style:gt.infoContainer,children:[Object(se.jsx)("div",{style:gt.name,children:"Ong Kian-Peng"}),Object(se.jsx)("div",{style:gt.location,children:"Mentor"}),Object(se.jsx)("div",{style:gt.location,children:"Singapore"})]})]})}},{key:"getAmay",value:function(){return Object(se.jsxs)("a",{href:"https://amaykataria.com",target:"_blank",rel:"noreferrer",style:gt.member,children:[Object(se.jsx)("img",{src:dt,alt:"amay",style:gt.photo}),Object(se.jsxs)("div",{style:gt.infoContainer,children:[Object(se.jsx)("div",{style:gt.name,children:"Amay Kataria"}),Object(se.jsx)("div",{style:gt.location,children:"New-Media Artist"}),Object(se.jsx)("div",{style:gt.location,children:"USA"})]})]})}},{key:"getShao",value:function(){return Object(se.jsxs)("div",{style:gt.member,children:[Object(se.jsx)("img",{src:pt,alt:"shao",style:gt.photo}),Object(se.jsxs)("div",{style:gt.infoContainer,children:[Object(se.jsx)("div",{style:gt.name,children:"Shaohui Kwok"}),Object(se.jsx)("div",{style:gt.location,children:"Cultural Producer"}),Object(se.jsx)("div",{style:gt.location,children:"Singapore"})]})]})}},{key:"getYu",value:function(){return Object(se.jsxs)("div",{style:gt.member,children:[Object(se.jsx)("img",{src:ft,alt:"yu",style:gt.photo}),Object(se.jsxs)("div",{style:gt.infoContainer,children:[Object(se.jsx)("div",{style:gt.name,children:"Yu-Jeng Kuo"}),Object(se.jsx)("div",{style:gt.location,children:"Software Engineer"}),Object(se.jsx)("div",{style:gt.location,children:"Singapore"})]})]})}}]),i}(s.a.Component),yt=Object(f.a)(vt),bt={container:(n={position:"relative",width:"100%",background:"#e6e9ec"},Object(Pe.a)(n,"background","-moz-linear-gradient(top, #e6e9ec 0%, #f9fdff 100%)"),Object(Pe.a)(n,"background","-webkit-linear-gradient(top, #e6e9ec 0%,#f9fdff 100%)"),Object(Pe.a)(n,"background","linear-gradient(to bottom, #e6e9ec 0%,#f9fdff 100%)"),n)},xt=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={},n.containerRef=s.a.createRef(),n}return Object(h.a)(i,[{key:"render",value:function(){var e=this.getPanel();return Object(se.jsx)("div",{style:bt.container,ref:this.containerRef,children:e})}},{key:"getPanel",value:function(){return this.props.title===Lt.PIGEONS?Object(se.jsx)(et,{}):this.props.title===Lt.CLIMATE?Object(se.jsx)(ot,{}):this.props.title===Lt.ABOUT?Object(se.jsx)(yt,{}):void 0}},{key:"scrollTo",value:function(){var e=this;setTimeout((function(){Object(v.elementScrollIntoView)(e.containerRef.current,{behavior:"smooth",block:"start"})}),50)}}]),i}(s.a.Component),Pt=Object(f.a)(xt),jt={container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"}},Lt={PIGEONS:"PASSENGER PIGEONS",CLIMATE:"CLIMATE STATEMENT",ABOUT:"ABOUT US"},wt=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={},n.pigeonPanelRef=s.a.createRef(),n.climatePanelRef=s.a.createRef(),n.aboutPanelRef=s.a.createRef(),n}return Object(h.a)(i,[{key:"render",value:function(){return Object(se.jsxs)("div",{style:jt.container,children:[Object(se.jsx)(Pt,{ref:this.pigeonPanelRef,title:Lt.PIGEONS,panelNum:0}),Object(se.jsx)(Pt,{ref:this.climatePanelRef,title:Lt.CLIMATE,panelNum:1}),Object(se.jsx)(Pt,{ref:this.aboutPanelRef,title:Lt.ABOUT,panelNum:0})]})}},{key:"scroll",value:function(e){e===Lt.PIGEONS?this.pigeonPanelRef.current.scrollTo():e===Lt.CLIMATE?this.climatePanelRef.current.scrollTo():e===Lt.ABOUT&&this.aboutPanelRef.current.scrollTo()}}]),i}(s.a.Component),Ot=Object(f.a)(wt),kt=["title","titleId"];function St(){return St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},St.apply(this,arguments)}function Tt(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function Ct(e,t){var i=e.title,n=e.titleId,s=Tt(e,kt);return a.createElement("svg",St({width:"106px",height:"159px",viewBox:"0 0 106 159",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},s),i?a.createElement("title",{id:n},i):null,o||(o=a.createElement("defs",null,a.createElement("filter",{id:"filter_1"},a.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0 0 0 0 0.827451 0 0 0 0 0.827451 0 0 0 0 0.827451 0 0 0 1 0"})),a.createElement("filter",{id:"filter_2"},a.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0 0 0 0 0.40392157 0 0 0 0 0.45490196 0 0 0 0 0.6117647 0 0 0 1 0"})),a.createElement("path",{d:"M0 0L105.925 0L105.925 158.126L0 158.126L0 0Z",id:"path_1"}),a.createElement("clipPath",{id:"mask_1"},a.createElement("use",{xlinkHref:"#path_1"})))),r||(r=a.createElement("g",{id:"Pigeon_Silhouette_clip_art"},a.createElement("path",{d:"M0 0L105.925 0L105.925 158.126L0 158.126L0 0Z",id:"Background",fill:"none",fillRule:"evenodd",stroke:"none"}),a.createElement("g",{clipPath:"url(#mask_1)"},a.createElement("g",{id:"layer2"},a.createElement("g",{id:"g3204"},a.createElement("path",{d:"M6.96014 49.8085L11.7452 41.9783L12.8327 35.8882L13.0503 27.188L13.7028 21.0979L15.2253 15.2253L18.9229 8.70017L22.8379 4.13258L29.5806 0.652514L37.4107 0L41.7608 1.52253L45.2409 3.91508L46.5459 7.83015L44.5884 9.13518L43.9359 12.1802L46.3284 15.4428L43.5008 17.4003L38.9333 21.0979L38.0632 24.3605L37.8457 30.0156L41.3258 38.2808L45.6759 44.1534L49.8085 51.1135L52.201 56.1161L50.2435 59.8137L46.3284 60.0312L43.7183 63.9463L39.8033 69.6014L38.7157 76.779L40.2383 85.4792L46.1109 94.6144L50.6785 96.7894L52.8535 101.792L58.2911 102.88L62.2062 108.317L70.6889 108.317L75.6915 108.1L87.4367 112.015L91.1343 111.797L101.139 120.497L105.925 124.847L97.2244 123.325L93.5268 125.282L83.9566 122.02L76.9965 118.757L71.7764 115.277L67.8613 113.537L63.5112 115.712L60.0312 117.235L61.7712 121.15L60.2487 133.548L57.6386 141.813L58.9436 145.293L61.9887 144.858L59.5962 148.773L57.8561 155.516L57.8561 158.126L55.2461 157.691L53.9411 151.383L45.6759 153.776L40.4558 155.081L36.7582 154.646L37.4107 153.123L40.6733 151.818L44.5884 150.513L39.3683 150.295L36.9757 150.078L35.0182 147.468L41.1083 147.033L48.0684 147.468L52.8535 145.293L54.1586 136.81L54.8111 131.155L52.8535 129.198L49.156 123.542L49.3735 117.67L48.5034 114.842L40.2383 113.537L38.9333 116.365L39.3683 121.15L40.8908 124.195L38.7157 128.328L35.6707 132.243L32.6256 137.68L32.8431 141.16L35.4532 142.683L40.4558 141.813L42.1958 142.465L38.9333 144.858L35.8882 144.858L32.6256 144.423L31.3206 147.903L32.8431 154.211L28.9281 151.383L28.2755 147.468L25.013 147.685L17.1828 150.078L12.8327 152.035L9.78769 152.035L11.3102 148.773L15.8778 147.468L21.7504 145.728L16.3128 145.728L10.0052 146.163L8.26516 144.423L8.70017 142.465L13.0503 143.335L19.3579 143.118L25.448 142.465L28.4931 137.463L31.1031 130.285L31.1031 128.545L28.7106 124.195L27.623 116.582L26.1005 111.797L19.3579 103.967L13.2678 97.8769L7.39514 88.0892L2.17504 77.214L0.217504 67.4263L0 60.9012L3.91508 54.3761L6.96014 49.8085L6.96014 49.8085Z",id:"path2420",fill:"inherit",fillRule:"evenodd",stroke:"none"}),a.createElement("path",{d:"M2.04251 7.1488L0 3.77865L0.306375 1.22551L1.94039 0L5.00415 2.04251L9.08918 4.28928L10.5189 6.22967L11.6423 8.78281L9.39556 8.47643L6.74029 7.45517L4.28927 7.25092L2.04251 7.1488L2.04251 7.1488Z",transform:"translate(45.268066 8.334961)",id:"path3194",fill:"inherit",fillRule:"evenodd",stroke:"none"}),a.createElement("path",{d:"M11.5402 0L12.7657 2.65526L12.8678 6.94455L10.8253 8.98706L7.35304 9.39556L5.92329 10.8253L3.06377 14.8082L1.12338 19.3018L0 23.1825L1.02125 28.3909L3.16589 33.293L6.43391 39.012L9.29343 42.28L11.9487 42.9949L13.8891 46.2629L14.8082 48.1012L20.0166 50.1437L22.5698 54.1266L25.9399 55.4542L32.9866 55.1479L33.8036 52.0841L39.012 50.4501L39.4205 46.5693L39.2162 43.1992L41.1566 42.3821L40.2375 36.9695L37.378 31.3526L37.378 35.744L36.1525 41.5651L32.4759 45.4459L29.1058 49.5309L24.9186 49.6331L20.2209 46.9778L18.689 44.1183L21.5485 45.0374L26.1442 47.0799L29.5143 44.1183L33.3951 41.2588L35.6418 36.4589L36.0504 30.6377L34.7227 26.9612L31.5568 22.4676L28.5952 16.7486L25.7357 11.4381L22.3655 6.12754L17.5656 1.73614L11.5402 0L11.5402 0Z",transform:"translate(40.059692 51.944336)",id:"path3196",fill:"inherit",fillRule:"evenodd",stroke:"none"}),a.createElement("path",{d:"M15.8295 18.2805L19.9145 17.5656L18.689 14.5018L21.5485 13.787L15.3188 8.7828L16.6465 12.3572L16.1359 14.3997L7.25092 14.5018L3.06377 13.787L4.28927 11.7444L10.3147 12.2551L14.0933 12.2551L12.7657 6.74029L9.39555 1.63401L7.76154 0L7.9658 3.57439L6.22967 3.77865L6.74029 8.88493L5.00415 10.6211L2.24676 12.153L0 13.1742L1.22551 14.8082L5.31053 15.8295L12.3572 17.9741L15.8295 18.2805L15.8295 18.2805Z",transform:"translate(74.37427 92.28516)",id:"path3198",fill:"inherit",fillRule:"evenodd",stroke:"none"}),a.createElement("path",{d:"M2.88537 8.22331L7.06916 7.93477L8.80039 6.05928L8.94466 2.88537L7.3577 0.721344L3.46245 0L1.58695 2.16403L0 5.19367L2.88537 8.22331L2.88537 8.22331Z",transform:"translate(28.639648 3.0722656)",id:"path3200",fill:"inherit",fillRule:"evenodd",stroke:"none"}),a.createElement("path",{d:"M0.432807 4.32806L0 2.59683L1.15415 0.577074L3.31818 0L4.47233 1.00988L5.0494 3.17391L3.75099 5.33794L0.432807 4.32806L0.432807 4.32806Z",transform:"translate(31.092163 4.661133)",id:"path3202",fill:"inherit",fillRule:"evenodd",stroke:"none"})))))))}var Mt,Bt=a.forwardRef(Ct),Rt=(i.p,{container:{position:"absolute",top:"30px",left:"30px",display:"flex",flexDirection:"column",visibility:"visible"},hidden:{visibility:"hidden"},homeTitle:{fontFamily:qe,fontSize:Fe,letterSpacing:6,color:Le,cursor:"default"},titleContainer:{display:"flex",flexDirection:"column"},title:{fontFamily:Ye,fontSize:Me,letterSpacing:2,color:Le,cursor:"crosshair",paddingTop:Ge},hover:{color:Oe},homeButton:{position:"fixed",right:We,bottom:We,fontSize:Me,padding:Ge,backgroundColor:Le,width:He,height:He,borderRadius:Ie,zIndex:1},colorFlick:{animation:"x 3s ease-in-out infinite",animationName:{color:f.a.keyframes({"0%":{backgroundColor:Le},"50%":{backgroundColor:ke},"100%":{backgroundColor:Se}})}.color,animationDirection:"alternate"},homeHover:{backgroundColor:Oe},svg:{width:"100%",height:"100%",fill:"white"}}),At=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={isHoveringPigeons:!1,isHoveringClimate:!1,isHoveringAbout:!1,isHomeButtonHovering:!1,showHomeButton:!1},n}return Object(h.a)(i,[{key:"render",value:function(){var e=Rt.container,t=this.state.isHoveringPigeons?[Rt.title,Rt.hover]:Rt.title,i=this.state.isHoveringClimate?[Rt.title,Rt.hover]:Rt.title,n=this.state.isHoveringAbout?[Rt.title,Rt.hover]:Rt.title,o=this.getHomeButton();return Object(se.jsxs)("div",{style:e,children:[Object(se.jsx)("div",{style:Rt.homeTitle,children:"THE LOST PASSAGE"}),Object(se.jsxs)("div",{style:Rt.titleContainer,children:[Object(se.jsx)("div",{style:t,onClick:this.onClick.bind(this,Lt.PIGEONS),onMouseEnter:this.onHoverPigeons.bind(this),onMouseLeave:this.onHoverPigeons.bind(this),children:"PASSENGER PIGEONS"}),Object(se.jsx)("div",{style:i,onClick:this.onClick.bind(this,Lt.CLIMATE),onMouseEnter:this.onHoverClimate.bind(this),onMouseLeave:this.onHoverClimate.bind(this),children:"CLIMATE STATEMENT"}),Object(se.jsx)("div",{style:n,onClick:this.onClick.bind(this,Lt.ABOUT),onMouseEnter:this.onHoverAbout.bind(this),onMouseLeave:this.onHoverAbout.bind(this),children:"ABOUT US"})]}),o]})}},{key:"getHomeButton",value:function(){var e=this.state.showHomeButton?[Rt.homeButton,Rt.colorFlick]:[Rt.homeButton,Rt.hidden];return e=this.state.isHomeButtonHovering?[Rt.homeButton,Rt.homeHover]:e,Object(se.jsx)("div",{style:e,onClick:this.onHomeButtonClick.bind(this),onMouseEnter:this.onHomeButtonHover.bind(this),onMouseLeave:this.onHomeButtonHover.bind(this),children:Object(se.jsx)(Bt,{style:Rt.svg})})}},{key:"onHomeButtonHover",value:function(){var e=this.state.isHomeButtonHovering;this.setState({isHomeButtonHovering:!e})}},{key:"onHoverPigeons",value:function(){var e=this.state.isHoveringPigeons;this.setState({isHoveringPigeons:!e})}},{key:"onHoverClimate",value:function(){var e=this.state.isHoveringClimate;this.setState({isHoveringClimate:!e})}},{key:"onHoverAbout",value:function(){var e=this.state.isHoveringAbout;this.setState({isHoveringAbout:!e})}},{key:"onClick",value:function(e){this.props.onClickNavTitle(e),this.setState({showHomeButton:!0})}},{key:"onHomeButtonClick",value:function(){var e=this;this.props.onClickHomeButton(),setTimeout((function(){e.setState({showHomeButton:!1})}),250)}}]),i}(s.a.Component),zt=Object(f.a)(At),Ft=i(61),Et={pulse:f.a.keyframes({"0%":{transform:"scale(0.5)"},"50%":{transform:"scale(1.1)"},"100%":{transform:"scale(0.5)"}})},Vt={container:(Mt={position:"absolute",top:"0%",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1,background:"#e6e9ec"},Object(Pe.a)(Mt,"background","-moz-linear-gradient(top, #e6e9ec 0%, #f9fdff 100%)"),Object(Pe.a)(Mt,"background","-webkit-linear-gradient(top, #e6e9ec 0%,#f9fdff 100%)"),Object(Pe.a)(Mt,"background","linear-gradient(to bottom, #e6e9ec 0%,#f9fdff 100%)"),Mt),hide:{visibility:"hidden"},title:{fontFamily:qe,fontSize:Ve,textAlign:"center",maxWidth:"200px",letterSpacing:5,opacity:1,color:Le,"@media (min-width: 900px)":{fontSize:De,maxWidth:"100%",letterSpacing:6}},loadContainer:{display:"flex",flexDirection:"column",alignItems:"center"},svgContainer:{fontSize:Ae},loadTitle:{fontFamily:Xe,fontSize:Me,color:Le,marginTop:"-"+We},svg:{width:"80%",height:"80%",fill:Le},flash:{animationName:f.a.keyframes(Ft.bounceOut,"bounceOut"),animationDuration:"1.5s",animationTimingFunction:"ease-in-out"},svgSimplePulse:{animation:"x 5s linear infinite",animationName:Et.pulse},zoom:{animationName:f.a.keyframes(Ft.zoomIn,"zoom"),animationDuration:"5.0s",animationTimingFunction:"ease-in-out",animationFillMode:"forwards"},button:{fontFamily:Xe,color:Le,fontSize:Be,borderStyle:"solid",borderColor:Le,borderWidth:"4px",marginTop:Ne,padding:Ge,letterSpacing:"5px",cursor:"crosshair","@media (min-width: 900px)":{fontSize:ze,paddingTop:Ne,paddingBottom:Ne,paddingLeft:We,paddingRight:We}},hover:{backgroundColor:we,color:je},topMessage:{position:"absolute",color:Le,fontSize:Ce,textAlign:"center",paddingLeft:Ge,paddingRight:Ge,fontFamily:Ye,top:"15px","@media (min-width: 900px)":{fontSize:Be,top:"30px",paddingTop:Ne,paddingBottom:Ne,paddingLeft:We,paddingRight:We}},leftMessage:{position:"absolute",textAlign:"center",maxWidth:"300px",left:"-40%",color:Le,fontSize:Te,fontFamily:Ye,transform:"rotate(-90deg)","@media (min-width: 360px)":{left:"-35%"},"@media (min-width: 411px)":{left:"-30%"},"@media (min-width: 900px)":{fontSize:Be,maxWidth:"100%",left:"0px",paddingTop:Ne,paddingBottom:Ne,paddingLeft:We,paddingRight:We}},rightMessage:{position:"absolute",right:"-40%",textAlign:"center",maxWidth:"300px",fontSize:Te,fontFamily:Ye,color:Le,transform:"rotate(90deg)","@media (min-width: 360px)":{right:"-35%"},"@media (min-width: 411px)":{right:"-30%"},"@media (min-width: 900px)":{fontSize:Be,right:"0px",maxWidth:"100%",paddingTop:Ne,paddingBottom:Ne,paddingLeft:We,paddingRight:We}},bottomMessage:{position:"absolute",color:Le,fontSize:Ce,fontFamily:Ye,paddingLeft:We,paddingRight:We,textAlign:"center",bottom:"15px","@media (min-width: 900px)":{fontSize:Be,bottom:"30px",paddingTop:Ne,paddingBottom:Ne,paddingLeft:We,paddingRight:We}}},It=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={isHidden:!1,isLoading:!1,isHovering:!1,isDisabled:!0},n}return Object(h.a)(i,[{key:"render",value:function(){var e=Vt.container,t=this.state.isLoading?this.getLoader():this.getTitle(),i=this.getMessages();return Object(se.jsxs)("div",{style:e,children:[t,i,Object(se.jsx)(st,{})]})}},{key:"getLoader",value:function(){return Object(se.jsxs)("div",{style:Vt.loadContainer,children:[Object(se.jsx)("div",{style:[Vt.svgContainer,Vt.svgSimplePulse],children:Object(se.jsx)(Bt,{style:Vt.svg})}),Object(se.jsx)("div",{style:Vt.loadTitle,children:"Getting things ready..."})]})}},{key:"getTitle",value:function(){var e=this.state.isHovering?[Vt.button,Vt.hover]:[Vt.button],t=this.state.isDisabled?Object(se.jsx)(s.a.Fragment,{}):Object(se.jsx)("button",{disabled:this.state.isDisabled,onMouseEnter:this.onHoverOn.bind(this),onMouseLeave:this.onHoverOff.bind(this),onClick:this.onEnter.bind(this),style:e,children:"ENTER"});return Object(se.jsxs)(s.a.Fragment,{children:[Object(se.jsx)("div",{style:[Vt.title,Vt.flash],onAnimationEnd:this.onStartAnimationEnd.bind(this),children:"THE LOST PASSAGE"}),t]})}},{key:"getMessages",value:function(){return Object(se.jsxs)(s.a.Fragment,{children:[Object(se.jsx)("div",{style:Vt.topMessage,children:'"They existed in billions, but today they are lost and revered only in museums."'}),Object(se.jsx)("div",{style:Vt.leftMessage,children:'"A cruel and blind human intervention led to the extinction of this species."'}),Object(se.jsx)("div",{style:Vt.rightMessage,children:'"No matter how abundant something is-if one\'s not careful, one can lose it."'}),Object(se.jsx)("div",{style:Vt.bottomMessage,children:'"May we gather the strength to confront the reality of our climate condition."'})]})}},{key:"onEnter",value:function(){var e=this;setTimeout((function(){e.props.onEnterWorld()}),50),this.setState({isLoading:!0}),this.checkIfReady()}},{key:"checkIfReady",value:function(){var e=this;setTimeout((function(){oe&&W&&ve?e.hasFinishedLoading():e.checkIfReady()}),10)}},{key:"hasFinishedLoading",value:function(){this.setState({isHidden:!0}),console.log("Has Finished Loading"),this.props.onLoadComplete()}},{key:"onHoverOn",value:function(){this.state.isDisabled||this.setState({isHovering:!0})}},{key:"onHoverOff",value:function(){this.state.isDisabled||this.setState({isHovering:!1})}},{key:"onStartAnimationEnd",value:function(){this.setState({isDisabled:!1})}}]),i}(s.a.Component),Dt=Object(f.a)(It),Ht={container:{display:"flex",flexDirection:"column"},panelStyles:{position:"relative",display:"none"},panelVisible:{display:"block"}},Ut=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).state={showContentPanel:!1,showNavPanel:!1,showEnterPanel:!0},n.worldRef=s.a.createRef(),n.contentPanelRef=s.a.createRef(),n.navRef=s.a.createRef(),n}return Object(h.a)(i,[{key:"render",value:function(){var e=this.state.showNavPanel?this.getNavPanel():Object(se.jsx)(s.a.Fragment,{}),t=this.state.showEnterPanel?this.getEnterPanel():Object(se.jsx)(s.a.Fragment,{}),i=this.getContentPanel();return Object(se.jsxs)("div",{style:Ht.container,children:[Object(se.jsx)(xe,{ref:this.worldRef,onInitialCameraAnimationDone:this.onInitialCameraAnimationDone.bind(this)}),e,t,i]})}},{key:"getNavPanel",value:function(){return Object(se.jsx)(zt,{ref:this.navRef,onClickNavTitle:this.onClickNavTitle.bind(this),onClickHomeButton:this.onClickHomeButton.bind(this)})}},{key:"getEnterPanel",value:function(){return Object(se.jsx)(Dt,{onEnterWorld:this.onEnterWorld.bind(this),onLoadComplete:this.onLoadComplete.bind(this)})}},{key:"getContentPanel",value:function(){var e=this.state.showContentPanel?[Ht.panelStyles,Ht.panelVisible]:[Ht.panelStyles];return Object(se.jsx)("div",{style:e,children:Object(se.jsx)(Ot,{ref:this.contentPanelRef})})}},{key:"onEnterWorld",value:function(){this.worldRef.current.beginWorld()}},{key:"onLoadComplete",value:function(){this.setState({showEnterPanel:!1}),this.worldRef.current.enterWorld()}},{key:"onInitialCameraAnimationDone",value:function(){this.setState({showNavPanel:!0})}},{key:"onClickNavTitle",value:function(e){this.setState({showContentPanel:!0}),this.contentPanelRef.current.scroll(e),this.worldRef.current.updateAnimationStatus(!1)}},{key:"onClickHomeButton",value:function(){var e=this;this.worldRef.current.scrollTo(),this.worldRef.current.updateAnimationStatus(!0),setTimeout((function(){e.setState({showContentPanel:!1})}),1e3)}}]),i}(s.a.Component),Gt=Object(f.a)(Ut),Nt=i(60);c.a.render(Object(se.jsx)(Nt.a,{children:Object(se.jsx)(Gt,{})}),document.getElementById("root"))}},[[244,1,2]]]);
//# sourceMappingURL=main.e43a38a6.chunk.js.map