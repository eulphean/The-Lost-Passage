(this.webpackJsonpTheLostPassage=this.webpackJsonpTheLostPassage||[]).push([[0],{123:function(e,t,i){},124:function(e,t,i){},245:function(e,t,i){"use strict";i.r(t);var n=i(5),o=i.n(n),a=i(85),r=i.n(a),s=(i(123),i(124),i(0)),l=i(1),d=i(11),h=i(3),c=i(4),u=i(10),p=i(2),m=i(28),f=i.p+"static/media/soundscape.227cee43.mp3",g=new(function(){function e(){var t=this;Object(s.a)(this,e),this.isExhibition=!1,this.subscribers=[],window.addEventListener("keypress",(function(e){"e"===e.key&&(t.isExhibition=!t.isExhibition,t.subscribers.forEach((function(e){e()})))}))}return Object(l.a)(e,[{key:"subscribe",value:function(e){this.subscribers.push(e)}}]),e}()),v=window.p5,x={Bass:0,Mid:0,Treble:0,LowMid:0,HighMid:0},y=function(){function e(t,i){Object(s.a)(this,e),this.soundObject=t,this.adsr=i}return Object(l.a)(e,[{key:"setAdsr",value:function(e,t,i,n,o,a){this.adsr.set(e,t,i,n,o,a)}},{key:"play",value:function(){this.soundObject.play(),this.adsr.play(this.soundObject)}},{key:"trigger",value:function(){this.soundObject.play(),this.adsr.triggerAttack(this.soundObject),this.soundObject.loop()}},{key:"release",value:function(){this.soundObject.pause(),this.adsr.triggerRelease(this.soundObject)}}]),e}(),b=function(e){var t,i="",n="",o="",a=!1;e.preload=function(){var n=e.loadSound(f,(function(){var e=new v.Envelope(5,.2,2.5,.1,1.5,0);i=new y(n,e),t()}))},e.audioCallback=function(e){t=e},e.setup=function(){e.noCanvas()},e.initMic=function(){console.log(navigator),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(){a=!0,(n=new v.AudioIn).start(),(o=new v.FFT).setInput(n),n.getSources().then((function(e){e.forEach((function(e){console.log(e.kind+": "+e.label+" id = "+e.deviceId)}))}))}))},e.draw=function(){if(a){o.analyze();var t=e.map(o.getEnergy("bass"),0,255,0,1),i=e.map(o.getEnergy("mid"),0,255,0,1),n=e.map(o.getEnergy("treble"),0,255,0,1),r=e.map(o.getEnergy("lowMid"),0,255,0,1),s=e.map(o.getEnergy("highMid"),0,255,0,1);x.Bass=t,x.Mid=i,x.Treble=n,x.LowMid=r,x.HighMid=s}},e.trigger=function(){i.trigger()},e.release=function(){i.release()}},w=new(function(){function e(){Object(s.a)(this,e),this.myP5=new v(b),this.myP5.audioCallback(this.audioManagerReady.bind(this)),this.isPermanentlyMute=!1,this.isAudioManagerReady=!1,g.subscribe(this.onExhibitionUpdate.bind(this))}return Object(l.a)(e,[{key:"onExhibitionUpdate",value:function(){g.isExhibition&&this.micOn()}},{key:"audioManagerReady",value:function(){this.isAudioManagerReady=!0,console.log("Audio Manager Ready")}},{key:"micOn",value:function(){this.myP5.initMic()}},{key:"reset",value:function(){this.myP5.reset()}},{key:"trigger",value:function(){this.myP5.trigger()}},{key:"release",value:function(){this.myP5.release()}}]),e}()),P=i(29),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.random()*(e-t)+t},S={EnableControls:!1,EnablePan:!0,AutoRotate:!1,RotateSpeed:.1,EnableKeys:!0},k=250,L=[{x:k,y:0,z:0},{x:-250,y:0,z:0},{x:50,y:k,z:0},{x:50,y:-250,z:0},{x:0,y:0,z:k},{x:0,y:0,z:-250}],O=function(){function e(){Object(s.a)(this,e),this.camera=new p.Y(100,window.innerWidth/window.innerHeight,.05,2e4),this.camera.position.set(1e4,7e3,500),this.camera.lookAt(new p.xb(0,0,0)),this.camera.frustumCulled=!0,this.mouse=new p.wb(0,0),this.animationStopped=!1,this.currentIdx=4,this.onMouseMoveBound=this.onMouseMove.bind(this),window.addEventListener("mousemove",this.onMouseMoveBound,!1),this.num=0,g.subscribe(this.onExhibitionUpdate.bind(this))}return Object(l.a)(e,[{key:"update",value:function(e){this.animationStopped&&this.cameraUpdates(),this.camera.lookAt(e.position),g.isExhibition?(this.num+=.001,this.camera.position.z=62.5*Math.cos(this.num),this.camera.position.y=k*Math.sin(this.num),this.camera.position.x=k*Math.cos(this.num)):P.c()}},{key:"onExhibitionUpdate",value:function(){g.isExhibition&&(console.log("Event Remove"),window.removeEventListener("mousemove",this.onMouseMoveBound,!1),window.removeEventListener("click",this.onMouseClickBound,!1))}},{key:"onMouseMove",value:function(e){this.mouse.x=.3*(e.clientX-window.innerWidth/2),this.mouse.y=.7*(e.clientY-window.innerHeight/2)}},{key:"onMouseWheel",value:function(e){this.zoom+=.1*e.deltaY,this.zoom=Math.min(Math.max(100,this.zoom),300)}},{key:"initialTween",value:function(e){var t=this;new P.b(this.camera.position).to(L[this.currentIdx],4e3).easing(P.a.Cubic.Out).onComplete((function(){t.animationStopped=!0,e(),t.onMouseClickBound=t.onMouseClick.bind(t),window.addEventListener("click",t.onMouseClickBound,!1)})).start()}},{key:"onMouseClick",value:function(e){var t=this;this.calcNewCameraIdx(),new P.b(this.camera.position).to(L[this.currentIdx],4e3).easing(P.a.Cubic.Out).onComplete((function(){t.animationStopped=!0})).start(),this.animationStopped=!1}},{key:"calcNewCameraIdx",value:function(){for(var e=Math.floor(j(0,L.length));e===this.currentIdx;)e=Math.floor(j(0,L.length));this.currentIdx=e}},{key:"cameraUpdates",value:function(){switch(this.currentIdx){case 0:this.camera.position.x=k,this.camera.position.y+=.025*(this.mouse.y-this.camera.position.y),this.camera.position.z+=.025*(this.mouse.x-this.camera.position.z);break;case 1:this.camera.position.x=-250,this.camera.position.y+=.025*(this.mouse.y-this.camera.position.y),this.camera.position.z+=.025*(this.mouse.x-this.camera.position.z);break;case 2:this.camera.position.x+=.025*(this.mouse.y-this.camera.position.x),this.camera.position.y=k,this.camera.position.z+=.025*(this.mouse.x-this.camera.position.z);break;case 3:this.camera.position.x+=.025*(this.mouse.x-this.camera.position.x),this.camera.position.y=-250,this.camera.position.z+=.025*(this.mouse.y-this.camera.position.z);break;case 4:this.camera.position.x+=.025*(this.mouse.x-this.camera.position.x),this.camera.position.y+=.025*(this.mouse.y-this.camera.position.y),this.camera.position.z=k;break;case 5:this.camera.position.x+=.025*(this.mouse.x-this.camera.position.x),this.camera.position.y+=.025*(this.mouse.y-this.camera.position.y),this.camera.position.z=-250}}},{key:"getCamera",value:function(){return this.camera}}]),e}(),M=function e(t){Object(s.a)(this,e);var i=new p.s(16768767,16777215,1.6);i.color.setHSL(.6,1,.6),i.groundColor.setHSL(.095,1,.75),i.position.set(0,50,0),t.add(i);var n=new p.m(52945,.6);n.color.setHSL(.1,1,.95),n.position.set(-1,1.75,1),n.position.multiplyScalar(30),t.add(n)},C={DrawCalls:0},T=function(){function e(){Object(s.a)(this,e),this.renderer=new p.Bb({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=p.Cb}return Object(l.a)(e,[{key:"setAnimationLoop",value:function(e){this.renderer.setAnimationLoop(e)}},{key:"getDomElement",value:function(){return this.renderer.domElement}},{key:"render",value:function(e,t){this.renderer.render(e,t)}},{key:"updateSize",value:function(e,t){this.renderer.setSize(e,t)}},{key:"monitorDrawCalls",value:function(){C.DrawCalls=this.renderer.info.render.calls}}]),e}(),R={PatternType:""},z=0,B=1,A={Origin:{x:0,y:6,z:0},Radii:{x:10,y:10},Amplitude:0,Speed:.3,Direction:!0},F={Origin:{x:0,y:6,z:0},Radius:5,Phase:.5,NumPetals:3,Amplitude:0,Sinusoidal:!0,Direction:!0,Speed:.3},E=function(){function e(t){Object(s.a)(this,e),this.theta_rad=0,this.amp=t.amp,this.isClockwise=t.dir,this.originPos=t.pos,this.moveFactor=t.move,this.targetPos=new p.xb(0,0,0),this.targetConst=new p.xb(0,0,0)}return Object(l.a)(e,[{key:"updateTheta",value:function(e){this.theta_rad=this.isClockwise?this.theta_rad+this.moveFactor:this.theta_rad-this.moveFactor,this.theta_rad=this.theta_rad>=e?0:this.theta_rad}},{key:"cartesianX",value:function(e){return this.originPos.x+e*Math.cos(this.theta_rad)}},{key:"cartesianZ",value:function(e){return this.originPos.z+e*Math.sin(this.theta_rad)}},{key:"cartesianY",value:function(e){return this.originPos.y+this.amp*Math.sin(this.theta_rad)}},{key:"getTargetPos",value:function(){return this.targetPos}}]),e}(),I=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).radX=e.radx,n.radZ=e.radz,n.maxTheta=2*Math.PI,n}return Object(l.a)(i,[{key:"update",value:function(){this.updateGuiParams();var e=this.cartesianX(this.radX),t=this.cartesianZ(this.radZ),i=this.cartesianY();this.targetPos.set(e,i,t),this.updateTheta(this.maxTheta)}},{key:"updateGuiParams",value:function(){this.originPos.set(A.Origin.x,A.Origin.y,A.Origin.z),this.radX=A.Radii.x,this.radZ=A.Radii.y,this.amp=A.Amplitude,this.moveFactor=p.J.degToRad(A.Speed),this.isClockwise=A.Direction}}]),i}(E),D=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).rad=e.rad,n.phase=e.ph,n.numPetals=e.numP,n.isSin=e.isSin,n.maxTheta=Math.PI,n}return Object(l.a)(i,[{key:"update",value:function(){var e,t,i;this.updateGuiParams();var n=this.isSin?this.rad*Math.sin(this.phase+this.numPetals*this.theta_rad):this.rad*Math.cos(this.phase+this.numPetals*this.theta_rad);e=this.cartesianX(n),i=this.cartesianZ(n),t=this.cartesianY(),this.targetPos.set(e,t,i),this.updateTheta(this.maxTheta)}},{key:"updateGuiParams",value:function(){this.originPos.set(F.Origin.x,F.Origin.y,F.Origin.z),this.rad=F.Radius,this.phase=F.Phase,this.amp=F.Amplitude,this.numPetals=F.NumPetals,this.isSin=F.Sinusoidal,this.isClockwise=F.Direction,this.moveFactor=p.J.degToRad(F.Speed)}}]),i}(E),V=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"setTargetPattern",value:function(e){if(e===z){console.log("Creating Ellipse Pattern");var t=function(e,t,i,n,o,a){return{pos:e,radx:t,radz:i,amp:n,dir:o,move:a}}(new p.xb(0,6,0),10,10,0,!0,p.J.degToRad(.3));this.curPattern=new I(t)}else if(e===B){console.log("Creating Rose-Curve Pattern");var i=function(e,t,i,n,o,a,r,s){return{pos:e,rad:t,ph:i,numP:n,amp:o,isSin:a,dir:r,move:s}}(new p.xb(0,6,0),10,.5,3,0,!0,!0,p.J.degToRad(.3));this.curPattern=new D(i)}}},{key:"update",value:function(){if(this.curPattern)return this.curPattern.update(),this.curPattern.getTargetPos()}}]),e}(),H={ShowTarget:!0,MaxTargetRadius:100,CurrentTargetRadius:0},U=function(){function e(t){Object(s.a)(this,e);var i=new p.pb(1,12,12),n=new p.O;n.emissive=new p.k("#FF0000"),n.wireframe=!1,n.transparent=!0,n.opacity=.5,this.mesh=new p.M(i,n),t.add(this.mesh)}return Object(l.a)(e,[{key:"update",value:function(e,t){this.setVector(e),this.setVisibility(H.ShowTarget);var i=H.MaxTargetRadius+Math.sin(.001*t)*H.MaxTargetRadius/3;this.mesh.scale.set(i,i,i),H.CurrentTargetRadius=i}},{key:"getVector",value:function(){return this.mesh.position}},{key:"setVector",value:function(e){this.mesh.position.copy(e)}},{key:"setVisibility",value:function(e){this.mesh.visible=e}}]),e}(),N=i(86),G=i.p+"static/media/pigeon_back.0a8e5722.glb",W=50,_=2500,Z=function(){function e(t){Object(s.a)(this,e),this.durationAnimation="",this.vertexPerBird="",this.indicesPerBird="",this.textureAnimation="",this.birdGeometry=new p.g,this.loadPigeon(t)}return Object(l.a)(e,[{key:"loadPigeon",value:function(e){var t=this;(new N.a).loadAsync(G).then((function(i){var n=i.animations;t.durationAnimation=Math.round(60*n[0].duration);var o=i.scene.children[0].geometry,a=o.morphAttributes.position;t.vertexPerBird=o.getAttribute("position").count,t.indicesPerBird=o.index.array.length;for(var r=t.nextPowerOf2(t.durationAnimation),s=t.nextPowerOf2(t.vertexPerBird),l=new Float32Array(3*s*r),d=0;d<s;d++)for(var h=0;h<r;h++){var c=h*s*3,u=Math.floor(h/t.durationAnimation*a.length),m=(u+1)%a.length,f=h/t.durationAnimation*a.length%1;if(h<t.durationAnimation){var g=void 0,v=void 0;g=a[u].array[3*d],v=a[m].array[3*d],void 0!==g&&void 0!==v&&(l[c+3*d]=t.lerp(g,v,f)),g=a[u].array[3*d+1],v=a[m].array[3*d+1],void 0!==g&&void 0!==v&&(l[c+3*d+1]=t.lerp(g,v,f)),g=a[u].array[3*d+2],v=a[m].array[3*d+2],void 0!==g&&void 0!==v&&(l[c+3*d+2]=t.lerp(g,v,f))}}t.textureAnimation=new p.l(l,s,r,p.hb,p.p);for(var x=[],y=[],b=[],w=[],P=[],j=t.vertexPerBird*_*3,S=o.getAttribute("color").array,k=[],L=3,O=0,M=0;O<S.length;O++)O%L===0&&0!==O?L+=4:(k[M]=S[O],M++);for(var C=0;C<j;C++){var T=C%(3*t.vertexPerBird);x.push(o.getAttribute("position").array[T]),y.push(k[T])}for(var R=Math.random(),z=0;z<t.vertexPerBird*_;z++){var B=z%t.vertexPerBird,A=Math.floor(z/t.vertexPerBird);0===B&&(R=Math.random());var F=~~A,E=F%W/W,I=~~(F/W)/W;b.push(E,I,B/s,t.durationAnimation/r),w.push(A,R,Math.random(),Math.random())}for(var D=0;D<t.indicesPerBird*_;D++){var V=Math.floor(D/t.indicesPerBird)*t.vertexPerBird;P.push(o.index.array[D%t.indicesPerBird]+V)}t.birdGeometry.setAttribute("position",new p.f(new Float32Array(x),3)),t.birdGeometry.setAttribute("color",new p.f(new Uint16Array(y),3,!0)),t.birdGeometry.setAttribute("reference",new p.f(new Float32Array(b),4)),t.birdGeometry.setAttribute("seeds",new p.f(new Float32Array(w),4)),t.birdGeometry.setIndex(P),e()}))}},{key:"nextPowerOf2",value:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))}},{key:"lerp",value:function(e,t,i){return e+(t-e)*(i=Math.max(Math.min(i,1),0))}},{key:"setDrawRange",value:function(e){this.birdGeometry.setDrawRange(0,this.indicesPerBird*e)}}]),e}(),Y=i(87),J=function(){function e(t){Object(s.a)(this,e),this.gpuCompute=new Y.a(W,W,t);var i=this.gpuCompute.createTexture(),n=this.gpuCompute.createTexture();this.fillPositionTexture(i),this.fillVelocityTexture(n),this.velocityVariable=this.gpuCompute.addVariable("textureVelocity","/*\r\n  Name: fragmentShaderVelocity.js\r\n  Author: Amay Kataria\r\n  Date: 10/21/2021\r\n  Description: Core shader responsible for everything related to how to the velocity of each pigeon in the flock changes. \r\n*/\r\n\r\n/*\r\n*   UNIFORMS\r\n*/\r\n\r\n// TIME\r\nuniform float uTime;\r\nuniform float uDelta;\r\n\r\n// FLOCK\r\nuniform float uAttractionForce;\r\nuniform float uSeperationForce; \r\nuniform float uAlignmentForce;\r\nuniform float uCohesionForce;\r\nuniform float uSpeedLerp;\r\nuniform bool uShoot; \r\n\r\n// TARGET\r\nuniform vec3 uTargetPosition; \r\nuniform float uTargetRadius;\r\n\r\n// SPEED\r\nuniform float uMaxAgentSpeed; \r\n\r\n// BOUNDING BOX\r\nuniform vec3 uBoundingBoxMin; \r\nuniform vec3 uBoundingBoxMax; \r\n\r\n// Resolution is passed by default from GPUComputationRenderer\r\n// That is WIDTH x WIDTH, with which we initialized it. \r\nconst float width = resolution.x;\r\nconst float height = resolution.y;\r\n\r\n/*\r\n* CONSTANTS\r\n*/\r\nconst float PI = 3.141592653589793;\r\nconst float PI_2 = PI * 2.0;\r\n\r\n/*\r\n* GLOBAL VARIABLES \r\n* Reused across the shader. \r\n*/\r\nvec3 acceleration = vec3(0.0);\r\nvec3 selfPosition, selfVelocity; \r\nvec3 borders = vec3(0.0);\r\nvec3 vDesired = vec3(0.0);\r\n\r\nfloat tempForce = 0.0;\r\n\r\n// A simple random function. \r\nfloat rand(vec2 co){\r\n    return fract(sin( dot( co.xy, vec2(12.9898,78.233) ) ) * 43758.5453);\r\n}\r\n\r\n// 2D rot matrix. \r\nmat2 get2dRotateMatrix(float _angle) {\r\n    return mat2(cos(_angle), - sin(_angle), sin(_angle), cos(_angle));\r\n}\r\n\r\nvec3 updateTargetPosition() {\r\n    mat2 rotateMatrix = get2dRotateMatrix(-PI/2.0); \r\n    vec3 newTargetPosition = uTargetPosition; \r\n    newTargetPosition.xz = rotateMatrix * newTargetPosition.xz; \r\n    return newTargetPosition; \r\n}\r\n\r\nbool containsPoint(vec3 point) {\r\n    return point.x < uBoundingBoxMin.x || point.x > uBoundingBoxMax.x ||\r\n\t\t\tpoint.y < uBoundingBoxMin.y || point.y > uBoundingBoxMax.y ||\r\n\t\t\tpoint.z < uBoundingBoxMin.z || point.z > uBoundingBoxMax.z ? false : true;\r\n}\r\n\r\nvec3 boundingBoxCheck(vec3 newVelocity) {\r\n    bool contains = containsPoint(selfPosition);\r\n\r\n    if (contains == true) {\r\n        // Which side of the border is the pigeon closer to\r\n        borders.x = abs(uBoundingBoxMax.x - selfPosition.x) < abs(uBoundingBoxMin.x - selfPosition.x) ? uBoundingBoxMax.x: uBoundingBoxMin.x;\r\n        borders.y = abs(uBoundingBoxMax.y - selfPosition.y) < abs(uBoundingBoxMin.y - selfPosition.y) ? uBoundingBoxMax.y: uBoundingBoxMin.y;\r\n        borders.z = abs(uBoundingBoxMax.z - selfPosition.z) < abs(uBoundingBoxMin.z - selfPosition.z) ? uBoundingBoxMax.z: uBoundingBoxMin.z;\r\n\r\n        // Set a vector that points away from the edges \r\n        vec3 diffVec = selfPosition - borders;\r\n\r\n        // Save the current box size in sumVec temporarily \r\n        vec3 boxSize = vec3(uBoundingBoxMax.x - uBoundingBoxMin.x, uBoundingBoxMax.y - uBoundingBoxMin.y, uBoundingBoxMax.z - uBoundingBoxMin.z);\r\n\r\n        // Normalize the value according a portion of the boxsize \r\n        boxSize /= 10.0;\r\n        diffVec /= boxSize;\r\n\r\n        // Scale up the value exponentially accoring to the normalized value\r\n        for (int i = 0; i <= 2; i++) {\r\n            tempForce = exp(1.5 - abs(diffVec[i]));\r\n            vDesired[i] = tempForce * sign(diffVec[i]);\r\n        }\r\n        newVelocity += vDesired;\r\n    } else {\r\n        // Reflect back towards center. \r\n        vec3 dir = vec3(0.) - selfPosition;\r\n        newVelocity = normalize(dir) * uMaxAgentSpeed;\r\n    }\r\n\r\n    return newVelocity; \r\n}\r\n\r\nvec3 updateBehavior() {   \r\n    float zoneRadius = uSeperationForce + uAlignmentForce + uCohesionForce;\r\n    float seperationThresh = uSeperationForce / zoneRadius;\r\n    float alignmentThresh = (uSeperationForce + uAlignmentForce) / zoneRadius;\r\n    float cohesionThresh = 1.0 - alignmentThresh; \r\n    float zoneRadiusSquared = zoneRadius * zoneRadius;\r\n\r\n    // Alignment, cohesion, seperation. \r\n    vec3 neighborPos, neighborVel; \r\n    vec3 newVelocity = selfVelocity; \r\n    for (float y = 0.0; y < height; y++) {\r\n        for (float x = 0.0; x < width; x++) {\r\n            vec2 ref = vec2(x, y) / resolution.xy; \r\n            vec3 neighborPos = texture2D(texturePosition, ref).xyz;\r\n            vec3 neighborVel = texture2D(textureVelocity, ref).xyz; \r\n\r\n            vec3 dir = neighborPos - selfPosition;\r\n            float dist = length(dir);\r\n\r\n            // Am I comparing to myself? Pass then. \r\n            if (dist < 0.0001) { \r\n                continue;\r\n            }\r\n\r\n            // Is this Agent outside my zone radius? Pass then. \r\n            float distSquared = dist * dist;\r\n            if (distSquared > zoneRadiusSquared) {\r\n                continue;\r\n            } else {\r\n                // How much in my zone is it? \r\n                float neighborThresh = (distSquared / zoneRadiusSquared); \r\n\r\n                // Within seperation threshold? \r\n                // Move apart for comfort.\r\n                if (neighborThresh < seperationThresh) {\r\n                    float f = (seperationThresh / neighborThresh - 1.0) * uDelta;\r\n                    newVelocity -= normalize(dir) * (f);\r\n                } else if (neighborThresh < alignmentThresh) { \r\n                    // Within alignment threshold, align with neighbor. \r\n                    float threshDelta = alignmentThresh - seperationThresh; \r\n                    float adjustedThresh = (neighborThresh - seperationThresh) / threshDelta; \r\n                    float f = (0.5 - cos(adjustedThresh * PI_2) * 0.5 + 0.5) * uDelta; \r\n                    newVelocity += normalize(neighborVel) * f; \r\n                } else if (neighborThresh < cohesionThresh) {\r\n                    // Attraction / Cohesion - move closer.\r\n                    float threshDelta = cohesionThresh - alignmentThresh; \r\n                    float adjustedThresh = (neighborThresh - alignmentThresh) / threshDelta;\r\n                    float f = (0.5 - (cos(adjustedThresh * PI_2) * -0.5 + 0.5)) * uDelta;\r\n                    newVelocity += normalize(dir) * f;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return newVelocity; \r\n}\r\n\r\nvoid main() {\r\n    // gl_FragCoord are pixel coordinates, but we need textureCoordinates\r\n    // to access the actual texel from the texture. We use this formula to\r\n    // calculate texture coordinate using resolution that is sent by default \r\n    // to the shader. \r\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n    \r\n    // texturePosition, textureVelocity are data textures sent as we added them\r\n    // as dependencies while initializing our GPUComputationRenderer. \r\n    // This is the position (x, y, z) and velocity (x, y, z) for each bird, all being \r\n    // calculated and operated on in parallel. \r\n    selfPosition = texture2D(texturePosition, uv).xyz;\r\n    selfVelocity = texture2D(textureVelocity, uv).xyz;\r\n\r\n    // Adjust target position. \r\n    vec3 updatedTargetPos = updateTargetPosition();\r\n\r\n    // Cohesion, Seperation, Alignment\r\n    vec3 newVelocity = updateBehavior(); \r\n\r\n    // Moving target response. \r\n    vec3 dirToTarget = updatedTargetPos - selfPosition; \r\n    float distToTarget = length(dirToTarget);\r\n    if (distToTarget < uTargetRadius) {\r\n        float f = (1.0 - (distToTarget / uTargetRadius)) *  uAttractionForce;\r\n        newVelocity += normalize(dirToTarget) * f; \r\n    }\r\n\r\n    // Check if agent is in bounding box. \r\n    newVelocity = boundingBoxCheck(newVelocity); \r\n\r\n    // Clamp velocity. \r\n    if (length(newVelocity) > uMaxAgentSpeed) {\r\n        newVelocity = normalize(newVelocity) * uMaxAgentSpeed;\r\n    }\r\n\r\n    newVelocity = mix(newVelocity, selfVelocity, uDelta * 0.001);\r\n\r\n    // Output a velocity that is stored in the texture. \r\n    gl_FragColor = vec4(newVelocity, 1.0);\r\n}",n),this.positionVariable=this.gpuCompute.addVariable("texturePosition","/*\r\n  Name: fragmentShaderPosition.js\r\n  Author: Amay Kataria\r\n  Date: 10/21/2021\r\n  Description: Core shader for updating the position of each pigeon in the flock. \r\n*/\r\n\r\nuniform float uTime;\r\nuniform float uDelta;\r\nuniform bool uPause;\r\n\r\n// This influence how quick the pigeon advances to the position. \r\n// Maybe bring this in from the GUI. \r\nfloat posInfluence = 5.0; \r\n\r\nvoid main()\t{\r\n    // Calculate texture coordinates from pixel coordinates (gl_FragColor)\r\n    // resolution is passed as a default uniform, which is stored as WIDTH,\r\n    // HEIGHT as initialized in GPUComputationRenderer.\r\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n\r\n    // Store this to work on later. \r\n    vec4 tempPos = texture2D(texturePosition, uv); \r\n    vec3 position = tempPos.xyz;\r\n    vec3 velocity = texture2D(textureVelocity, uv).xyz;\r\n\r\n    // By default we set this \r\n    float phase = tempPos.w;\r\n    phase = mod((phase + uDelta + length( velocity.xz ) * uDelta * 3. + max(velocity.y, 0.0 ) * uDelta * 6.), 62.83);\r\n\r\n    vec3 newPosition = position + velocity * uDelta * posInfluence;\r\n\r\n    // When paused, return current position.\r\n    if (uPause == true) {\r\n      newPosition = position;\r\n    }\r\n    \r\n    gl_FragColor = vec4(newPosition, phase);\r\n}",i),this.gpuCompute.setVariableDependencies(this.velocityVariable,[this.positionVariable,this.velocityVariable]),this.gpuCompute.setVariableDependencies(this.positionVariable,[this.positionVariable,this.velocityVariable]),this.positionUniforms=this.positionVariable.material.uniforms,this.velocityUniforms=this.velocityVariable.material.uniforms,this.positionUniforms.uTime={value:0},this.positionUniforms.uDelta={value:0},this.positionUniforms.uPause={value:!1},this.velocityUniforms.uTime={value:1},this.velocityUniforms.uDelta={value:0},this.velocityUniforms.uAttractionForce={value:q.Attraction},this.velocityUniforms.uSeperationForce={value:q.Seperation},this.velocityUniforms.uAlignmentForce={value:q.Alignment},this.velocityUniforms.uCohesionForce={value:q.Cohesion},this.velocityUniforms.uShoot={value:!1},this.velocityUniforms.uTargetPosition={value:new p.xb},this.velocityUniforms.uTargetRadius={value:H.CurrentTargetRadius},this.velocityUniforms.uMaxAgentSpeed={value:q.MaxSpeed},this.velocityUniforms.uSpeedLerp={value:q.SpeedLerp},this.velocityUniforms.uBoundingBoxMin={value:new p.xb},this.velocityUniforms.uBoundingBoxMax={value:new p.xb},this.velocityVariable.wrapS=p.i,this.velocityVariable.wrapT=p.i,this.positionVariable.wrapS=p.i,this.positionVariable.wrapT=p.i;var o=this.gpuCompute.init();null!==o&&console.error(o),!0,this.pause=!1,this.shoot=!1,console.log("GPU Renderer Ready.")}return Object(l.a)(e,[{key:"update",value:function(e,t,i,n){this.positionUniforms.uPause.value=this.pause,this.positionUniforms.uDelta.value=e,this.positionUniforms.uTime.value=t,this.velocityUniforms.uDelta.value=e,this.velocityUniforms.uTime.value=t,this.velocityUniforms.uAttractionForce.value=q.Attraction,this.velocityUniforms.uSeperationForce.value=q.Seperation,this.velocityUniforms.uAlignmentForce.value=q.Alignment,this.velocityUniforms.uCohesionForce.value=q.Cohesion,this.velocityUniforms.uShoot.value=this.shoot,this.velocityUniforms.uTargetPosition.value.set(i.x,i.y,i.z),this.velocityUniforms.uTargetRadius.value=H.CurrentTargetRadius,this.velocityUniforms.uMaxAgentSpeed.value=q.MaxSpeed,this.velocityUniforms.uSpeedLerp.value=q.SpeedLerp,this.velocityUniforms.uBoundingBoxMin.value.set(n.min.x,n.min.y,n.min.z),this.velocityUniforms.uBoundingBoxMax.value.set(n.max.x,n.max.y,n.max.z),this.gpuCompute.compute(),this.pause&&(this.pause=!1),this.shoot&&(this.shoot=!1)}},{key:"fillPositionTexture",value:function(e){for(var t=e.image.data,i=0,n=t.length;i<n;i+=4){var o=Math.random()-.5,a=Math.random()-.5,r=Math.random()-.5;t[i+0]=o,t[i+1]=a,t[i+2]=r,t[i+3]=1}}},{key:"fillVelocityTexture",value:function(e){for(var t=e.image.data,i=0,n=t.length;i<n;i+=4){var o=Math.random()-.5,a=Math.random()-.5,r=Math.random()-.5;t[i+0]=5*o,t[i+1]=5*a,t[i+2]=5*r,t[i+3]=1}}},{key:"getPositionRenderTarget",value:function(){return this.gpuCompute.getCurrentRenderTarget(this.positionVariable).texture}},{key:"getVelocityRenderTarget",value:function(){return this.gpuCompute.getCurrentRenderTarget(this.velocityVariable).texture}},{key:"pausePigeons",value:function(){this.pause=!0}},{key:"shootPigeons",value:function(){this.shoot=!0}}]),e}(),K=!1,q={Attraction:5,Seperation:20,Alignment:20,Cohesion:20,Freedom:.75,MaxSpeed:20,SpeedLerp:.1,Size:.1,Count:_},X=function(){function e(t){Object(s.a)(this,e),this.patternManager=new V,this.target=new U(t),this.isFlockInShock=!1,this.previousSepValue=0,this.previousSpeedValue=0,this.clock=new p.j,this.pigeonShader="",this.gpuRenderer="",this.shootCount=0}return Object(l.a)(e,[{key:"setupTarget",value:function(e){this.patternManager.setTargetPattern(e)}},{key:"setupPigeonGPU",value:function(e,t){this.pigeon=new Z(this.initPigeons.bind(this,e,t))}},{key:"update",value:function(e){if(K){var t=this.patternManager.update();if(t){var i=this.clock.getDelta(),n=this.clock.oldTime;this.target.update(t,n),this.gpuRenderer.update(i,n,t,e),this.pigeonShader&&(this.pigeonShader.uniforms.time.value=n/1e3,this.pigeonShader.uniforms.delta.value=i,this.pigeonShader.uniforms.size.value=q.Size,this.pigeonShader.uniforms.texturePosition.value=this.gpuRenderer.getPositionRenderTarget(),this.pigeonShader.uniforms.textureVelocity.value=this.gpuRenderer.getVelocityRenderTarget()),this.pigeon.setDrawRange(q.Count)}this.isFlockInShock&&this.recoverFromShock()}}},{key:"pausePigeons",value:function(){this.gpuRenderer&&this.gpuRenderer.pausePigeons()}},{key:"initPigeons",value:function(e,t){var i=this,n=this.pigeon.birdGeometry,o=new p.Q({vertexColors:!0,flatShading:!0,side:p.n,roughness:0,metalness:0});o.onBeforeCompile=function(e){e.uniforms.texturePosition={value:null},e.uniforms.textureVelocity={value:null},e.uniforms.textureAnimation={value:i.pigeon.textureAnimation},e.uniforms.time={value:1},e.uniforms.size={value:.2},e.uniforms.delta={value:0};var t="#define STANDARD",n="\n                attribute vec4 reference;\n                attribute vec4 seeds;\n                uniform sampler2D texturePosition;\n                uniform sampler2D textureVelocity;\n                uniform sampler2D textureAnimation;\n                uniform float size;\n                uniform float time;\n            ";e.vertexShader=e.vertexShader.replace(t,t+n),t="#include <begin_vertex>",n="\n                vec4 tmpPos = texture2D(texturePosition, reference.xy);\n\n                vec3 pos = tmpPos.xyz;\n                vec3 velocity = normalize(texture2D(textureVelocity, reference.xy).xyz);\n                vec3 aniPos = texture2D(textureAnimation, vec2(reference.z, mod(time + (seeds.x) * ((0.0004 + seeds.y / 10000.0) + normalize(velocity) / 20000.0), reference.w))).xyz;\n                vec3 newPosition = position;\n\n                newPosition = mat3(modelMatrix) * (newPosition + aniPos);\n                newPosition *= size + seeds.y * size * 0.2;\n\n                velocity.z *= -1.;\n                float xz = length(velocity.xz);\n                float xyz = 1.;\n                float x = sqrt(1. - velocity.y * velocity.y);\n\n                float cosry = velocity.x / xz;\n                float sinry = velocity.z / xz;\n\n                float cosrz = x / xyz;\n                float sinrz = velocity.y / xyz;\n\n                mat3 maty =  mat3(cosry, 0, -sinry, 0, 1, 0, sinry, 0, cosry);\n                mat3 matz =  mat3(cosrz , sinrz, 0, -sinrz, cosrz, 0, 0, 0,1);\n\n                newPosition =  maty * matz * newPosition;\n                newPosition += pos;\n\n                vec3 transformed = vec3(newPosition);\n            ",e.vertexShader=e.vertexShader.replace(t,n),i.pigeonShader=e};var a=new p.M(n,o);a.rotation.y=Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,t.add(a),this.gpuRenderer=new J(e),K=!0,console.log("Pigeon Manager Ready")}},{key:"shootPigeon",value:function(){return console.log("Pigeon Renderer: Shoot Pigeon"),this.isFlockInShock||(this.previousSepValue=q.Seperation,this.previousSpeedValue=q.MaxSpeed,console.log("Seperation value when shot : ".concat(this.previousSepValue)),q.Seperation*=2.5,q.MaxSpeed*=1.8,q.Count>0&&(this.shootCount++,q.Count=q.Count-250*this.shootCount),this.isFlockInShock=!0),this.isFlockInShock}},{key:"setNewPatternType",value:function(e){this.patternManager.setTargetPattern(e),console.log("Setting pattern")}},{key:"recoverFromShock",value:function(){q.Seperation>this.previousSepValue?(q.Seperation*=.999,q.MaxSpeed*=.999):(q.Seperation=this.previousSepValue,q.MaxSpeed=this.previousSpeedValue,console.log("Seperation value after recovered : ".concat(q.Seperation)),this.previousSepValue=0,this.previousSpeedValue=0,this.isFlockInShock=!1)}}]),e}(),Q=function(){function e(t){Object(s.a)(this,e),this.raycaster=new p.ib,this.mouse=new p.wb,this.shootPigeon=t,this.isIntersecting=!1,this.clock=new p.j}return Object(l.a)(e,[{key:"intersect",value:function(e,t,i){if(i){this.raycaster.setFromCamera(this.mouse,e);var n=this.raycaster.intersectObject(t);this.isIntersecting=n.length>0}}},{key:"onMouseClick",value:function(){}}]),e}(),$=i(88),ee=i(89),te=i(50),ie=i.n(te),ne=i(90),oe=i.n(ne),ae=new(function(){function e(){Object(s.a)(this,e),this.siteURL="https://befantastic-martha.herokuapp.com/app",this.socket=oe()(this.siteURL,{reconnection:!0,reconnectionDelay:500,reconnectionAttempts:1/0}),this.socket.once("connect",this.subscribe.bind(this)),this.handlePresetsCbk=""}return Object(l.a)(e,[{key:"subscribe",value:function(){console.log("Connected"),this.socket.on("time",this.logTime.bind(this)),this.socket.on("receivePresets",this.handlePresets.bind(this))}},{key:"handlePresets",value:function(e){this.handlePresetsCbk(e)}},{key:"saveGuiPreset",value:function(e,t){var i={name:e,data:t};this.socket.emit("savePreset",i)}},{key:"readAllPresets",value:function(e){console.log("Query Socket Presets."),this.socket.emit("getPresets"),this.handlePresetsCbk=e}},{key:"deletePreset",value:function(e){this.socket.emit("deletePreset",e)}},{key:"disconnect",value:function(){console.log("Socket Server Disconnected.")}},{key:"logTime",value:function(e){}}]),e}());function re(){return void 0!==window.safari}var se,le,de={ShowSkybox:!0,ShowBoundingBox:!0,BoundingBoxScalar:0},he=!1,ce=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"createSkybox",value:function(e,t){var i=new p.zb(t.current);i.center=new p.wb(.5,.5),i.rotation=Math.PI,i.flipY=!1;var n=new p.zb(t.current);n.center=new p.wb(.5,.5),n.rotation=Math.PI,n.flipY=!1;var o=new p.zb(t.current);re()?(o.wrapS=p.i,o.wrapT=p.i):(o.wrapS=p.R,o.wrapT=p.R,o.center=new p.wb(.25,.25),o.rotation=Math.PI,o.flipY=!1);var a=new p.zb(t.current);re()?(a.wrapS=p.i,a.wrapT=p.i):(a.wrapS=p.R,a.wrapT=p.R,a.center=new p.wb(.5,1),a.rotation=Math.PI/2,a.flipY=!1);var r=[i,n,o,a,new p.zb(t.current),new p.zb(t.current)].map((function(e){return new p.N({map:e,side:p.n})})),s=new p.d(800,800,800);this.cubeMesh=new p.M(s,r),e.add(this.cubeMesh),this.createBoundingBox(e),this.lastBoundingBoxScalar=de.BoundingBoxScalar,he=!0,console.log("Skybox Ready.")}},{key:"createBoundingBox",value:function(e){this.cubeMesh.geometry.computeBoundingBox(),this.boundingBox=this.cubeMesh.geometry.boundingBox,this.boundingBox.expandByScalar(de.BoundingBoxScalar),this.boundingBoxMesh=new p.e(this.cubeMesh,new p.k(1,0,0)),this.boundingBoxMesh.visible=de.ShowBoundingBox,e.add(this.boundingBoxMesh)}},{key:"getBoundingBox",value:function(){if(this.boundingBox)return this.boundingBox}},{key:"update",value:function(){this.cubeMesh.visible=de.ShowSkybox,this.boundingBoxMesh.visible=de.ShowBoundingBox,de.BoundingBoxScalar!==this.lastBoundingBoxScalar&&(this.updateBoundingBox(),this.lastBoundingBoxScalar=de.BoundingBoxScalar)}},{key:"updateBoundingBox",value:function(){this.cubeMesh.geometry.computeBoundingBox(),this.boundingBox=this.cubeMesh.geometry.boundingBox,this.boundingBox.expandByScalar(de.BoundingBoxScalar),this.boundingBoxMesh.update(this.cubeMesh)}},{key:"getMesh",value:function(){return this.cubeMesh}}]),e}(),ue={Preset:"Global",Presets:""},pe=function(){function e(t){var i=this;Object(s.a)(this,e),this.gui=new $.Pane({title:"Pigeon GUI",container:t,expanded:!0}),this.gui.registerPlugin(ee),this.gui.addInput(ue,"Preset"),this.presetOptions=[],this.buildPresets(),this.fpsGraph=this.gui.addBlade({view:"fpsgraph",label:"FPS",lineCount:2}),this.gui.addMonitor(C,"DrawCalls");var n=this.gui.addFolder({title:"Orbit Controls",expanded:!1});n.addInput(S,"EnableControls",{label:"Enable Controls"}),n.addInput(S,"EnablePan",{label:"Enable Panning"}),n.addInput(S,"AutoRotate",{label:"Enable AutoRotate"}),n.addInput(S,"RotateSpeed",{label:"Rotation Speed",min:.1,max:1}),n.addInput(S,"EnableKeys",{label:"Enable Keys"});var o=this.gui.addFolder({title:"Target Params",expanded:!1});o.addInput(H,"ShowTarget",{label:"Show Target"}),o.addInput(H,"MaxTargetRadius",{label:"Max Target Radius",min:50,max:400}),o.addMonitor(H,"CurrentTargetRadius",{label:"Current Target Radius"}),this.patternFolder=this.gui.addFolder({title:"Pattern Params",expanded:!1}),this.currentPatternType=z,this.buildPatternTypeOptions(),this.buildPatterns(),this.ellipseParamsFolder=this.patternFolder.addFolder({title:"Ellipse Pattern Params",expanded:!0}),this.ellipseParamsFolder.addInput(A,"Origin"),this.ellipseParamsFolder.addInput(A,"Radii",{x:{min:0,max:200},y:{min:0,max:200}}),this.ellipseParamsFolder.addInput(A,"Amplitude",{min:0,max:300}),this.ellipseParamsFolder.addInput(A,"Speed",{min:0,max:2}),this.ellipseParamsFolder.addInput(A,"Direction"),this.roseCurveParamsFolder=this.patternFolder.addFolder({title:"Rose-Curve Pattern Params",expanded:!1}),this.roseCurveParamsFolder.addInput(F,"Origin"),this.roseCurveParamsFolder.addInput(F,"Radius",{min:1,max:800}),this.roseCurveParamsFolder.addInput(F,"Phase",{min:0,max:10}),this.roseCurveParamsFolder.addInput(F,"NumPetals",{min:1,max:10,step:1}),this.roseCurveParamsFolder.addInput(F,"Amplitude",{min:0,max:800}),this.roseCurveParamsFolder.addInput(F,"Sinusoidal"),this.roseCurveParamsFolder.addInput(F,"Direction"),this.roseCurveParamsFolder.addInput(F,"Speed",{min:0,max:2}),this.showPatternParams(),this.pigeonParamsFolder=this.gui.addFolder({title:"Pigeon Params",expanded:!1}),this.pigeonParamsFolder.addInput(q,"Size",{label:"Size",min:0,max:1,step:.01}),this.pigeonParamsFolder.addInput(q,"Attraction",{label:"Attraction Force",min:0,max:100,step:1}),this.pigeonParamsFolder.addInput(q,"Seperation",{label:"Seperation Force",min:0,max:100,step:1}),this.pigeonParamsFolder.addInput(q,"Alignment",{label:"Alignment Force",min:0,max:100,step:1}),this.pigeonParamsFolder.addInput(q,"Cohesion",{label:"Cohesion Force",min:0,max:100,step:1}),this.pigeonParamsFolder.addInput(q,"MaxSpeed",{label:"Max Agent Speed",min:1,max:200,step:.1}),this.pigeonParamsFolder.addInput(q,"SpeedLerp",{label:"Speed Lerp",min:0,max:1,step:.01}),this.pigeonParamsFolder.addInput(q,"Count",{label:"Count",min:0,max:q.Count,step:1});var a=this.gui.addFolder({title:"Skybox Params",expanded:!1});a.addInput(de,"ShowSkybox"),a.addInput(de,"ShowBoundingBox"),a.addInput(de,"BoundingBoxScalar",{min:-50,max:0});var r=this.gui.addFolder({title:"Microphone Params",expanded:!0});r.addMonitor(x,"Bass"),r.addMonitor(x,"Mid"),r.addMonitor(x,"Treble"),r.addMonitor(x,"LowMid"),r.addMonitor(x,"HighMid"),this.gui.addButton({title:"Save Preset"}).on("click",this.onSavePreset.bind(this)),this.gui.addButton({title:"Delete Preset"}).on("click",this.onDeletePreset.bind(this)),ae.readAllPresets(this.onReceivePresets.bind(this)),this.gui.hidden=!0,window.addEventListener("keypress",(function(e){"h"===e.key&&(i.gui.hidden=!i.gui.hidden)}))}return Object(l.a)(e,[{key:"onPresetSelected",value:function(e){var t=JSON.parse(e.value);this.gui.importPreset(t)}},{key:"onReceivePresets",value:function(e){var t=this;if(console.log("All the presets received:"),console.log(e),e.length>0){e.forEach((function(e){var i=e.name,n=e.config;t.presetOptions.push({text:i,value:JSON.stringify(n)})}));var i=e[0].config;this.gui.importPreset(i),this.disposePresets(),this.buildPresets(),this.currentPatternType=i.PatternType,this.buildPatternTypeOptions(),this.disposePatterns(),this.buildPatterns(),this.showPatternParams(),!0,console.log("GUI Ready")}}},{key:"onSavePreset",value:function(){var e=ue.Preset;if(e.length>0){this.disposePresets();var t=this.gui.exportPreset(),i=ie.a.find(this.presetOptions,(function(t){return t.text===e}));i?(console.log("Preset Exists. Updating database and local copy of the preset."),i.value=JSON.stringify(t),this.presetOptions=ie.a.sortBy(this.presetOptions,(function(t){return t.text===e?0:1}))):(console.log("Preset doesnt exist. New entry in the database."),this.presetOptions.unshift({text:e,value:JSON.stringify(t)})),ae.saveGuiPreset(e,t),this.buildPresets()}else alert("Not an empty entry please.")}},{key:"onDeletePreset",value:function(){if(this.presetOptions.length>0){var e=ue.Preset;if(console.log("Deleting preset: "+e),ie.a.remove(this.presetOptions,(function(t){return t.text===e})),ae.deletePreset(e),this.disposePresets(),this.buildPresets(),this.presetOptions.length>0){var t=this.presetOptions[0].value;this.gui.importPreset(JSON.parse(t))}}}},{key:"disposePresets",value:function(){ue.Presets="",this.presetList.dispose()}},{key:"buildPresets",value:function(){this.presetList=this.gui.addInput(ue,"Presets",{index:1,options:this.presetOptions}),this.presetList.on("change",this.onPresetSelected.bind(this))}},{key:"buildPatternTypeOptions",value:function(){this.currentPatternType===z?this.patternTypeOptions={Ellipse:z,RoseCurve:B}:this.currentPatternType===B?this.patternTypeOptions={RoseCurve:B,Ellipse:z}:this.patternTypeOptions={Ellipse:z,RoseCurve:B}}},{key:"disposePatterns",value:function(){this.patternList.dispose()}},{key:"buildPatterns",value:function(){this.patternList=this.patternFolder.addInput(R,"PatternType",{label:"Pattern Type",index:0,options:this.patternTypeOptions}),this.patternList.on("change",this.onPatternSelected.bind(this))}},{key:"onPatternSelected",value:function(e){this.currentPatternType=e.value,this.showPatternParams(),this.patternChangeUpdate(this.currentPatternType)}},{key:"showPatternParams",value:function(){this.currentPatternType===z?(this.ellipseParamsFolder.hidden=!1,this.roseCurveParamsFolder.hidden=!0):this.currentPatternType===B&&(this.ellipseParamsFolder.hidden=!0,this.roseCurveParamsFolder.hidden=!1)}},{key:"subscribeForPatternChange",value:function(e){this.patternChangeUpdate=e}}]),e}(),me=i(6),fe={container:{position:"absolute",top:"30px",right:"35px",zIndex:2}},ge=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).state={},n.guiRef=o.a.createRef(),n}return Object(l.a)(i,[{key:"render",value:function(){return Object(me.jsx)("div",{ref:this.guiRef,style:fe.container})}},{key:"componentDidMount",value:function(){var e=this.guiRef.current;this.gui=new pe(e)}},{key:"getFpsGraph",value:function(){return this.gui.fpsGraph}},{key:"subscribeForPatternChange",value:function(e){this.gui.subscribeForPatternChange(e)}},{key:"getCurPatternType",value:function(){return this.gui.currentPatternType}},{key:"getPigeonParamFolder",value:function(){return this.gui.pigeonParamsFolder}}]),i}(o.a.Component),ve=Object(u.a)(ge),xe=i.p+"static/media/Front.1bc35914.mp4",ye=!1,be={container:{width:"100%",height:"100%",overflow:"hidden"},crosshair:{cursor:"crosshair"},video:{display:"none"}},we=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).state={},n.shouldAnimate=!0,n.worldRef=o.a.createRef(),n.guiRef=o.a.createRef(),n.navRef=o.a.createRef(),n.panelRef=o.a.createRef(),n.frontVideoRef=o.a.createRef(),n.backVideoRef=o.a.createRef(),n.leftVideoRef=o.a.createRef(),n.rightVideoRef=o.a.createRef(),n.topVideoRef=o.a.createRef(),n.bottomVideoRef=o.a.createRef(),n.scene=new p.kb,n.scene.background=new p.k("#F9FDFF"),n.cameraControl=new O,n.lightingManager=new M(n.scene),n.skyboxManager=new ce,n.raycastManager=new Q(n.onShootPigeon.bind(Object(d.a)(n))),n.rendererManager=new T,n.pigeonManager=new X(n.scene),n.videoLoadProgress=[],window.addEventListener("resize",n.onWindowResize.bind(Object(d.a)(n))),document.addEventListener("visibilitychange",(function(e){document.hidden?n.updateAnimationStatus(!1):n.updateAnimationStatus(!0)})),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var e=this.rendererManager.getDomElement();this.worldRef.current.appendChild(e),this.fpsGraph=this.guiRef.current.getFpsGraph(),this.guiRef.current.subscribeForPatternChange(this.onPatternChanged.bind(this)),this.skyboxManager.createSkybox(this.scene,this.frontVideoRef),this.rendererManager.setAnimationLoop(this.renderThree.bind(this)),this.checkIfReady()}},{key:"render",value:function(){return Object(me.jsxs)("div",{style:be.container,ref:this.worldRef,children:[Object(me.jsx)(ve,{ref:this.guiRef}),Object(me.jsx)("video",{id:"front",ref:this.frontVideoRef,type:"video/mp4",src:xe,preload:"true",playsInline:!0,loop:!0,style:be.video,onCanPlay:this.onVideoLoaded.bind(this)})]})}},{key:"onVideoLoaded",value:function(){this.videoLoadProgress.length<1&&(this.videoLoadProgress.push(!0),this.checkIfReady())}},{key:"checkIfReady",value:function(){1===this.videoLoadProgress.length&&he&&(ye=!0,console.log("World Ready."))}},{key:"renderThree",value:function(){if(this.fpsGraph.begin(),this.pigeonManager){var e=this.skyboxManager.getBoundingBox();this.pigeonManager.update(e),!this.pigeonManager.isFlockInShock&&this.guiRef.current.getPigeonParamFolder().disabled&&(this.guiRef.current.getPigeonParamFolder().disabled=!1)}this.cameraControl.update(this.scene),this.rendererManager.render(this.scene,this.cameraControl.getCamera()),this.skyboxManager.update(),this.rendererManager.monitorDrawCalls(),this.fpsGraph.end()}},{key:"onWindowResize",value:function(){if(this.cameraControl){var e=this.cameraControl.getCamera();e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),this.rendererManager.updateSize(window.innerWidth,window.innerHeight)}}},{key:"updateAnimationStatus",value:function(e){this.shouldAnimate=e,e?(this.rendererManager.setAnimationLoop(this.renderThree.bind(this)),w.isPermanentlyMute||w.trigger()):(this.pigeonManager.pausePigeons(),this.rendererManager.setAnimationLoop(null),w.isPermanentlyMute||w.release())}},{key:"beginWorld",value:function(){this.frontVideoRef.current.play(),console.log("Playing all videos.");var e=this.guiRef.current.getCurPatternType();this.pigeonManager.setupTarget(e),this.pigeonManager.setupPigeonGPU(this.rendererManager.renderer,this.scene)}},{key:"enterWorld",value:function(){this.cameraControl.initialTween(this.props.onInitialCameraAnimationDone)}},{key:"onPatternChanged",value:function(e){this.pigeonManager.setNewPatternType(e)}},{key:"onShootPigeon",value:function(){this.shouldAnimate&&(this.pigeonManager.shootPigeon()&&(this.guiRef.current.getPigeonParamFolder().disabled=!0))}},{key:"scrollTo",value:function(){Object(m.elementScrollIntoView)(this.worldRef.current,{behavior:"smooth",block:"start"})}}]),i}(o.a.Component),Pe=Object(u.a)(we),je="#ffffff",Se="#E6E9EC",ke="#67749C",Le="#B2B6C2",Oe="#91614B",Me="#5C5884",Ce="#B5604C",Te="12px",Re="14px",ze="16px",Be="18px",Ae="20px",Fe="24px",Ee="28px",Ie="32px",De="36px",Ve="40px",He="44px",Ue="76px",Ne="4px",Ge="8px",We="12px",_e="18px",Ze="20px",Ye="28px",Je="52px",Ke="bebas",qe="montserrat",Xe="tenorsans",Qe=i.p+"static/media/gaugan.a23390f4.mp4",$e={container:{display:"flex",flexDirection:"column","@media (min-width: 1200px)":{flexDirection:"row",justifyContent:"center"}},ppVideo:{width:"100%","@media (min-width: 1200px)":{width:"300px",objectFit:"cover"}},content:{display:"flex",flexDirection:"column",justifyContent:"center"},title:{textAlign:"center",color:ke,fontFamily:Ke,fontSize:Fe,marginTop:Ze,letterSpacing:1,"@media (min-width: 768px)":{fontSize:Ee},"@media (min-width: 1024px)":{},"@media (min-width: 1200px)":{fontSize:Ie}},info:{fontFamily:Xe,padding:We,fontSize:Re,color:ke,"@media (min-width: 768px)":{fontSize:Re},"@media (min-width: 1024px)":{fontSize:ze},"@media (min-width: 1200px)":{fontSize:Be},"@media (min-width: 1400px)":{fontSize:Ae}}},et=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).state={},n}return Object(l.a)(i,[{key:"render",value:function(){return Object(me.jsxs)("div",{style:$e.container,children:[Object(me.jsx)("video",{style:$e.ppVideo,autoPlay:!0,playsInline:!0,muted:!0,loop:!0,src:Qe}),Object(me.jsxs)("div",{style:$e.content,children:[Object(me.jsx)("div",{style:$e.title,children:"THE LOST PASSAGE"}),Object(me.jsxs)("div",{style:$e.info,children:["The Lost Passage is a digitally reconstructed environment of a swarm of artificial passenger pigeons, which went extinct in the early 20th century. They once grew to a population of over 5 billion in the 1800s before going into extinction within four decades due to human intervention. The last known flock of these pigeons was raised in careful captivity at University of Chicago and migrated through cargo trains across North America every year.",Object(me.jsx)("br",{}),Object(me.jsx)("br",{}),"In their new digital home on the internet, they inhabit a never-ending, sublime, yet destitute memory of a lost landscape. However, paradoxically they are confined within the six walls of this space. By using artificial intelligence and machine learning, The Lost Passage reflects upon the historical moment of passenger pigeon\u2019s holocene extinction and resurrects a memory of this lost species."]})]})]})}}]),i}(o.a.Component),tt=Object(u.a)(et),it=i.p+"static/media/pigeon.fbcc625c.mp4",nt={container:{display:"flex",flexDirection:"column","@media (min-width: 1200px)":{flexDirection:"row",justifyContent:"center"}},video:{width:"100%","@media (min-width: 1200px)":{width:"300px",objectFit:"cover"}},content:{display:"flex",flexDirection:"column",justifyContent:"center"},title:{textAlign:"center",color:ke,fontFamily:Ke,fontSize:Fe,marginTop:Ze,letterSpacing:1,"@media (min-width: 768px)":{fontSize:Ee},"@media (min-width: 1024px)":{},"@media (min-width: 1200px)":{fontSize:Ie}},info:{fontFamily:Xe,padding:We,fontSize:Re,color:ke,"@media (min-width: 768px)":{fontSize:Re},"@media (min-width: 1024px)":{fontSize:ze},"@media (min-width: 1200px)":{fontSize:Be},"@media (min-width: 1400px)":{fontSize:Ae}}},ot=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).state={},n}return Object(l.a)(i,[{key:"render",value:function(){return Object(me.jsxs)("div",{style:nt.container,children:[Object(me.jsxs)("div",{style:nt.content,children:[Object(me.jsx)("div",{style:nt.title,children:"CLIMATE STATEMENT"}),Object(me.jsxs)("div",{style:nt.info,children:["It was a grim awakening in 1914 when the passenger pigeons faced extinction. This displayed the capability of industrial humanity, which annihilated even the most plentiful of natural resources. The Lost Passage reappropriates the past to pose questions about our future - how many extinct species will it take to recalibrate our self-interests? Can we reverse the damage that has been done due to our need for power, control, and authority over other living beings? ",Object(me.jsx)("br",{}),Object(me.jsx)("br",{}),"Perhaps through the lens of this work, the audience may reflect upon our lack of empathy towards other living beings, our guileful ways of harming others for self-interests, and our problematic perception that nature is the implacable enemy that needs to be civilized, contained, and controlled."]})]}),Object(me.jsx)("video",{style:nt.video,src:it,autoPlay:!0,playsInline:!0,muted:!0,loop:!0})]})}}]),i}(o.a.Component),at=Object(u.a)(ot),rt={container:{marginTop:Ye,color:ke,fontFamily:Xe},website:{letterSpacing:2,fontSize:Te,width:"100vw",backgroundColor:ke,paddingTop:Ne,paddingBottom:Ne,color:Se,textAlign:"center","@media (orientation: landscape)":{fontSize:Re},"@media (min-width: 768px)":{fontSize:Re},"@media (min-width: 1024px)":{fontSize:ze},"@media (min-width: 1200px)":{fontSize:Be}}},st=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).state={},n}return Object(l.a)(i,[{key:"render",value:function(){return Object(me.jsx)("div",{style:rt.container,children:Object(me.jsx)("div",{style:rt.website,children:"thelostpassage.art, \xa92021"})})}}]),i}(o.a.Component),lt=Object(u.a)(st),dt=i.p+"static/media/beFantastic.5719ed1c.jpg",ht=i.p+"static/media/artahack.afc70d6b.jpg",ct=i.p+"static/media/supernormal.04eff6ee.jpg",ut=i.p+"static/media/dara.5d8346a9.jpg",pt=i.p+"static/media/amay.0c2f5e8c.jpg",mt=i.p+"static/media/shao.92ba0127.jpg",ft=i.p+"static/media/yu.bcabd1ce.jpg",gt=i.p+"static/media/ong.d510c1bd.jpg",vt={container:{display:"flex",alignItems:"center",width:"100%",flexDirection:"column"},title:{textAlign:"center",color:ke,fontFamily:Ke,fontSize:Fe,marginTop:Ze,letterSpacing:1,"@media (min-width: 768px)":{fontSize:Ee},"@media (min-width: 1024px)":{},"@media (min-width: 1200px)":{fontSize:Ie}},team:{display:"flex",flexDirection:"column",marginTop:We,"@media (orientation: landscape)":{flexDirection:"row",width:"100%",justifyContent:"center"},"@media (min-width: 768px) and (orientation: portrait)":{flexDirection:"row",width:"100%",justifyContent:"center"}},member:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:We,marginBottom:We,"@media (orientation: landscape)":{marginLeft:_e,marginRight:_e},"@media (min-width: 768px)":{marginLeft:_e,marginRight:_e},"@media (min-width: 1024px)":{marginLeft:Ze,marginRight:Ze},"@media (min-width: 1200px)":{marginLeft:Ye,marginRight:Ye},"@media (min-width: 1400px)":{marginLeft:Je,marginRight:Je}},photo:{width:"125px",height:"125px",borderRadius:"75px",backgroundColor:Le,"@media (orientation: landscape)":{width:"100px",height:"100px",borderRadius:"75px"},"@media (min-width: 1200px)":{width:"150px",height:"150px",borderRadius:"100px"}},infoContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:Xe,marginTop:We},name:{color:Oe,fontSize:ze,textAlign:"center",width:"100%","@media (orientation: landscape)":{fontSize:Re},"@media (min-width: 768px)":{fontSize:Be},"@media (min-width: 1024px)":{fontSize:Ae},"@media (min-width: 1200px)":{fontSize:Ae},"@media (min-width: 1400px)":{fontSize:Ae}},location:{color:ke,fontSize:Re,textAlign:"center","@media (orientation: landscape)":{fontSize:Te},"@media (min-width: 768px)":{fontSize:ze},"@media (min-width: 1024px)":{fontSize:Be},"@media (min-width: 1200px)":{fontSize:Be},"@media (min-width: 1400px)":{fontSize:Be}},moreMargin:{marginTop:Ye},sponsors:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:We,"@media (orientation: landscape)":{flexDirection:"row",justifyContent:"space-evenly"},"@media (min-width: 768px) and (orientation: portrait)":{flexDirection:"row",justifyContent:"space-evenly"},"@media (min-width: 1024px)":{flexDirection:"row",justifyContent:"space-evenly"}},image:{width:"100%"},imgLink:{marginTop:We,width:"50%","@media (orientation: landscape)":{width:"20%"},"@media (min-width: 768px) and (orientation: portrait)":{width:"20%"},"@media (min-width: 1024px)":{maxWidth:"275px"}}},xt=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).state={},n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.getKianPeng(),t=this.getAmay(),i=this.getShao(),n=this.getYu();return Object(me.jsxs)("div",{style:vt.container,children:[Object(me.jsx)("div",{style:vt.title,children:"THE TEAM"}),Object(me.jsxs)("div",{style:vt.team,children:[t,i,n,e]}),Object(me.jsx)("div",{style:[vt.title,vt.moreMargin],children:"SUPPORTED BY"}),Object(me.jsxs)("div",{style:vt.sponsors,children:[Object(me.jsx)("a",{style:vt.imgLink,href:"https://www.dara.network/bftogether/",target:"_blank",rel:"noreferrer",children:Object(me.jsx)("img",{style:vt.image,src:dt,alt:"befantastic"})}),Object(me.jsx)("a",{style:vt.imgLink,href:"https://artahack.io/",target:"_blank",rel:"noreferrer",children:Object(me.jsx)("img",{style:vt.image,src:ht,alt:"artahack"})}),Object(me.jsx)("a",{style:vt.imgLink,href:"https://www.instagram.com/supernormal.space/?hl=en",target:"_blank",rel:"noreferrer",children:Object(me.jsx)("img",{style:vt.image,src:ct,alt:"supernormal"})}),Object(me.jsx)("a",{style:vt.imgLink,href:"https://dara.network/",target:"_blank",rel:"noreferrer",children:Object(me.jsx)("img",{style:vt.image,src:ut,alt:"dara"})})]}),Object(me.jsx)(lt,{})]})}},{key:"getKianPeng",value:function(){return Object(me.jsxs)("a",{href:"https://www.ongkianpeng.art/",target:"_blank",rel:"noreferrer",style:vt.member,children:[Object(me.jsx)("img",{src:gt,alt:"ong",style:vt.photo}),Object(me.jsxs)("div",{style:vt.infoContainer,children:[Object(me.jsx)("div",{style:vt.name,children:"Ong Kian-Peng"}),Object(me.jsx)("div",{style:vt.location,children:"Mentor"}),Object(me.jsx)("div",{style:vt.location,children:"Singapore"})]})]})}},{key:"getAmay",value:function(){return Object(me.jsxs)("a",{href:"https://amaykataria.com",target:"_blank",rel:"noreferrer",style:vt.member,children:[Object(me.jsx)("img",{src:pt,alt:"amay",style:vt.photo}),Object(me.jsxs)("div",{style:vt.infoContainer,children:[Object(me.jsx)("div",{style:vt.name,children:"Amay Kataria"}),Object(me.jsx)("div",{style:vt.location,children:"New-Media Artist"}),Object(me.jsx)("div",{style:vt.location,children:"USA"})]})]})}},{key:"getShao",value:function(){return Object(me.jsxs)("a",{href:"https://www.linkedin.com/in/kshaohui/",target:"_blank",rel:"noreferrer",style:vt.member,children:[Object(me.jsx)("img",{src:mt,alt:"shao",style:vt.photo}),Object(me.jsxs)("div",{style:vt.infoContainer,children:[Object(me.jsx)("div",{style:vt.name,children:"Shaohui Kwok"}),Object(me.jsx)("div",{style:vt.location,children:"Cultural Producer"}),Object(me.jsx)("div",{style:vt.location,children:"Singapore"})]})]})}},{key:"getYu",value:function(){return Object(me.jsxs)("a",{href:"https://www.linkedin.com/in/yu-jeng-kuo-696133aa/",target:"_blank",rel:"noreferrer",style:vt.member,children:[Object(me.jsx)("img",{src:ft,alt:"yu",style:vt.photo}),Object(me.jsxs)("div",{style:vt.infoContainer,children:[Object(me.jsx)("div",{style:vt.name,children:"Yu-Jeng Kuo"}),Object(me.jsx)("div",{style:vt.location,children:"Software Engineer"}),Object(me.jsx)("div",{style:vt.location,children:"Singapore"})]})]})}}]),i}(o.a.Component),yt=Object(u.a)(xt),bt={container:{position:"relative",width:"100%",background:"linear-gradient(to bottom, #e6e9ec 0%,#f9fdff 100%)"}},wt=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).state={},n.containerRef=o.a.createRef(),n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.getPanel();return Object(me.jsx)("div",{style:bt.container,ref:this.containerRef,children:e})}},{key:"getPanel",value:function(){return this.props.title===St.PIGEONS?Object(me.jsx)(tt,{}):this.props.title===St.CLIMATE?Object(me.jsx)(at,{}):this.props.title===St.ABOUT?Object(me.jsx)(yt,{}):void 0}},{key:"scrollTo",value:function(){var e=this;setTimeout((function(){Object(m.elementScrollIntoView)(e.containerRef.current,{behavior:"smooth",block:"start"})}),50)}}]),i}(o.a.Component),Pt=Object(u.a)(wt),jt={container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"}},St={PIGEONS:"PASSENGER PIGEONS",CLIMATE:"CLIMATE STATEMENT",ABOUT:"ABOUT US"},kt=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).state={},n.pigeonPanelRef=o.a.createRef(),n.climatePanelRef=o.a.createRef(),n.aboutPanelRef=o.a.createRef(),n}return Object(l.a)(i,[{key:"render",value:function(){return Object(me.jsxs)("div",{style:jt.container,children:[Object(me.jsx)(Pt,{ref:this.pigeonPanelRef,title:St.PIGEONS,panelNum:0}),Object(me.jsx)(Pt,{ref:this.climatePanelRef,title:St.CLIMATE,panelNum:1}),Object(me.jsx)(Pt,{ref:this.aboutPanelRef,title:St.ABOUT,panelNum:0})]})}},{key:"scroll",value:function(e){e===St.PIGEONS?this.pigeonPanelRef.current.scrollTo():e===St.CLIMATE?this.climatePanelRef.current.scrollTo():e===St.ABOUT&&this.aboutPanelRef.current.scrollTo()}}]),i}(o.a.Component),Lt=Object(u.a)(kt),Ot=["title","titleId"];function Mt(){return Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Mt.apply(this,arguments)}function Ct(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function Tt(e,t){var i=e.title,o=e.titleId,a=Ct(e,Ot);return n.createElement("svg",Mt({width:"106px",height:"159px",viewBox:"0 0 106 159",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},a),i?n.createElement("title",{id:o},i):null,se||(se=n.createElement("defs",null,n.createElement("filter",{id:"filter_1"},n.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0 0 0 0 0.827451 0 0 0 0 0.827451 0 0 0 0 0.827451 0 0 0 1 0"})),n.createElement("filter",{id:"filter_2"},n.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0 0 0 0 0.40392157 0 0 0 0 0.45490196 0 0 0 0 0.6117647 0 0 0 1 0"})),n.createElement("path",{d:"M0 0L105.925 0L105.925 158.126L0 158.126L0 0Z",id:"path_1"}),n.createElement("clipPath",{id:"mask_1"},n.createElement("use",{xlinkHref:"#path_1"})))),le||(le=n.createElement("g",{id:"Pigeon_Silhouette_clip_art"},n.createElement("path",{d:"M0 0L105.925 0L105.925 158.126L0 158.126L0 0Z",id:"Background",fill:"none",fillRule:"evenodd",stroke:"none"}),n.createElement("g",{clipPath:"url(#mask_1)"},n.createElement("g",{id:"layer2"},n.createElement("g",{id:"g3204"},n.createElement("path",{d:"M6.96014 49.8085L11.7452 41.9783L12.8327 35.8882L13.0503 27.188L13.7028 21.0979L15.2253 15.2253L18.9229 8.70017L22.8379 4.13258L29.5806 0.652514L37.4107 0L41.7608 1.52253L45.2409 3.91508L46.5459 7.83015L44.5884 9.13518L43.9359 12.1802L46.3284 15.4428L43.5008 17.4003L38.9333 21.0979L38.0632 24.3605L37.8457 30.0156L41.3258 38.2808L45.6759 44.1534L49.8085 51.1135L52.201 56.1161L50.2435 59.8137L46.3284 60.0312L43.7183 63.9463L39.8033 69.6014L38.7157 76.779L40.2383 85.4792L46.1109 94.6144L50.6785 96.7894L52.8535 101.792L58.2911 102.88L62.2062 108.317L70.6889 108.317L75.6915 108.1L87.4367 112.015L91.1343 111.797L101.139 120.497L105.925 124.847L97.2244 123.325L93.5268 125.282L83.9566 122.02L76.9965 118.757L71.7764 115.277L67.8613 113.537L63.5112 115.712L60.0312 117.235L61.7712 121.15L60.2487 133.548L57.6386 141.813L58.9436 145.293L61.9887 144.858L59.5962 148.773L57.8561 155.516L57.8561 158.126L55.2461 157.691L53.9411 151.383L45.6759 153.776L40.4558 155.081L36.7582 154.646L37.4107 153.123L40.6733 151.818L44.5884 150.513L39.3683 150.295L36.9757 150.078L35.0182 147.468L41.1083 147.033L48.0684 147.468L52.8535 145.293L54.1586 136.81L54.8111 131.155L52.8535 129.198L49.156 123.542L49.3735 117.67L48.5034 114.842L40.2383 113.537L38.9333 116.365L39.3683 121.15L40.8908 124.195L38.7157 128.328L35.6707 132.243L32.6256 137.68L32.8431 141.16L35.4532 142.683L40.4558 141.813L42.1958 142.465L38.9333 144.858L35.8882 144.858L32.6256 144.423L31.3206 147.903L32.8431 154.211L28.9281 151.383L28.2755 147.468L25.013 147.685L17.1828 150.078L12.8327 152.035L9.78769 152.035L11.3102 148.773L15.8778 147.468L21.7504 145.728L16.3128 145.728L10.0052 146.163L8.26516 144.423L8.70017 142.465L13.0503 143.335L19.3579 143.118L25.448 142.465L28.4931 137.463L31.1031 130.285L31.1031 128.545L28.7106 124.195L27.623 116.582L26.1005 111.797L19.3579 103.967L13.2678 97.8769L7.39514 88.0892L2.17504 77.214L0.217504 67.4263L0 60.9012L3.91508 54.3761L6.96014 49.8085L6.96014 49.8085Z",id:"path2420",fill:"inherit",fillRule:"evenodd",stroke:"none"}),n.createElement("path",{d:"M2.04251 7.1488L0 3.77865L0.306375 1.22551L1.94039 0L5.00415 2.04251L9.08918 4.28928L10.5189 6.22967L11.6423 8.78281L9.39556 8.47643L6.74029 7.45517L4.28927 7.25092L2.04251 7.1488L2.04251 7.1488Z",transform:"translate(45.268066 8.334961)",id:"path3194",fill:"inherit",fillRule:"evenodd",stroke:"none"}),n.createElement("path",{d:"M11.5402 0L12.7657 2.65526L12.8678 6.94455L10.8253 8.98706L7.35304 9.39556L5.92329 10.8253L3.06377 14.8082L1.12338 19.3018L0 23.1825L1.02125 28.3909L3.16589 33.293L6.43391 39.012L9.29343 42.28L11.9487 42.9949L13.8891 46.2629L14.8082 48.1012L20.0166 50.1437L22.5698 54.1266L25.9399 55.4542L32.9866 55.1479L33.8036 52.0841L39.012 50.4501L39.4205 46.5693L39.2162 43.1992L41.1566 42.3821L40.2375 36.9695L37.378 31.3526L37.378 35.744L36.1525 41.5651L32.4759 45.4459L29.1058 49.5309L24.9186 49.6331L20.2209 46.9778L18.689 44.1183L21.5485 45.0374L26.1442 47.0799L29.5143 44.1183L33.3951 41.2588L35.6418 36.4589L36.0504 30.6377L34.7227 26.9612L31.5568 22.4676L28.5952 16.7486L25.7357 11.4381L22.3655 6.12754L17.5656 1.73614L11.5402 0L11.5402 0Z",transform:"translate(40.059692 51.944336)",id:"path3196",fill:"inherit",fillRule:"evenodd",stroke:"none"}),n.createElement("path",{d:"M15.8295 18.2805L19.9145 17.5656L18.689 14.5018L21.5485 13.787L15.3188 8.7828L16.6465 12.3572L16.1359 14.3997L7.25092 14.5018L3.06377 13.787L4.28927 11.7444L10.3147 12.2551L14.0933 12.2551L12.7657 6.74029L9.39555 1.63401L7.76154 0L7.9658 3.57439L6.22967 3.77865L6.74029 8.88493L5.00415 10.6211L2.24676 12.153L0 13.1742L1.22551 14.8082L5.31053 15.8295L12.3572 17.9741L15.8295 18.2805L15.8295 18.2805Z",transform:"translate(74.37427 92.28516)",id:"path3198",fill:"inherit",fillRule:"evenodd",stroke:"none"}),n.createElement("path",{d:"M2.88537 8.22331L7.06916 7.93477L8.80039 6.05928L8.94466 2.88537L7.3577 0.721344L3.46245 0L1.58695 2.16403L0 5.19367L2.88537 8.22331L2.88537 8.22331Z",transform:"translate(28.639648 3.0722656)",id:"path3200",fill:"inherit",fillRule:"evenodd",stroke:"none"}),n.createElement("path",{d:"M0.432807 4.32806L0 2.59683L1.15415 0.577074L3.31818 0L4.47233 1.00988L5.0494 3.17391L3.75099 5.33794L0.432807 4.32806L0.432807 4.32806Z",transform:"translate(31.092163 4.661133)",id:"path3202",fill:"inherit",fillRule:"evenodd",stroke:"none"})))))))}var Rt,zt=n.forwardRef(Tt),Bt=(i.p,["title","titleId"]);function At(){return At=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},At.apply(this,arguments)}function Ft(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function Et(e,t){var i=e.title,o=e.titleId,a=Ft(e,Bt);return n.createElement("svg",At({width:"67px",height:"54px",viewBox:"0 0 67 54",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},a),i?n.createElement("title",{id:o},i):null,Rt||(Rt=n.createElement("g",{id:"Mute",transform:"translate(2.5 2.5)"},n.createElement("path",{d:"M33.389 0L16.235 14.837L0 14.837L0 33.93L15.989 33.93L33.389 48.981L33.389 0L33.389 0Z",id:"Shape",fill:"inherit",fillRule:"evenodd",stroke:"inherit",strokeWidth:5,strokeLinejoin:"round"}),n.createElement("g",{id:"Shape",transform:"translate(42.671387 14.730957)"},n.createElement("path",{d:"M19 0L0 19",id:"Line",fill:"inherit",fillRule:"evenodd",stroke:"#FFFFFF",strokeWidth:5,strokeLinecap:"square"}),n.createElement("path",{d:"M0.5 0L19 19",id:"Line-2",fill:"inherit",fillRule:"evenodd",stroke:"#FFFFFF",strokeWidth:5,strokeLinecap:"square"})))))}var It,Dt=n.forwardRef(Et),Vt=(i.p,["title","titleId"]);function Ht(){return Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Ht.apply(this,arguments)}function Ut(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function Nt(e,t){var i=e.title,o=e.titleId,a=Ut(e,Vt);return n.createElement("svg",Ht({width:"39px",height:"54px",viewBox:"0 0 39 54",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},a),i?n.createElement("title",{id:o},i):null,It||(It=n.createElement("g",{id:"Volume",transform:"translate(2.5 2.5)"},n.createElement("path",{d:"M33.389 0L16.235 14.837L0 14.837L0 33.93L15.989 33.93L33.389 48.981L33.389 0L33.389 0Z",id:"Shape",fill:"inherit",fillRule:"evenodd",stroke:"inherit",strokeWidth:5,strokeLinejoin:"round"}))))}var Gt=n.forwardRef(Nt),Wt=(i.p,i(13)),_t={absoluteContainer:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",visibility:"visible",zIndex:1,"@media (min-width: 768px) and (orientation: landscape)":{alignItems:"flex-start"}},contentContainer:{padding:Ye},hidden:{visibility:"hidden"},homeTitle:{fontFamily:Ke,fontSize:Ie,letterSpacing:2,color:ke,cursor:"default","@media (min-width: 768px) and (orientation: portrait)":{fontSize:De},"@media (min-width: 1024px)":{fontSize:Ve}},titleContainer:{display:"flex",flexDirection:"column",alignItems:"center","@media (min-width: 768px) and (orientation: landscape)":{alignItems:"flex-start"}},title:{fontFamily:Xe,fontSize:Ae,letterSpacing:2,color:ke,cursor:"crosshair",paddingTop:Ge,textShadow:"1px 1px 3px "+ke,"@media (min-width: 768px) and (orientation: portrait)":{fontSize:Fe},"@media (min-width: 1024px)":{fontSize:Fe}},hover:{color:Ce,textShadow:"1px 1px 3px "+Ce},homeButton:{backgroundColor:ke,padding:Ge,width:Ae,height:Ae,borderRadius:Ae,marginBottom:Ne,"@media (min-width: 1024px)":{padding:Ge,borderRadius:Ee,width:Ve,height:Ve}},colorFlick:{animation:"x 3s ease-in-out infinite",animationName:{color:u.a.keyframes({"0%":{backgroundColor:ke},"50%":{backgroundColor:Me},"100%":{backgroundColor:Ce}})}.color,animationDirection:"alternate"},homeHover:{backgroundColor:Oe},svg:{width:"100%",height:"100%",fill:"white"},muteSvg:{width:"90%",height:"90%",fill:"white"},soundButton:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:ke,padding:Ge,width:Ae,height:Ae,borderRadius:Ae,zIndex:1,"@media (min-width: 1024px)":{padding:Ge,borderRadius:Ee,width:Ve,height:Ve}},buttonCollection:{display:"flex",flexDirection:"column",position:"fixed",right:Ge,bottom:Ye,zIndex:1,"@media (min-width: 1024px)":{right:We}}},Zt=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;Object(s.a)(this,i),n=t.call(this,e);var o=!Wt.isMobile;return n.state={isHoveringPigeons:!1,isHoveringClimate:!1,isHoveringAbout:!1,isHomeButtonHovering:!1,showHomeButton:!1,isPlayingSound:o},n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.state.isHoveringPigeons?[_t.title,_t.hover]:_t.title,t=this.state.isHoveringClimate?[_t.title,_t.hover]:_t.title,i=this.state.isHoveringAbout?[_t.title,_t.hover]:_t.title,n=this.getHomeButton(),o=this.getSoundButton();return Object(me.jsx)("div",{style:_t.absoluteContainer,children:Object(me.jsxs)("div",{style:_t.contentContainer,children:[Object(me.jsx)("div",{style:_t.homeTitle,children:"THE LOST PASSAGE"}),Object(me.jsxs)("div",{style:_t.titleContainer,children:[Object(me.jsx)("div",{style:e,onClick:this.onClick.bind(this,St.PIGEONS),onMouseEnter:this.onHoverPigeons.bind(this),onMouseLeave:this.onHoverPigeons.bind(this),children:"ABOUT"}),Object(me.jsx)("div",{style:t,onClick:this.onClick.bind(this,St.CLIMATE),onMouseEnter:this.onHoverClimate.bind(this),onMouseLeave:this.onHoverClimate.bind(this),children:"CLIMATE"}),Object(me.jsx)("div",{style:i,onClick:this.onClick.bind(this,St.ABOUT),onMouseEnter:this.onHoverAbout.bind(this),onMouseLeave:this.onHoverAbout.bind(this),children:"TEAM"})]}),Object(me.jsxs)("div",{style:_t.buttonCollection,children:[n,o]})]})})}},{key:"getSoundButton",value:function(){var e=this.state.isPlayingSound?Object(me.jsx)(Gt,{style:_t.muteSvg}):Object(me.jsx)(Dt,{style:_t.muteSvg});return Object(me.jsx)("div",{onClick:this.setSound.bind(this),style:[_t.soundButton,_t.colorFlick],children:e})}},{key:"setSound",value:function(){this.state.isPlayingSound?(w.release(),w.isPermanentlyMute=!0):w.trigger(),this.setState({isPlayingSound:!this.state.isPlayingSound})}},{key:"getHomeButton",value:function(){var e=this.state.showHomeButton?[_t.homeButton,_t.colorFlick]:[_t.homeButton,_t.hidden];return e=this.state.isHomeButtonHovering?[_t.homeButton,_t.homeHover]:e,Object(me.jsx)("div",{style:e,onClick:this.onHomeButtonClick.bind(this),onMouseEnter:this.onHomeButtonHover.bind(this),onMouseLeave:this.onHomeButtonHover.bind(this),children:Object(me.jsx)(zt,{style:_t.svg})})}},{key:"onHomeButtonHover",value:function(){if(Wt.isMobile);else{var e=this.state.isHomeButtonHovering;this.setState({isHomeButtonHovering:!e})}}},{key:"onHoverPigeons",value:function(){if(Wt.isMobile);else{var e=this.state.isHoveringPigeons;this.setState({isHoveringPigeons:!e})}}},{key:"onHoverClimate",value:function(){if(Wt.isMobile);else{var e=this.state.isHoveringClimate;this.setState({isHoveringClimate:!e})}}},{key:"onHoverAbout",value:function(){if(Wt.isMobile);else{var e=this.state.isHoveringAbout;this.setState({isHoveringAbout:!e})}}},{key:"onClick",value:function(e){this.props.onClickNavTitle(e),this.setState({showHomeButton:!0})}},{key:"onHomeButtonClick",value:function(){var e=this;this.props.onClickHomeButton(),setTimeout((function(){e.setState({showHomeButton:!1})}),250)}}]),i}(o.a.Component),Yt=Object(u.a)(Zt),Jt=i(61),Kt={pulse:u.a.keyframes({"0%":{transform:"scale(1.0)"},"50%":{transform:"scale(2.0)"},"100%":{transform:"scale(1.0)"}})},qt={container:{position:"fixed",top:"0%",left:"0%",bottom:"0%",right:"0%",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1,background:"linear-gradient(to bottom, #e6e9ec 0%,#f9fdff 100%)"},title:{fontFamily:Ke,fontSize:De,textAlign:"center",maxWidth:"200px",letterSpacing:5,opacity:1,color:ke,"@media (min-width: 568px)":{maxWidth:"100%"},"@media (min-width: 768px) and (orientation: portrait)":{fontSize:He},"@media (min-width: 1024px) and (orientation: landscape)":{fontSize:Ue},"@media (min-width: 1024px) and (orientation: portrait)":{fontSize:Ue}},loadContainer:{display:"flex",flexDirection:"column",alignItems:"center"},svgContainer:{fontSize:Fe},loadTitle:{fontFamily:qe,fontSize:Te,color:ke,marginTop:Ze,"@media (min-width: 1024px)":{fontSize:ze}},svg:{width:"25px",height:"25px",fill:ke,"@media (minWidth: 1024px)":{width:"90%",height:"90%"}},flash:{animationName:u.a.keyframes(Jt.bounceOut,"bounceOut"),animationDuration:"1.5s",animationTimingFunction:"ease-in-out"},svgSimplePulse:{animation:"x 5s linear infinite",animationName:Kt.pulse},zoom:{animationName:u.a.keyframes(Jt.zoomIn,"zoom"),animationDuration:"5.0s",animationTimingFunction:"ease-in-out",animationFillMode:"forwards"},button:{fontFamily:qe,color:ke,fontSize:Be,borderStyle:"solid",borderColor:ke,borderWidth:"2px",marginTop:We,padding:Ge,letterSpacing:"2px",cursor:"crosshair","@media (min-width: 1024px)":{fontSize:Ee,letterSpacing:"4px",borderWidth:"4px"}},hover:{backgroundColor:Le,color:je},topMessage:{position:"absolute",color:ke,fontSize:Te,textAlign:"center",paddingLeft:Ge,paddingRight:Ge,fontFamily:Xe,top:"15px","@media (orientation: landscape)":{fontSize:Te},"@media (min-width: 768px) and (orientation: landscape)":{fontSize:Te},"@media (min-width: 568px)":{maxWidth:"80%"},"@media (min-width: 768px) and (orientation: portrait)":{fontSize:Be},"@media (min-width: 1024px) and (orientation: landscape)":{fontSize:Be,top:"30px"}},leftMessage:{position:"absolute",textAlign:"center",maxWidth:"300px",left:"-130px",color:ke,fontSize:Te,fontFamily:Xe,transform:"rotate(-90deg)","@media (orientation: landscape)":{fontSize:Re},"@media (min-width: 768px) and (orientation: portrait)":{maxWidth:"100%",fontSize:Be,left:"-250px"},"@media (min-width: 1024px) and (orientation: landscape)":{fontSize:ze,maxWidth:"100%",left:"-250px"},"@media (min-width: 1200px) and (orientation: landscape)":{left:"-80px"}},rightMessage:{position:"absolute",right:"-130px",textAlign:"center",maxWidth:"300px",fontSize:Te,fontFamily:Xe,color:ke,transform:"rotate(90deg)","@media (orientation: landscape)":{fontSize:Re},"@media (min-width: 768px) and (orientation: portrait)":{maxWidth:"100%",fontSize:Be,right:"-250px"},"@media (min-width: 1024px) and (orientation: landscape)":{fontSize:ze,maxWidth:"100%",right:"-250px"},"@media (min-width: 1200px) and (orientation: landscape)":{right:"-80px"}},bottomMessage:{position:"absolute",color:ke,fontSize:Te,fontFamily:Xe,paddingLeft:Ze,paddingRight:Ze,textAlign:"center",bottom:"15px","@media (orientation: landscape)":{fontSize:Te},"@media (min-width: 568px)":{maxWidth:"80%"},"@media (min-width: 768px) and (orientation: portrait)":{fontSize:Be},"@media (min-width: 1024px) and (orientation: landscape)":{fontSize:Be,bottom:"30px"}},headsupContainer:{marginTop:_e,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:"200px","@media (max-width: 800px) and (orientation: landscape)":{marginTop:We},"@media (min-width: 768px) and (orientation: portrait)":{maxWidth:"300px"},"@media (min-width: 1024px) and (orientation: portrait)":{maxWidth:"400px"}},hContent:{color:ke,fontSize:Re,fontFamily:Xe,textAlign:"center","@media (min-width: 768px) and (orientation: portrait)":{fontSize:ze},"@media (min-width: 1024px) and (orientation: portrait)":{fontSize:Ae}},hContentSmall:{fontSize:Te,"@media (min-width: 768px) and (orientation: portrait)":{fontSize:Re},"@media (min-width: 1024) and (orientation: portrait)":{fontSize:Be}}},Xt=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).state={isLoading:!1,isHovering:!1,isDisabled:!0},n}return Object(l.a)(i,[{key:"render",value:function(){var e=qt.container,t=this.state.isLoading?this.getLoader():this.getTitle(),i=this.getMessages();return Object(me.jsxs)("div",{style:e,children:[t,i]})}},{key:"getLoader",value:function(){var e=[qt.svgContainer,qt.svgSimplePulse];return Object(me.jsxs)("div",{style:qt.loadContainer,children:[Object(me.jsx)("div",{style:e,children:Object(me.jsx)(zt,{style:qt.svg})}),Object(me.jsx)("div",{style:qt.loadTitle,children:"Getting things ready ..."})]})}},{key:"getTitle",value:function(){var e=this.state.isHovering?[qt.button,qt.hover]:[qt.button],t=!this.state.isDisabled&&Wt.isMobile?this.getMobileHeadsup():Object(me.jsx)(o.a.Fragment,{}),i=this.state.isDisabled?Object(me.jsx)(o.a.Fragment,{}):Object(me.jsx)("button",{disabled:this.state.isDisabled,onMouseEnter:this.onHoverOn.bind(this),onMouseLeave:this.onHoverOff.bind(this),onClick:this.onEnter.bind(this),style:e,children:"ENTER"});return Object(me.jsxs)(o.a.Fragment,{children:[Object(me.jsx)("div",{style:[qt.title,qt.flash],onAnimationEnd:this.onStartAnimationEnd.bind(this),children:"THE LOST PASSAGE"}),i,t]})}},{key:"getMobileHeadsup",value:function(){return Object(me.jsxs)("div",{style:qt.headsupContainer,children:[Object(me.jsx)("div",{style:qt.hContent,children:"Using a mobile device?"}),Object(me.jsx)("div",{style:[qt.hContent,qt.hContentSmall],children:"For the full interactive experience, use desktop or laptop."})]})}},{key:"getMessages",value:function(){return Object(me.jsxs)(o.a.Fragment,{children:[Object(me.jsx)("div",{style:qt.topMessage,children:'"They existed in billions, but today they are lost and revered only in museums."'}),Object(me.jsx)("div",{style:qt.leftMessage,children:'"A cruel and blind human intervention led to the extinction of this species."'}),Object(me.jsx)("div",{style:qt.rightMessage,children:'"No matter how abundant something is-if one\'s not careful, one can lose it."'}),Object(me.jsx)("div",{style:qt.bottomMessage,children:'"May we gather the strength to confront the reality of our climate condition."'})]})}},{key:"onEnter",value:function(){var e=this;setTimeout((function(){e.props.onEnterWorld()}),50),this.setState({isLoading:!0}),this.checkIfReady()}},{key:"checkIfReady",value:function(){var e=this;Wt.isMobile?setTimeout((function(){e.hasFinishedLoading()}),3e3):setTimeout((function(){K&&ye&&w.isAudioManagerReady?e.hasFinishedLoading():e.checkIfReady()}),250)}},{key:"hasFinishedLoading",value:function(){console.log("Has Finished Loading"),this.props.onLoadComplete()}},{key:"onHoverOn",value:function(){this.state.isDisabled||this.setState({isHovering:!0})}},{key:"onHoverOff",value:function(){this.state.isDisabled||this.setState({isHovering:!1})}},{key:"onStartAnimationEnd",value:function(){this.setState({isDisabled:!1})}}]),i}(o.a.Component),Qt=Object(u.a)(Xt),$t=i.p+"static/media/mobile_video.632d8245.mp4",ei={container:{position:"fixed",top:"0%",bottom:"0%",left:"0%",right:"0%",display:"flex",flexDirection:"column",overflow:"hidden"},containerRelative:{position:"relative"},panelStyles:{position:"relative",display:"none"},panelVisible:{display:"block"},videoCanvas:{position:"relative",height:"100vh",width:"100vw",objectFit:"cover",overflow:"hidden"}},ti=function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).state={showContentPanel:!1,showNavPanel:!1,showEnterPanel:!0},n.worldRef=o.a.createRef(),n.contentPanelRef=o.a.createRef(),n.navRef=o.a.createRef(),n.mobileVideoRef=o.a.createRef(),n.enterPanelRef=o.a.createRef(),n.shouldPlay=!1,g.subscribe(n.onExhibitionUpdated.bind(Object(d.a)(n))),n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.state.showNavPanel?this.getNavPanel():Object(me.jsx)(o.a.Fragment,{}),t=this.state.showEnterPanel?this.getEnterPanel():Object(me.jsx)(o.a.Fragment,{}),i=this.getContentPanel(),n=this.getWorldContent(),a=this.state.showContentPanel?[ei.container,ei.containerRelative]:[ei.container];return Object(me.jsxs)("div",{style:a,children:[n,e,t,i]})}},{key:"onExhibitionUpdated",value:function(){g.isExhibition&&this.setState({showNavPanel:!1})}},{key:"componentDidMount",value:function(){var e=this;this.mobileVideoRef.current&&this.mobileVideoRef.current.addEventListener("playing",(function(){console.log("Beginning to play the video."),e.shouldPlay||e.mobileVideoRef.current.pause()}))}},{key:"getWorldContent",value:function(){var e=Object(me.jsx)("video",{style:ei.videoCanvas,ref:this.mobileVideoRef,preload:"metadata",autoPlay:!0,playsInline:!0,muted:!0,loop:!0,children:Object(me.jsx)("source",{src:$t})});return Wt.isMobile?e:Object(me.jsx)(Pe,{ref:this.worldRef,onInitialCameraAnimationDone:this.onInitialCameraAnimationDone.bind(this)})}},{key:"getNavPanel",value:function(){return Object(me.jsx)(Yt,{ref:this.navRef,onClickNavTitle:this.onClickNavTitle.bind(this),onClickHomeButton:this.onClickHomeButton.bind(this)})}},{key:"getEnterPanel",value:function(){return Object(me.jsx)(Qt,{ref:this.enterPanelRef,onEnterWorld:this.onEnterWorld.bind(this),onLoadComplete:this.onLoadComplete.bind(this)})}},{key:"getContentPanel",value:function(){var e=this.state.showContentPanel?[ei.panelStyles,ei.panelVisible]:[ei.panelStyles];return Object(me.jsx)("div",{style:e,children:Object(me.jsx)(Lt,{ref:this.contentPanelRef})})}},{key:"onEnterWorld",value:function(){Wt.isMobile||this.worldRef.current.beginWorld()}},{key:"onLoadComplete",value:function(){Wt.isMobile?(this.shouldPlay=!0,this.mobileVideoRef.current.play(),this.onInitialCameraAnimationDone()):(w.trigger(),this.worldRef.current.enterWorld()),this.setState({showEnterPanel:!1})}},{key:"onInitialCameraAnimationDone",value:function(){this.setState({showNavPanel:!0})}},{key:"onClickNavTitle",value:function(e){this.setState({showContentPanel:!0}),this.contentPanelRef.current.scroll(e),Wt.isMobile||this.worldRef.current.updateAnimationStatus(!1)}},{key:"onClickHomeButton",value:function(){var e=this;Wt.isMobile?Object(m.elementScrollIntoView)(this.mobileVideoRef.current,{behavior:"smooth",block:"start"}):(this.worldRef.current.scrollTo(),this.worldRef.current.updateAnimationStatus(!0)),setTimeout((function(){e.setState({showContentPanel:!1})}),1e3)}},{key:"onMobileVideoLoaded",value:function(){this.enterPanelRef.current.setMobileVideoReady()}}]),i}(o.a.Component),ii=Object(u.a)(ti),ni=i(60);r.a.render(Object(me.jsx)(ni.a,{children:Object(me.jsx)(ii,{})}),document.getElementById("root"))}},[[245,1,2]]]);
//# sourceMappingURL=main.a27ffda5.chunk.js.map