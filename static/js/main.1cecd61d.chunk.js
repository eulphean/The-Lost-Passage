(this["webpackJsonpVirtual-Companion"]=this["webpackJsonpVirtual-Companion"]||[]).push([[0],{110:function(e,t,i){e.exports=i.p+"static/media/gaugan.7656d0aa.mp4"},112:function(e,t,i){e.exports=i(159)},117:function(e,t,i){},118:function(e,t,i){},159:function(e,t,i){"use strict";i.r(t);var n=i(3),a=i.n(n),s=i(75),o=i.n(s),r=(i(117),i(118),i(0)),l=i(2),c=i(4),h=i(5),u=i(6),d=i(1),p=i(76),f=i.n(p)()(d),v={EnableControls:!1,EnablePan:!0,AutoRotate:!1,RotateSpeed:.1,EnableKeys:!0},m=function(){function e(){Object(r.a)(this,e),this.camera=new d.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.05,2e4),this.camera.position.set(0,0,65),this.camera.lookAt(new d.Vector3(0,0,0)),this.camera.frustumCulled=!0,this.controls=new f(this.camera)}return Object(l.a)(e,[{key:"update",value:function(){this.updateControls()}},{key:"updateControls",value:function(){this.controls.update(),this.controls.enablePan=v.EnablePan,this.controls.autoRotate=v.AutoRotate,this.controls.autoRotateSpeed=v.RotateSpeed,this.controls.enabled=v.EnableControls,this.controls.enableKeys=v.EnableKeys}},{key:"getCamera",value:function(){return this.camera}}]),e}(),g=function e(t){Object(r.a)(this,e);var i=new d.DirectionalLight(16777215);i.intensity=1,i.position.set(0,100,0).normalize(),t.add(i)},y=function(){function e(){Object(r.a)(this,e),this.renderer=new d.WebGLRenderer({antialias:!0}),this.renderer.setClearColor("white",1),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=d.sRGBEncoding}return Object(l.a)(e,[{key:"getDomElement",value:function(){return this.renderer.domElement}},{key:"render",value:function(e,t){this.renderer.render(e,t)}}]),e}(),b={PatternType:""},P=0,S=1,k={Origin:{x:0,y:6,z:0},Radii:{x:10,y:10},Amplitude:0,Speed:.3,Direction:!0},w={Origin:{x:0,y:6,z:0},Radius:5,Phase:.5,NumPetals:3,Amplitude:0,Sinusoidal:!0,Direction:!0,Speed:.3},O=function(){function e(t){Object(r.a)(this,e),this.theta_rad=0,this.amp=t.amp,this.isClockwise=t.dir,this.originPos=t.pos,this.moveFactor=t.move,this.targetPos=new d.Vector3(0,0,0)}return Object(l.a)(e,[{key:"updateTheta",value:function(e){this.theta_rad=this.isClockwise?this.theta_rad+this.moveFactor:this.theta_rad-this.moveFactor,this.theta_rad=this.theta_rad>=e?0:this.theta_rad}},{key:"cartesianX",value:function(e){return this.originPos.x+e*Math.cos(this.theta_rad)}},{key:"cartesianZ",value:function(e){return this.originPos.z+e*Math.sin(this.theta_rad)}},{key:"cartesianY",value:function(e){return this.originPos.y+this.amp*Math.sin(this.theta_rad)}},{key:"getTargetPos",value:function(){return this.targetPos}}]),e}(),x=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).radX=e.radx,n.radZ=e.radz,n.maxTheta=2*Math.PI,n}return Object(l.a)(i,[{key:"update",value:function(){this.updateGuiParams();var e=this.cartesianX(this.radX),t=this.cartesianZ(this.radZ),i=this.cartesianY();this.targetPos.set(e,i,t),this.updateTheta(this.maxTheta)}},{key:"updateGuiParams",value:function(){this.originPos.set(k.Origin.x,k.Origin.y,k.Origin.z),this.radX=k.Radii.x,this.radZ=k.Radii.y,this.amp=k.Amplitude,this.moveFactor=d.Math.degToRad(k.Speed),this.isClockwise=k.Direction}}]),i}(O),C=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).rad=e.rad,n.phase=e.ph,n.numPetals=e.numP,n.isSin=e.isSin,n.maxTheta=Math.PI,n}return Object(l.a)(i,[{key:"update",value:function(){var e,t,i;this.updateGuiParams();var n=this.isSin?this.rad*Math.sin(this.phase+this.numPetals*this.theta_rad):this.rad*Math.cos(this.phase+this.numPetals*this.theta_rad);e=this.cartesianX(n),i=this.cartesianZ(n),t=this.cartesianY(),this.targetPos.set(e,t,i),this.updateTheta(this.maxTheta)}},{key:"updateGuiParams",value:function(){this.originPos.set(w.Origin.x,w.Origin.y,w.Origin.z),this.rad=w.Radius,this.phase=w.Phase,this.amp=w.Amplitude,this.numPetals=w.NumPetals,this.isSin=w.Sinusoidal,this.isClockwise=w.Direction,this.moveFactor=d.Math.degToRad(w.Speed)}}]),i}(O),F=function(){function e(){Object(r.a)(this,e)}return Object(l.a)(e,[{key:"setTargetPattern",value:function(e){if(e===P){console.log("Creating Ellipse Pattern");var t=function(e,t,i,n,a,s){return{pos:e,radx:t,radz:i,amp:n,dir:a,move:s}}(new d.Vector3(0,6,0),10,10,0,!0,d.Math.degToRad(.3));this.curPattern=new x(t)}else if(e===S){console.log("Creating Rose-Curve Pattern");var i=function(e,t,i,n,a,s,o,r){return{pos:e,rad:t,ph:i,numP:n,amp:a,isSin:s,dir:o,move:r}}(new d.Vector3(0,6,0),10,.5,3,0,!0,!0,d.Math.degToRad(.3));this.curPattern=new C(i)}}},{key:"update",value:function(){if(this.curPattern)return this.curPattern.update(),this.curPattern.getTargetPos()}}]),e}(),R=i(7),j=i(111),E=function(){function e(t,i){Object(r.a)(this,e);var n=new R.c(0,0,0),a=new R.c(0,0,0);n.x=t.x-i,n.y=t.y-i,n.z=t.z-i,a.x=t.x+i,a.y=t.y+i,a.z=t.z+i,this.tree=new j.a(n,a,0,2)}return Object(l.a)(e,[{key:"insertPoint",value:function(e,t){this.tree.insert(e,t)}},{key:"scanForPoints",value:function(e,t){return this.tree.findPoints(e,t,!0)}},{key:"pointCount",value:function(){return this.tree.pointCount}}]),e}(),A=function(){function e(){Object(r.a)(this,e),this.flockOctree={}}return Object(l.a)(e,[{key:"update",value:function(e,t){this.setupOctree(e,t)}},{key:"setupOctree",value:function(e,t){var i=this;this.flockOctree=new E(e,20),t.forEach((function(e){i.flockOctree.insertPoint(e.position,e)}))}},{key:"getNeighbours",value:function(e){var t=[];return this.flockOctree.scanForPoints(e,5).forEach((function(e){var i=e.data;t.push(i)})),t}}]),e}(),T=i(77),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.random()*(e-t)+t},I=function(e,t,i,n,a){var s=Math.sqrt(e*e+t*t+i*i);e/=s,t/=s,i/=s;var o=Math.cos(n/2),r=Math.sin(n/2);a.set(e*r,t*r,i*r,o)},D={SmoothFactor:.01,AttractionForce:1.5,SeperationForce:1.2,CohesionForce:1.1,AlignmentForce:1.4,Gravity:new d.Vector3(0,-.3,0)},V=function(){function e(){Object(r.a)(this,e),this.position=new d.Vector3(20*Math.random(),20*Math.random(),20*Math.random()),this.velocity=new d.Vector3(0,0,0),this.acceleration=new d.Vector3(0,0,0),this.rotationA=new d.Quaternion,this.rotationB=new d.Quaternion,this.fSteer=new d.Vector3(0,0,0),this.vDesired=new d.Vector3(0,0,0),this.sumVec=new d.Vector3(0,0,0),this.diffVec=new d.Vector3(0,0,0),this.maxSpeed=M(.03,.5),this.target=new d.Vector3(0,0,0),this.isAlive=!0}return Object(l.a)(e,[{key:"updateBehaviour",value:function(e){var t=this;this.seek(),e.forEach((function(e){t.diffVec.subVectors(t.position,e.position),t.seperate(t.diffVec),t.cohere(t.diffVec),t.align(e,t.diffVec)}))}},{key:"updatePosition",value:function(){this.sumVec.addVectors(this.velocity,this.acceleration),this.velocity=this.velocity.lerp(this.sumVec,D.SmoothFactor),this.velocity.clampLength(-9999,this.maxSpeed),this.position.add(this.velocity),this.acceleration.multiplyScalar(0)}},{key:"applyForce",value:function(){this.acceleration.add(this.fSteer)}},{key:"seek",value:function(){this.vDesired.subVectors(this.target,this.position),this.vDesired.normalize(),this.vDesired.multiplyScalar(D.AttractionForce),this.fSteer.add(this.vDesired)}},{key:"seperate",value:function(e){this.vDesired.copy(e),this.vDesired.normalize(),this.vDesired.multiplyScalar(D.SeperationForce),this.fSteer.add(this.vDesired)}},{key:"cohere",value:function(e){this.vDesired.copy(e),this.vDesired.multiplyScalar(-1),this.vDesired.normalize(),this.vDesired.multiplyScalar(D.CohesionForce),this.fSteer.add(this.vDesired)}},{key:"align",value:function(e,t){this.vDesired.copy(e.velocity),this.vDesired.divideScalar(t.lengthSq()),this.vDesired.multiplyScalar(D.AlignmentForce),this.fSteer.add(this.vDesired)}},{key:"setTarget",value:function(e){this.target.copy(e)}}]),e}(),z=i(78),L=i.n(z),N=new T.a,B=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this)).loadPigeon(e),n}return Object(l.a)(i,[{key:"loadPigeon",value:function(e){var t=this;N.load(L.a,(function(i){t.pigeon=i.scene,t.pigeon.name="pChild",t.parent=new d.Group,t.parent.add(t.pigeon),t.parent.frustumCulled=!1,t.parent.castShadow=!0,t.parent.receiveShadow=!0,t.parent.name="pigeon",t.agentPosition=t.parent.position,t.agentRotation=t.parent.rotation,t.agentScale=t.parent.scale,t.agentAnimations=i.animations,t.agentScale.set(.5,.5,.5),t.animationMixer=new d.AnimationMixer(t.parent);var n=t.animationMixer.clipAction(t.agentAnimations[0]);t.randSeed=M(.3,.8),n.play(),e.add(t.parent)}),void 0,(function(e){console.error(e)}))}},{key:"update",value:function(e,t){if(this.animationMixer){if(this.fSteer.set(0,0,0),this.isAlive&&this.updateBehaviour(t),this.fSteer.add(D.Gravity),this.applyForce(),this.isAlive&&this.animationMixer.update(e*this.acceleration.lengthSq()*.15),!this.isAlive&&this.position.y<0)return;this.updatePosition(),this.syncPosition(),this.syncRotation()}}},{key:"syncPosition",value:function(){this.parent.position.copy(this.position)}},{key:"syncRotation",value:function(){var e,t,i;i=this.velocity,e=Math.atan2(i.x,i.z),t=function(e){return Math.acos(e.y/e.length())}(this.velocity),I(0,1,0,e,this.rotationA),I(0,0,1,t-Math.PI/2,this.rotationB),this.rotationA.multiply(this.rotationB),this.parent.setRotationFromQuaternion(this.rotationA)}}]),i}(V),G=function(){function e(t){Object(r.a)(this,e);var i=new d.SphereGeometry(.2,15,15),n=new d.MeshLambertMaterial({color:new d.Color(1,0,0),wireframe:!1});this.mesh=new d.Mesh(i,n),t.add(this.mesh)}return Object(l.a)(e,[{key:"getVector",value:function(){return this.mesh.position}},{key:"setVector",value:function(e){this.mesh.position.copy(e)}},{key:"setVisibility",value:function(e){this.mesh.visible=e}}]),e}(),_={ShowTarget:!0},U=function(){function e(){Object(r.a)(this,e),this.octreeManager=new A,this.patternManager=new F,this.pigeons=[],this.clock=new d.Clock}return Object(l.a)(e,[{key:"setup",value:function(e,t){console.log("Pigeon Manager Pattern: "+t),this.spawnPigeons(e),this.target=new G(e),this.patternManager.setTargetPattern(t)}},{key:"update",value:function(){var e=this;if(this.pigeons.length>0){var t=this.patternManager.update();if(t){this.target.setVector(t),this.target.setVisibility(_.ShowTarget),this.octreeManager.update(t,this.pigeons);var i=[],n=this.clock.getDelta();this.pigeons.forEach((function(a){a.setTarget(t),i=e.octreeManager.getNeighbours(a.position),a.update(n,i)}))}this.recoverFromShock()}}},{key:"setNewPatternType",value:function(e){this.patternManager.setTargetPattern(e)}},{key:"spawnPigeons",value:function(e){for(var t=0;t<500;t++){var i=new B(e);this.pigeons.push(i)}}},{key:"shootPigeon",value:function(){var e=d.MathUtils.randInt(0,this.pigeons.length-1);this.pigeons[e].isAlive=!1,D.SeperationForce*=3,D.AttractionForce*=.1}},{key:"recoverFromShock",value:function(){D.SeperationForce*=.999,D.SeperationForce=d.MathUtils.clamp(D.SeperationForce,1.2,2),D.AttractionForce*=1.001,D.AttractionForce=d.MathUtils.clamp(D.AttractionForce,.5,2)}}]),e}(),W=i(79),H=i(80),J=i(42),X=i.n(J),Z=i(81),K=i.n(Z),q=new(function(){function e(){Object(r.a)(this,e),this.siteURL="https://befantastic-martha.herokuapp.com/app",this.socket=K()(this.siteURL,{reconnection:!0,reconnectionDelay:500,reconnectionAttempts:1/0}),this.socket.once("connect",this.subscribe.bind(this)),this.handlePresetsCbk=""}return Object(l.a)(e,[{key:"subscribe",value:function(){console.log("Connected"),this.socket.on("time",this.logTime.bind(this)),this.socket.on("receivePresets",this.handlePresets.bind(this))}},{key:"handlePresets",value:function(e){this.handlePresetsCbk(e)}},{key:"saveGuiPreset",value:function(e,t){var i={name:e,data:t};this.socket.emit("savePreset",i)}},{key:"readAllPresets",value:function(e){this.socket.emit("getPresets"),this.handlePresetsCbk=e}},{key:"deletePreset",value:function(e){this.socket.emit("deletePreset",e)}},{key:"disconnect",value:function(){console.log("Socket Server Disconnected.")}},{key:"logTime",value:function(e){}}]),e}()),Q={Preset:"Global",Presets:""},Y=function(){function e(t){Object(r.a)(this,e),this.gui=new W.Pane({title:"Pigeon GUI",container:t,expanded:!1}),this.gui.registerPlugin(H),this.gui.addInput(Q,"Preset"),this.presetOptions=[],this.buildPresets(),this.fpsGraph=this.gui.addBlade({view:"fpsgraph",label:"FPS",lineCount:2});var i=this.gui.addFolder({title:"Orbit Controls",expanded:!0});i.addInput(v,"EnableControls",{label:"Enable Controls"}),i.addInput(v,"EnablePan",{label:"Enable Panning"}),i.addInput(v,"AutoRotate",{label:"Enable AutoRotate"}),i.addInput(v,"RotateSpeed",{label:"Rotation Speed",min:.1,max:1}),i.addInput(v,"EnableKeys",{label:"Enable Keys"}),this.gui.addFolder({title:"Target Params",expanded:!0}).addInput(_,"ShowTarget",{label:"Show Target"}),this.patternFolder=this.gui.addFolder({title:"Pattern Params",expanded:!0}),this.currentPatternType=P,this.buildPatternTypeOptions(),this.buildPatterns(),this.ellipseParamsFolder=this.patternFolder.addFolder({title:"Ellipse Pattern Params",expanded:!0}),this.ellipseParamsFolder.addInput(k,"Origin"),this.ellipseParamsFolder.addInput(k,"Radii",{x:{min:0,max:50},y:{min:0,max:50}}),this.ellipseParamsFolder.addInput(k,"Amplitude",{min:0,max:10}),this.ellipseParamsFolder.addInput(k,"Speed",{min:0,max:2}),this.ellipseParamsFolder.addInput(k,"Direction"),this.roseCurveParamsFolder=this.patternFolder.addFolder({title:"Rose-Curve Pattern Params",expanded:!0}),this.roseCurveParamsFolder.addInput(w,"Origin"),this.roseCurveParamsFolder.addInput(w,"Radius",{min:1,max:50}),this.roseCurveParamsFolder.addInput(w,"Phase",{min:0,max:10}),this.roseCurveParamsFolder.addInput(w,"NumPetals",{min:1,max:10,step:1}),this.roseCurveParamsFolder.addInput(w,"Amplitude",{min:0,max:10}),this.roseCurveParamsFolder.addInput(w,"Sinusoidal"),this.roseCurveParamsFolder.addInput(w,"Direction"),this.roseCurveParamsFolder.addInput(w,"Speed",{min:0,max:2}),this.showPatternParams();var n=this.gui.addFolder({title:"Agent Params",expanded:!0});n.addInput(D,"AttractionForce",{label:"AttractionForce",min:.5,max:2,step:.05}),n.addInput(D,"SmoothFactor",{label:"Smooth Factor",min:.005,max:.1,step:.005}),n.addInput(D,"SeperationForce",{label:"Seperation Force",min:.5,max:2,step:.1}),n.addInput(D,"CohesionForce",{label:"Cohesion Force",min:.1,max:2,step:.1}),n.addInput(D,"AlignmentForce",{label:"Alignment Force",min:0,max:2,step:.1}),this.gui.addButton({title:"Save Preset"}).on("click",this.onSavePreset.bind(this)),this.gui.addButton({title:"Delete Preset"}).on("click",this.onDeletePreset.bind(this)),this.gui.addButton({title:"Show Panel"}).on("click",this.onShowPanel.bind(this)),this.gui.addButton({title:"Spawn Agents"}).on("click",this.onSpawnAgents.bind(this)),this.gui.addButton({title:"Shoot Pigeon"}).on("click",this.onShootPigeon.bind(this)),q.readAllPresets(this.onReceivePresets.bind(this))}return Object(l.a)(e,[{key:"onPresetSelected",value:function(e){var t=JSON.parse(e.value);this.gui.importPreset(t)}},{key:"onReceivePresets",value:function(e){var t=this;if(console.log("All the presets received:"),console.log(e),e.length>0){e.forEach((function(e){var i=e.name,n=e.config;t.presetOptions.push({text:i,value:JSON.stringify(n)})}));var i=e[0].config;this.gui.importPreset(i),this.disposePresets(),this.buildPresets(),this.currentPatternType=i.PatternType,this.buildPatternTypeOptions(),this.disposePatterns(),this.buildPatterns(),this.showPatternParams()}}},{key:"onSavePreset",value:function(){var e=Q.Preset;if(e.length>0){this.disposePresets();var t=this.gui.exportPreset(),i=X.a.find(this.presetOptions,(function(t){return t.text===e}));i?(console.log("Preset Exists. Updating database and local copy of the preset."),i.value=JSON.stringify(t),this.presetOptions=X.a.sortBy(this.presetOptions,(function(t){return t.text===e?0:1}))):(console.log("Preset doesnt exist. New entry in the database."),this.presetOptions.unshift({text:e,value:JSON.stringify(t)})),q.saveGuiPreset(e,t),this.buildPresets()}else alert("Not an empty entry please.")}},{key:"onDeletePreset",value:function(){if(this.presetOptions.length>0){var e=Q.Preset;if(console.log("Deleting preset: "+e),X.a.remove(this.presetOptions,(function(t){return t.text===e})),q.deletePreset(e),this.disposePresets(),this.buildPresets(),this.presetOptions.length>0){var t=this.presetOptions[0].value;this.gui.importPreset(JSON.parse(t))}}}},{key:"disposePresets",value:function(){Q.Presets="",this.presetList.dispose()}},{key:"buildPresets",value:function(){this.presetList=this.gui.addInput(Q,"Presets",{index:1,options:this.presetOptions}),this.presetList.on("change",this.onPresetSelected.bind(this))}},{key:"buildPatternTypeOptions",value:function(){this.currentPatternType===P?this.patternTypeOptions={Ellipse:P,RoseCurve:S}:this.currentPatternType===S?this.patternTypeOptions={RoseCurve:S,Ellipse:P}:this.patternTypeOptions={Ellipse:P,RoseCurve:S}}},{key:"disposePatterns",value:function(){this.patternList.dispose()}},{key:"buildPatterns",value:function(){this.patternList=this.patternFolder.addInput(b,"PatternType",{label:"Pattern Type",index:0,options:this.patternTypeOptions}),this.patternList.on("change",this.onPatternSelected.bind(this))}},{key:"onPatternSelected",value:function(e){this.currentPatternType=e.value,this.showPatternParams(),this.patternChangeUpdate(this.currentPatternType)}},{key:"showPatternParams",value:function(){this.currentPatternType===P?(this.ellipseParamsFolder.hidden=!1,this.roseCurveParamsFolder.hidden=!0):this.currentPatternType===S&&(this.ellipseParamsFolder.hidden=!0,this.roseCurveParamsFolder.hidden=!1)}},{key:"subscribeForPatternChange",value:function(e){this.patternChangeUpdate=e}},{key:"subscribeShowPanel",value:function(e){this.onShowPanelCallback=e}},{key:"onShowPanel",value:function(){this.onShowPanelCallback()}},{key:"subscribeSpawnAgents",value:function(e){this.onSpawnAgentCallback=e}},{key:"onSpawnAgents",value:function(){this.onSpawnAgentCallback()}},{key:"subscribeShootPigeon",value:function(e){this.onShootPigeonCallback=e}},{key:"onShootPigeon",value:function(){this.onShootPigeonCallback()}}]),e}(),$={container:{position:"absolute",top:"120px",left:"35px"}},ee=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).state={},n.guiRef=a.a.createRef(),n}return Object(l.a)(i,[{key:"render",value:function(){return a.a.createElement("div",{ref:this.guiRef,style:$.container})}},{key:"componentDidMount",value:function(){var e=this.guiRef.current;this.gui=new Y(e),this.gui.subscribeShowPanel(this.onShowPanel.bind(this)),this.gui.subscribeSpawnAgents(this.onSpawnAgents.bind(this)),this.gui.subscribeShootPigeon(this.onShootPigeon.bind(this))}},{key:"getFpsGraph",value:function(){return this.gui.fpsGraph}},{key:"onShowPanel",value:function(){this.props.onShowInfoPanel()}},{key:"onSpawnAgents",value:function(){this.props.onSpawnAgents()}},{key:"onShootPigeon",value:function(){this.props.onShootPigeon()}},{key:"subscribeForPatternChange",value:function(e){this.gui.subscribeForPatternChange(e)}},{key:"getCurPatternType",value:function(){return this.gui.currentPatternType}}]),i}(a.a.Component),te=Object(u.a)(ee),ie="#ffffff",ne="#E7EFE0",ae="24px",se="44px",oe="28px",re="36px",le="d-dinregular",ce="warsaw_gothic",he={container:{position:"absolute",top:"0%",width:"100vw",height:"100vh",backgroundColor:"rgb(0, 0, 0, 0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:0},hide:{visibility:"hidden"},title:{fontFamily:ce,fontSize:"52px",letterSpacing:5,opacity:1,color:ie},loading:{fontFamily:le,fontSize:ae,color:ie},button:{fontFamily:le,color:ie,fontSize:ae,borderStyle:"solid",borderWidth:"2px",padding:"8px",paddingLeft:oe,paddingRight:oe,cursor:"default"}},ue=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).state={isHidden:!1,isLoading:!1},n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.state.isHidden?[he.container,he.hide]:he.container,t=this.state.isLoading?this.getLoader():this.getTitle();return a.a.createElement("div",{style:e},t)}},{key:"getLoader",value:function(){return a.a.createElement("div",{style:he.loading},"Loading ...")}},{key:"getTitle",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:he.title},"MARTHA.I"),a.a.createElement("div",{onClick:this.onEnter.bind(this),style:he.button},"ENTER"))}},{key:"onEnter",value:function(){this.setState({isLoading:!0}),this.props.onEnterWorld(),setTimeout(this.hasFinishedLoading.bind(this),0)}},{key:"hasFinishedLoading",value:function(){this.setState({isHidden:!0}),this.props.onLoadComplete()}}]),i}(a.a.Component),de=Object(u.a)(ue),pe={floatIn:u.a.keyframes({"0%":{top:"-100px"},"50%":{top:"-50px"},"100%":{top:"0px"}}),floatOut:u.a.keyframes({"0%":{top:"0"},"50%":{top:"-50px"},"100%":{top:"-100px"}})},fe={container:{position:"absolute",width:"100%",top:"-100px"},content:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:re,alignSelf:"center"},animateIn:{animation:"x 2s linear 1 forwards",animationName:pe.floatIn},animateOut:{animation:"x 2s linear 1 forwards",animationName:pe.floatOut},title:{fontFamily:ce,fontSize:se,letterSpacing:5,opacity:1,color:ie,cursor:"default"},about:{fontFamily:le,color:ie,fontSize:se,cursor:"default"}},ve=0,me=1,ge=2,ye=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).state={aniState:ve},n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.state.aniState===me?[fe.container,fe.animateIn]:this.state.aniState===ge?[fe.container,fe.animateOut]:fe.container;return a.a.createElement("div",{style:e},a.a.createElement("div",{style:fe.content},a.a.createElement("div",{style:fe.title},"MARTHA.I"),a.a.createElement("div",{onClick:this.handleAboutClick.bind(this),style:fe.title},"ABOUT")))}},{key:"updateTitle",value:function(){this.state.aniState===ve?this.setState({aniState:me}):this.state.aniState===me?this.setState({aniState:ge}):this.state.aniState===ge&&this.setState({aniState:me})}},{key:"handleAboutClick",value:function(){this.props.onClickAbout()}}]),i}(a.a.Component),be=Object(u.a)(ye),Pe={slideIn:u.a.keyframes({"0%":{left:"-500px"},"50%":{left:"-250px"},"100%":{left:"0px"}}),slideOut:u.a.keyframes({"0%":{left:"0px"},"50%":{left:"-250px"},"100%":{left:"-500px"}})},Se={container:{position:"absolute",top:"0%",width:"500px",height:"100%",left:"-500px",backgroundColor:ne},content:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:re,alignSelf:"center"},animateIn:{animation:"x 2s linear 1 forwards",animationName:Pe.slideIn},animateOut:{animation:"x 2s linear 1 forwards",animationName:Pe.slideOut},title:{fontFamily:ce,fontSize:se,letterSpacing:5,opacity:1,color:ie,cursor:"default"},about:{fontFamily:le,color:ie,fontSize:se,cursor:"default"}},ke=0,we=1,Oe=2,xe=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).state={aniState:ke},n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.state.aniState===we?[Se.container,Se.animateIn]:this.state.aniState===Oe?[Se.container,Se.animateOut]:Se.container;return a.a.createElement("div",{style:e},a.a.createElement("div",{style:Se.content}))}},{key:"updatePanel",value:function(){this.state.aniState===ke?this.setState({aniState:we}):this.state.aniState===we?this.setState({aniState:Oe}):this.state.aniState===Oe&&this.setState({aniState:we})}}]),i}(a.a.Component),Ce=Object(u.a)(xe),Fe=i(110),Re=i.n(Fe),je={container:{width:"100vw",height:"100vh",overflow:"hidden"},video:{display:"none"}},Ee=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).state={},n.worldRef=a.a.createRef(),n.guiRef=a.a.createRef(),n.titleRef=a.a.createRef(),n.panelRef=a.a.createRef(),n.videoRef=a.a.createRef(),n.scene=new d.Scene,n.cameraControl=new m,n.lightingManager=new g(n.scene),n.pigeonManager=new U,n.rendererManager=new y,n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var e=this.rendererManager.getDomElement();this.worldRef.current.appendChild(e),this.fpsGraph=this.guiRef.current.getFpsGraph(),this.guiRef.current.subscribeForPatternChange(this.onPatternChanged.bind(this)),this.initializeRender(),this.addSkybox()}},{key:"render",value:function(){return a.a.createElement("div",{style:je.container,ref:this.worldRef},a.a.createElement(te,{ref:this.guiRef,onShowInfoPanel:this.onShowInfoPanel.bind(this),onSpawnAgents:this.onSpawnAgents.bind(this),onShootPigeon:this.onShootPigeon.bind(this)}),a.a.createElement(de,{onEnterWorld:this.onEnterWorld.bind(this),onLoadComplete:this.onLoadComplete.bind(this)}),a.a.createElement(be,{onClickAbout:this.onClickAbout.bind(this),ref:this.titleRef}),a.a.createElement(Ce,{ref:this.panelRef}),a.a.createElement("video",{id:"video",ref:this.videoRef,playsInline:!0,loop:!0,src:Re.a,style:je.video}))}},{key:"initializeRender",value:function(){this.fpsGraph.begin(),this.pigeonManager.update(),this.cameraControl.update(),this.rendererManager.render(this.scene,this.cameraControl.getCamera()),this.fpsGraph.end(),requestAnimationFrame(this.initializeRender.bind(this))}},{key:"addSkybox",value:function(){var e=new d.VideoTexture(this.videoRef.current),t=new d.BoxGeometry(70,70,70),i=new d.MeshBasicMaterial({side:d.BackSide,map:e}),n=new d.Mesh(t,i);this.scene.add(n)}},{key:"addSkySphere",value:function(){var e=new d.VideoTexture(this.videoRef.current),t=new d.SphereGeometry(100,100,100),i=new d.MeshBasicMaterial({side:d.BackSide,map:e}),n=new d.Mesh(t,i);this.scene.add(n)}},{key:"onEnterWorld",value:function(){this.videoRef.current.play();var e=this.guiRef.current.getCurPatternType();this.pigeonManager.setup(this.scene,e)}},{key:"onLoadComplete",value:function(){this.titleRef.current.updateTitle()}},{key:"onShowInfoPanel",value:function(){this.panelRef.current.updatePanel(),this.titleRef.current.updateTitle()}},{key:"onPatternChanged",value:function(e){this.pigeonManager.setNewPatternType(e)}},{key:"onSpawnAgents",value:function(){this.pigeonManager.spawnPigeons(this.scene)}},{key:"onShootPigeon",value:function(){this.pigeonManager.shootPigeon()}},{key:"onClickAbout",value:function(){this.props.onScroll()}}]),i}(a.a.Component),Ae=Object(u.a)(Ee),Te={container:{position:"relative",width:"100vw",height:"1000px"},colorA:{backgroundColor:"black"},colorB:{backgroundColor:"green"}},Me=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).state={},n}return Object(l.a)(i,[{key:"render",value:function(){var e=0===this.props.panelNum?[Te.container,Te.colorA]:[Te.container,Te.colorB];return a.a.createElement("div",{style:e})}},{key:"scroll",value:function(){var e=this;setTimeout((function(){e.panelRef.current.scrollIntoView({behavior:"smooth",block:"start"})}),50)}}]),i}(a.a.Component),Ie=Object(u.a)(Me),De={container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"}},Ve=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).state={},n.panelRef=a.a.createRef(),n}return Object(l.a)(i,[{key:"render",value:function(){return a.a.createElement("div",{ref:this.panelRef,style:De.container},a.a.createElement(Ie,{panelNum:0}),a.a.createElement(Ie,{panelNum:1}),a.a.createElement(Ie,{panelNum:0}),a.a.createElement(Ie,{panelNum:1}))}},{key:"scroll",value:function(){var e=this;setTimeout((function(){e.panelRef.current.scrollIntoView({behavior:"smooth",block:"start"})}),50)}}]),i}(a.a.Component),ze=Object(u.a)(Ve),Le={container:{display:"flex",flexDirection:"column"},panelStyles:{position:"relative",display:"none"},panelVisible:{display:"block"}},Ne=function(e){Object(c.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).state={showPanel:!1},n.worldRef=a.a.createRef(),n.contentPanelRef=a.a.createRef(),n}return Object(l.a)(i,[{key:"render",value:function(){var e=this.state.showPanel?[Le.panelStyles,Le.panelVisible]:[Le.panelStyles];return a.a.createElement("div",{style:Le.container},a.a.createElement(Ae,{onScroll:this.onScrollDown.bind(this),ref:this.worldRef}),a.a.createElement("div",{style:e},a.a.createElement(ze,{ref:this.contentPanelRef})))}},{key:"onScrollDown",value:function(){this.setState({showPanel:!0}),this.contentPanelRef.current.scroll()}}]),i}(a.a.Component),Be=Object(u.a)(Ne),Ge=i(52);o.a.render(a.a.createElement(Ge.a,null,a.a.createElement(Be,null)),document.getElementById("root"))},78:function(e,t,i){e.exports=i.p+"static/media/New_Bird.a5ca1e59.glb"}},[[112,1,2]]]);
//# sourceMappingURL=main.1cecd61d.chunk.js.map