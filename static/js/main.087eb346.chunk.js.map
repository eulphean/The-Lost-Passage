{"version":3,"sources":["assets/pigeon.svg","components/Managers/CameraControl.js","components/Managers/LightingManager.js","components/Managers/RendererManager.js","components/Managers/PatternManager.js","components/Environment/Target.js","models/pigeon_back.glb","components/Environment/GPUPigeon.js","components/Managers/GPURenderer.js","shaders/fragmentShaderVelocity.glsl","shaders/fragmentShaderPosition.glsl","components/Managers/PigeonManager.js","components/Managers/RaycastManager.js","components/Utilities/Websocket.js","components/Managers/SkyboxManager.js","components/Utilities/ServerGui.js","components/Interface/GuiPanel.js","assets/videos/front.mp4","assets/videos/back.mp4","assets/videos/top.mp4","assets/videos/bottom.mp4","assets/videos/left.mp4","assets/videos/right.mp4","components/Interface/World.js","components/Utilities/CommonStyles.js","assets/pigeon.mp4","components/Interface/PassengerPigeons.js","assets/gaugan.mp4","components/Interface/ClimateStatement.js","components/Interface/Footer.js","assets/beFantastic.jpg","assets/artahack.jpg","assets/supernormal.jpg","assets/dara.jpg","assets/headshots/amay.jpg","assets/headshots/shao.jpg","assets/headshots/yu.jpg","assets/headshots/ong2.jpg","components/Interface/About.js","components/Interface/SectionPanel.js","components/Interface/ContentPanel.js","components/Interface/Navigation.js","components/Interface/EnterPanel.js","components/App.js","index.js"],"names":["_defs","_g","OrbitParams","oc","THREE","EnableControls","EnablePan","AutoRotate","RotateSpeed","EnableKeys","CameraControl","this","camera","window","innerWidth","innerHeight","position","set","lookAt","frustumCulled","animationStopped","scene","mouse","zoom","x","y","z","controls","update","enablePan","autoRotate","autoRotateSpeed","enabled","enableKeys","LightingManager","hemiLight","color","setHSL","groundColor","add","dirLight","multiplyScalar","RendererParams","DrawCalls","RendererManager","renderer","antialias","setSize","setPixelRatio","devicePixelRatio","outputEncoding","animate","setAnimationLoop","domElement","render","width","height","info","calls","PatternParams","PatternType","PatternTypes","EllipseParams","Origin","Radii","Amplitude","Speed","Direction","RoseCurveParams","Radius","Phase","NumPetals","Sinusoidal","Pattern","patternObj","theta_rad","amp","isClockwise","dir","originPos","pos","moveFactor","move","targetPos","targetConst","maxTheta","r","Math","cos","sin","EllipsePattern","radX","radx","radZ","radz","PI","updateGuiParams","xPos","cartesianX","zPos","cartesianZ","yPos","cartesianY","updateTheta","degToRad","RosePattern","rad","phase","ph","numPetals","numP","isSin","PatternManager","curPatternType","console","log","amplitude","ellipseConstructor","curPattern","radius","isSinusoidal","roseConstructor","getTargetPos","TargetParams","ShowTarget","MaxTargetRadius","CurrentTargetRadius","Target","geometry","material","emissive","wireframe","transparent","opacity","mesh","targetPosition","now","setVector","setVisibility","scale","v","copy","visible","WIDTH","BIRDS","GPUPigeon","onFinishedCallback","durationAnimation","vertexPerBird","indicesPerBird","textureAnimation","birdGeometry","loadPigeon","GLTFLoader","loadAsync","model","then","gltf","animations","round","duration","birdGeo","children","morphAttributes","getAttribute","count","index","array","length","tHeight","nextPowerOf2","tWidth","tData","Float32Array","i","j","offset","curMorph","floor","nextMorph","lerpAmount","d0","d1","undefined","lerp","vertices","reference","seeds","indices","totalVertices","birdColArray","newBirdColArray","skip","bIndex","push","random","bird","setAttribute","Uint16Array","setIndex","n","pow","ceil","value1","value2","amount","max","min","setDrawRange","GPURenderer","gpuCompute","GPUComputationRenderer","dtPosition","createTexture","dtVelocity","fillPositionTexture","fillVelocityTexture","velocityVariable","addVariable","positionVariable","setVariableDependencies","positionUniforms","uniforms","velocityUniforms","value","PigeonParams","Attraction","Seperation","Alignment","Cohesion","MaxSpeed","SpeedLerp","wrapS","wrapT","error","init","pause","shoot","delta","boundingBox","compute","texture","theArray","image","data","k","kl","getCurrentRenderTarget","IsPigeonManagerReady","Freedom","Size","Count","PigeonManager","patternManager","target","clock","pigeonShader","gpuRenderer","setTargetPattern","pigeon","initPigeons","bind","getDelta","oldTime","getPositionRenderTarget","getVelocityRenderTarget","pausePigeons","geoMaterial","vertexColors","flatShading","side","roughness","metalness","onBeforeCompile","shader","texturePosition","textureVelocity","time","size","token","insert","vertexShader","replace","birdMesh","rotation","castShadow","receiveShadow","shootPigeons","newPatternType","RaycastManager","shootPigeonCallback","raycaster","shootPigeon","isIntersecting","addEventListener","onMouseClick","event","clientX","clientY","targetMesh","shouldAnimate","setFromCamera","objects","intersectObject","elapsedTime","siteURL","herokuURL","socket","io","reconnection","reconnectionDelay","reconnectionAttempts","Infinity","once","subscribe","handlePresetsCbk","on","logTime","handlePresets","presetName","json","payload","emit","readPresetsCallback","SkyboxParams","ShowSkybox","ShowBoundingBox","BoundingBoxScalar","IsSkyboxReady","SkyboxManager","frontVideoRef","backVideoRef","leftVideoRef","rightVideoRef","topVideoRef","bottomVideoRef","materialArray","current","map","t","cubeMesh","createBoundingBox","lastBoundingBoxScalar","computeBoundingBox","expandByScalar","boundingBoxMesh","updateBoundingBox","IsGUIReady","GuiParams","Preset","Presets","ServerGui","containerComponent","gui","Pane","title","container","expanded","registerPlugin","EssentialsPlugin","addInput","presetOptions","buildPresets","fpsGraph","addBlade","view","label","lineCount","addMonitor","f0","addFolder","f1","patternFolder","currentPatternType","buildPatternTypeOptions","buildPatterns","ellipseParamsFolder","roseCurveParamsFolder","step","showPatternParams","f2","f3","onBoundedBoxScalarChange","addButton","onSavePreset","onDeletePreset","Websocket","readAllPresets","onReceivePresets","guiJson","JSON","parse","importPreset","forEach","d","name","config","text","stringify","defaultPresetJSON","disposePresets","disposePatterns","exportPreset","preset","_","find","p","sortBy","unshift","saveGuiPreset","alert","remove","deletePreset","presetJson","presetList","dispose","options","onPresetSelected","patternTypeOptions","Ellipse","RoseCurve","patternList","onPatternSelected","ev","patternChangeUpdate","hidden","callback","styles","top","right","GuiPanel","props","state","guiRef","React","createRef","ref","style","subscribeForPatternChange","Component","Radium","IsWorldReady","overflow","crosshair","cursor","video","display","World","worldRef","navRef","panelRef","background","cameraControl","lightingManager","skyboxManager","raycastManager","onShootPigeon","rendererManager","pigeonManager","videoLoadProgress","onWindowResize","document","updateAnimationStatus","onMouseMove","onMouseWheel","rendererDomElement","getDomElement","appendChild","getFpsGraph","onPatternChanged","createSkybox","renderThree","checkIfReady","id","playsInline","loop","src","front","onCanPlay","onVideoLoaded","back","left","bottom","begin","getBoundingBox","getCamera","monitorDrawCalls","getMesh","intersect","TWEEN","end","deltaY","aspect","updateProjectionMatrix","updateSize","status","play","getCurPatternType","setupTarget","setupPigeonGPU","control","to","easing","Cubic","Out","onComplete","start","setNewPatternType","scrollIntoView","behavior","block","fontSize","padding","fontFamily","flexDirection","ppVideo","objectFit","content","alignItems","justifyContent","letterSpacing","marginTop","lineSpacing","PassengerPigeons","autoPlay","muted","pp","ClimateStatement","videoCanvas","gaugan","website","message","fontStyle","Footer","paddingTop","paddingLeft","paddingRight","paddingBottom","team","member","photo","borderRadius","backgroundColor","infoContainer","location","moreMargin","sponsors","About","kianPeng","getKianPeng","amay","getAmay","shao","getShao","yu","getYu","beFantastic","alt","artahack","supernormal","dara","href","rel","ong","SectionPanel","containerRef","panel","getPanel","PanelTitle","PIGEONS","CLIMATE","ABOUT","setTimeout","ContentPanel","pigeonPanelRef","climatePanelRef","aboutPanelRef","panelNum","panelTitle","scrollTo","_excluded","_extends","Object","assign","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgPigeon","_ref","svgRef","titleId","viewBox","xmlnsXlink","xmlns","in","type","values","xlinkHref","fill","fillRule","stroke","clipPath","transform","ForwardRef","visibility","homeTitle","titleContainer","hover","homeButton","zIndex","colorFlick","animation","animationName","keyframes","animationDirection","homeHover","svg","Navigation","isHoveringPigeons","isHoveringClimate","isHoveringAbout","isHomeButtonHovering","showHomeButton","containerStyle","pigeonStyle","climateStyle","aboutStyle","getHomeButton","onClick","onMouseEnter","onHoverPigeons","onMouseLeave","onHoverClimate","onHoverAbout","buttonStyle","onHomeButtonClick","onHomeButtonHover","hovering","setState","onClickNavTitle","onClickHomeButton","pulse","hide","textAlign","maxWidth","loadContainer","svgContainer","loadTitle","flash","bounceOut","animationDuration","animationTimingFunction","svgSimplePulse","zoomIn","animationFillMode","button","borderStyle","borderColor","borderWidth","topMessage","leftMessage","rightMessage","bottomMessage","EnterPanel","isHidden","isLoading","isHovering","isDisabled","getLoader","getTitle","messages","getMessages","Fragment","disabled","onHoverOn","onHoverOff","onEnter","onAnimationEnd","onStartAnimationEnd","onEnterWorld","hasFinishedLoading","onLoadComplete","panelStyles","panelVisible","App","showContentPanel","showNavPanel","showEnterPanel","contentPanelRef","navPanel","getNavPanel","enterPanel","getEnterPanel","contentPanel","getContentPanel","contentPanelStyles","beginWorld","enterWorld","scroll","ReactDOM","getElementById"],"mappings":"2KAAIA,EAAOC,E,oHCYAC,G,MAFWC,GAAGC,GAEA,CACrBC,gBAAgB,EAChBC,WAAW,EACXC,YAAY,EACZC,YAAa,GACbC,YAAY,IA4CDC,E,WAxCX,aAAe,oBAGXC,KAAKC,OAAS,IAAIR,oBAAwB,GAAIS,OAAOC,WAAaD,OAAOE,YAAa,IAAM,KAC5FJ,KAAKC,OAAOI,SAASC,IAAI,IAAO,IAAO,KACvCN,KAAKC,OAAOM,OAAO,IAAId,UAAc,EAAG,EAAG,IAC3CO,KAAKC,OAAOO,eAAgB,EAG5BR,KAAKS,kBAAmB,E,0CAG5B,SAAOC,EAAOC,EAAOC,GAGbZ,KAAKS,mBACLT,KAAKC,OAAOI,SAASQ,GAA2C,KAArCF,EAAME,EAAIb,KAAKC,OAAOI,SAASQ,GAC1Db,KAAKC,OAAOI,SAASS,GAA6C,MAArCH,EAAMG,EAAId,KAAKC,OAAOI,SAASS,GAC5Dd,KAAKC,OAAOI,SAASU,EAAIH,GAG7BZ,KAAKC,OAAOM,OAAOG,EAAML,Y,4BAI7B,WACIL,KAAKgB,SAASC,SACdjB,KAAKgB,SAASE,UAAY3B,EAAYI,UACtCK,KAAKgB,SAASG,WAAa5B,EAAYK,WACvCI,KAAKgB,SAASI,gBAAkB7B,EAAYM,YAC5CG,KAAKgB,SAASK,QAAU9B,EAAYG,eACpCM,KAAKgB,SAASM,WAAa/B,EAAYO,a,uBAG3C,WACI,OAAOE,KAAKC,W,KC9BLsB,EAhBX,WAAYb,GAAQ,oBAElB,IAAMc,EAAY,IAAI/B,kBAAsB,SAAU,SAAU,KAChE+B,EAAUC,MAAMC,OAAO,GAAK,EAAG,IAC/BF,EAAUG,YAAYD,OAAO,KAAO,EAAG,KACvCF,EAAUnB,SAASC,IAAI,EAAG,GAAI,GAC9BI,EAAMkB,IAAIJ,GAEV,IAAMK,EAAW,IAAIpC,mBAAuB,MAAU,IACtDoC,EAASJ,MAAMC,OAAQ,GAAK,EAAG,KAC/BG,EAASxB,SAASC,KAAO,EAAG,KAAM,GAClCuB,EAASxB,SAASyB,eAAgB,IAClCpB,EAAMkB,IAAIC,ICbLE,EAAiB,CACxBC,UAAW,GAqCAC,E,WAjCX,aAAe,oBAEXjC,KAAKkC,SAAW,IAAIzC,gBAAoB,CACpC0C,WAAW,IAGfnC,KAAKkC,SAASE,QAAQlC,OAAOC,WAAYD,OAAOE,aAChDJ,KAAKkC,SAASG,cAAcnC,OAAOoC,kBACnCtC,KAAKkC,SAASK,eAAiB9C,e,oDAGnC,SAAiB+C,GACbxC,KAAKkC,SAASO,iBAAiBD,K,2BAGnC,WACI,OAAOxC,KAAKkC,SAASQ,a,oBAGzB,SAAOhC,EAAOT,GACVD,KAAKkC,SAASS,OAAOjC,EAAOT,K,wBAGhC,SAAW2C,EAAOC,GACd7C,KAAKkC,SAASE,QAAQQ,EAAOC,K,8BAGjC,WACId,EAAeC,UAAYhC,KAAKkC,SAASY,KAAKH,OAAOI,U,KC/BlDC,EAAgB,CACvBC,YAAa,IAENC,EACE,EADFA,EAEI,EAIJC,EAAgB,CACvBC,OAAQ,CAACvC,EAAG,EAAGC,EAAG,EAAGC,EAAG,GACxBsC,MAAO,CAACxC,EAAG,GAAIC,EAAG,IAClBwC,UAAW,EACXC,MAAO,GACPC,WAAW,GAIJC,EAAkB,CACzBL,OAAQ,CAACvC,EAAG,EAAGC,EAAG,EAAGC,EAAG,GACxB2C,OAAQ,EACRC,MAAO,GACPC,UAAW,EACXN,UAAW,EACXO,YAAY,EACZL,WAAW,EACXD,MAAO,IAGLO,E,WACF,WAAYC,GAAa,oBACrB/D,KAAKgE,UAAY,EACjBhE,KAAKiE,IAAMF,EAAWE,IACtBjE,KAAKkE,YAAcH,EAAWI,IAC9BnE,KAAKoE,UAAYL,EAAWM,IAC5BrE,KAAKsE,WAAaP,EAAWQ,KAC7BvE,KAAKwE,UAAY,IAAI/E,UAAc,EAAG,EAAG,GACzCO,KAAKyE,YAAc,IAAIhF,UAAc,EAAG,EAAG,G,+CAG/C,SAAYiF,GAER1E,KAAKgE,UAAYhE,KAAKkE,YAClBlE,KAAKgE,UAAYhE,KAAKsE,WACtBtE,KAAKgE,UAAYhE,KAAKsE,WAG1BtE,KAAKgE,UAAYhE,KAAKgE,WAAaU,EAAW,EAAI1E,KAAKgE,Y,wBAG3D,SAAWW,GACP,OAAO3E,KAAKoE,UAAUvD,EAAI8D,EAAIC,KAAKC,IAAI7E,KAAKgE,a,wBAGhD,SAAWW,GACP,OAAO3E,KAAKoE,UAAUrD,EAAI4D,EAAIC,KAAKE,IAAI9E,KAAKgE,a,wBAGhD,SAAWW,GACP,OAAO3E,KAAKoE,UAAUtD,EAAId,KAAKiE,IAAMW,KAAKE,IAAI9E,KAAKgE,a,0BAGvD,WAEI,OAAOhE,KAAKwE,c,KAePO,EAAb,kDACI,WAAYhB,GAAa,IAAD,8BACpB,cAAMA,IACDiB,KAAOjB,EAAWkB,KACvB,EAAKC,KAAOnB,EAAWoB,KACvB,EAAKT,SAAW,EAAEE,KAAKQ,GAJH,EAD5B,0CAQI,WACIpF,KAAKqF,kBAEL,IAAIC,EAAOtF,KAAKuF,WAAWvF,KAAKgF,MAC5BQ,EAAOxF,KAAKyF,WAAWzF,KAAKkF,MAC5BQ,EAAO1F,KAAK2F,aAChB3F,KAAKwE,UAAUlE,IAAIgF,EAAMI,EAAMF,GAE/BxF,KAAK4F,YAAY5F,KAAK0E,YAhB9B,6BAmBI,WACI1E,KAAKoE,UAAU9D,IAAI6C,EAAcC,OAAOvC,EAAGsC,EAAcC,OAAOtC,EAAGqC,EAAcC,OAAOrC,GACxFf,KAAKgF,KAAO7B,EAAcE,MAAMxC,EAChCb,KAAKkF,KAAO/B,EAAcE,MAAMvC,EAChCd,KAAKiE,IAAMd,EAAcG,UACzBtD,KAAKsE,WAAa7E,OAAWoG,SAAS1C,EAAcI,OACpDvD,KAAKkE,YAAcf,EAAcK,cAzBzC,GAAoCM,GA+CvBgC,EAAb,kDACI,WAAY/B,GAAa,IAAD,8BACpB,cAAMA,IACDgC,IAAMhC,EAAWgC,IACtB,EAAKC,MAAQjC,EAAWkC,GACxB,EAAKC,UAAYnC,EAAWoC,KAC5B,EAAKC,MAAQrC,EAAWqC,MACxB,EAAK1B,SAAWE,KAAKQ,GAND,EAD5B,0CAUI,WAGI,IAAIE,EAAMI,EAAMF,EAFhBxF,KAAKqF,kBAGL,IAAIV,EAAI3E,KAAKoG,MAAQpG,KAAK+F,IAAMnB,KAAKE,IAAI9E,KAAKgG,MAAQhG,KAAKkG,UAAYlG,KAAKgE,WACxEhE,KAAK+F,IAAMnB,KAAKC,IAAI7E,KAAKgG,MAAQhG,KAAKkG,UAAYlG,KAAKgE,WAE3DsB,EAAOtF,KAAKuF,WAAWZ,GACvBa,EAAOxF,KAAKyF,WAAWd,GACvBe,EAAO1F,KAAK2F,aAEZ3F,KAAKwE,UAAUlE,IAAIgF,EAAMI,EAAMF,GAE/BxF,KAAK4F,YAAY5F,KAAK0E,YAvB9B,6BA0BI,WACI1E,KAAKoE,UAAU9D,IAAImD,EAAgBL,OAAOvC,EAAG4C,EAAgBL,OAAOtC,EAAG2C,EAAgBL,OAAOrC,GAC9Ff,KAAK+F,IAAMtC,EAAgBC,OAC3B1D,KAAKgG,MAAQvC,EAAgBE,MAC7B3D,KAAKiE,IAAMR,EAAgBH,UAC3BtD,KAAKkG,UAAYzC,EAAgBG,UACjC5D,KAAKoG,MAAQ3C,EAAgBI,WAC7B7D,KAAKkE,YAAcT,EAAgBD,UACnCxD,KAAKsE,WAAa7E,OAAWoG,SAASpC,EAAgBF,WAlC9D,GAAiCO,GAsCpBuC,EAAb,gGACI,SAAiBC,GACb,GAAIA,IAAmBpD,EAAsB,CACzCqD,QAAQC,IAAI,4BACZ,IAMIzC,EA1GkB,SAACK,EAAWY,EAAME,EAAMuB,EAAWvC,EAAaI,GAC9E,MAAO,CACHD,IAAKD,EACLa,KAAMD,EACNG,KAAMD,EACNjB,IAAKwC,EACLtC,IAAKD,EACLK,KAAMD,GAmGeoC,CANP,IAAIjH,UAAc,EAAG,EAAG,GACvB,GACA,GACD,GACA,EACOA,OAAWoG,SAAS,KAErC7F,KAAK2G,WAAa,IAAI5B,EAAehB,QAClC,GAAIuC,IAAmBpD,EAAwB,CAElDqD,QAAQC,IAAI,+BACZ,IAQIzC,EA/Ee,SAACK,EAAWwC,EAAQZ,EAAOE,EAAWO,EAAWI,EAAc3C,EAAaI,GACvG,MAAO,CACHD,IAAKD,EACL2B,IAAKa,EACLX,GAAID,EACJG,KAAMD,EACNjC,IAAKwC,EACLL,MAAOS,EACP1C,IAAKD,EACLK,KAAMD,GAsEewC,CARP,IAAIrH,UAAc,EAAG,EAAG,GACxB,GACE,GACI,EACN,GACE,GACF,EACOA,OAAWoG,SAAS,KAErC7F,KAAK2G,WAAa,IAAIb,EAAY/B,MAxB9C,oBA4BI,WACI,GAAI/D,KAAK2G,WAEL,OADA3G,KAAK2G,WAAW1F,SACTjB,KAAK2G,WAAWI,mBA/BnC,KC7KWC,EAAe,CACtBC,YAAY,EACZC,gBAAiB,IACjBC,oBAAqB,GAGJC,E,WACjB,WAAY1G,GAAQ,oBAChB,IAAI2G,EAAW,IAAI5H,iBAAqB,EAAG,GAAI,IAC3C6H,EAAW,IAAI7H,sBACnB6H,EAASC,SAAW,IAAI9H,QAAY,WACpC6H,EAASE,WAAY,EACrBF,EAASG,aAAc,EACvBH,EAASI,QAAU,GACnB1H,KAAK2H,KAAO,IAAIlI,OAAW4H,EAAUC,GAErC5G,EAAMkB,IAAI5B,KAAK2H,M,0CAGnB,SAAOC,EAAgBC,GACnB7H,KAAK8H,UAAUF,GACf5H,KAAK+H,cAAcf,EAAaC,YAChC,IAAIe,EAAQhB,EAAaE,gBAAkBtC,KAAKE,IAAU,KAAN+C,GAAeb,EAAaE,gBAAkB,EAClGlH,KAAK2H,KAAKK,MAAM1H,IAAI0H,EAAOA,EAAOA,GAClChB,EAAaG,oBAAsBa,I,uBAGvC,WACI,OAAOhI,KAAK2H,KAAKtH,W,uBAGrB,SAAU4H,GACNjI,KAAK2H,KAAKtH,SAAS6H,KAAKD,K,2BAG5B,SAAcA,GACVjI,KAAK2H,KAAKQ,QAAUF,M,aCtCb,MAA0B,wCCa5BG,EAAQ,GACRC,EAAQD,KAqKNE,E,WAlKX,WAAYC,GAAqB,oBAE7BvI,KAAKwI,kBAAoB,GACzBxI,KAAKyI,cAAgB,GACrBzI,KAAK0I,eAAiB,GACtB1I,KAAK2I,iBAAmB,GACxB3I,KAAK4I,aAAe,IAAInJ,iBAKxBO,KAAK6I,WAAWN,G,8CAGpB,SAAWA,GAAqB,IAAD,QACd,IAAIO,KACVC,UAAUC,GAAOC,MAAK,SAACC,GAE1B,IAAMC,EAAaD,EAAKC,WACxB,EAAKX,kBAAoB5D,KAAKwE,MAA+B,GAAzBD,EAAW,GAAGE,UAGlD,IAAMC,EAAUJ,EAAKxI,MAAM6I,SAAS,GAAGlC,SAIjCmC,EAAkBF,EAAQE,gBAAgBnJ,SAEhD,EAAKoI,cAAgBa,EAAQG,aAAa,YAAYC,MACtD,EAAKhB,eAAiBY,EAAQK,MAAMC,MAAMC,OAQ1C,IALA,IAAMC,EAAU,EAAKC,aAAa,EAAKvB,mBACjCwB,EAAS,EAAKD,aAAa,EAAKtB,eAEhCwB,EAAQ,IAAIC,aAAa,EAAIF,EAASF,GAElCK,EAAI,EAAGA,EAAIH,EAAQG,IACzB,IAAM,IAAIC,EAAI,EAAGA,EAAIN,EAASM,IAAO,CACjC,IAAMC,EAASD,EAAIJ,EAAS,EAEtBM,EAAW1F,KAAK2F,MAAMH,EAAI,EAAK5B,kBAAoBgB,EAAgBK,QACnEW,GAAaF,EAAW,GAAKd,EAAgBK,OAC7CY,EAAaL,EAAI,EAAK5B,kBAAoBgB,EAAgBK,OAAS,EAGzE,GAAIO,EAAI,EAAK5B,kBAAmB,CAE5B,IAAIkC,OAAE,EAAEC,OAAE,EAMVD,EAAKlB,EAAgBc,GAAUV,MAAU,EAAJO,GACrCQ,EAAKnB,EAAgBgB,GAAWZ,MAAU,EAAJO,QAE3BS,IAAPF,QAA2BE,IAAPD,IACpBV,EAAMI,EAAa,EAAJF,GAAS,EAAKU,KAAKH,EAAIC,EAAIF,IAE9CC,EAAKlB,EAAiBc,GAAWV,MAAW,EAAJO,EAAQ,GAChDQ,EAAKnB,EAAiBgB,GAAYZ,MAAW,EAAJO,EAAQ,QAEtCS,IAAPF,QAA2BE,IAAPD,IACpBV,EAAMI,EAAa,EAAJF,EAAQ,GAAK,EAAKU,KAAKH,EAAIC,EAAIF,IAElDC,EAAKlB,EAAgBc,GAAUV,MAAU,EAAJO,EAAQ,GAC7CQ,EAAKnB,EAAgBgB,GAAWZ,MAAU,EAAJO,EAAQ,QAEnCS,IAAPF,QAA2BE,IAAPD,IACpBV,EAAMI,EAAa,EAAJF,EAAQ,GAAK,EAAKU,KAAKH,EAAIC,EAAIF,KAO9D,EAAK9B,iBAAmB,IAAIlJ,cAAkBwK,EAAOD,EAAQF,EAASrK,YAAiBA,aAYvF,IARA,IAAMqL,EAAW,GAAIrJ,EAAQ,GAAIsJ,EAAY,GAAIC,EAAQ,GAAIC,EAAU,GACjEC,EAAgB,EAAKzC,cAAgBJ,EAAQ,EAI/C8C,EAAe7B,EAAQG,aAAa,SAASG,MAC7CwB,EAAkB,GAClBC,EAAO,EACFlB,EAAI,EAAGC,EAAI,EAAGD,EAAIgB,EAAatB,OAAQM,IACxCA,EAAIkB,IAAS,GAAW,IAANlB,EAElBkB,GAAc,GAEdD,EAAgBhB,GAAKe,EAAahB,GAClCC,KAQR,IAAK,IAAID,EAAI,EAAGA,EAAIe,EAAef,IAAO,CACtC,IAAMmB,EAASnB,GAA0B,EAArB,EAAK1B,eACzBqC,EAASS,KAAKjC,EAAQG,aAAa,YAAYG,MAAM0B,IACrD7J,EAAM8J,KAAKH,EAAgBE,IAQ/B,IADA,IAAI3G,EAAIC,KAAK4G,SACJrB,EAAI,EAAGA,EAAI,EAAK1B,cAAgBJ,EAAO8B,IAAM,CAClD,IAAMmB,EAASnB,EAAK,EAAK1B,cACnBgD,EAAO7G,KAAK2F,MAAMJ,EAAI,EAAK1B,eAClB,IAAX6C,IAAc3G,EAAIC,KAAK4G,UAC3B,IAAMpB,IAAQqB,EACR5K,EAAKuJ,EAAIhC,EAASA,EAClBtH,KAASsJ,EAAIhC,GAASA,EAC5B2C,EAAUQ,KAAK1K,EAAGC,EAAGwK,EAAStB,EAAQ,EAAKxB,kBAAoBsB,GAC/DkB,EAAMO,KAAKE,EAAM9G,EAAGC,KAAK4G,SAAU5G,KAAK4G,UAM5C,IAAK,IAAIrB,EAAI,EAAGA,EAAI,EAAKzB,eAAiBL,EAAO8B,IAAK,CAClD,IAAME,EAASzF,KAAK2F,MAAMJ,EAAI,EAAKzB,gBAAkB,EAAKD,cAAgB,EAC1EwC,EAAQM,KAAKjC,EAAQK,MAAMC,MAAMO,EAAI,EAAKzB,gBAAkB2B,GAGhE,EAAKzB,aAAa8C,aAAa,WAAY,IAAIjM,kBAAsB,IAAIyK,aAAaY,GAAW,IAGjG,EAAKlC,aAAa8C,aAAa,QAAS,IAAIjM,kBAAsB,IAAIkM,YAAYlK,GAAQ,GAAG,IAC7F,EAAKmH,aAAa8C,aAAa,YAAa,IAAIjM,kBAAsB,IAAIyK,aAAaa,GAAY,IACnG,EAAKnC,aAAa8C,aAAa,QAAS,IAAIjM,kBAAsB,IAAIyK,aAAac,GAAQ,IAC3F,EAAKpC,aAAagD,SAASX,GAK3B1C,S,0BAIR,SAAasD,GACT,OAAOjH,KAAKkH,IAAI,EAAGlH,KAAKmH,KAAKnH,KAAK4B,IAAIqF,GAAKjH,KAAK4B,IAAI,O,kBAGxD,SAAKwF,EAAQC,EAAQC,GAEjB,OAAOF,GAAUC,EAASD,IAD1BE,EAAStH,KAAKuH,IAAIvH,KAAKwH,IAAKF,EAAQ,GAAK,M,0BAI7C,SAAaxC,GACT1J,KAAK4I,aAAayD,aAAa,EAAGrM,KAAK0I,eAAiBgB,O,aCkCjD4C,E,WA1LX,WAAYpK,GAAW,oBACnBlC,KAAKuM,WAAa,IAAIC,IAAuBpE,EAAOA,EAAOlG,GAO3D,IAAMuK,EAAazM,KAAKuM,WAAWG,gBAC7BC,EAAa3M,KAAKuM,WAAWG,gBACnC1M,KAAK4M,oBAAoBH,GACzBzM,KAAK6M,oBAAoBF,GAKzB3M,KAAK8M,iBAAmB9M,KAAKuM,WAAWQ,YAAY,kBCvC7C,q9PDuCwFJ,GAC/F3M,KAAKgN,iBAAmBhN,KAAKuM,WAAWQ,YAAY,kBExC7C,uzCFwCwFN,GAI/FzM,KAAKuM,WAAWU,wBAAwBjN,KAAK8M,iBAAkB,CAAC9M,KAAKgN,iBAAkBhN,KAAK8M,mBAC5F9M,KAAKuM,WAAWU,wBAAwBjN,KAAKgN,iBAAkB,CAAChN,KAAKgN,iBAAkBhN,KAAK8M,mBAG5F9M,KAAKkN,iBAAmBlN,KAAKgN,iBAAiB1F,SAAS6F,SACvDnN,KAAKoN,iBAAmBpN,KAAK8M,iBAAiBxF,SAAS6F,SAIvDnN,KAAKkN,iBAAL,MAAiC,CAAEG,MAAO,GAC1CrN,KAAKkN,iBAAL,OAAkC,CAAEG,MAAO,GAC3CrN,KAAKkN,iBAAL,OAAkC,CAAEG,OAAO,GAI3CrN,KAAKoN,iBAAL,MAAiC,CAAEC,MAAO,GAC1CrN,KAAKoN,iBAAL,OAAkC,CAAEC,MAAO,GAG3CrN,KAAKoN,iBAAL,iBAA4C,CAAEC,MAAOC,EAAaC,YAClEvN,KAAKoN,iBAAL,iBAA4C,CAAEC,MAAOC,EAAaE,YAClExN,KAAKoN,iBAAL,gBAA2C,CAAEC,MAAOC,EAAaG,WACjEzN,KAAKoN,iBAAL,eAA0C,CAAEC,MAAOC,EAAaI,UAChE1N,KAAKoN,iBAAL,OAAkC,CAAEC,OAAO,GAG3CrN,KAAKoN,iBAAL,gBAA2C,CAAEC,MAAO,IAAI5N,WACxDO,KAAKoN,iBAAL,cAAyC,CAAEC,MAAOrG,EAAaG,qBAG/DnH,KAAKoN,iBAAL,eAA0C,CAAEC,MAAOC,EAAaK,UAChE3N,KAAKoN,iBAAL,WAAsC,CAAEC,MAAOC,EAAaM,WAG5D5N,KAAKoN,iBAAL,gBAA2C,CAAEC,MAAO,IAAI5N,WACxDO,KAAKoN,iBAAL,gBAA2C,CAAEC,MAAO,IAAI5N,WAGxDO,KAAK8M,iBAAiBe,MAAQpO,iBAC9BO,KAAK8M,iBAAiBgB,MAAQrO,iBAG9BO,KAAKgN,iBAAiBa,MAAQpO,iBAC9BO,KAAKgN,iBAAiBc,MAAQrO,iBAG9B,IAAMsO,EAAQ/N,KAAKuM,WAAWyB,OAEf,OAAVD,GACDxH,QAAQwH,MAAOA,IAIE,EAErB/N,KAAKiO,OAAQ,EACbjO,KAAKkO,OAAQ,EACb3H,QAAQC,IAAI,uB,0CAGhB,SAAO2H,EAAOtG,EAAKD,EAAgBwG,GAI/BpO,KAAKkN,iBAAL,OAAgCG,MAAQrN,KAAKiO,MAG7CjO,KAAKkN,iBAAL,OAAgCG,MAAQc,EACxCnO,KAAKkN,iBAAL,MAA+BG,MAAQxF,EACvC7H,KAAKoN,iBAAL,OAAgCC,MAAQc,EACxCnO,KAAKoN,iBAAL,MAA+BC,MAAQxF,EAGvC7H,KAAKoN,iBAAL,iBAA0CC,MAAQC,EAAaC,WAC/DvN,KAAKoN,iBAAL,iBAA0CC,MAAQC,EAAaE,WAC/DxN,KAAKoN,iBAAL,gBAAyCC,MAAQC,EAAaG,UAC9DzN,KAAKoN,iBAAL,eAAwCC,MAAQC,EAAaI,SAC7D1N,KAAKoN,iBAAL,OAAgCC,MAAQrN,KAAKkO,MAG7ClO,KAAKoN,iBAAL,gBAAyCC,MAAM/M,IAAIsH,EAAe/G,EAAG+G,EAAe9G,EAAG8G,EAAe7G,GACtGf,KAAKoN,iBAAL,cAAuCC,MAAQrG,EAAaG,oBAG5DnH,KAAKoN,iBAAL,eAAwCC,MAAQC,EAAaK,SAC7D3N,KAAKoN,iBAAL,WAAoCC,MAAQC,EAAaM,UAGzD5N,KAAKoN,iBAAL,gBAAyCC,MAAM/M,IAAI8N,EAAYhC,IAAIvL,EAAGuN,EAAYhC,IAAItL,EAAGsN,EAAYhC,IAAIrL,GACzGf,KAAKoN,iBAAL,gBAAyCC,MAAM/M,IAAI8N,EAAYjC,IAAItL,EAAGuN,EAAYjC,IAAIrL,EAAGsN,EAAYjC,IAAIpL,GAIzGf,KAAKuM,WAAW8B,UAIZrO,KAAKiO,QACLjO,KAAKiO,OAAQ,GAQbjO,KAAKkO,QACLlO,KAAKkO,OAAQ,K,iCAKrB,SAAoBI,GAIhB,IAFA,IAAMC,EAAWD,EAAQE,MAAMC,KAEtBC,EAAI,EAAGC,EAAKJ,EAAS1E,OAAQ6E,EAAIC,EAAID,GAAK,EAAG,CAKlD,IAAM7N,EAAI+D,KAAK4G,SAAW,GACpB1K,EAAI8D,KAAK4G,SAAW,GACpBzK,EAAI6D,KAAK4G,SAAW,GAG1B+C,EAASG,EAAI,GAAK7N,EAClB0N,EAASG,EAAI,GAAK5N,EAClByN,EAASG,EAAI,GAAK3N,EAClBwN,EAASG,EAAI,GAAK,K,iCAK1B,SAAoBJ,GAEhB,IADA,IAAMC,EAAWD,EAAQE,MAAMC,KACrBC,EAAI,EAAGC,EAAKJ,EAAS1E,OAAQ6E,EAAIC,EAAID,GAAK,EAAI,CACpD,IAAM7N,EAAI+D,KAAK4G,SAAW,GACpB1K,EAAI8D,KAAK4G,SAAW,GACpBzK,EAAI6D,KAAK4G,SAAW,GAE1B+C,EAASG,EAAI,GAAS,EAAJ7N,EAClB0N,EAASG,EAAI,GAAS,EAAJ5N,EAClByN,EAASG,EAAI,GAAS,EAAJ3N,EAClBwN,EAASG,EAAI,GAAK,K,qCAI1B,WACI,OAAO1O,KAAKuM,WAAWqC,uBAAuB5O,KAAKgN,kBAAkBsB,U,qCAGzE,WACI,OAAOtO,KAAKuM,WAAWqC,uBAAuB5O,KAAK8M,kBAAkBwB,U,0BAGzE,WACItO,KAAKiO,OAAQ,I,0BAGjB,WACIjO,KAAKkO,OAAQ,M,KG3LVW,GAAuB,EAIvBvB,EAAe,CACtBC,WAAY,EACZC,WAAY,GACZC,UAAW,GACXC,SAAU,GACVoB,QAAS,IACTnB,SAAU,EACVC,UAAW,GACXmB,KAAM,GACNC,MAAO3G,GAyMI4G,E,WArMX,WAAYvO,GAAQ,oBAEhBV,KAAKkP,eAAiB,IAAI7I,EAG1BrG,KAAKmP,OAAS,IAAI/H,EAAO1G,GAGzBV,KAAKoP,MAAQ,IAAI3P,QAGjBO,KAAKqP,aAAe,GAGpBrP,KAAKsP,YAAc,G,+CAGvB,SAAYhJ,GAERtG,KAAKkP,eAAeK,iBAAiBjJ,K,4BAIzC,SAAepE,EAAUxB,GAErBV,KAAKwP,OAAS,IAAIlH,EAAUtI,KAAKyP,YAAYC,KAAK1P,KAAMkC,EAAUxB,M,oBAGtE,SAAO0N,GACH,GAAIS,EAAsB,CACtB,IAAIjH,EAAiB5H,KAAKkP,eAAejO,SAGzC,GAAI2G,EAAgB,CAChB,IAAIuG,EAAQnO,KAAKoP,MAAMO,WACnB9H,EAAM7H,KAAKoP,MAAMQ,QAGrB5P,KAAKmP,OAAOlO,OAAO2G,EAAgBC,GAGnC7H,KAAKsP,YAAYrO,OAAOkN,EAAOtG,EAAKD,EAAgBwG,GAEhDpO,KAAKqP,eACLrP,KAAKqP,aAAalC,SAAlB,KAAmCE,MAAQxF,EAAM,IACjD7H,KAAKqP,aAAalC,SAAlB,MAAoCE,MAAQc,EAG5CnO,KAAKqP,aAAalC,SAAlB,KAAmCE,MAAQC,EAAayB,KAIxD/O,KAAKqP,aAAalC,SAAlB,gBAA8CE,MAAQrN,KAAKsP,YAAYO,0BACvE7P,KAAKqP,aAAalC,SAAlB,gBAA8CE,MAAQrN,KAAKsP,YAAYQ,2BAI3E9P,KAAKwP,OAAOnD,aAAaiB,EAAa0B,W,0BAKlD,WACQhP,KAAKsP,aACLtP,KAAKsP,YAAYS,iB,yBAIzB,SAAY7N,EAAUxB,GAAQ,IAAD,OACnB2G,EAAWrH,KAAKwP,OAAO5G,aAIvBoH,EAAc,IAAIvQ,uBAA2B,CAC/CwQ,cAAc,EACdC,aAAa,EACbC,KAAM1Q,aACN2Q,UAAW,EACXC,UAAW,IAMfL,EAAYM,gBAAkB,SAACC,GAI3BA,EAAOpD,SAASqD,gBAAkB,CAAEnD,MAAO,MAC3CkD,EAAOpD,SAASsD,gBAAkB,CAAEpD,MAAO,MAE3CkD,EAAOpD,SAASxE,iBAAmB,CAAE0E,MAAO,EAAKmC,OAAO7G,kBACxD4H,EAAOpD,SAASuD,KAAO,CAAErD,MAAO,GAEhCkD,EAAOpD,SAASwD,KAAO,CAAEtD,MAAO,IAChCkD,EAAOpD,SAASgB,MAAQ,CAAEd,MAAO,GAGjC,IAAIuD,EAAQ,mBACRC,EAAM,0UAYVN,EAAOO,aAAeP,EAAOO,aAAaC,QAASH,EAAOA,EAAQC,GAQlED,EAAQ,0BACRC,EAAM,+vCAiCNN,EAAOO,aAAeP,EAAOO,aAAaC,QAAQH,EAAOC,GAGzD,EAAKxB,aAAekB,GAIxB,IAAMS,EAAW,IAAIvR,OAAW4H,EAAU2I,GAC1CgB,EAASC,SAASnQ,EAAI8D,KAAKQ,GAAG,EAC9B4L,EAASE,YAAa,EACtBF,EAASG,eAAgB,EAEzBzQ,EAAMkB,IAAIoP,GAGVhR,KAAKsP,YAAc,IAAIhD,EAAYpK,GAGnC2M,GAAuB,EACvBtI,QAAQC,IAAI,0B,yBAGhB,WACID,QAAQC,IAAI,iCACRxG,KAAKsP,aACLtP,KAAKsP,YAAY8B,iB,+BAazB,SAAkBC,GACdrR,KAAKkP,eAAeK,iBAAiB8B,GACrC9K,QAAQC,IAAI,uB,KCnLL8K,E,WAtCX,WAAYC,GAAsB,oBAC9BvR,KAAKwR,UAAY,IAAI/R,YACrBO,KAAKW,MAAQ,IAAIlB,UAEjBO,KAAKyR,YAAcF,EACnBvR,KAAK0R,gBAAiB,EAGtBxR,OAAOyR,iBAAiB,QAAS3R,KAAK4R,aAAalC,KAAK1P,OAAO,GAE/DA,KAAKoP,MAAQ,IAAI3P,Q,+CAGrB,SAAYoS,GACR7R,KAAKW,MAAME,EAAMgR,EAAMC,QAAU5R,OAAOC,WAAe,EAAI,EAC3DH,KAAKW,MAAMG,GAAQ+Q,EAAME,QAAU7R,OAAOE,YAAgB,EAAI,I,uBAGlE,SAAUH,EAAQ+R,EAAYC,GAC1B,GAAIA,EAAe,CACfjS,KAAKwR,UAAUU,cAAclS,KAAKW,MAAOV,GAGzC,IAAMkS,EAAUnS,KAAKwR,UAAUY,gBAAgBJ,GAC/ChS,KAAK0R,eAAiBS,EAAQtI,OAAS,K,0BAI/C,WACI,IAAIwI,EAAcrS,KAAKoP,MAAMO,WAC7BpJ,QAAQC,IAAI6L,GACRrS,KAAK0R,gBAAkBW,EAjCX,GAkCZrS,KAAKyR,kB,uDCyBF,M,WArDb,aAAe,oBACXzR,KAAKsS,QAAUC,+CAEfvS,KAAKwS,OAASC,IAAGzS,KAAKsS,QAAS,CAC3BI,cAAc,EACdC,kBAAmB,IACnBC,qBAAsBC,MAG1B7S,KAAKwS,OAAOM,KAAK,UAAW9S,KAAK+S,UAAUrD,KAAK1P,OAChDA,KAAKgT,iBAAmB,G,6CAG5B,WACIzM,QAAQC,IAAI,aAGZxG,KAAKwS,OAAOS,GAAG,OAAQjT,KAAKkT,QAAQxD,KAAK1P,OACzCA,KAAKwS,OAAOS,GAAG,iBAAkBjT,KAAKmT,cAAczD,KAAK1P,S,2BAG7D,SAAcyO,GACZzO,KAAKgT,iBAAiBvE,K,2BAIxB,SAAc2E,EAAYC,GACtB,IAAIC,EAAU,CACV,KAASF,EACT,KAAQC,GAEZrT,KAAKwS,OAAOe,KAAK,aAAcD,K,4BAGnC,SAAeE,GACbxT,KAAKwS,OAAOe,KAAK,cACjBvT,KAAKgT,iBAAmBQ,I,0BAG1B,SAAaJ,GACXpT,KAAKwS,OAAOe,KAAK,eAAgBH,K,wBAInC,WACI7M,QAAQC,IAAI,iC,qBAGhB,SAAQiI,Q,MCrDCgF,EAAe,CACtBC,YAAY,EACZC,iBAAiB,EACjBC,kBAAmB,GAGZC,IAAgB,EAqFZC,G,4FAlFX,SAAapT,EAAOqT,EAAeC,EAAcC,EAAcC,EAAeC,EAAaC,GAEvF,IASIC,EADe,CARE,IAAI5U,eAAmByU,EAAcI,SACtC,IAAI7U,eAAmBwU,EAAaK,SACrC,IAAI7U,eAAmB0U,EAAYG,SAChC,IAAI7U,eAAmB2U,EAAeE,SACxC,IAAI7U,eAAmBuU,EAAaM,SACnC,IAAI7U,eAAmBsU,EAAcO,UAIzBC,KAAI,SAAAC,GACjC,OAAO,IAAI/U,oBAAwB,CAC/B8U,IAAKC,EACLrE,KAAM1Q,gBAKR4H,EAAW,IAAI5H,cAAkB,IAAK,IAAK,KAGjDO,KAAKyU,SAAW,IAAIhV,OAAW4H,EAAUgN,GACzC3T,EAAMkB,IAAI5B,KAAKyU,UAEfzU,KAAK0U,kBAAkBhU,GACvBV,KAAK2U,sBAAwBlB,EAAaG,kBAG1CC,IAAgB,EAChBtN,QAAQC,IAAI,mB,+BAGhB,SAAkB9F,GAEdV,KAAKyU,SAASpN,SAASuN,qBAGvB5U,KAAKoO,YAAcpO,KAAKyU,SAASpN,SAAS+G,YAC1CpO,KAAKoO,YAAYyG,eAAepB,EAAaG,mBAG7C5T,KAAK8U,gBAAkB,IAAIrV,YAAgBO,KAAKyU,SAAU,IAAIhV,QAAY,EAAG,EAAG,IAChFO,KAAK8U,gBAAgB3M,QAAUsL,EAAaE,gBAC5CjT,EAAMkB,IAAI5B,KAAK8U,mB,4BAGnB,WAGI,GAAI9U,KAAKoO,YACL,OAAOpO,KAAKoO,c,oBAIpB,WACIpO,KAAKyU,SAAStM,QAAUsL,EAAaC,WACrC1T,KAAK8U,gBAAgB3M,QAAUsL,EAAaE,gBAIxCF,EAAaG,oBAAsB5T,KAAK2U,wBACxC3U,KAAK+U,oBACL/U,KAAK2U,sBAAwBlB,EAAaG,qB,+BAIlD,WAEI5T,KAAKyU,SAASpN,SAASuN,qBACvB5U,KAAKoO,YAAcpO,KAAKyU,SAASpN,SAAS+G,YAC1CpO,KAAKoO,YAAYyG,eAAepB,EAAaG,mBAG7C5T,KAAK8U,gBAAgB7T,OAAOjB,KAAKyU,Y,qBAGrC,WACI,OAAOzU,KAAKyU,a,KC1ETO,IAAa,EAIpBC,GAAY,CACZC,OAAQ,SACRC,QAAS,IA8QEC,G,WAxQX,WAAYC,GAAqB,oBAC7BrV,KAAKsV,IAAM,IAAIC,OAAK,CAACC,MAAO,aAAcC,UAAWJ,EAAoBK,UAAU,IACnF1V,KAAKsV,IAAIK,eAAeC,GAGxB5V,KAAKsV,IAAIO,SAASZ,GAAW,UAG7BjV,KAAK8V,cAAgB,GACrB9V,KAAK+V,eAGL/V,KAAKgW,SAAWhW,KAAKsV,IAAIW,SAAS,CAC9BC,KAAM,WACNC,MAAO,MACPC,UAAW,IAGfpW,KAAKsV,IAAIe,WAAWtU,EAAgB,aAGpC,IAAIuU,EAAKtW,KAAKsV,IAAIiB,UAAU,CAAEf,MAAO,iBAAkBE,UAAU,IACjEY,EAAGT,SAAStW,EAAa,iBAAkB,CAAC4W,MAAO,oBACnDG,EAAGT,SAAStW,EAAa,YAAa,CAAC4W,MAAO,mBAC9CG,EAAGT,SAAStW,EAAa,aAAc,CAAC4W,MAAO,sBAC/CG,EAAGT,SAAStW,EAAa,cAAe,CAAE4W,MAAO,iBAAkB/J,IAAK,GAAKD,IAAK,IAClFmK,EAAGT,SAAStW,EAAa,aAAc,CAAC4W,MAAO,gBAG/C,IAAIK,EAAKxW,KAAKsV,IAAIiB,UAAU,CAAEf,MAAO,gBAAiBE,UAAU,IAChEc,EAAGX,SAAS7O,EAAc,aAAc,CAACmP,MAAO,gBAChDK,EAAGX,SAAS7O,EAAc,kBAAmB,CAACmP,MAAO,oBAAqB/J,IAAK,GAAMD,IAAK,MAC1FqK,EAAGH,WAAWrP,EAAc,sBAAuB,CAACmP,MAAO,0BAG3DnW,KAAKyW,cAAgBzW,KAAKsV,IAAIiB,UAAU,CAAEf,MAAO,iBAAkBE,UAAU,IAC7E1V,KAAK0W,mBAAqBxT,EAC1BlD,KAAK2W,0BACL3W,KAAK4W,gBAGL5W,KAAK6W,oBAAsB7W,KAAKyW,cAAcF,UAAU,CAAEf,MAAO,yBAA0BE,UAAU,IACrG1V,KAAK6W,oBAAoBhB,SAAS1S,EAAe,UACjDnD,KAAK6W,oBAAoBhB,SAAS1S,EAAe,QAAS,CACtDtC,EAAG,CAAEuL,IAAK,EAAGD,IAAK,KAClBrL,EAAG,CAAEsL,IAAK,EAAGD,IAAK,OAEtBnM,KAAK6W,oBAAoBhB,SAAS1S,EAAe,YAAa,CAAEiJ,IAAK,EAAGD,IAAK,MAC7EnM,KAAK6W,oBAAoBhB,SAAS1S,EAAe,QAAS,CAAEiJ,IAAK,EAAGD,IAAK,IACzEnM,KAAK6W,oBAAoBhB,SAAS1S,EAAe,aAEjDnD,KAAK8W,sBAAwB9W,KAAKyW,cAAcF,UAAU,CAAEf,MAAO,4BAA6BE,UAAU,IAC1G1V,KAAK8W,sBAAsBjB,SAASpS,EAAiB,UACrDzD,KAAK8W,sBAAsBjB,SAASpS,EAAiB,SAAU,CAAE2I,IAAK,EAAGD,IAAK,MAC9EnM,KAAK8W,sBAAsBjB,SAASpS,EAAiB,QAAS,CAAE2I,IAAK,EAAGD,IAAK,KAC7EnM,KAAK8W,sBAAsBjB,SAASpS,EAAiB,YAAa,CAAE2I,IAAK,EAAGD,IAAK,GAAI4K,KAAM,IAC3F/W,KAAK8W,sBAAsBjB,SAASpS,EAAiB,YAAa,CAAE2I,IAAK,EAAGD,IAAK,MACjFnM,KAAK8W,sBAAsBjB,SAASpS,EAAiB,cACrDzD,KAAK8W,sBAAsBjB,SAASpS,EAAiB,aACrDzD,KAAK8W,sBAAsBjB,SAASpS,EAAiB,QAAS,CAAE2I,IAAK,EAAGD,IAAK,IAG7EnM,KAAKgX,oBAEL,IAAIC,EAAKjX,KAAKsV,IAAIiB,UAAU,CAAEf,MAAO,gBAAiBE,UAAU,IAChEuB,EAAGpB,SAASvI,EAAc,OAAQ,CAAC6I,MAAO,OAAQ/J,IAAK,EAAGD,IAAK,EAAG4K,KAAM,MACxEE,EAAGpB,SAASvI,EAAc,aAAc,CAAC6I,MAAO,mBAAoB/J,IAAK,EAAGD,IAAK,IAAK4K,KAAM,IAC5FE,EAAGpB,SAASvI,EAAc,aAAc,CAAC6I,MAAO,mBAAoB/J,IAAK,EAAGD,IAAK,IAAK4K,KAAM,IAC5FE,EAAGpB,SAASvI,EAAc,YAAa,CAAC6I,MAAO,kBAAmB/J,IAAK,EAAGD,IAAK,IAAK4K,KAAM,IAC1FE,EAAGpB,SAASvI,EAAc,WAAY,CAAC6I,MAAO,iBAAkB/J,IAAK,EAAGD,IAAK,IAAK4K,KAAM,IACxFE,EAAGpB,SAASvI,EAAc,WAAY,CAAC6I,MAAO,kBAAmB/J,IAAK,EAAGD,IAAK,IAAK4K,KAAM,KACzFE,EAAGpB,SAASvI,EAAc,YAAa,CAAC6I,MAAO,aAAc/J,IAAK,EAAGD,IAAK,EAAG4K,KAAM,MACnFE,EAAGpB,SAASvI,EAAc,QAAS,CAAC6I,MAAO,QAAS/J,IAAK,EAAGD,IAAKmB,EAAa0B,MAAO+H,KAAM,IAQ3F,IAAIG,EAAKlX,KAAKsV,IAAIiB,UAAU,CAAEf,MAAO,gBAAiBE,UAAU,IAChEwB,EAAGrB,SAASpC,EAAc,cAC1ByD,EAAGrB,SAASpC,EAAc,mBAC1ByD,EAAGrB,SAASpC,EAAc,oBAAqB,CAACrH,KAAM,GAAID,IAAK,IAAI8G,GAAG,SAAUjT,KAAKmX,yBAAyBzH,KAAK1P,OAGnHA,KAAKsV,IAAI8B,UAAU,CAAC5B,MAAO,gBAAgBvC,GAAG,QAASjT,KAAKqX,aAAa3H,KAAK1P,OAC9EA,KAAKsV,IAAI8B,UAAU,CAAC5B,MAAO,kBAAkBvC,GAAG,QAASjT,KAAKsX,eAAe5H,KAAK1P,OAGlFuX,EAAUC,eAAexX,KAAKyX,iBAAiB/H,KAAK1P,O,oDAGxD,SAAiB6R,GAEb,IAAI6F,EAAUC,KAAKC,MAAM/F,EAAMxE,OAC/BrN,KAAKsV,IAAIuC,aAAaH,K,8BAG1B,SAAiBjJ,GAAO,IAAD,OAKnB,GAJAlI,QAAQC,IAAI,6BACZD,QAAQC,IAAIiI,GAGRA,EAAK5E,OAAS,EAAG,CAEjB4E,EAAKqJ,SAAQ,SAAAC,GACT,IAAIC,EAAOD,EAAC,KACRE,EAASF,EAAC,OAGd,EAAKjC,cAAcvK,KAAK,CAAE2M,KAAMF,EAAM3K,MAAOsK,KAAKQ,UAAUF,QAOhE,IAAIG,EAAoB3J,EAAK,GAAL,OACxBzO,KAAKsV,IAAIuC,aAAaO,GAGtBpY,KAAKqY,iBACLrY,KAAK+V,eAGL/V,KAAK0W,mBAAqB0B,EAAiB,YAC3CpY,KAAK2W,0BACL3W,KAAKsY,kBACLtY,KAAK4W,gBACL5W,KAAKgX,oBAGLhC,IAAa,EACbzO,QAAQC,IAAI,gB,0BAIpB,WACI,IAAI4M,EAAa6B,GAAUC,OAC3B,GAAI9B,EAAWvJ,OAAS,EAAG,CAEvB7J,KAAKqY,iBACL,IAAIhF,EAAOrT,KAAKsV,IAAIiD,eAGhBC,EAASC,IAAEC,KAAK1Y,KAAK8V,eAAe,SAAA6C,GACpC,OAAOA,EAAET,OAAS9E,KAGlBoF,GAEAjS,QAAQC,IAAI,kEACZgS,EAAOnL,MAAQsK,KAAKQ,UAAU9E,GAI9BrT,KAAK8V,cAAgB2C,IAAEG,OAAO5Y,KAAK8V,eAAe,YAC9C,OAD0D,EAAVoC,OAChC9E,EAAa,EAAG,OAGpC7M,QAAQC,IAAI,mDACZxG,KAAK8V,cAAc+C,QAAQ,CAAEX,KAAM9E,EAAY/F,MAAOsK,KAAKQ,UAAU9E,MAIzEkE,EAAUuB,cAAc1F,EAAYC,GAGpCrT,KAAK+V,oBAELgD,MAAM,gC,4BAId,WACI,GAAI/Y,KAAK8V,cAAcjM,OAAS,EAAG,CAC/B,IAAIuJ,EAAa6B,GAAUC,OAe3B,GAdA3O,QAAQC,IAAI,oBAAsB4M,GAIlCqF,IAAEO,OAAOhZ,KAAK8V,eAAe,SAAA6C,GAAC,OAAIA,EAAET,OAAS9E,KAG7CmE,EAAU0B,aAAa7F,GAGvBpT,KAAKqY,iBACLrY,KAAK+V,eAGD/V,KAAK8V,cAAcjM,OAAS,EAAG,CAE/B,IAAIqP,EAAalZ,KAAK8V,cAAc,GAAGzI,MACvCrN,KAAKsV,IAAIuC,aAAaF,KAAKC,MAAMsB,Q,4BAK7C,WACIjE,GAAUE,QAAU,GACpBnV,KAAKmZ,WAAWC,Y,0BAGpB,WACIpZ,KAAKmZ,WAAanZ,KAAKsV,IAAIO,SAASZ,GAAW,UAAW,CACtDtL,MAnNQ,EAoNR0P,QAASrZ,KAAK8V,gBAElB9V,KAAKmZ,WAAWlG,GAAG,SAAUjT,KAAKsZ,iBAAiB5J,KAAK1P,S,qCAG5D,WACQA,KAAK0W,qBAAuBxT,EAC5BlD,KAAKuZ,mBAAqB,CAAEC,QAAStW,EAAsBuW,UAAWvW,GAC/DlD,KAAK0W,qBAAuBxT,EACnClD,KAAKuZ,mBAAqB,CAAEE,UAAWvW,EAAwBsW,QAAStW,GAExElD,KAAKuZ,mBAAqB,CAAEC,QAAStW,EAAsBuW,UAAWvW,K,6BAI9E,WACIlD,KAAK0Z,YAAYN,Y,2BAGrB,WACIpZ,KAAK0Z,YAAc1Z,KAAKyW,cAAcZ,SAAS7S,EAAe,cAAe,CACzEmT,MAAO,eACPxM,MAzOY,EA0OZ0P,QAASrZ,KAAKuZ,qBAElBvZ,KAAK0Z,YAAYzG,GAAG,SAAUjT,KAAK2Z,kBAAkBjK,KAAK1P,S,+BAG9D,SAAkB4Z,GACd5Z,KAAK0W,mBAAqBkD,EAAGvM,MAC7BrN,KAAKgX,oBAGLhX,KAAK6Z,oBAAoB7Z,KAAK0W,sB,+BAGlC,WACQ1W,KAAK0W,qBAAuBxT,GAC5BlD,KAAK6W,oBAAoBiD,QAAS,EAClC9Z,KAAK8W,sBAAsBgD,QAAS,GAC7B9Z,KAAK0W,qBAAuBxT,IACnClD,KAAK6W,oBAAoBiD,QAAS,EAClC9Z,KAAK8W,sBAAsBgD,QAAS,K,uCAI5C,SAA0BC,GACtB/Z,KAAK6Z,oBAAsBE,I,sCAG/B,SAAyBlI,Q,aCzRvBmI,GAAS,CACXvE,UAAW,CACPpV,SAAU,WACV4Z,IAAK,OACLC,MAAO,SAITC,G,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,GAGX,EAAKC,OAASC,IAAMC,YALH,E,0CAQnB,WACE,OACE,sBAAKC,IAAKza,KAAKsa,OAAQI,MAAOV,GAAOvE,c,+BAIzC,WACE,IAAIJ,EAAqBrV,KAAKsa,OAAOhG,QACrCtU,KAAKsV,IAAM,IAAIF,GAAUC,K,yBAG3B,WACI,OAAOrV,KAAKsV,IAAIU,W,uCAGpB,SAA0B+D,GACxB/Z,KAAKsV,IAAIqF,0BAA0BZ,K,+BAGrC,WACE,OAAO/Z,KAAKsV,IAAIoB,uB,GA7BG6D,IAAMK,WAiCdC,eAAOV,ICrDP,OAA0B,kCCA1B,OAA0B,iCCA1B,OAA0B,gCCA1B,OAA0B,mCCA1B,OAA0B,iCCA1B,OAA0B,kCCmC9BW,IAAe,EAKpBd,GAAS,CACbvE,UAAW,CACT7S,MAAO,QACPC,OAAQ,QACRkY,SAAU,UAGZC,UAAW,CACTC,OAAQ,aAGVC,MAAO,CACLC,QAAS,SAIPC,G,kDACJ,WAAYhB,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,GACX,EAAK1Z,MAAQ,IAAIlB,UAAc,EAAG,GAClC,EAAKmB,KAAO,IAGZ,EAAKqR,eAAgB,EAGrB,EAAKoJ,SAAWd,IAAMC,YACtB,EAAKF,OAASC,IAAMC,YACpB,EAAKc,OAASf,IAAMC,YACpB,EAAKe,SAAWhB,IAAMC,YAGtB,EAAKzG,cAAgBwG,IAAMC,YAC3B,EAAKxG,aAAeuG,IAAMC,YAC1B,EAAKvG,aAAesG,IAAMC,YAC1B,EAAKtG,cAAgBqG,IAAMC,YAC3B,EAAKrG,YAAcoG,IAAMC,YACzB,EAAKpG,eAAiBmG,IAAMC,YAG5B,EAAK9Z,MAAQ,IAAIjB,QACjB,EAAKiB,MAAM8a,WAAa,IAAI/b,QAAY,WAGxC,EAAKgc,cAAgB,IAAI1b,EAGzB,EAAK2b,gBAAkB,IAAIna,EAAgB,EAAKb,OAGhD,EAAKib,cAAgB,IAAI7H,GAGzB,EAAK8H,eAAiB,IAAItK,EAAe,EAAKuK,cAAcnM,KAAnB,iBAGzC,EAAKoM,gBAAkB,IAAI7Z,EAG3B,EAAK8Z,cAAgB,IAAI9M,EAAc,EAAKvO,OAE5C,EAAKsb,kBAAoB,GAGzB9b,OAAOyR,iBAAiB,SAAU,EAAKsK,eAAevM,KAApB,iBAClCwM,SAASvK,iBAAiB,oBAAoB,SAAAE,GACxCqK,SAASpC,OACX,EAAKqC,uBAAsB,GAE3B,EAAKA,uBAAsB,MAK/Bjc,OAAOyR,iBAAiB,YAAa,EAAKyK,YAAY1M,KAAjB,iBAA6B,GAClExP,OAAOyR,iBAAiB,QAAS,EAAK0K,aAAa3M,KAAlB,iBAA8B,GA3D9C,E,qDA8DnB,WAEE,IAAI4M,EAAqBtc,KAAK8b,gBAAgBS,gBAC9Cvc,KAAKqb,SAAS/G,QAAQkI,YAAYF,GAGlCtc,KAAKgW,SAAWhW,KAAKsa,OAAOhG,QAAQmI,cACpCzc,KAAKsa,OAAOhG,QAAQqG,0BAA0B3a,KAAK0c,iBAAiBhN,KAAK1P,OAGzEA,KAAK2b,cAAcgB,aAAa3c,KAAKU,MACjCV,KAAK+T,cACL/T,KAAKgU,aACLhU,KAAKiU,aACLjU,KAAKkU,cACLlU,KAAKmU,YACLnU,KAAKoU,gBAGTpU,KAAK8b,gBAAgBrZ,iBAAiBzC,KAAK4c,YAAYlN,KAAK1P,OAE5DA,KAAK6c,iB,oBAIP,WACE,OACE,uBAAKnC,MAAOV,GAAOvE,UAAWgF,IAAKza,KAAKqb,SAAxC,UACE,eAAC,GAAD,CAAUZ,IAAKza,KAAKsa,SACpB,wBAAOwC,GAAI,QAASrC,IAAKza,KAAK+T,cAAegJ,aAAW,EAACC,MAAI,EAACC,IAAKC,GAAOxC,MAAOV,GAAOkB,MAAOiC,UAAWnd,KAAKod,cAAc1N,KAAK1P,QAClI,wBAAO8c,GAAI,OAAQrC,IAAKza,KAAKgU,aAAc+I,aAAW,EAACC,MAAI,EAACC,IAAKI,GAAM3C,MAAOV,GAAOkB,MAAOiC,UAAWnd,KAAKod,cAAc1N,KAAK1P,QAC/H,wBAAO8c,GAAI,OAAQrC,IAAKza,KAAKiU,aAAc8I,aAAW,EAACC,MAAI,EAACC,IAAKK,GAAM5C,MAAOV,GAAOkB,MAAOiC,UAAWnd,KAAKod,cAAc1N,KAAK1P,QAC/H,wBAAO8c,GAAI,QAASrC,IAAKza,KAAKkU,cAAe6I,aAAW,EAACC,MAAI,EAACC,IAAK/C,GAAOQ,MAAOV,GAAOkB,MAAOiC,UAAWnd,KAAKod,cAAc1N,KAAK1P,QAClI,wBAAO8c,GAAI,MAAOrC,IAAKza,KAAKmU,YAAa4I,aAAW,EAACC,MAAI,EAACC,IAAKhD,GAAKS,MAAOV,GAAOkB,MAAOiC,UAAWnd,KAAKod,cAAc1N,KAAK1P,QAC5H,wBAAO8c,GAAI,SAAUrC,IAAKza,KAAKoU,eAAgB2I,aAAW,EAACC,MAAI,EAACC,IAAKM,GAAQ7C,MAAOV,GAAOkB,MAAOiC,UAAWnd,KAAKod,cAAc1N,KAAK1P,a,2BAK3I,WACMA,KAAKgc,kBAAkBnS,OAzHL,IA0HpB7J,KAAKgc,kBAAkBzQ,MAAK,GAC5BvL,KAAK6c,kB,0BAIT,WA/HwB,IAiIlB7c,KAAKgc,kBAAkBnS,QAAgCgK,KACzDiH,IAAe,EACfvU,QAAQC,IAAI,mB,yBAKhB,WAGI,GAFFxG,KAAKgW,SAASwH,QAERxd,KAAK+b,cAAe,CACtB,IAAI3N,EAAcpO,KAAK2b,cAAc8B,iBACrCzd,KAAK+b,cAAc9a,OAAOmN,GAa5B,GAVApO,KAAKyb,cAAcxa,OAAOjB,KAAKU,MAAOV,KAAKW,MAAOX,KAAKY,MAGvDZ,KAAK8b,gBAAgBnZ,OAAO3C,KAAKU,MAAOV,KAAKyb,cAAciC,aAE3D1d,KAAK2b,cAAc1a,SAEnBjB,KAAK8b,gBAAgB6B,mBAGjB3d,KAAKyb,cAAchb,iBAAkB,CACvC,IAAIkH,EAAO3H,KAAK2b,cAAciC,UAE1BjW,GACF3H,KAAK4b,eAAeiC,UAAU7d,KAAKyb,cAAcxb,OAAQ0H,EAAM3H,KAAKiS,eAGxE6L,MACF9d,KAAKgW,SAAS+H,Q,yBAGhB,SAAYlM,GACV7R,KAAKW,MAAME,EAA8C,IAAzCgR,EAAMC,QAAU5R,OAAOC,WAAa,GACpDH,KAAKW,MAAMG,EAA+C,IAA1C+Q,EAAME,QAAU7R,OAAOE,YAAc,K,0BAGvD,SAAayR,GACT7R,KAAKY,MAAuB,GAAfiR,EAAMmM,OAEnBhe,KAAKY,KAAOgE,KAAKwH,IAAIxH,KAAKuH,IAAI,IAAKnM,KAAKY,MAAO,O,4BAGnD,WACE,GAAIZ,KAAKyb,cAAe,CACtB,IAAIxb,EAASD,KAAKyb,cAAciC,YAChCzd,EAAOge,OAAS/d,OAAOC,WAAaD,OAAOE,YAC3CH,EAAOie,yBACPle,KAAK8b,gBAAgBqC,WAAWje,OAAOC,WAAYD,OAAOE,gB,mCAI9D,SAAsBge,GACpBpe,KAAKiS,cAAgBmM,EACjBA,EACFpe,KAAK8b,gBAAgBrZ,iBAAiBzC,KAAK4c,YAAYlN,KAAK1P,QAG5DA,KAAK+b,cAAchM,eACnB/P,KAAK8b,gBAAgBrZ,iBAAiB,S,wBAK1C,WAEEzC,KAAK+T,cAAcO,QAAQ+J,OAC3Bre,KAAKgU,aAAaM,QAAQ+J,OAC1Bre,KAAKiU,aAAaK,QAAQ+J,OAC1Bre,KAAKkU,cAAcI,QAAQ+J,OAC3Bre,KAAKmU,YAAYG,QAAQ+J,OACzBre,KAAKoU,eAAeE,QAAQ+J,OAC5B9X,QAAQC,IAAI,uBAGZ,IAAIkQ,EAAqB1W,KAAKsa,OAAOhG,QAAQgK,oBAC7Cte,KAAK+b,cAAcwC,YAAY7H,GAG/B1W,KAAK+b,cAAcyC,eAAexe,KAAK8b,gBAAgB5Z,SAAUlC,KAAKU,S,wBAGxE,WAEE,IAAI+d,EAAUze,KAAKyb,cACP,IAAIqC,IAAYW,EAAQxe,OAAOI,UACtCqe,GAAG,CAAC7d,EAAE,EAAGC,EAAE,EAAGC,EAAEf,KAAKY,MAAO,KAC5B+d,OAAOb,IAAac,MAAMC,KAC1BC,YAAW,WAEVL,EAAQhe,kBAAmB,KAC1Bse,U,8BAGT,SAAiB1N,GACfrR,KAAK+b,cAAciD,kBAAkB3N,K,2BAGvC,WACMrR,KAAKiS,eACPjS,KAAK+b,cAActK,gB,sBAIvB,WACEzR,KAAKqb,SAAS/G,QAAQ2K,eAAe,CACnCC,SAAU,SACVC,MAAO,SACN,S,GA/Na5E,IAAMK,WAmOXC,eAAOO,I,SC3RhB3Z,GACK,UADLA,GAOQ,UAPRA,GAQO,UARPA,GASK,UATLA,GAUM,UAVNA,GAWM,UAGN2d,GAES,OAFTA,GAGS,OAHTA,GAIK,OAJLA,GAKO,OALPA,GAMG,OANHA,GAOO,OAPPA,GAQQ,OARRA,GASI,OATJA,GAWS,OAXTA,GAYO,OAZPA,GAcY,OAdZA,GAoBW,OApBXA,GAqBI,OAKJC,GAEU,MAFVA,GAGS,MAHTA,GAIK,OAJLA,GAMI,OANJA,GAOQ,OAPRA,GAUI,OAVJA,GAWQ,OAiBRC,GACK,QADLA,GAEI,aAFJA,GAGK,YCvEI,OAA0B,mCCanCtF,GAAS,CACXvE,UAAW,CACT0F,QAAS,OACToE,cAAe,OAGjBC,QAAS,CACP5c,MAAO,QACPC,OAAQ,OACR4c,UAAW,QAGbC,QAAS,CACPvE,QAAS,OACToE,cAAe,SACfI,WAAY,SACZC,eAAgB,UAGlBpK,MAAO,CACLqK,cAAe,EACfP,WAAYA,GACZF,SAAUA,GACVU,UAAWT,GACX5d,MAAOA,IAGTqB,KAAM,CACJ+c,cAAe,EACfE,YAAa,EACbT,WAAYA,GACZF,SAAUA,GACV3d,MAAOA,GACP4d,QAASA,KAKTW,G,kDACJ,WAAY5F,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,GAFM,E,0CAMnB,WACE,OACE,uBAAKK,MAAOV,GAAOvE,UAAnB,UACE,sBAAKiF,MAAOV,GAAOxL,MAAnB,SACE,wBAAOkM,MAAOV,GAAOwF,QAASS,UAAQ,EAAClD,aAAW,EAACmD,OAAK,EAAClD,MAAI,EAACC,IAAKkD,OAErE,uBAAKzF,MAAOV,GAAO0F,QAAnB,UACE,sBAAKhF,MAAOV,GAAOxE,MAAnB,+BAGA,sBAAKkF,MAAOV,GAAOlX,KAAnB,SAlBM,00B,GACeyX,IAAMK,WA0BtBC,eAAOmF,IC7EP,OAA0B,mCCanChG,GAAS,CACXvE,UAAW,CACT0F,QAAS,OACToE,cAAe,OAIjBrE,MAAO,CACLtY,MAAO,QACPC,OAAQ,OACR4c,UAAW,QAGbC,QAAS,CACPvE,QAAS,OACToE,cAAe,SACfI,WAAY,SACZC,eAAgB,UAGlBpK,MAAO,CACLqK,cAAe,EACfP,WAAYA,GACZF,SAAUA,GACVU,UAAWT,GACX5d,MAAOA,IAGTqB,KAAM,CACJ+c,cAAe,EACfE,YAAa,EACbT,WAAYA,GACZF,SAAUA,GACV3d,MAAOA,GACP4d,QAASA,KAMTe,G,kDACJ,WAAYhG,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,GAFM,E,0CAMnB,WACE,OACE,uBAAKK,MAAOV,GAAOvE,UAAnB,UACE,uBAAKiF,MAAOV,GAAO0F,QAAnB,UACE,sBAAKhF,MAAOV,GAAOxE,MAAnB,+BAGA,sBAAKkF,MAAOV,GAAOlX,KAAnB,SAhBM,o0BAoBR,sBAAK4X,MAAOV,GAAOqG,YAAnB,SACE,wBAAO3F,MAAOV,GAAOkB,MAAO+B,IAAKqD,GAAQvD,aAAW,EAACC,MAAI,EAACiD,UAAQ,EAACC,OAAK,a,GAnBnD3F,IAAMK,WA0BtBC,eAAOuF,ICnEhBpG,GAAS,CACXvE,UAAW,CACP0F,QAAS,OACToE,cAAe,SACfI,WAAY,SACZG,UAAWT,GACX5d,MAAOA,GACP6d,WAAYA,IAGhBiB,QAAS,CACLV,cAAe,EACfT,SAAUA,IAGdoB,QAAS,CACL/e,MAAOA,GACPqe,UAAWT,GACXQ,cAAe,EACfT,SAAUA,GACVqB,UAAW,WAIbC,G,kDACJ,WAAYtG,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,GAFM,E,0CAMnB,WACE,OACE,uBAAKK,MAAOV,GAAOvE,UAAnB,UACE,sBAAKiF,MAAOV,GAAOuG,QAAnB,2CACA,sBAAK7F,MAAOV,GAAOwG,QAAnB,6D,GAXajG,IAAMK,WAiBZC,eAAO6F,ICrDP,OAA0B,wCCA1B,OAA0B,qCCA1B,OAA0B,wCCA1B,OAA0B,iCCA1B,OAA0B,iCCA1B,OAA0B,iCCA1B,OAA0B,+BCA1B,OAA0B,iCCqBnC1G,GAAS,CACXvE,UAAW,CACP0F,QAAS,OACTwE,WAAY,SACZJ,cAAe,SACfoB,WAAYtB,GACZuB,YAAavB,GACbwB,aAAcxB,GACdyB,cAAezB,IAGnB7J,MAAO,CACLqK,cAAe,EACfP,WAAYA,GACZF,SAAUA,GACVU,UAAWT,GACX5d,MAAOA,IAGTsf,KAAM,CACJ5F,QAAS,OACToE,cAAe,MACfO,UAAWT,GACXzc,MAAO,OACPgd,eAAgB,UAGlBoB,OAAQ,CACN7F,QAAS,OACToE,cAAe,SACfI,WAAY,SACZiB,YAAavB,GACbwB,aAAcxB,IAGhB4B,MAAO,CACLre,MAAO,QACPC,OAAQ,QACRqe,aAAc,OACdC,gBAAiB1f,IAGnB2f,cAAe,CACbjG,QAAS,OACToE,cAAe,SACfI,WAAY,SACZL,WAAYA,GACZQ,UAAWT,IAGbrH,KAAM,CACJvW,MAAOA,GACP2d,SAAUA,IAGZiC,SAAU,CACR5f,MAAOA,GACP2d,SAAUA,IAGZkC,WAAY,CACVxB,UAAWT,IAGbkC,SAAU,CACRpG,QAAS,OACToE,cAAe,MACfK,eAAgB,SAChBE,UAAWT,GACXzc,MAAO,QAGT4L,MAAO,CACLiR,UAAW,UACXJ,QAASA,KAITmC,G,kDACJ,WAAYpH,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,GAFM,E,0CAMnB,WACE,IAAIoH,EAAWzhB,KAAK0hB,cAChBC,EAAO3hB,KAAK4hB,UACZC,EAAO7hB,KAAK8hB,UACZC,EAAK/hB,KAAKgiB,QACd,OACE,uBAAKtH,MAAOV,GAAOvE,UAAnB,UACE,sBAAKiF,MAAOV,GAAOxE,MAAnB,4BAGA,uBAAKkF,MAAOV,GAAO+G,KAAnB,UACGU,EACAE,EACAE,EACAE,KAEH,uBAAKrH,MAAOV,GAAOuH,SAAnB,UACE,sBAAK7G,MAAOV,GAAOxL,MAAOyO,IAAKgF,GAAaC,IAAI,gBAChD,sBAAKxH,MAAOV,GAAOxL,MAAOyO,IAAKkF,GAAUD,IAAI,aAC7C,sBAAKxH,MAAOV,GAAOxL,MAAOyO,IAAKmF,GAAaF,IAAI,gBAChD,sBAAKxH,MAAOV,GAAOxL,MAAOyO,IAAKoF,GAAMH,IAAI,YAE3C,eAAC,GAAD,S,yBAKN,WACE,OACE,qBAAGI,KAAK,+BAA+BnT,OAAO,SAASoT,IAAI,aAAa7H,MAAOV,GAAOgH,OAAtF,UACE,sBAAK/D,IAAKuF,GAAKN,IAAI,MAAMxH,MAAOV,GAAOiH,QACvC,uBAAKvG,MAAOV,GAAOoH,cAAnB,UACE,sBAAK1G,MAAOV,GAAOhC,KAAnB,2BACA,sBAAK0C,MAAOV,GAAOqH,SAAnB,oBACA,sBAAK3G,MAAOV,GAAOqH,SAAnB,+B,qBAMR,WACE,OACE,qBAAGiB,KAAK,0BAA0BnT,OAAO,SAASoT,IAAI,aAAc7H,MAAOV,GAAOgH,OAAlF,UACE,sBAAK/D,IAAK0E,GAAMO,IAAI,OAAOxH,MAAOV,GAAOiH,QACzC,uBAAKvG,MAAOV,GAAOoH,cAAnB,UACE,sBAAK1G,MAAOV,GAAOhC,KAAnB,0BACA,sBAAK0C,MAAOV,GAAOqH,SAAnB,8BACA,sBAAK3G,MAAOV,GAAOqH,SAAnB,yB,qBAMR,WACE,OACE,uBAAK3G,MAAOV,GAAOgH,OAAnB,UACE,sBAAK/D,IAAK4E,GAAMK,IAAI,OAAOxH,MAAOV,GAAOiH,QACzC,uBAAKvG,MAAOV,GAAOoH,cAAnB,UACE,sBAAK1G,MAAOV,GAAOhC,KAAnB,0BACA,sBAAK0C,MAAOV,GAAOqH,SAAnB,+BACA,sBAAK3G,MAAOV,GAAOqH,SAAnB,+B,mBAMR,WACE,OACE,uBAAK3G,MAAOV,GAAOgH,OAAnB,UACE,sBAAK/D,IAAK8E,GAAIG,IAAI,KAAKxH,MAAOV,GAAOiH,QACrC,uBAAKvG,MAAOV,GAAOoH,cAAnB,UACE,sBAAK1G,MAAOV,GAAOhC,KAAnB,yBACA,sBAAK0C,MAAOV,GAAOqH,SAAnB,+BACA,sBAAK3G,MAAOV,GAAOqH,SAAnB,iC,GAhFU9G,IAAMK,WAuFXC,eAAO2G,IC1KhBxH,GAAS,CACXvE,WAAS,GACLpV,SAAU,WACVuC,MAAO,OACP4Y,WAAY,WAHP,4BAIO,uDAJP,4BAKO,yDALP,4BAMO,uDANP,IAUPiH,G,kDACJ,WAAYrI,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,GAGX,EAAKqI,aAAenI,IAAMC,YALT,E,0CAQnB,WACE,IAAImI,EAAQ3iB,KAAK4iB,WACjB,OACE,sBAAKlI,MAAOV,GAAOvE,UAAWgF,IAAKza,KAAK0iB,aAAxC,SACGC,M,sBAKP,WACE,OAAI3iB,KAAKoa,MAAM5E,QAAUqN,GAAWC,QAC3B,eAAC,GAAD,IACE9iB,KAAKoa,MAAM5E,QAAUqN,GAAWE,QAClC,eAAC,GAAD,IACE/iB,KAAKoa,MAAM5E,QAAUqN,GAAWG,MAClC,eAAC,GAAD,SADF,I,sBAKT,WAAY,IAAD,OACTC,YAAW,WACT,EAAKP,aAAapO,QAAQ2K,eAAe,CACvCC,SAAU,SACVC,MAAO,YAER,Q,GAlCoB5E,IAAMK,WAsClBC,eAAO4H,ICrDhBzI,GAAS,CACXvE,UAAW,CACPpV,SAAU,WACVuC,MAAO,OACPuY,QAAS,OACToE,cAAe,WAIVsD,GAAa,CACxBC,QAAS,oBACTC,QAAS,oBACTC,MAAO,YAGHE,G,kDACJ,WAAY9I,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,GAGX,EAAK8I,eAAiB5I,IAAMC,YAC5B,EAAK4I,gBAAkB7I,IAAMC,YAC7B,EAAK6I,cAAgB9I,IAAMC,YAPV,E,0CAUnB,WACE,OACE,uBAAKE,MAAOV,GAAOvE,UAAnB,UACE,eAAC,GAAD,CAAcgF,IAAKza,KAAKmjB,eAAgB3N,MAAOqN,GAAWC,QAASQ,SAAU,IAC7E,eAAC,GAAD,CAAc7I,IAAKza,KAAKojB,gBAAiB5N,MAAOqN,GAAWE,QAASO,SAAU,IAC9E,eAAC,GAAD,CAAc7I,IAAKza,KAAKqjB,cAAe7N,MAAOqN,GAAWG,MAAOM,SAAU,S,oBAKhF,SAAOC,GACDA,IAAeV,GAAWC,QAC5B9iB,KAAKmjB,eAAe7O,QAAQkP,WACnBD,IAAeV,GAAWE,QACnC/iB,KAAKojB,gBAAgB9O,QAAQkP,WACpBD,IAAeV,GAAWG,OACnChjB,KAAKqjB,cAAc/O,QAAQkP,e,GA3BNjJ,IAAMK,WAgClBC,eAAOqI,IxCzDlBO,GAAY,CAAC,QAAS,WAE1B,SAASC,KAA2Q,OAA9PA,GAAWC,OAAOC,QAAU,SAAUzU,GAAU,IAAK,IAAIhF,EAAI,EAAGA,EAAI0Z,UAAUha,OAAQM,IAAK,CAAE,IAAI2Z,EAASD,UAAU1Z,GAAI,IAAK,IAAI4Z,KAAOD,EAAcH,OAAOK,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQ5U,EAAO4U,GAAOD,EAAOC,IAAY,OAAO5U,GAAkBuU,GAASS,MAAMnkB,KAAM6jB,WAEhT,SAASO,GAAyBN,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEC,EAAK5Z,EAAnEgF,EAEzF,SAAuC2U,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DC,EAAK5Z,EAA5DgF,EAAS,GAAQmV,EAAaX,OAAOY,KAAKT,GAAqB,IAAK3Z,EAAI,EAAGA,EAAIma,EAAWza,OAAQM,IAAO4Z,EAAMO,EAAWna,GAAQka,EAASG,QAAQT,IAAQ,IAAa5U,EAAO4U,GAAOD,EAAOC,IAAQ,OAAO5U,EAFxMsV,CAA8BX,EAAQO,GAAuB,GAAIV,OAAOe,sBAAuB,CAAE,IAAIC,EAAmBhB,OAAOe,sBAAsBZ,GAAS,IAAK3Z,EAAI,EAAGA,EAAIwa,EAAiB9a,OAAQM,IAAO4Z,EAAMY,EAAiBxa,GAAQka,EAASG,QAAQT,IAAQ,GAAkBJ,OAAOK,UAAUY,qBAAqBV,KAAKJ,EAAQC,KAAgB5U,EAAO4U,GAAOD,EAAOC,IAAU,OAAO5U,EAMne,SAAS0V,GAAUC,EAAMC,GACvB,IAAIvP,EAAQsP,EAAKtP,MACbwP,EAAUF,EAAKE,QACf5K,EAAQgK,GAAyBU,EAAMrB,IAE3C,OAAoB,gBAAoB,MAAOC,GAAS,CACtD9gB,MAAO,QACPC,OAAQ,QACRoiB,QAAS,cACTC,WAAY,+BACZC,MAAO,6BACP1K,IAAKsK,EACL,kBAAmBC,GAClB5K,GAAQ5E,EAAqB,gBAAoB,QAAS,CAC3DsH,GAAIkI,GACHxP,GAAS,KAAMnW,IAAUA,EAAqB,gBAAoB,OAAQ,KAAmB,gBAAoB,SAAU,CAC5Hyd,GAAI,YACU,gBAAoB,gBAAiB,CACnDsI,GAAI,gBACJC,KAAM,SACNC,OAAQ,kEACQ,gBAAoB,SAAU,CAC9CxI,GAAI,YACU,gBAAoB,gBAAiB,CACnDsI,GAAI,gBACJC,KAAM,SACNC,OAAQ,uEACQ,gBAAoB,OAAQ,CAC5CvN,EAAG,gDACH+E,GAAI,WACW,gBAAoB,WAAY,CAC/CA,GAAI,UACU,gBAAoB,MAAO,CACzCyI,UAAW,eACNjmB,IAAOA,EAAkB,gBAAoB,IAAK,CACvDwd,GAAI,8BACU,gBAAoB,OAAQ,CAC1C/E,EAAG,gDACH+E,GAAI,aACJ0I,KAAM,OACNC,SAAU,UACVC,OAAQ,SACO,gBAAoB,IAAK,CACxCC,SAAU,gBACI,gBAAoB,IAAK,CACvC7I,GAAI,UACU,gBAAoB,IAAK,CACvCA,GAAI,SACU,gBAAoB,OAAQ,CAC1C/E,EAAG,w6DACH+E,GAAI,WACJ0I,KAAM,UACNC,SAAU,UACVC,OAAQ,SACO,gBAAoB,OAAQ,CAC3C3N,EAAG,sMACH6N,UAAW,gCACX9I,GAAI,WACJ0I,KAAM,UACNC,SAAU,UACVC,OAAQ,SACO,gBAAoB,OAAQ,CAC3C3N,EAAG,muBACH6N,UAAW,iCACX9I,GAAI,WACJ0I,KAAM,UACNC,SAAU,UACVC,OAAQ,SACO,gBAAoB,OAAQ,CAC3C3N,EAAG,kZACH6N,UAAW,+BACX9I,GAAI,WACJ0I,KAAM,UACNC,SAAU,UACVC,OAAQ,SACO,gBAAoB,OAAQ,CAC3C3N,EAAG,wJACH6N,UAAW,iCACX9I,GAAI,WACJ0I,KAAM,UACNC,SAAU,UACVC,OAAQ,SACO,gBAAoB,OAAQ,CAC3C3N,EAAG,2IACH6N,UAAW,gCACX9I,GAAI,WACJ0I,KAAM,UACNC,SAAU,UACVC,OAAQ,eAIZ,I,GAAIG,GAA0B,aAAiBhB,IyC5EzC7K,IzC6ES,IyC7EA,CACXvE,UAAW,CACPpV,SAAU,WACV4Z,IAAK,OACLqD,KAAM,OACNnC,QAAS,OACToE,cAAe,SACfuG,WAAY,WAGhBhM,OAAQ,CACNgM,WAAY,UAGdC,UAAW,CACTzG,WAAYA,GACZF,SAAUA,GACVS,cAAe,EACfpe,MAAOA,GACPwZ,OAAQ,WAGV+K,eAAgB,CACd7K,QAAS,OACToE,cAAe,UAGjB/J,MAAO,CACH8J,WAAYA,GACZF,SAAUA,GACVS,cAAe,EACfpe,MAAOA,GACPwZ,OAAQ,YACR0F,WAAYtB,IAGhB4G,MAAO,CACLxkB,MAAOA,IAGTykB,WAAY,CACV7lB,SAAU,QACV6Z,MAAOmF,GACP9B,OAAQ8B,GACRD,SAAUA,GACVC,QAASA,GACT8B,gBAAiB1f,GACjBmB,MAAOwc,GACPvc,OAAQuc,GACR8B,aAAc9B,GACd+G,OAAQ,GAGVC,WAAY,CACVC,UAAW,4BACXC,cArEY,CAChB7kB,MAAOoZ,IAAO0L,UAAU,CACtB,KAAM,CACJpF,gBAAiB1f,IAEnB,MAAO,CACL0f,gBAAiB1f,IAEnB,OAAQ,CACN0f,gBAAiB1f,OA4DQA,MACzB+kB,mBAAoB,aAGtBC,UAAW,CACTtF,gBAAiB1f,IAGnBilB,IAAK,CACH9jB,MAAO,OACPC,OAAQ,OACR2iB,KAAM,WAINmB,G,kDACJ,WAAYvM,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,CACTuM,mBAAmB,EACnBC,mBAAmB,EACnBC,iBAAiB,EACjBC,sBAAsB,EACtBC,gBAAgB,GAPD,E,0CAWnB,WACE,IAAIC,EAAiBjN,GAAOvE,UACxByR,EAAclnB,KAAKqa,MAAMuM,kBAAoB,CAAC5M,GAAOxE,MAAOwE,GAAOiM,OAASjM,GAAOxE,MACnF2R,EAAennB,KAAKqa,MAAMwM,kBAAoB,CAAC7M,GAAOxE,MAAOwE,GAAOiM,OAASjM,GAAOxE,MACpF4R,EAAapnB,KAAKqa,MAAMyM,gBAAkB,CAAC9M,GAAOxE,MAAOwE,GAAOiM,OAASjM,GAAOxE,MAChF0Q,EAAalmB,KAAKqnB,gBACtB,OACE,uBAAK3M,MAAOuM,EAAZ,UACE,sBAAKvM,MAAOV,GAAO+L,UAAnB,8BACA,uBAAKrL,MAAOV,GAAOgM,eAAnB,UACE,sBAAKtL,MAAOwM,EACRI,QAAStnB,KAAKsnB,QAAQ5X,KAAK1P,KAAM6iB,GAAWC,SAC5CyE,aAAcvnB,KAAKwnB,eAAe9X,KAAK1P,MACvCynB,aAAcznB,KAAKwnB,eAAe9X,KAAK1P,MAH3C,+BAMA,sBAAK0a,MAAOyM,EACVG,QAAStnB,KAAKsnB,QAAQ5X,KAAK1P,KAAM6iB,GAAWE,SAC5CwE,aAAcvnB,KAAK0nB,eAAehY,KAAK1P,MACvCynB,aAAcznB,KAAK0nB,eAAehY,KAAK1P,MAHzC,+BAMA,sBAAK0a,MAAO0M,EACRE,QAAStnB,KAAKsnB,QAAQ5X,KAAK1P,KAAM6iB,GAAWG,OAC5CuE,aAAcvnB,KAAK2nB,aAAajY,KAAK1P,MACrCynB,aAAcznB,KAAK2nB,aAAajY,KAAK1P,MAHzC,yBAODkmB,O,2BAKP,WACE,IAAI0B,EAAc5nB,KAAKqa,MAAM2M,eAAiB,CAAChN,GAAOkM,WAAYlM,GAAOoM,YAAc,CAACpM,GAAOkM,WAAYlM,GAAOF,QAElH,OADA8N,EAAc5nB,KAAKqa,MAAM0M,qBAAuB,CAAC/M,GAAOkM,WAAYlM,GAAOyM,WAAamB,EAEtF,sBAAKlN,MAAOkN,EACRN,QAAStnB,KAAK6nB,kBAAkBnY,KAAK1P,MACrCunB,aAAcvnB,KAAK8nB,kBAAkBpY,KAAK1P,MAC1CynB,aAAcznB,KAAK8nB,kBAAkBpY,KAAK1P,MAH9C,SAIE,eAAC,GAAD,CAAQ0a,MAAOV,GAAO0M,U,+BAK5B,WACE,IAAIqB,EAAW/nB,KAAKqa,MAAM0M,qBAC1B/mB,KAAKgoB,SAAS,CACZjB,sBAAuBgB,M,4BAI3B,WACE,IAAIA,EAAW/nB,KAAKqa,MAAMuM,kBAC1B5mB,KAAKgoB,SAAS,CACZpB,mBAAoBmB,M,4BAIxB,WACE,IAAIA,EAAW/nB,KAAKqa,MAAMwM,kBAC1B7mB,KAAKgoB,SAAS,CACZnB,mBAAoBkB,M,0BAIxB,WACE,IAAIA,EAAW/nB,KAAKqa,MAAMyM,gBAC1B9mB,KAAKgoB,SAAS,CACZlB,iBAAkBiB,M,qBAItB,SAAQxE,GACNvjB,KAAKoa,MAAM6N,gBAAgB1E,GAI3BvjB,KAAKgoB,SAAS,CACZhB,gBAAgB,M,+BAIpB,WAAqB,IAAD,OAClBhnB,KAAKoa,MAAM8N,oBACXjF,YAAW,WACT,EAAK+E,SAAS,CACZhB,gBAAgB,MAEjB,S,GAvGkBzM,IAAMK,WA2GhBC,eAAO8L,I,SCnLhBN,GAAY,CAChB8B,MAAOtN,IAAO0L,UAAU,CACtB,KAAM,CACJX,UAAW,cAEb,MAAO,CACLA,UAAW,cAEb,OAAQ,CACNA,UAAW,iBAKX5L,GAAS,CACXvE,WAAS,IACLpV,SAAU,WACV4Z,IAAK,KACLrX,MAAO,QACPC,OAAQ,QACRsY,QAAS,OACToE,cAAe,SACfI,WAAY,SACZC,eAAgB,SAChBuG,OAAQ,EACR3K,WAAY,WAVP,6BAWO,uDAXP,6BAYO,yDAZP,6BAaO,uDAbP,IAgBT4M,KAAM,CACFtC,WAAY,UAGhBtQ,MAAO,CACH8J,WAAYA,GACZF,SAAUA,GACViJ,UAAW,SACXC,SAAU,QACVzI,cAAe,EACfnY,QAAS,EACTjG,MAAOA,GAEP,4BAA6B,CAC3B2d,SAAUA,GACVkJ,SAAU,OACVzI,cAAe,IAIrB0I,cAAe,CACXpN,QAAS,OACToE,cAAe,SACfI,WAAY,UAGhB6I,aAAc,CACZpJ,SAAUA,IAGZqJ,UAAW,CACTnJ,WAAYA,GACZF,SAAUA,GACV3d,MAAOA,GACPqe,UAAW,IAAMT,IAGnBqH,IAAK,CACH9jB,MAAO,MACPC,OAAQ,MACR2iB,KAAM/jB,IAGRinB,MAAO,CACLpC,cAAezL,IAAO0L,UAAUoC,aAAW,aAC3CC,kBAlFiB,OAmFjBC,wBAAyB,eAG3BC,eAAgB,CACdzC,UAAW,uBACXC,cAAeD,GAAU8B,OAG3BvnB,KAAM,CACJ0lB,cAAezL,IAAO0L,UAAUwC,UAAQ,QACxCH,kBAAmB,OACnBC,wBAAyB,cACzBG,kBAAmB,YAGrBC,OAAQ,CACJ3J,WAAYA,GACZ7d,MAAOA,GACP2d,SAAUA,GACV8J,YAAa,QACbC,YAAa1nB,GACb2nB,YAAa,MACbtJ,UAAWT,GACXA,QAASA,GACTQ,cAAe,MACf5E,OAAQ,YAER,4BAA6B,CAC3BmE,SAAUA,GACVuB,WAAYtB,GACZyB,cAAezB,GACfuB,YAAavB,GACbwB,aAAcxB,KAIpB4G,MAAO,CACL9E,gBAAiB1f,GACjBA,MAAOA,IAGT4nB,WAAY,CACVhpB,SAAU,WACVoB,MAAOA,GACP2d,SAAUA,GACViJ,UAAW,SACXzH,YAAavB,GACbwB,aAAcxB,GACdC,WAAYA,GACZrF,IAAK,OAEL,4BAA6B,CAC3BmF,SAAUA,GACVnF,IAAK,OACL0G,WAAYtB,GACZyB,cAAezB,GACfuB,YAAavB,GACbwB,aAAcxB,KAIlBiK,YAAa,CACXjpB,SAAU,WACVgoB,UAAW,SACXC,SAAU,QACVhL,KAAM,OACN7b,MAAOA,GACP2d,SAAUA,GACVE,WAAYA,GACZsG,UAAW,iBAEX,4BAA6B,CAC3BtI,KAAM,QAIR,4BAA6B,CAC3BA,KAAM,QAIR,4BAA6B,CAC3B8B,SAAUA,GACVkJ,SAAU,OACVhL,KAAM,MACNqD,WAAYtB,GACZyB,cAAezB,GACfuB,YAAavB,GACbwB,aAAcxB,KAIlBkK,aAAc,CACZlpB,SAAU,WACV6Z,MAAO,OACPmO,UAAW,SACXC,SAAU,QACVlJ,SAAUA,GACVE,WAAYA,GACZ7d,MAAOA,GACPmkB,UAAW,gBAEX,4BAA6B,CAC3B1L,MAAO,QAIT,4BAA6B,CAC3BA,MAAO,QAGT,4BAA6B,CAC3BkF,SAAUA,GACVlF,MAAO,MACPoO,SAAU,OACV3H,WAAYtB,GACZyB,cAAezB,GACfuB,YAAavB,GACbwB,aAAcxB,KAIlBmK,cAAe,CACbnpB,SAAU,WACVoB,MAAOA,GACP2d,SAAUA,GACVE,WAAYA,GACZsB,YAAavB,GACbwB,aAAcxB,GACdgJ,UAAW,SACX9K,OAAQ,OAER,4BAA6B,CAC3B6B,SAAUA,GACV7B,OAAQ,OACRoD,WAAYtB,GACZyB,cAAezB,GACfuB,YAAavB,GACbwB,aAAcxB,MAKhBoK,G,kDACJ,WAAYrP,GAAQ,IAAD,8BACjB,cAAMA,IAGDC,MAAM,CACPqP,UAAU,EACVC,WAAW,EACXC,YAAY,EACZC,YAAY,GARC,E,0CAanB,WACE,IAAI5C,EAAiBjN,GAAOvE,UACxBiK,EAAU1f,KAAKqa,MAAMsP,UAAY3pB,KAAK8pB,YAAc9pB,KAAK+pB,WACzDC,EAAWhqB,KAAKiqB,cACpB,OACE,uBAAKvP,MAAOuM,EAAZ,UACGvH,EACAsK,EACD,eAAC,GAAD,S,uBAKN,WACE,OACE,uBAAKtP,MAAOV,GAAOuO,cAAnB,UACE,sBAAK7N,MAAO,CAACV,GAAOwO,aAAcxO,GAAO8O,gBAAzC,SACA,eAAC,GAAD,CAAQpO,MAAOV,GAAO0M,QAEvB,sBAAKhM,MAAOV,GAAOyO,UAAnB,0C,sBAQL,WACE,IAAIb,EAAc5nB,KAAKqa,MAAMuP,WAAa,CAAC5P,GAAOiP,OAAQjP,GAAOiM,OAAS,CAACjM,GAAOiP,QAC9EA,EAASjpB,KAAKqa,MAAMwP,WAAa,eAAC,IAAMK,SAAP,IACnC,yBACAC,SAAUnqB,KAAKqa,MAAMwP,WACrBtC,aAAcvnB,KAAKoqB,UAAU1a,KAAK1P,MAClCynB,aAAcznB,KAAKqqB,WAAW3a,KAAK1P,MACnCsnB,QAAStnB,KAAKsqB,QAAQ5a,KAAK1P,MAC3B0a,MAAOkN,EALP,mBAOF,OACI,gBAAC,IAAMsC,SAAP,WACI,sBAAKxP,MAAO,CAACV,GAAOxE,MAAOwE,GAAO0O,OAC7B6B,eAAgBvqB,KAAKwqB,oBAAoB9a,KAAK1P,MADnD,8BAECipB,O,yBAKX,WACE,OACE,gBAAC,IAAMiB,SAAP,WACE,sBAAKxP,MAAOV,GAAOqP,WAAnB,SAhSW,qFAiSX,sBAAK3O,MAAOV,GAAOsP,YAAnB,SA/RY,0FAgSZ,sBAAK5O,MAAOV,GAAOuP,aAAnB,SA/Ra,oFAgSb,sBAAK7O,MAAOV,GAAOwP,cAAnB,SAlSc,wF,qBAuSpB,WAAW,IAAD,OAERvG,YAAW,WACT,EAAK7I,MAAMqQ,iBACV,IAGHzqB,KAAKgoB,SAAS,CACV2B,WAAW,IAIf3pB,KAAK6c,iB,0BAGP,WAAgB,IAAD,OACboG,YAAW,WACLjO,IAAcnG,GAAwBiM,GACxC,EAAK4P,qBAEL,EAAK7N,iBAEN,M,gCAGL,WACE7c,KAAKgoB,SAAS,CACV0B,UAAU,IAGdnjB,QAAQC,IAAI,wBAEZxG,KAAKoa,MAAMuQ,mB,uBAGb,WACO3qB,KAAKqa,MAAMwP,YACd7pB,KAAKgoB,SAAS,CACZ4B,YAAY,M,wBAKlB,WACO5pB,KAAKqa,MAAMwP,YACd7pB,KAAKgoB,SAAS,CACZ4B,YAAY,M,iCAKlB,WAEE5pB,KAAKgoB,SAAS,CACZ6B,YAAY,Q,GA7HOtP,IAAMK,WAkIhBC,eAAO4O,ICxWhBzP,GAAS,CACbvE,UAAW,CACT0F,QAAS,OACToE,cAAe,UAGjBqL,YAAa,CACXvqB,SAAU,WACV8a,QAAS,QAGX0P,aAAc,CACZ1P,QAAS,UAGP2P,G,kDACJ,WAAY1Q,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAM,CACT0Q,kBAAkB,EAClBC,cAAc,EACdC,gBAAgB,GAGlB,EAAK5P,SAAWd,IAAMC,YACtB,EAAK0Q,gBAAkB3Q,IAAMC,YAC7B,EAAKc,OAASf,IAAMC,YAVH,E,0CAanB,WACE,IAAI2Q,EAAWnrB,KAAKqa,MAAM2Q,aAAehrB,KAAKorB,cAAgB,eAAC,IAAMlB,SAAP,IAC1DmB,EAAarrB,KAAKqa,MAAM4Q,eAAiBjrB,KAAKsrB,gBAAkB,eAAC,IAAMpB,SAAP,IAChEqB,EAAevrB,KAAKwrB,kBACxB,OACE,uBAAK9Q,MAAOV,GAAOvE,UAAnB,UACE,eAAC,GAAD,CAAOgF,IAAKza,KAAKqb,WAChB8P,EACAE,EACAE,O,yBAKP,WACE,OACE,eAAC,GAAD,CAAY9Q,IAAKza,KAAKsb,OACpB2M,gBAAiBjoB,KAAKioB,gBAAgBvY,KAAK1P,MAC3CkoB,kBAAmBloB,KAAKkoB,kBAAkBxY,KAAK1P,U,2BAIrD,WACE,OACE,eAAC,GAAD,CACEyqB,aAAczqB,KAAKyqB,aAAa/a,KAAK1P,MACrC2qB,eAAgB3qB,KAAK2qB,eAAejb,KAAK1P,U,6BAK/C,WACE,IAAIyrB,EAAqBzrB,KAAKqa,MAAM0Q,iBAAmB,CAAC/Q,GAAO4Q,YAAa5Q,GAAO6Q,cAAgB,CAAC7Q,GAAO4Q,aAC3G,OACE,sBAAKlQ,MAAO+Q,EAAZ,SACE,eAAC,GAAD,CAAchR,IAAKza,KAAKkrB,sB,0BAK9B,WACElrB,KAAKqb,SAAS/G,QAAQoX,e,4BAGxB,WACE1rB,KAAKgoB,SAAS,CACZiD,gBAAgB,EAChBD,cAAc,IAIhBhrB,KAAKqb,SAAS/G,QAAQqX,e,6BAGxB,SAAgBpI,GAEdvjB,KAAKgoB,SAAS,CACZ+C,kBAAkB,IAIpB/qB,KAAKkrB,gBAAgB5W,QAAQsX,OAAOrI,GAGpCvjB,KAAKqb,SAAS/G,QAAQ6H,uBAAsB,K,+BAG9C,WAAqB,IAAD,OAClBnc,KAAKqb,SAAS/G,QAAQkP,WACtBxjB,KAAKqb,SAAS/G,QAAQ6H,uBAAsB,GAC5C8G,YAAW,WACT,EAAK+E,SAAS,CACZ+C,kBAAkB,MAEnB,S,GAxFWxQ,IAAMK,WA4FTC,eAAOiQ,I,SCjHtBe,IAASlpB,OAAO,eAAC,KAAD,UAAW,eAAC,GAAD,MAAqBuZ,SAAS4P,eAAe,W","file":"static/js/main.087eb346.chunk.js","sourcesContent":["var _defs, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPigeon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"106px\",\n    height: \"159px\",\n    viewBox: \"0 0 106 159\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"filter\", {\n    id: \"filter_1\"\n  }, /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n    in: \"SourceGraphic\",\n    type: \"matrix\",\n    values: \"0 0 0 0 0.827451 0 0 0 0 0.827451 0 0 0 0 0.827451 0 0 0 1 0\"\n  })), /*#__PURE__*/React.createElement(\"filter\", {\n    id: \"filter_2\"\n  }, /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n    in: \"SourceGraphic\",\n    type: \"matrix\",\n    values: \"0 0 0 0 0.40392157 0 0 0 0 0.45490196 0 0 0 0 0.6117647 0 0 0 1 0\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0L105.925 0L105.925 158.126L0 158.126L0 0Z\",\n    id: \"path_1\"\n  }), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"mask_1\"\n  }, /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#path_1\"\n  })))), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Pigeon_Silhouette_clip_art\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0L105.925 0L105.925 158.126L0 158.126L0 0Z\",\n    id: \"Background\",\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#mask_1)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"layer2\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g3204\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.96014 49.8085L11.7452 41.9783L12.8327 35.8882L13.0503 27.188L13.7028 21.0979L15.2253 15.2253L18.9229 8.70017L22.8379 4.13258L29.5806 0.652514L37.4107 0L41.7608 1.52253L45.2409 3.91508L46.5459 7.83015L44.5884 9.13518L43.9359 12.1802L46.3284 15.4428L43.5008 17.4003L38.9333 21.0979L38.0632 24.3605L37.8457 30.0156L41.3258 38.2808L45.6759 44.1534L49.8085 51.1135L52.201 56.1161L50.2435 59.8137L46.3284 60.0312L43.7183 63.9463L39.8033 69.6014L38.7157 76.779L40.2383 85.4792L46.1109 94.6144L50.6785 96.7894L52.8535 101.792L58.2911 102.88L62.2062 108.317L70.6889 108.317L75.6915 108.1L87.4367 112.015L91.1343 111.797L101.139 120.497L105.925 124.847L97.2244 123.325L93.5268 125.282L83.9566 122.02L76.9965 118.757L71.7764 115.277L67.8613 113.537L63.5112 115.712L60.0312 117.235L61.7712 121.15L60.2487 133.548L57.6386 141.813L58.9436 145.293L61.9887 144.858L59.5962 148.773L57.8561 155.516L57.8561 158.126L55.2461 157.691L53.9411 151.383L45.6759 153.776L40.4558 155.081L36.7582 154.646L37.4107 153.123L40.6733 151.818L44.5884 150.513L39.3683 150.295L36.9757 150.078L35.0182 147.468L41.1083 147.033L48.0684 147.468L52.8535 145.293L54.1586 136.81L54.8111 131.155L52.8535 129.198L49.156 123.542L49.3735 117.67L48.5034 114.842L40.2383 113.537L38.9333 116.365L39.3683 121.15L40.8908 124.195L38.7157 128.328L35.6707 132.243L32.6256 137.68L32.8431 141.16L35.4532 142.683L40.4558 141.813L42.1958 142.465L38.9333 144.858L35.8882 144.858L32.6256 144.423L31.3206 147.903L32.8431 154.211L28.9281 151.383L28.2755 147.468L25.013 147.685L17.1828 150.078L12.8327 152.035L9.78769 152.035L11.3102 148.773L15.8778 147.468L21.7504 145.728L16.3128 145.728L10.0052 146.163L8.26516 144.423L8.70017 142.465L13.0503 143.335L19.3579 143.118L25.448 142.465L28.4931 137.463L31.1031 130.285L31.1031 128.545L28.7106 124.195L27.623 116.582L26.1005 111.797L19.3579 103.967L13.2678 97.8769L7.39514 88.0892L2.17504 77.214L0.217504 67.4263L0 60.9012L3.91508 54.3761L6.96014 49.8085L6.96014 49.8085Z\",\n    id: \"path2420\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.04251 7.1488L0 3.77865L0.306375 1.22551L1.94039 0L5.00415 2.04251L9.08918 4.28928L10.5189 6.22967L11.6423 8.78281L9.39556 8.47643L6.74029 7.45517L4.28927 7.25092L2.04251 7.1488L2.04251 7.1488Z\",\n    transform: \"translate(45.268066 8.334961)\",\n    id: \"path3194\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.5402 0L12.7657 2.65526L12.8678 6.94455L10.8253 8.98706L7.35304 9.39556L5.92329 10.8253L3.06377 14.8082L1.12338 19.3018L0 23.1825L1.02125 28.3909L3.16589 33.293L6.43391 39.012L9.29343 42.28L11.9487 42.9949L13.8891 46.2629L14.8082 48.1012L20.0166 50.1437L22.5698 54.1266L25.9399 55.4542L32.9866 55.1479L33.8036 52.0841L39.012 50.4501L39.4205 46.5693L39.2162 43.1992L41.1566 42.3821L40.2375 36.9695L37.378 31.3526L37.378 35.744L36.1525 41.5651L32.4759 45.4459L29.1058 49.5309L24.9186 49.6331L20.2209 46.9778L18.689 44.1183L21.5485 45.0374L26.1442 47.0799L29.5143 44.1183L33.3951 41.2588L35.6418 36.4589L36.0504 30.6377L34.7227 26.9612L31.5568 22.4676L28.5952 16.7486L25.7357 11.4381L22.3655 6.12754L17.5656 1.73614L11.5402 0L11.5402 0Z\",\n    transform: \"translate(40.059692 51.944336)\",\n    id: \"path3196\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.8295 18.2805L19.9145 17.5656L18.689 14.5018L21.5485 13.787L15.3188 8.7828L16.6465 12.3572L16.1359 14.3997L7.25092 14.5018L3.06377 13.787L4.28927 11.7444L10.3147 12.2551L14.0933 12.2551L12.7657 6.74029L9.39555 1.63401L7.76154 0L7.9658 3.57439L6.22967 3.77865L6.74029 8.88493L5.00415 10.6211L2.24676 12.153L0 13.1742L1.22551 14.8082L5.31053 15.8295L12.3572 17.9741L15.8295 18.2805L15.8295 18.2805Z\",\n    transform: \"translate(74.37427 92.28516)\",\n    id: \"path3198\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.88537 8.22331L7.06916 7.93477L8.80039 6.05928L8.94466 2.88537L7.3577 0.721344L3.46245 0L1.58695 2.16403L0 5.19367L2.88537 8.22331L2.88537 8.22331Z\",\n    transform: \"translate(28.639648 3.0722656)\",\n    id: \"path3200\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.432807 4.32806L0 2.59683L1.15415 0.577074L3.31818 0L4.47233 1.00988L5.0494 3.17391L3.75099 5.33794L0.432807 4.32806L0.432807 4.32806Z\",\n    transform: \"translate(31.092163 4.661133)\",\n    id: \"path3202\",\n    fill: \"inherit\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  })))))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPigeon);\nexport default __webpack_public_path__ + \"static/media/pigeon.efb3d8a2.svg\";\nexport { ForwardRef as ReactComponent };","/*\r\n  Name: CameraControl.js\r\n  Author: Amay Kataria\r\n  Date: 09/24/2021\r\n  Description: A module that handles camera and user interaction component.\r\n*/\r\n\r\nimport * as THREE from 'three'\r\nimport oc from 'three-orbit-controls'\r\n\r\nconst OrbitControls = oc(THREE); \r\n\r\nexport let OrbitParams = {\r\n    EnableControls: false,\r\n    EnablePan: true,\r\n    AutoRotate: false,\r\n    RotateSpeed: 0.1, \r\n    EnableKeys: true\r\n};\r\n\r\nclass CameraControl {\r\n    constructor() {\r\n        // Camera Setup\r\n        // (FOV, AspectRatio, Near Clipping, Far Clipping)\r\n        this.camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.05, 20000);\r\n        this.camera.position.set(10000, 10000, 500); \r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0));\r\n        this.camera.frustumCulled = false; \r\n\r\n        // this.controls = new OrbitControls(this.camera); \r\n        this.animationStopped = false;\r\n    }\r\n\r\n    update(scene, mouse, zoom) {\r\n        \r\n        // Once the camera animation stopped, return the control back to user\r\n        if (this.animationStopped){\r\n            this.camera.position.x += (mouse.x - this.camera.position.x ) * .05;\r\n            this.camera.position.y += (- mouse.y - this.camera.position.y ) * .05;\r\n            this.camera.position.z = zoom;\r\n        }\r\n\r\n        this.camera.lookAt(scene.position);\r\n        // this.updateControls();\r\n    }\r\n\r\n    updateControls() {\r\n        this.controls.update();\r\n        this.controls.enablePan = OrbitParams.EnablePan;\r\n        this.controls.autoRotate = OrbitParams.AutoRotate; \r\n        this.controls.autoRotateSpeed = OrbitParams.RotateSpeed;\r\n        this.controls.enabled = OrbitParams.EnableControls; \r\n        this.controls.enableKeys = OrbitParams.EnableKeys;\r\n    }\r\n\r\n    getCamera() {\r\n        return this.camera;\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default CameraControl;","/*\r\n  Name: LightingManager.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: Lighting module to control all the lights in the world. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\nclass LightingManager {\r\n    constructor(scene) {\r\n      // Lights\r\n      const hemiLight = new THREE.HemisphereLight(0xffdeff, 0xffffff, 1.6);\r\n      hemiLight.color.setHSL(0.6, 1, 0.6);\r\n      hemiLight.groundColor.setHSL(0.095, 1, 0.75);\r\n      hemiLight.position.set(0, 50, 0);\r\n      scene.add(hemiLight);\r\n\r\n      const dirLight = new THREE.DirectionalLight(0x00CED1, 0.6);\r\n      dirLight.color.setHSL( 0.1, 1, 0.95 );\r\n      dirLight.position.set( - 1, 1.75, 1 );\r\n      dirLight.position.multiplyScalar( 30 );\r\n      scene.add(dirLight);\r\n    }\r\n} \r\n\r\nexport default LightingManager;","/*\r\n  Name: RendererManager.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: Core renderer manager. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\nexport let RendererParams = {\r\n    DrawCalls: 0\r\n}\r\n\r\nclass RendererManager {\r\n    constructor() {\r\n        // Core renderer. \r\n        this.renderer = new THREE.WebGLRenderer({\r\n            antialias: true\r\n        }); \r\n        //this.renderer.setClearColor('white', 1);    // Set renderer properties\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        this.renderer.setPixelRatio(window.devicePixelRatio);\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding; \r\n    }\r\n\r\n    setAnimationLoop(animate) {\r\n        this.renderer.setAnimationLoop(animate);\r\n    }\r\n\r\n    getDomElement() {\r\n        return this.renderer.domElement; \r\n    }\r\n\r\n    render(scene, camera) {\r\n        this.renderer.render(scene, camera);\r\n    }\r\n\r\n    updateSize(width, height) {\r\n        this.renderer.setSize(width, height); \r\n    }\r\n\r\n    monitorDrawCalls() {\r\n        RendererParams.DrawCalls = this.renderer.info.render.calls;\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default RendererManager;\r\n","/*\n  Name: PatternManager.js\n  Author: Amay Kataria\n  Date: 09/21/2021\n  Description: A class that holds two different patterns for birds. These are configured using \n  two param objects that are exposed in the GUI. \n*/\n\nimport * as THREE from 'three'\n\n// Pattern exports for the GUI\nexport let PatternParams = {\n    PatternType: '' // Build the list in ServerGui. Ellipse / Rose-Curve\n}; \nexport let PatternTypes = {\n    Ellipse: 0,\n    RoseCurve: 1\n}\n\n// Ellipse Params\nexport let EllipseParams = {\n    Origin: {x: 0, y: 6, z: 0},\n    Radii: {x: 10, y: 10},\n    Amplitude: 0,\n    Speed: 0.3, \n    Direction: true\n}  \n\n// Rose-Curve Params\nexport let RoseCurveParams = {\n    Origin: {x: 0, y: 6, z: 0},\n    Radius: 5,\n    Phase: 0.5, \n    NumPetals: 3, \n    Amplitude: 0,\n    Sinusoidal: true,\n    Direction: true,\n    Speed: 0.3\n}\n\nclass Pattern {\n    constructor(patternObj) {\n        this.theta_rad = 0; \n        this.amp = patternObj.amp;  \n        this.isClockwise = patternObj.dir; \n        this.originPos = patternObj.pos; \n        this.moveFactor = patternObj.move; \n        this.targetPos = new THREE.Vector3(0, 0, 0); // Agents follow this target. \n        this.targetConst = new THREE.Vector3(0, 0, 0);\n    }\n\n    updateTheta(maxTheta) {\n        // Update theta based on direction. \n        this.theta_rad = this.isClockwise ? \n            this.theta_rad + this.moveFactor : \n            this.theta_rad - this.moveFactor; \n\n        // Reset theta. \n        this.theta_rad = this.theta_rad >= maxTheta ? 0 : this.theta_rad;\n    }\n\n    cartesianX(r) {\n        return this.originPos.x + r * Math.cos(this.theta_rad);\n    }\n\n    cartesianZ(r) {\n        return this.originPos.z + r * Math.sin(this.theta_rad);\n    }\n    \n    cartesianY(r) {\n        return this.originPos.y + this.amp * Math.sin(this.theta_rad);\n    }\n\n    getTargetPos() {\n        //return this.targetPos; \n        return this.targetPos;\n    }\n}\n\nexport const ellipseConstructor = (originPos, radX, radZ, amplitude, isClockwise, moveFactor) => {\n    return {\n        pos: originPos, // C\n        radx: radX,\n        radz: radZ,\n        amp: amplitude, // C\n        dir: isClockwise, // C\n        move: moveFactor // C\n    }; \n}\n\nexport class EllipsePattern extends Pattern {\n    constructor(patternObj) {\n        super(patternObj); \n        this.radX = patternObj.radx; \n        this.radZ = patternObj.radz; \n        this.maxTheta = 2*Math.PI; \n    }\n\n    update() {\n        this.updateGuiParams(); \n        // Ellipse: Cartesian coordinates. \n        let xPos = this.cartesianX(this.radX); // Defines polar curve. \n        let zPos = this.cartesianZ(this.radZ); // Define polar curve. \n        let yPos = this.cartesianY(); // Defines height. \n        this.targetPos.set(xPos, yPos, zPos); \n\n        this.updateTheta(this.maxTheta); \n    }\n\n    updateGuiParams() {\n        this.originPos.set(EllipseParams.Origin.x, EllipseParams.Origin.y, EllipseParams.Origin.z);\n        this.radX = EllipseParams.Radii.x;\n        this.radZ = EllipseParams.Radii.y;\n        this.amp = EllipseParams.Amplitude; \n        this.moveFactor = THREE.Math.degToRad(EllipseParams.Speed); \n        this.isClockwise = EllipseParams.Direction; \n    }   \n}\n\nexport const roseConstructor = (originPos, radius, phase, numPetals, amplitude, isSinusoidal, isClockwise, moveFactor) => {\n    return {\n        pos: originPos, // C\n        rad: radius,\n        ph: phase, \n        numP: numPetals,\n        amp: amplitude, // C\n        isSin: isSinusoidal,\n        dir: isClockwise, // C\n        move: moveFactor // C\n    }\n}\n\n// r = asin(b + cTheta); \n// r = acos(b + cTheta); \n// a = radius\n// b = phase\n// c = numPetals\nexport class RosePattern extends Pattern {\n    constructor(patternObj) {\n        super(patternObj); \n        this.rad = patternObj.rad; \n        this.phase = patternObj.ph; \n        this.numPetals = patternObj.numP;\n        this.isSin = patternObj.isSin; \n        this.maxTheta = Math.PI; \n    }\n\n    update() {\n        this.updateGuiParams(); \n\n        let xPos, yPos, zPos; \n        let r = this.isSin ? this.rad * Math.sin(this.phase + this.numPetals * this.theta_rad) : \n            this.rad * Math.cos(this.phase + this.numPetals * this.theta_rad)\n\n        xPos = this.cartesianX(r); // Defines polar curve. \n        zPos = this.cartesianZ(r); // Defines polar curve. \n        yPos = this.cartesianY(); // Defines height. \n\n        this.targetPos.set(xPos, yPos, zPos); \n\n        this.updateTheta(this.maxTheta);\n    }\n\n    updateGuiParams() {\n        this.originPos.set(RoseCurveParams.Origin.x, RoseCurveParams.Origin.y, RoseCurveParams.Origin.z); \n        this.rad = RoseCurveParams.Radius; \n        this.phase = RoseCurveParams.Phase;\n        this.amp = RoseCurveParams.Amplitude; \n        this.numPetals = RoseCurveParams.NumPetals;\n        this.isSin = RoseCurveParams.Sinusoidal; \n        this.isClockwise = RoseCurveParams.Direction; \n        this.moveFactor = THREE.Math.degToRad(RoseCurveParams.Speed); \n    }\n}\n\nexport class PatternManager {\n    setTargetPattern(curPatternType) {\n        if (curPatternType === PatternTypes.Ellipse) {\n            console.log('Creating Ellipse Pattern');\n            let pos = new THREE.Vector3(0, 6, 0); // Target position\n            let radX = 10; \n            let radZ = 10;\n            let amp = 0; \n            let dir = true; \n            let moveFactor = THREE.Math.degToRad(0.3); \n            let patternObj = ellipseConstructor(pos, radX, radZ, amp, dir, moveFactor); \n            this.curPattern = new EllipsePattern(patternObj); \n        } else if (curPatternType === PatternTypes.RoseCurve) {\n            // Initialize Rose-Curve pattern. \n            console.log('Creating Rose-Curve Pattern');\n            let pos = new THREE.Vector3(0, 6, 0); \n            let rad = 10; \n            let phase = 0.5; \n            let numPetals = 3; \n            let amp = 0;\n            let isSin = true; \n            let dir = true; \n            let moveFactor = THREE.Math.degToRad(0.3); \n            let patternObj = roseConstructor(pos, rad, phase, numPetals, amp, isSin, dir, moveFactor);\n            this.curPattern = new RosePattern(patternObj);\n        }\n    }\n\n    update() {\n        if (this.curPattern) {\n            this.curPattern.update(); \n            return this.curPattern.getTargetPos();\n        }        \n    }\n}","import * as THREE from 'three';\n\nexport let TargetParams = {\n    ShowTarget: true,\n    MaxTargetRadius: 100.0,\n    CurrentTargetRadius: 0\n}\n\nexport default class Target {\n    constructor(scene) {\n        let geometry = new THREE.SphereGeometry(1, 12, 12);\n        let material = new THREE.MeshLambertMaterial(); \n        material.emissive = new THREE.Color('#000000');\n        material.wireframe = false;\n        material.transparent = true; \n        material.opacity = 0.2; \n        this.mesh = new THREE.Mesh(geometry, material);\n\n        scene.add(this.mesh);\n    }\n\n    update(targetPosition, now) {\n        this.setVector(targetPosition);\n        this.setVisibility(TargetParams.ShowTarget);\n        let scale = TargetParams.MaxTargetRadius + Math.sin(now * 0.001) * TargetParams.MaxTargetRadius / 3.0; \n        this.mesh.scale.set(scale, scale, scale);\n        TargetParams.CurrentTargetRadius = scale; \n    }\n\n    getVector() {\n        return this.mesh.position; \n    }\n\n    setVector(v) {\n        this.mesh.position.copy(v);\n    }\n\n    setVisibility(v) {\n        this.mesh.visible = v;\n    }\n}","export default __webpack_public_path__ + \"static/media/pigeon_back.0a8e5722.glb\";","/*\r\n  Author: Amay Kataria\r\n  Date: 10/21/2021\r\n  Title: GPUPigeon.js\r\n  Description: A class that loads the pigeon geometry and prepares it as the \r\n  buffer geometry to be sent to the GPU. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'\r\nimport model from '../../models/pigeon_back.glb'; \r\n\r\n// WIDTH - Determines the max birds that can be created. \r\nexport const WIDTH = 50; \r\nexport const BIRDS = WIDTH * WIDTH; \r\n\r\nclass GPUPigeon {\r\n    constructor(onFinishedCallback) {\r\n        // Declare all the variables that I need to access. \r\n        this.durationAnimation = ''; \r\n        this.vertexPerBird = '';\r\n        this.indicesPerBird = '';\r\n        this.textureAnimation = ''; \r\n        this.birdGeometry = new THREE.BufferGeometry(); \r\n\r\n        // Maybe call this once the GUI is ready. \r\n        // ONCE the GUI variables are available, then \r\n        // we call this. \r\n        this.loadPigeon(onFinishedCallback); \r\n    }\r\n\r\n    loadPigeon(onFinishedCallback) {\r\n        let loader = new GLTFLoader(); \r\n        loader.loadAsync(model).then((gltf) => {\r\n            // Animation \r\n            const animations = gltf.animations;\r\n            this.durationAnimation = Math.round(animations[0].duration * 60);\r\n\r\n            // Geometry\r\n            const birdGeo = gltf.scene.children[0].geometry;\r\n\r\n            // All the morph positions. There are 8 targets for this geometry\r\n            // Each position contains the actual positions of each vertex. \r\n            const morphAttributes = birdGeo.morphAttributes.position;    \r\n\r\n            this.vertexPerBird = birdGeo.getAttribute('position').count;\r\n            this.indicesPerBird = birdGeo.index.array.length; \r\n\r\n            // Prepare animation texture. \r\n            const tHeight = this.nextPowerOf2(this.durationAnimation);\r\n            const tWidth = this.nextPowerOf2(this.vertexPerBird);\r\n            // Every vertex has (x, y, z) coords so mult by 3. \r\n            const tData = new Float32Array(3 * tWidth * tHeight); \r\n\r\n            for ( let i = 0; i < tWidth; i ++ ) {\r\n                for ( let j = 0; j < tHeight; j ++ ) {\r\n                    const offset = j * tWidth * 3;\r\n        \r\n                    const curMorph = Math.floor(j / this.durationAnimation * morphAttributes.length);\r\n                    const nextMorph = (curMorph + 1) % morphAttributes.length;\r\n                    const lerpAmount = j / this.durationAnimation * morphAttributes.length % 1;\r\n        \r\n                    // Only fill animation data up till duration of animation. \r\n                    if (j < this.durationAnimation) {\r\n                        // d0, d1 are actual vertex positions in the morphAttributes\r\n                        let d0, d1; \r\n        \r\n                        // For the duration of the animation, we calculate the transition\r\n                        // between the morph positions at each duration and store it in tData\r\n                        // tData contains the vertex position at each duration of an animation \r\n                        // for a single bird. \r\n                        d0 = morphAttributes[curMorph].array[i * 3];\r\n                        d1 = morphAttributes[nextMorph].array[i * 3];\r\n        \r\n                        if (d0 !== undefined && d1 !== undefined) \r\n                            tData[offset + i * 3] = this.lerp(d0, d1, lerpAmount);\r\n        \r\n                        d0 = morphAttributes[ curMorph ].array[ i * 3 + 1 ];\r\n                        d1 = morphAttributes[ nextMorph ].array[ i * 3 + 1 ];\r\n        \r\n                        if (d0 !== undefined && d1 !== undefined) \r\n                            tData[offset + i * 3 + 1] = this.lerp(d0, d1, lerpAmount);\r\n        \r\n                        d0 = morphAttributes[curMorph].array[i * 3 + 2];\r\n                        d1 = morphAttributes[nextMorph].array[i * 3 + 2];\r\n        \r\n                        if (d0 !== undefined && d1 !== undefined) \r\n                            tData[offset + i * 3 + 2] = this.lerp(d0, d1, lerpAmount);\r\n                    }\r\n                }\r\n            }\r\n            \r\n            // Here we define our Data texture based on the tData that we just prepared. \r\n            // DataTexture is inherited from Texture (this is how a texture is internally stored in Three.js)\r\n            this.textureAnimation = new THREE.DataTexture(tData, tWidth, tHeight, THREE.RGBFormat, THREE.FloatType);\r\n            // textureAnimation.needsUpdate = false; // Don't need this since texture is not updating\r\n\r\n            // Prepare the BUFFER GEOMETRY. \r\n            const vertices = [], color = [], reference = [], seeds = [], indices = [];\r\n            const totalVertices = this.vertexPerBird * BIRDS * 3; // TOTAL VERTICES IN THE SCENE. \r\n\r\n            // NOTE: Blender exports color attribute with RGBA. We need to filter out\r\n            // Alpha values from it and just use 3 channel color. \r\n            let birdColArray = birdGeo.getAttribute('color').array; \r\n            let newBirdColArray = []; \r\n            let skip = 3; \r\n            for (let i = 0, j = 0; i < birdColArray.length; i++) {\r\n                if (i % skip === 0 && i !== 0) {\r\n                    // Skip alpha from the array.\r\n                    skip = skip + 4; \r\n                } else {\r\n                    newBirdColArray[j] = birdColArray[i];\r\n                    j++; \r\n                }\r\n            }\r\n\r\n             // Prepare color and vertices attribute for the buffer. \r\n            // This buffer geometry is a collection of all the vertices \r\n            // of birds that are in the scene. So it's a single geometry that will be\r\n            // renderered per frame. Thus, Draw Call = 1\r\n            for (let i = 0; i < totalVertices; i ++ ) {\r\n                const bIndex = i % (this.vertexPerBird * 3);\r\n                vertices.push(birdGeo.getAttribute('position').array[bIndex]);\r\n                color.push(newBirdColArray[bIndex]);\r\n            }\r\n\r\n            // Seeds & References are for Animation of each bird. \r\n            // It's some strange arithmetic that I don't understand.\r\n            // But it's necessary to store the index of each frame in the animation. \r\n            // It's solid and we don't have to touch it at all.\r\n            let r = Math.random();\r\n            for (let i = 0; i < this.vertexPerBird * BIRDS; i ++) {\r\n                const bIndex = i % (this.vertexPerBird);\r\n                const bird = Math.floor(i / this.vertexPerBird);\r\n                if (bIndex === 0) r = Math.random();\r\n                const j = ~ ~ bird;\r\n                const x = (j % WIDTH) / WIDTH;\r\n                const y = ~ ~ (j / WIDTH) / WIDTH;\r\n                reference.push(x, y, bIndex / tWidth, this.durationAnimation / tHeight);\r\n                seeds.push(bird, r, Math.random(), Math.random());\r\n            }\r\n\r\n            // We need to push the indices for each bird that is getting added to this geometry. \r\n            // Incoming geometry has an index array that represents something realted to the vertices \r\n            // of the triangles that are added to the geometry. \r\n            for (let i = 0; i < this.indicesPerBird * BIRDS; i++) {\r\n                const offset = Math.floor(i / this.indicesPerBird) * this.vertexPerBird * 3; // CRITICAL FIX: Contribute back to Three.js\r\n                indices.push(birdGeo.index.array[i % this.indicesPerBird] + offset);\r\n            }\r\n\r\n            this.birdGeometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(vertices), 3));\r\n            // Don't need this - we are not doing anything with it in the shader for now. \r\n            // BirdGeometry.setAttribute('birdColor', new THREE.BufferAttribute( new Uint16Array( color ), 3,true)); \r\n            this.birdGeometry.setAttribute('color', new THREE.BufferAttribute(new Uint16Array(color), 3, true));\r\n            this.birdGeometry.setAttribute('reference', new THREE.BufferAttribute(new Float32Array(reference), 4));\r\n            this.birdGeometry.setAttribute('seeds', new THREE.BufferAttribute(new Float32Array(seeds), 4));\r\n            this.birdGeometry.setIndex(indices);\r\n\r\n            // This is done loading, so now I can init\r\n            // full pigeons. \r\n\r\n            onFinishedCallback(); \r\n        });\r\n    }\r\n\r\n    nextPowerOf2(n) {\r\n        return Math.pow(2, Math.ceil(Math.log(n) / Math.log(2)));\r\n    }\r\n    \r\n    lerp(value1, value2, amount) {\r\n        amount = Math.max(Math.min( amount, 1 ), 0);\r\n        return value1 + (value2 - value1) * amount;\r\n    }\r\n\r\n    setDrawRange(count) {\r\n        this.birdGeometry.setDrawRange(0, this.indicesPerBird * count);\r\n    }\r\n}\r\n\r\nexport default GPUPigeon; ","/*\r\n  Author: Amay Kataria\r\n  Date: 10/21/2021\r\n  Title: GPURenderer.js\r\n  Description: This handles all the logic related to GPUComputationRenderer that we \r\n  use to calculate velocity and position updates of the pigeon. \r\n*/\r\n\r\n\r\nimport * as THREE from 'three'\r\nimport { WIDTH } from '../Environment/GPUPigeon.js'\r\nimport { PigeonParams } from './PigeonManager.js';\r\nimport { GPUComputationRenderer } from \"three/examples/jsm/misc/GPUComputationRenderer.js\";\r\nimport fragmentShaderPosition from '../../shaders/fragmentShaderPosition.glsl'\r\nimport fragmentShaderVelocity from '../../shaders/fragmentShaderVelocity.glsl'\r\nimport { TargetParams } from '../Environment/Target.js';\r\n\r\n// const BOUNDS = 100;\r\n// const BOUNDS_HALF = BOUNDS / 2; \r\n\r\nexport let IsGPURendererReady = false; \r\n\r\nclass GPURenderer {\r\n    constructor(renderer) {\r\n        this.gpuCompute = new GPUComputationRenderer(WIDTH, WIDTH, renderer); \r\n        \r\n        // Textures for position and velocity computations. \r\n        // Each texture is WIDTH x WIDTH wide. Each texel holds \r\n        // 4 floats (RGBA) for computation. Array is divided in chunks of 4. \r\n        // This texture is of type THREE.DataTexture, which actually stores\r\n        // the data of a Three.js Texture. \r\n        const dtPosition = this.gpuCompute.createTexture();\r\n        const dtVelocity = this.gpuCompute.createTexture(); \r\n        this.fillPositionTexture(dtPosition);\r\n        this.fillVelocityTexture(dtVelocity); \r\n\r\n        // Variables are the ones that are actually undergoing computation in the GPURenderer. \r\n        // (VariableName, Shader, DataTexture)\r\n        // Each variable contains 'material' property, which is of type THREE.ShaderMaterial\r\n        this.velocityVariable = this.gpuCompute.addVariable(\"textureVelocity\", fragmentShaderVelocity, dtVelocity);\r\n        this.positionVariable = this.gpuCompute.addVariable(\"texturePosition\", fragmentShaderPosition, dtPosition);\r\n\r\n        // Set the dependencies between variables and their data textures will be available between each other. \r\n        // For example in fragmentShaderVelocity, the dataTexture for position is available. \r\n        this.gpuCompute.setVariableDependencies(this.velocityVariable, [this.positionVariable, this.velocityVariable]);\r\n        this.gpuCompute.setVariableDependencies(this.positionVariable, [this.positionVariable, this.velocityVariable]);\r\n\r\n        // Retrieve uniforms from ShaderMaterial, so it can be populated with custom uniforms. \r\n        this.positionUniforms = this.positionVariable.material.uniforms;\r\n        this.velocityUniforms = this.velocityVariable.material.uniforms;\r\n\r\n        // Position uniforms. \r\n        // TIME\r\n        this.positionUniforms[\"uTime\"] = { value: 0.0 };\r\n        this.positionUniforms[\"uDelta\"] = { value: 0.0 };\r\n        this.positionUniforms[\"uPause\"] = { value: false };\r\n\r\n        // Velocity uniforms. \r\n        // TIME \r\n        this.velocityUniforms[\"uTime\"] = { value: 1.0 };\r\n        this.velocityUniforms[\"uDelta\"] = { value: 0.0 };\r\n\r\n        // FLOCK \r\n        this.velocityUniforms[\"uAttractionForce\"] = { value: PigeonParams.Attraction }\r\n        this.velocityUniforms[\"uSeperationForce\"] = { value: PigeonParams.Seperation };\r\n        this.velocityUniforms[\"uAlignmentForce\"] = { value: PigeonParams.Alignment };\r\n        this.velocityUniforms[\"uCohesionForce\"] = { value: PigeonParams.Cohesion };\r\n        this.velocityUniforms[\"uShoot\"] = { value: false }; \r\n\r\n        // TARGET\r\n        this.velocityUniforms[\"uTargetPosition\"] = { value: new THREE.Vector3() };\r\n        this.velocityUniforms['uTargetRadius'] = { value: TargetParams.CurrentTargetRadius };\r\n\r\n        // SPEED\r\n        this.velocityUniforms[\"uMaxAgentSpeed\"] = { value: PigeonParams.MaxSpeed };\r\n        this.velocityUniforms[\"uSpeedLerp\"] = { value: PigeonParams.SpeedLerp };\r\n\r\n        // BOUNDING BOX\r\n        this.velocityUniforms[\"uBoundingBoxMin\"] = { value: new THREE.Vector3() };\r\n        this.velocityUniforms[\"uBoundingBoxMax\"] = { value: new THREE.Vector3() };\r\n        \r\n        // Velocity variable.\r\n        this.velocityVariable.wrapS = THREE.RepeatWrapping;\r\n        this.velocityVariable.wrapT = THREE.RepeatWrapping;\r\n\r\n        // Position variable. \r\n        this.positionVariable.wrapS = THREE.RepeatWrapping;\r\n        this.positionVariable.wrapT = THREE.RepeatWrapping;\r\n\r\n        // A simple test to make sure GPURenderer has everything. \r\n        const error = this.gpuCompute.init();\r\n\r\n        if ( error !== null ) {\r\n            console.error( error );\r\n        }\r\n        \r\n        // GPU Renderer is ready. \r\n        IsGPURendererReady = true;\r\n\r\n        this.pause = false;\r\n        this.shoot = false; \r\n        console.log('GPU Renderer Ready.') \r\n    } \r\n\r\n    update(delta, now, targetPosition, boundingBox) {\r\n        // GPGPU shader uniform values that are changing on every frame.\r\n\r\n        // RESET\r\n        this.positionUniforms[\"uPause\"].value = this.pause;\r\n\r\n        // TIME\r\n        this.positionUniforms[\"uDelta\"].value = delta; \r\n        this.positionUniforms[\"uTime\"].value = now;\r\n        this.velocityUniforms[\"uDelta\"].value = delta;\r\n        this.velocityUniforms[\"uTime\"].value = now;\r\n\r\n        // FLOCK \r\n        this.velocityUniforms[\"uAttractionForce\"].value = PigeonParams.Attraction;\r\n        this.velocityUniforms['uSeperationForce'].value = PigeonParams.Seperation; \r\n        this.velocityUniforms['uAlignmentForce'].value = PigeonParams.Alignment;\r\n        this.velocityUniforms['uCohesionForce'].value = PigeonParams.Cohesion;\r\n        this.velocityUniforms['uShoot'].value = this.shoot;\r\n\r\n        // TARGET\r\n        this.velocityUniforms['uTargetPosition'].value.set(targetPosition.x, targetPosition.y, targetPosition.z);\r\n        this.velocityUniforms['uTargetRadius'].value = TargetParams.CurrentTargetRadius;\r\n\r\n        // SPEED\r\n        this.velocityUniforms['uMaxAgentSpeed'].value = PigeonParams.MaxSpeed; \r\n        this.velocityUniforms[\"uSpeedLerp\"].value = PigeonParams.SpeedLerp;\r\n\r\n        // BOUNDING BOX\r\n        this.velocityUniforms[\"uBoundingBoxMin\"].value.set(boundingBox.min.x, boundingBox.min.y, boundingBox.min.z);\r\n        this.velocityUniforms[\"uBoundingBoxMax\"].value.set(boundingBox.max.x, boundingBox.max.y, boundingBox.max.z); \r\n\r\n        // Compute velocity and position shaders and \r\n        // populate the vel and pos textures with new values.\r\n        this.gpuCompute.compute();\r\n\r\n        // Make sure it's not resetting again \r\n        // until actually reset. \r\n        if (this.pause) {\r\n            this.pause = false;\r\n        }\r\n\r\n        // @Yu-jeng - Decide when to turn the\r\n        // value to false. Right now, we turn it \r\n        // on, shader receives it once and then we turn \r\n        // it off. Since this will be like a single impact, \r\n        // maybe this is okay. \r\n        if (this.shoot) {\r\n            this.shoot = false; \r\n        }\r\n    }\r\n\r\n    // Starting positions. \r\n    fillPositionTexture(texture) {\r\n        // Size of this array is actually WIDTH x WIDTH * 4;\r\n        const theArray = texture.image.data;\r\n        // Each texel is 4 floats. \r\n        for (let k = 0, kl = theArray.length; k < kl; k += 4) {\r\n            // Can remove BOUNDS they are all emanate from the center. \r\n            // const x = Math.random() * BOUNDS;\r\n            // const y = Math.random() * BOUNDS;\r\n            // const z = Math.random() * BOUNDS;\r\n            const x = Math.random() - 0.5;\r\n            const y = Math.random() - 0.5;\r\n            const z = Math.random() - 0.5;\r\n\r\n            // 4th. \r\n            theArray[k + 0] = x;\r\n            theArray[k + 1] = y;\r\n            theArray[k + 2] = z;\r\n            theArray[k + 3] = 1;\r\n        }\r\n    }\r\n\r\n    // Starting velocities. \r\n    fillVelocityTexture(texture) {\r\n        const theArray = texture.image.data;\r\n        for ( let k = 0, kl = theArray.length; k < kl; k += 4 ) {\r\n            const x = Math.random() - 0.5;\r\n            const y = Math.random() - 0.5;\r\n            const z = Math.random() - 0.5;\r\n\r\n            theArray[k + 0] = x * 5.0;\r\n            theArray[k + 1] = y * 5.0;\r\n            theArray[k + 2] = z * 5.0;\r\n            theArray[k + 3] = 1;\r\n        }\r\n    }\r\n\r\n    getPositionRenderTarget() {\r\n        return this.gpuCompute.getCurrentRenderTarget(this.positionVariable).texture; \r\n    }\r\n\r\n    getVelocityRenderTarget() {\r\n        return this.gpuCompute.getCurrentRenderTarget(this.velocityVariable).texture;\r\n    }\r\n\r\n    pausePigeons() {\r\n        this.pause = true; \r\n    }\r\n\r\n    shootPigeons() {\r\n        this.shoot = true; \r\n    }\r\n}\r\n\r\nexport default GPURenderer;","export default \"/*\\r\\n  Name: fragmentShaderVelocity.js\\r\\n  Author: Amay Kataria\\r\\n  Date: 10/21/2021\\r\\n  Description: Core shader responsible for everything related to how to the velocity of each pigeon in the flock changes. \\r\\n*/\\r\\n\\r\\n/*\\r\\n*   UNIFORMS\\r\\n*/\\r\\n\\r\\n// TIME\\r\\nuniform float uTime;\\r\\nuniform float uDelta;\\r\\n\\r\\n// FLOCK\\r\\nuniform float uAttractionForce;\\r\\nuniform float uSeperationForce; \\r\\nuniform float uAlignmentForce;\\r\\nuniform float uCohesionForce;\\r\\nuniform float uSpeedLerp;\\r\\nuniform bool uShoot; \\r\\n\\r\\n// TARGET\\r\\nuniform vec3 uTargetPosition; \\r\\nuniform float uTargetRadius;\\r\\n\\r\\n// SPEED\\r\\nuniform float uMaxAgentSpeed; \\r\\n\\r\\n// BOUNDING BOX\\r\\nuniform vec3 uBoundingBoxMin; \\r\\nuniform vec3 uBoundingBoxMax; \\r\\n\\r\\n// Resolution is passed by default from GPUComputationRenderer\\r\\n// That is WIDTH x WIDTH, with which we initialized it. \\r\\nconst float width = resolution.x;\\r\\nconst float height = resolution.y;\\r\\n\\r\\n/*\\r\\n* CONSTANTS\\r\\n*/\\r\\nconst float PI = 3.141592653589793;\\r\\nconst float PI_2 = PI * 2.0;\\r\\n\\r\\n/*\\r\\n* GLOBAL VARIABLES \\r\\n* Reused across the shader. \\r\\n*/\\r\\nvec3 acceleration = vec3(0.0);\\r\\nvec3 selfPosition, selfVelocity; \\r\\nvec3 borders = vec3(0.0);\\r\\nvec3 vDesired = vec3(0.0);\\r\\n\\r\\nfloat tempForce = 0.0;\\r\\n\\r\\n// A simple random function. \\r\\nfloat rand(vec2 co){\\r\\n    return fract(sin( dot( co.xy, vec2(12.9898,78.233) ) ) * 43758.5453);\\r\\n}\\r\\n\\r\\n// 2D rot matrix. \\r\\nmat2 get2dRotateMatrix(float _angle) {\\r\\n    return mat2(cos(_angle), - sin(_angle), sin(_angle), cos(_angle));\\r\\n}\\r\\n\\r\\nvec3 updateTargetPosition() {\\r\\n    mat2 rotateMatrix = get2dRotateMatrix(-PI/2.0); \\r\\n    vec3 newTargetPosition = uTargetPosition; \\r\\n    newTargetPosition.xz = rotateMatrix * newTargetPosition.xz; \\r\\n    return newTargetPosition; \\r\\n}\\r\\n\\r\\nbool containsPoint(vec3 point) {\\r\\n    return point.x < uBoundingBoxMin.x || point.x > uBoundingBoxMax.x ||\\r\\n\\t\\t\\tpoint.y < uBoundingBoxMin.y || point.y > uBoundingBoxMax.y ||\\r\\n\\t\\t\\tpoint.z < uBoundingBoxMin.z || point.z > uBoundingBoxMax.z ? false : true;\\r\\n}\\r\\n\\r\\nvec3 boundingBoxCheck(vec3 newVelocity) {\\r\\n    bool contains = containsPoint(selfPosition);\\r\\n\\r\\n    if (contains == true) {\\r\\n        // Which side of the border is the pigeon closer to\\r\\n        borders.x = abs(uBoundingBoxMax.x - selfPosition.x) < abs(uBoundingBoxMin.x - selfPosition.x) ? uBoundingBoxMax.x: uBoundingBoxMin.x;\\r\\n        borders.y = abs(uBoundingBoxMax.y - selfPosition.y) < abs(uBoundingBoxMin.y - selfPosition.y) ? uBoundingBoxMax.y: uBoundingBoxMin.y;\\r\\n        borders.z = abs(uBoundingBoxMax.z - selfPosition.z) < abs(uBoundingBoxMin.z - selfPosition.z) ? uBoundingBoxMax.z: uBoundingBoxMin.z;\\r\\n\\r\\n        // Set a vector that points away from the edges \\r\\n        vec3 diffVec = selfPosition - borders;\\r\\n\\r\\n        // Save the current box size in sumVec temporarily \\r\\n        vec3 boxSize = vec3(uBoundingBoxMax.x - uBoundingBoxMin.x, uBoundingBoxMax.y - uBoundingBoxMin.y, uBoundingBoxMax.z - uBoundingBoxMin.z);\\r\\n\\r\\n        // Normalize the value according a portion of the boxsize \\r\\n        boxSize /= 10.0;\\r\\n        diffVec /= boxSize;\\r\\n\\r\\n        // Scale up the value exponentially accoring to the normalized value\\r\\n        for (int i = 0; i <= 2; i++) {\\r\\n            tempForce = exp(1.5 - abs(diffVec[i]));\\r\\n            vDesired[i] = tempForce * sign(diffVec[i]);\\r\\n        }\\r\\n        newVelocity += vDesired;\\r\\n    } else {\\r\\n        // Reflect back towards center. \\r\\n        vec3 dir = vec3(0.) - selfPosition;\\r\\n        newVelocity = normalize(dir) * uMaxAgentSpeed;\\r\\n    }\\r\\n\\r\\n    return newVelocity; \\r\\n}\\r\\n\\r\\nvec3 updateBehavior() {   \\r\\n    float zoneRadius = uSeperationForce + uAlignmentForce + uCohesionForce;\\r\\n    float seperationThresh = uSeperationForce / zoneRadius;\\r\\n    float alignmentThresh = (uSeperationForce + uAlignmentForce) / zoneRadius;\\r\\n    float cohesionThresh = 1.0 - alignmentThresh; \\r\\n    float zoneRadiusSquared = zoneRadius * zoneRadius;\\r\\n\\r\\n    // Alignment, cohesion, seperation. \\r\\n    vec3 neighborPos, neighborVel; \\r\\n    vec3 newVelocity = selfVelocity; \\r\\n    for (float y = 0.0; y < height; y++) {\\r\\n        for (float x = 0.0; x < width; x++) {\\r\\n            vec2 ref = vec2(x, y) / resolution.xy; \\r\\n            vec3 neighborPos = texture2D(texturePosition, ref).xyz;\\r\\n            vec3 neighborVel = texture2D(textureVelocity, ref).xyz; \\r\\n\\r\\n            vec3 dir = neighborPos - selfPosition;\\r\\n            float dist = length(dir);\\r\\n\\r\\n            // Am I comparing to myself? Pass then. \\r\\n            if (dist < 0.0001) { \\r\\n                continue;\\r\\n            }\\r\\n\\r\\n            // Is this Agent outside my zone radius? Pass then. \\r\\n            float distSquared = dist * dist;\\r\\n            if (distSquared > zoneRadiusSquared) {\\r\\n                continue;\\r\\n            } else {\\r\\n                // How much in my zone is it? \\r\\n                float neighborThresh = (distSquared / zoneRadiusSquared); \\r\\n\\r\\n                // Within seperation threshold? \\r\\n                // Move apart for comfort.\\r\\n                if (neighborThresh < seperationThresh) {\\r\\n                    float f = (seperationThresh / neighborThresh - 1.0) * uDelta;\\r\\n                    newVelocity -= normalize(dir) * (f);\\r\\n                } else if (neighborThresh < alignmentThresh) { \\r\\n                    // Within alignment threshold, align with neighbor. \\r\\n                    float threshDelta = alignmentThresh - seperationThresh; \\r\\n                    float adjustedThresh = (neighborThresh - seperationThresh) / threshDelta; \\r\\n                    float f = (0.5 - cos(adjustedThresh * PI_2) * 0.5 + 0.5) * uDelta; \\r\\n                    newVelocity += normalize(neighborVel) * f; \\r\\n                } else if (neighborThresh < cohesionThresh) {\\r\\n                    // Attraction / Cohesion - move closer.\\r\\n                    float threshDelta = cohesionThresh - alignmentThresh; \\r\\n                    float adjustedThresh = (neighborThresh - alignmentThresh) / threshDelta;\\r\\n                    float f = (0.5 - (cos(adjustedThresh * PI_2) * -0.5 + 0.5)) * uDelta;\\r\\n                    newVelocity += normalize(dir) * f;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    return newVelocity; \\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n    // gl_FragCoord are pixel coordinates, but we need textureCoordinates\\r\\n    // to access the actual texel from the texture. We use this formula to\\r\\n    // calculate texture coordinate using resolution that is sent by default \\r\\n    // to the shader. \\r\\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\\r\\n    \\r\\n    // texturePosition, textureVelocity are data textures sent as we added them\\r\\n    // as dependencies while initializing our GPUComputationRenderer. \\r\\n    // This is the position (x, y, z) and velocity (x, y, z) for each bird, all being \\r\\n    // calculated and operated on in parallel. \\r\\n    selfPosition = texture2D(texturePosition, uv).xyz;\\r\\n    selfVelocity = texture2D(textureVelocity, uv).xyz;\\r\\n\\r\\n    // Adjust target position. \\r\\n    vec3 updatedTargetPos = updateTargetPosition();\\r\\n\\r\\n    // Cohesion, Seperation, Alignment\\r\\n    vec3 newVelocity = updateBehavior(); \\r\\n\\r\\n    // Moving target response. \\r\\n    vec3 dirToTarget = updatedTargetPos - selfPosition; \\r\\n    float distToTarget = length(dirToTarget);\\r\\n    if (distToTarget < uTargetRadius) {\\r\\n        float f = (1.0 - (distToTarget / uTargetRadius)) *  uAttractionForce;\\r\\n        newVelocity += normalize(dirToTarget) * f; \\r\\n    }\\r\\n\\r\\n    // Check if agent is in bounding box. \\r\\n    newVelocity = boundingBoxCheck(newVelocity); \\r\\n\\r\\n    // Clamp velocity. \\r\\n    if (length(newVelocity) > uMaxAgentSpeed) {\\r\\n        newVelocity = normalize(newVelocity) * uMaxAgentSpeed;\\r\\n    }\\r\\n\\r\\n    newVelocity = mix(newVelocity, selfVelocity, uDelta * 0.001);\\r\\n\\r\\n    // Output a velocity that is stored in the texture. \\r\\n    gl_FragColor = vec4(newVelocity, 1.0);\\r\\n}\";","export default \"/*\\r\\n  Name: fragmentShaderPosition.js\\r\\n  Author: Amay Kataria\\r\\n  Date: 10/21/2021\\r\\n  Description: Core shader for updating the position of each pigeon in the flock. \\r\\n*/\\r\\n\\r\\nuniform float uTime;\\r\\nuniform float uDelta;\\r\\nuniform bool uPause;\\r\\n\\r\\n// This influence how quick the pigeon advances to the position. \\r\\n// Maybe bring this in from the GUI. \\r\\nfloat posInfluence = 5.0; \\r\\n\\r\\nvoid main()\\t{\\r\\n    // Calculate texture coordinates from pixel coordinates (gl_FragColor)\\r\\n    // resolution is passed as a default uniform, which is stored as WIDTH,\\r\\n    // HEIGHT as initialized in GPUComputationRenderer.\\r\\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\\r\\n\\r\\n    // Store this to work on later. \\r\\n    vec4 tempPos = texture2D(texturePosition, uv); \\r\\n    vec3 position = tempPos.xyz;\\r\\n    vec3 velocity = texture2D(textureVelocity, uv).xyz;\\r\\n\\r\\n    // By default we set this \\r\\n    float phase = tempPos.w;\\r\\n    phase = mod((phase + uDelta + length( velocity.xz ) * uDelta * 3. + max(velocity.y, 0.0 ) * uDelta * 6.), 62.83);\\r\\n\\r\\n    vec3 newPosition = position + velocity * uDelta * posInfluence;\\r\\n\\r\\n    // When paused, return current position.\\r\\n    if (uPause == true) {\\r\\n      newPosition = position;\\r\\n    }\\r\\n    \\r\\n    gl_FragColor = vec4(newPosition, phase);\\r\\n}\";","/*\r\n  Name: PigeonManager.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: Container class that manages all the pigeons that are created in the world. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\n// import GPUPigeon from '../Environment/GPUPigeon.js'\r\nimport { PatternManager } from './PatternManager';\r\nimport Target from '../Environment/Target'\r\nimport GPUPigeon from '../Environment/GPUPigeon.js';\r\nimport { BIRDS } from '../Environment/GPUPigeon.js'\r\nimport GPURenderer from './GPURenderer.js';\r\n\r\n\r\n// Set this to true when everything has been loaded. \r\nexport let IsPigeonManagerReady = false; \r\n\r\n// PARAMS shared between GPURenderer \r\n// and PigeonManager. \r\nexport let PigeonParams = {\r\n    Attraction: 5.0,\r\n    Seperation: 20.0,\r\n    Alignment: 20.0,\r\n    Cohesion: 20.0,\r\n    Freedom: 0.75,\r\n    MaxSpeed: 5.0,\r\n    SpeedLerp: 0.1,\r\n    Size: 0.2,\r\n    Count: BIRDS\r\n}\r\n\r\nclass PigeonManager {\r\n    constructor(scene) {\r\n        // Manages the moving target for the flock. \r\n        this.patternManager = new PatternManager(); \r\n\r\n        // Create the target object that the pigeons are following. \r\n        this.target = new Target(scene);\r\n\r\n        // Clock, required for animation of the agents. \r\n        this.clock = new THREE.Clock(); \r\n\r\n        // Shader to set the uniforms on.\r\n        this.pigeonShader = ''; \r\n\r\n        // GPURenderer\r\n        this.gpuRenderer = '';\r\n    }\r\n    \r\n    setupTarget(curPatternType) {\r\n        // Create the target pattern.\r\n        this.patternManager.setTargetPattern(curPatternType); \r\n    }   \r\n\r\n    // Do this when we are doing the loading routine. \r\n    setupPigeonGPU(renderer, scene) {\r\n        // Initialize pigeon and set renderer etc. \r\n        this.pigeon = new GPUPigeon(this.initPigeons.bind(this, renderer, scene)); \r\n    }\r\n\r\n    update(boundingBox) {\r\n        if (IsPigeonManagerReady) {\r\n            let targetPosition = this.patternManager.update();\r\n\r\n            // If we have a valid target position, begin updating.\r\n            if (targetPosition) {\r\n                let delta = this.clock.getDelta();\r\n                let now = this.clock.oldTime;\r\n\r\n                // Update target. \r\n                this.target.update(targetPosition, now);\r\n\r\n                // Computer GPU values. \r\n                this.gpuRenderer.update(delta, now, targetPosition, boundingBox); \r\n                // Bird material's uniform value that is changing every frame. \r\n                if (this.pigeonShader) {\r\n                    this.pigeonShader.uniforms[\"time\"].value = now / 1000;\r\n                    this.pigeonShader.uniforms[\"delta\"].value = delta;\r\n\r\n                    // Bing pigeon size.\r\n                    this.pigeonShader.uniforms['size'].value = PigeonParams.Size; \r\n\r\n                    // Extract the data textures for Position and Velocity from GPURenderer and set it to the uniforms\r\n                    // of the bird's material to set the new location of the vertices in the BufferGeometry. \r\n                    this.pigeonShader.uniforms[\"texturePosition\"].value = this.gpuRenderer.getPositionRenderTarget();\r\n                    this.pigeonShader.uniforms[\"textureVelocity\"].value = this.gpuRenderer.getVelocityRenderTarget();\r\n                }\r\n\r\n                // Bind pigeon count.\r\n                this.pigeon.setDrawRange(PigeonParams.Count); \r\n            }\r\n        }\r\n    }\r\n\r\n    pausePigeons() {\r\n        if (this.gpuRenderer) {\r\n            this.gpuRenderer.pausePigeons();\r\n        }\r\n    }\r\n\r\n    initPigeons(renderer, scene) {\r\n        const geometry = this.pigeon.birdGeometry;\r\n\r\n        // simple standard material, which we will override to animate all the geometry\r\n        // that has been assigned into Bird Geometry. \r\n        const geoMaterial = new THREE.MeshStandardMaterial({\r\n            vertexColors: true,\r\n            flatShading: true,\r\n            side: THREE.DoubleSide,\r\n            roughness: 0,\r\n            metalness: 0\r\n        });\r\n\r\n        // Shader hook - to add some content before we actually compile\r\n        // the MeshStandardMaterial. We get access to the actual MeshStandard\r\n        // shader in this hook. \r\n        geoMaterial.onBeforeCompile = (shader) => {\r\n            // Add uniforms to the shader that will be used. \r\n            // Some uniforms are changing in every frame like texturePosition\r\n            // and textureVelocity, so we update that in animate().\r\n            shader.uniforms.texturePosition = { value: null };\r\n            shader.uniforms.textureVelocity = { value: null }; \r\n            // TextureAnimation is DataTexture for the animation that we prepared when loading our geometry. \r\n            shader.uniforms.textureAnimation = { value: this.pigeon.textureAnimation }; // Never have to update again.\r\n            shader.uniforms.time = { value: 1.0 };\r\n\r\n            shader.uniforms.size = { value: 0.2 };\r\n            shader.uniforms.delta = { value: 0.0 }; \r\n\r\n            // Replace token with token + insert. \r\n            let token = '#define STANDARD';\r\n            let insert = /* glsl that we will insert after STANDARD */\r\n            `\r\n                attribute vec4 reference;\r\n                attribute vec4 seeds;\r\n                uniform sampler2D texturePosition;\r\n                uniform sampler2D textureVelocity;\r\n                uniform sampler2D textureAnimation;\r\n                uniform float size;\r\n                uniform float time;\r\n            `;\r\n\r\n            // Add GLSL in MaterialShader. \r\n            shader.vertexShader = shader.vertexShader.replace( token, token + insert );\r\n\r\n            // Replace token with token + insert.\r\n            // NOTE: This shader is basically using positionData, velocityData, and animationData to update the position\r\n            // of each vertex in the Buffer Geometry. All the computation that happens on the GPU gets fed into this \r\n            // calculation to update the position of each vertex in the BufferGeometry based on the position, velocity, and animation \r\n            // frame that a bird is on. We don't need to touch this shader at all - This is rock solid. As we update the position and \r\n            // velocity shaders, this should just do the right thing. \r\n            token = '#include <begin_vertex>';\r\n            insert = /* glsl */\r\n            `\r\n                vec4 tmpPos = texture2D(texturePosition, reference.xy);\r\n\r\n                vec3 pos = tmpPos.xyz;\r\n                vec3 velocity = normalize(texture2D(textureVelocity, reference.xy).xyz);\r\n                vec3 aniPos = texture2D(textureAnimation, vec2(reference.z, mod(time + (seeds.x) * ((0.0004 + seeds.y / 10000.0) + normalize(velocity) / 20000.0), reference.w))).xyz;\r\n                vec3 newPosition = position;\r\n\r\n                newPosition = mat3(modelMatrix) * (newPosition + aniPos);\r\n                newPosition *= size + seeds.y * size * 0.2;\r\n\r\n                velocity.z *= -1.;\r\n                float xz = length(velocity.xz);\r\n                float xyz = 1.;\r\n                float x = sqrt(1. - velocity.y * velocity.y);\r\n\r\n                float cosry = velocity.x / xz;\r\n                float sinry = velocity.z / xz;\r\n\r\n                float cosrz = x / xyz;\r\n                float sinrz = velocity.y / xyz;\r\n\r\n                mat3 maty =  mat3(cosry, 0, -sinry, 0, 1, 0, sinry, 0, cosry);\r\n                mat3 matz =  mat3(cosrz , sinrz, 0, -sinrz, cosrz, 0, 0, 0,1);\r\n\r\n                newPosition =  maty * matz * newPosition;\r\n                newPosition += pos;\r\n\r\n                vec3 transformed = vec3(newPosition);\r\n            `;\r\n\r\n            // Insert GLSL into the shader. \r\n            shader.vertexShader = shader.vertexShader.replace(token, insert);\r\n\r\n            // Save shader to be accessed later in animate()\r\n            this.pigeonShader = shader;\r\n        };\r\n\r\n        // Use the BufferGeometry + MeshStandardMaterial (overridden) to create a mesh. \r\n        const birdMesh = new THREE.Mesh(geometry, geoMaterial);\r\n        birdMesh.rotation.y = Math.PI/2;\r\n        birdMesh.castShadow = true;\r\n        birdMesh.receiveShadow = true;\r\n        \r\n        scene.add(birdMesh);\r\n\r\n        // Initialize GPUComputationRenderer\r\n        this.gpuRenderer = new GPURenderer(renderer); \r\n\r\n        // All setup done, fire it away. \r\n        IsPigeonManagerReady = true;\r\n        console.log('Pigeon Manager Ready'); \r\n    }\r\n\r\n    shootPigeon() {\r\n        console.log('Pigeon Renderer: Shoot Pigeon');\r\n        if (this.gpuRenderer) {\r\n            this.gpuRenderer.shootPigeons();\r\n        }\r\n        \r\n        // OLD logic - now we send this info to the Shader. \r\n        // // Set one randome pigeon to be dead\r\n        // let choseOne = THREE.MathUtils.randInt(0, this.pigeons.length - 1)\r\n        // this.pigeons[choseOne].isAlive = false;\r\n        \r\n        // // Gun shot will scare them away\r\n        // AgentParams.SeperationForce *= 3\r\n        // AgentParams.AttractionForce *= 0.1\r\n    }\r\n\r\n    setNewPatternType(newPatternType) {\r\n        this.patternManager.setTargetPattern(newPatternType);\r\n        console.log('Setting pattern');\r\n    }\r\n} \r\n\r\nexport default PigeonManager;\r\n\r\n// UNUSED METHODS RIGHT NOW.\r\n// NEED TO BRING ALL THIS BACK!!\r\n// HOW, WHEN???\r\n// setup(scene, currentPatternType) {\r\n//     console.log('Pigeon Manager Pattern: ' + currentPatternType);\r\n    \r\n//     this.spawnPigeons(scene);\r\n\r\n//     // Create the target object that the pigeons are following. \r\n//     this.target = new Target(scene);\r\n\r\n//     // Create the target pattern.\r\n//     this.patternManager.setTargetPattern(currentPatternType); \r\n// }\r\n\r\n// update(boundingBox) {\r\n//     // Do any pigeons exist? \r\n//     if (this.pigeons.length > 0) {\r\n//         // Don't do anything until we have a valid target position. \r\n//         let patternPos = this.patternManager.update(); \r\n//         if (patternPos) {\r\n//             this.target.setVector(patternPos);\r\n//             this.target.setVisibility(TargetParams.ShowTarget);\r\n\r\n//             // Update octree. \r\n//             // Note: On every update, we instantiate a new octree\r\n//             // and populate it with the new pigeon position. So everytime, \r\n//             // the neighbors get updated. \r\n//             this.octreeManager.update(patternPos, this.pigeons); \r\n\r\n//             let nAgents = []; // Neighboring agents. \r\n\r\n//             // Delta change in time to advance the animation of the wings. \r\n//             let delta = this.clock.getDelta(); \r\n//             this.pigeons.forEach(p => {\r\n//                 // Update the target's position \r\n//                 p.setTarget(patternPos); \r\n//                 // Find and update the location of neighboring agents\r\n//                 nAgents = this.octreeManager.getNeighbours(p.position); \r\n//                 p.update(delta, nAgents, boundingBox);\r\n//             });\r\n//         }\r\n        \r\n//         // Slowly reset some of the agent params that was disturbed by the gun shot\r\n//         this.recoverFromShock()\r\n//     }\r\n// }\r\n\r\n// setNewPatternType(newPatternType) {\r\n//     this.patternManager.setTargetPattern(newPatternType)\r\n// }\r\n\r\n// spawnPigeons(scene) {\r\n//     // NOT IMPLEMENTED\r\n//     // ISSUES IN CLEANING GEOMETRY!!\r\n//     /// Empty the pigeons first. \r\n//     // if (this.pigeons.length > 0) {\r\n//     //     scene.children.forEach(child => {\r\n//     //         if (child.name === 'pigeon') {\r\n//     //             child.remove(child[0]);\r\n//     //         }\r\n//     //     });\r\n//     // }\r\n\r\n//     // Instantiate pigeons again. \r\n//     for (let i = 0; i < NUM_PIGEONS; i++) {\r\n//         let p = new Pigeon(scene); \r\n//         this.pigeons.push(p);\r\n//     }\r\n// }\r\n\r\n// shootPigeon() {\r\n//     console.log('Shoot Pigeon');\r\n//     // Set one randome pigeon to be dead\r\n//     let choseOne = THREE.MathUtils.randInt(0, this.pigeons.length - 1)\r\n//     this.pigeons[choseOne].isAlive = false;\r\n    \r\n//     // Gun shot will scare them away\r\n//     AgentParams.SeperationForce *= 3\r\n//     AgentParams.AttractionForce *= 0.1\r\n// }\r\n\r\n// recoverFromShock() {\r\n//     // Separation would decay overtime to recover from gun shot\r\n//     AgentParams.SeperationForce *= 0.999;\r\n//     AgentParams.SeperationForce = THREE.MathUtils.clamp(AgentParams.SeperationForce, 1.2, 2);      \r\n    \r\n//     // Agent would focus back on seeking target again\r\n//     AgentParams.AttractionForce *= 1.001;\r\n//     AgentParams.AttractionForce = THREE.MathUtils.clamp(AgentParams.AttractionForce, 0.5, 2);\r\n// }","/*\r\n  Name: RaycastManager.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: Core raycast manager. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\nconst COOLDOWN_PERIOD = 5; // 5 seconds. \r\nclass RaycastManager {\r\n    constructor(shootPigeonCallback) {\r\n        this.raycaster = new THREE.Raycaster();\r\n        this.mouse = new THREE.Vector2(); \r\n\r\n        this.shootPigeon = shootPigeonCallback;\r\n        this.isIntersecting = false;  \r\n\r\n        // Listen for mouse events for raycaster.  \r\n        window.addEventListener('click', this.onMouseClick.bind(this), false);\r\n\r\n        this.clock = new THREE.Clock(); \r\n    }\r\n\r\n    onMouseMove(event) {\r\n        this.mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\r\n        this.mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\r\n    }\r\n\r\n    intersect(camera, targetMesh, shouldAnimate) {\r\n        if (shouldAnimate) {\r\n            this.raycaster.setFromCamera(this.mouse, camera);\r\n\r\n            // Do we intersect with the target mesh? \r\n            const objects = this.raycaster.intersectObject(targetMesh); \r\n            this.isIntersecting = objects.length > 0;\r\n        }\r\n    }\r\n\r\n    onMouseClick() {\r\n        let elapsedTime = this.clock.getDelta(); \r\n        console.log(elapsedTime);\r\n        if (this.isIntersecting && elapsedTime > COOLDOWN_PERIOD) {\r\n            this.shootPigeon();            \r\n        }\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default RaycastManager;\r\n","/*\r\n  Name: Websocket.js\r\n  Author: Amay Kataria\r\n  Date: 09/24/2021\r\n  Description: Class responsible for communication with the webserver. We use websockets\r\n  technology for this. Here we have the websocket client, which communicates with backend\r\n  server over websockets.\r\n*/\r\n\r\nimport io  from 'socket.io-client'\r\n\r\n//const localhostURL = \"http://localhost:5000\";\r\nconst herokuURL = \"https://befantastic-martha.herokuapp.com\";\r\n\r\nclass Websocket {\r\n  constructor() {\r\n      this.siteURL = herokuURL + '/app'; \r\n\r\n      this.socket = io(this.siteURL, {\r\n          reconnection: true,\r\n          reconnectionDelay: 500,\r\n          reconnectionAttempts: Infinity\r\n      });\r\n\r\n      this.socket.once('connect', this.subscribe.bind(this));\r\n      this.handlePresetsCbk = ''; \r\n  }\r\n\r\n  subscribe() {\r\n      console.log('Connected');\r\n\r\n      // Subscribe to incoming events from the webserver here. \r\n      this.socket.on('time', this.logTime.bind(this));\r\n      this.socket.on('receivePresets', this.handlePresets.bind(this));\r\n  }\r\n\r\n  handlePresets(data) {\r\n    this.handlePresetsCbk(data); \r\n  }\r\n\r\n  // ----------------------- DATABASE CALLS --------------------- //\r\n  saveGuiPreset(presetName, json) {\r\n      let payload = {\r\n          'name':  presetName, \r\n          'data': json\r\n      }\r\n      this.socket.emit('savePreset', payload); \r\n  }\r\n\r\n  readAllPresets(readPresetsCallback) {\r\n    this.socket.emit('getPresets'); \r\n    this.handlePresetsCbk = readPresetsCallback; // Subscribe to receive data when the call completes. \r\n  }\r\n\r\n  deletePreset(presetName) {\r\n    this.socket.emit('deletePreset', presetName);\r\n  }\r\n\r\n  // -------------------- DON'T CHANGE THESE -------------------    \r\n  disconnect() {\r\n      console.log('Socket Server Disconnected.');\r\n  }\r\n\r\n  logTime(data) {\r\n      //console.log('Socket Connection Alive: ' + data);\r\n  }\r\n}\r\n\r\nexport default new Websocket();\r\n\r\n\r\n","/*\r\n  Name: SkyboxManager.js\r\n  Author: Amay Kataria\r\n  Date: 10/19/2021\r\n  Description: Core Skybox Manager that does everything related to the skybox. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\n// User interface Params\r\nexport let SkyboxParams = {\r\n    ShowSkybox: true,\r\n    ShowBoundingBox: true,\r\n    BoundingBoxScalar: 0 // Control the size of the bounding box using this scalar. \r\n}\r\n\r\nexport let IsSkyboxReady = false; \r\n\r\nclass SkyboxManager {\r\n    createSkybox(scene, frontVideoRef, backVideoRef, leftVideoRef, rightVideoRef, topVideoRef, bottomVideoRef) {\r\n        // Create video textures. \r\n        const rightTexture = new THREE.VideoTexture(rightVideoRef.current);\r\n        const leftTexture = new THREE.VideoTexture(leftVideoRef.current);\r\n        const topTexture = new THREE.VideoTexture(topVideoRef.current);\r\n        const bottomTexture = new THREE.VideoTexture(bottomVideoRef.current);\r\n        const backTexture = new THREE.VideoTexture(backVideoRef.current);\r\n        const frontTexture = new THREE.VideoTexture(frontVideoRef.current);\r\n        \r\n        // [right, left, top, bottom, back, front] - DO NOT CHANGE THE ARRAY ORDER. \r\n        let textureArray = [rightTexture, leftTexture, topTexture, bottomTexture, backTexture, frontTexture];\r\n        let materialArray = textureArray.map(t => {\r\n            return new THREE.MeshBasicMaterial({\r\n                map: t,\r\n                side: THREE.BackSide\r\n            }); \r\n        });\r\n\r\n        // Reuse this variable in other parts.\r\n        const geometry = new THREE.BoxGeometry(800, 800, 800); \r\n\r\n        // Material array is automatically arranged to the faces. \r\n        this.cubeMesh = new THREE.Mesh(geometry, materialArray);\r\n        scene.add(this.cubeMesh);\r\n        \r\n        this.createBoundingBox(scene); \r\n        this.lastBoundingBoxScalar = SkyboxParams.BoundingBoxScalar; \r\n\r\n        // Skybox is ready. \r\n        IsSkyboxReady = true; \r\n        console.log('Skybox Ready.')\r\n    }\r\n\r\n    createBoundingBox(scene) {\r\n        // Computer a bounding box from the Skybox geometry. \r\n        this.cubeMesh.geometry.computeBoundingBox();\r\n\r\n        // Extract and update the THREE.Box3 bounding box from it. \r\n        this.boundingBox = this.cubeMesh.geometry.boundingBox;\r\n        this.boundingBox.expandByScalar(SkyboxParams.BoundingBoxScalar); // Set how much scale down you want. \r\n        \r\n        // This is the red mesh that you see on the screen, which is added to the scene for the Bounding Box\r\n        this.boundingBoxMesh = new THREE.BoxHelper(this.cubeMesh, new THREE.Color(1, 0, 0));\r\n        this.boundingBoxMesh.visible = SkyboxParams.ShowBoundingBox;\r\n        scene.add(this.boundingBoxMesh); \r\n    }\r\n\r\n    getBoundingBox() {\r\n        // This returns boundingBox of type THREE.Box3. It's the true BoundingBox. \r\n        // You can run helper functions like intersects, isPointInside, etc on this. \r\n        if (this.boundingBox) {\r\n            return this.boundingBox; \r\n        }\r\n    }\r\n\r\n    update() {\r\n        this.cubeMesh.visible = SkyboxParams.ShowSkybox;\r\n        this.boundingBoxMesh.visible = SkyboxParams.ShowBoundingBox; \r\n\r\n        // Has BoundedBox Scalar changed?\r\n        // Update the bounded box! \r\n        if (SkyboxParams.BoundingBoxScalar !== this.lastBoundingBoxScalar) {\r\n            this.updateBoundingBox(); \r\n            this.lastBoundingBoxScalar = SkyboxParams.BoundingBoxScalar; \r\n        }\r\n    }\r\n\r\n    updateBoundingBox() {\r\n        // Create a new bounding box from original bbMesh.\r\n        this.cubeMesh.geometry.computeBoundingBox();\r\n        this.boundingBox = this.cubeMesh.geometry.boundingBox;\r\n        this.boundingBox.expandByScalar(SkyboxParams.BoundingBoxScalar); // Set how much scale down you want. \r\n\r\n        // Update the bounding box mesh on the screen with respect to bbMesh. \r\n        this.boundingBoxMesh.update(this.cubeMesh); \r\n    }\r\n\r\n    getMesh() {\r\n        return this.cubeMesh; \r\n    }\r\n} \r\n\r\nexport default SkyboxManager;","/*\r\n  Name: ServerGui.js\r\n  Author: Amay Kataria\r\n  Date: 09/24/2021\r\n  Description: A tweakpane GUI implementation that stores and loads presets from a backend server. \r\n  The data is transmitted across using a Websocket connection that is maintained throughout the\r\n  lifetime of the application. \r\n*/\r\n\r\nimport { Pane } from 'tweakpane';\r\nimport * as EssentialsPlugin from '@tweakpane/plugin-essentials';\r\nimport _ from 'lodash';\r\n\r\nimport Websocket from './Websocket';\r\n\r\nimport { TargetParams } from '../Environment/Target.js';\r\nimport { PatternParams, PatternTypes, EllipseParams, RoseCurveParams } from '../Managers/PatternManager.js';\r\nimport { PigeonParams } from '../Managers/PigeonManager';\r\nimport { OrbitParams } from '../Managers/CameraControl.js'\r\nimport { SkyboxParams } from '../Managers/SkyboxManager';\r\nimport { RendererParams } from '../Managers/RendererManager';\r\n\r\n// Set this to true when all presets have been received by this. \r\nexport let IsGUIReady = false; \r\n\r\n// Local params for the GUI. \r\n// Presets is a dynamically populated prop (critical)\r\nlet GuiParams = {\r\n    Preset: 'Global',\r\n    Presets: ''\r\n}\r\nconst PRESETS_IDX = 1; \r\nconst PATTERN_TYPE_IDX =0; \r\n\r\nclass ServerGui {\r\n    constructor(containerComponent) {\r\n        this.gui = new Pane({title: 'Pigeon GUI', container: containerComponent, expanded: false});\r\n        this.gui.registerPlugin(EssentialsPlugin);\r\n\r\n        // Preset name\r\n        this.gui.addInput(GuiParams, 'Preset');\r\n        \r\n        // Presets.\r\n        this.presetOptions = []; // Backup object of all the preset options. // Saves the truth. \r\n        this.buildPresets(); \r\n\r\n        // FPS\r\n        this.fpsGraph = this.gui.addBlade({\r\n            view: 'fpsgraph',\r\n            label: 'FPS',\r\n            lineCount: 2,\r\n        });\r\n\r\n        this.gui.addMonitor(RendererParams, 'DrawCalls');\r\n\r\n        // Orbit controls. \r\n        let f0 = this.gui.addFolder({ title: 'Orbit Controls', expanded: true });\r\n        f0.addInput(OrbitParams, 'EnableControls', {label: 'Enable Controls'});\r\n        f0.addInput(OrbitParams, 'EnablePan', {label: 'Enable Panning'});\r\n        f0.addInput(OrbitParams, 'AutoRotate', {label: 'Enable AutoRotate'});\r\n        f0.addInput(OrbitParams, 'RotateSpeed', { label: 'Rotation Speed', min: 0.1, max: 1.0 });\r\n        f0.addInput(OrbitParams, 'EnableKeys', {label: 'Enable Keys'});\r\n\r\n        // World Parameters.\r\n        let f1 = this.gui.addFolder({ title: 'Target Params', expanded: true });\r\n        f1.addInput(TargetParams, 'ShowTarget', {label: 'Show Target'});\r\n        f1.addInput(TargetParams, 'MaxTargetRadius', {label: 'Max Target Radius', min: 50.0, max: 200.0}); \r\n        f1.addMonitor(TargetParams, 'CurrentTargetRadius', {label: 'Current Target Radius'}); \r\n\r\n        // Pattern Parameters.\r\n        this.patternFolder = this.gui.addFolder({ title: 'Pattern Params', expanded: true });\r\n        this.currentPatternType = PatternTypes.Ellipse; \r\n        this.buildPatternTypeOptions(); // Default pattern type.\r\n        this.buildPatterns(); \r\n\r\n        // Ellipse Parameters. \r\n        this.ellipseParamsFolder = this.patternFolder.addFolder({ title: 'Ellipse Pattern Params', expanded: true });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Origin');\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Radii', {\r\n            x: { min: 0, max: 200 },\r\n            y: { min: 0, max: 200 }\r\n        });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Amplitude', { min: 0, max: 300 });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Speed', { min: 0, max: 2 });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Direction'); \r\n\r\n        this.roseCurveParamsFolder = this.patternFolder.addFolder({ title: 'Rose-Curve Pattern Params', expanded: true });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Origin');\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Radius', { min: 1, max: 300 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Phase', { min: 0, max: 10 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'NumPetals', { min: 1, max: 10, step: 1 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Amplitude', { min: 0, max: 300 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Sinusoidal');\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Direction');\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Speed', { min: 0, max: 2 });\r\n\r\n        // Show the params based on the current pattern selected.\r\n        this.showPatternParams();\r\n\r\n        let f2 = this.gui.addFolder({ title: 'Pigeon Params', expanded: true});\r\n        f2.addInput(PigeonParams, 'Size', {label: 'Size', min: 0, max: 1, step: 0.01}); \r\n        f2.addInput(PigeonParams, 'Attraction', {label: 'Attraction Force', min: 0, max: 100, step: 1}); \r\n        f2.addInput(PigeonParams, 'Seperation', {label: 'Seperation Force', min: 0, max: 100, step: 1}); \r\n        f2.addInput(PigeonParams, 'Alignment', {label: 'Alignment Force', min: 0, max: 100, step: 1}); \r\n        f2.addInput(PigeonParams, 'Cohesion', {label: 'Cohesion Force', min: 0, max: 100, step: 1}); \r\n        f2.addInput(PigeonParams, 'MaxSpeed', {label: 'Max Agent Speed', min: 1, max: 200, step: 0.1});\r\n        f2.addInput(PigeonParams, 'SpeedLerp', {label: 'Speed Lerp', min: 0, max: 1, step: 0.01});\r\n        f2.addInput(PigeonParams, 'Count', {label: 'Count', min: 0, max: PigeonParams.Count, step: 1}); \r\n        \r\n        // f2.addInput(AgentParams, 'AttractionForce', {label: 'Attraction Force', min: 0.5, max: 2, step: 0.05});\r\n        // f2.addInput(AgentParams, 'SmoothFactor', {label: 'Smooth Factor', min: 0.005, max: 0.1, step: 0.005});\r\n        // f2.addInput(AgentParams, 'SeperationForce', {label: 'Seperation Force', min: 0.5, max: 2, step: 0.1}); \r\n        // f2.addInput(AgentParams, 'CohesionForce', {label: 'Cohesion Force', min: 0.1, max: 2, step: 0.1});\r\n        // f2.addInput(AgentParams, 'AlignmentForce', {label: 'Alignment Force', min: 0, max: 2, step: 0.1}); \r\n\r\n        let f3 = this.gui.addFolder({ title: 'Skybox Params', expanded: true});\r\n        f3.addInput(SkyboxParams, 'ShowSkybox');\r\n        f3.addInput(SkyboxParams, 'ShowBoundingBox');\r\n        f3.addInput(SkyboxParams, 'BoundingBoxScalar', {min: -50, max: 0}).on('change', this.onBoundedBoxScalarChange.bind(this)); \r\n\r\n        // Save Preset button\r\n        this.gui.addButton({title: 'Save Preset'}).on('click', this.onSavePreset.bind(this));       \r\n        this.gui.addButton({title: 'Delete Preset'}).on('click', this.onDeletePreset.bind(this))\r\n\r\n        // Read presets from the database. \r\n        Websocket.readAllPresets(this.onReceivePresets.bind(this)); \r\n    }\r\n\r\n    onPresetSelected(event) {\r\n        // The value of the select preset is the JSON value. \r\n        let guiJson = JSON.parse(event.value); \r\n        this.gui.importPreset(guiJson);\r\n    }\r\n\r\n    onReceivePresets(data) {\r\n        console.log('All the presets received:');\r\n        console.log(data);\r\n\r\n        // If there are valid presets. \r\n        if (data.length > 0) {\r\n            // Build preset options. \r\n            data.forEach(d => {\r\n                let name = d['name'];\r\n                let config = d['config'];\r\n                // We push here rather than unshift because it's okay to just read this is in the order\r\n                // the entries were pushed in the database. \r\n                this.presetOptions.push({ text: name, value: JSON.stringify(config)});\r\n            }); \r\n            \r\n            // Dispose pattern type list. \r\n            // this.patternTypeList.dispose();   \r\n\r\n            // Get the first preset and set the GUI with that. \r\n            let defaultPresetJSON = data[0]['config'];\r\n            this.gui.importPreset(defaultPresetJSON);\r\n\r\n            // Rebuild the preset controller using this.presetOptions. \r\n            this.disposePresets();\r\n            this.buildPresets();\r\n\r\n            // Build Pattern type options. \r\n            this.currentPatternType = defaultPresetJSON['PatternType'];  \r\n            this.buildPatternTypeOptions(); \r\n            this.disposePatterns();\r\n            this.buildPatterns(); \r\n            this.showPatternParams();\r\n\r\n            // All presets received and everything is built. \r\n            IsGUIReady = true; \r\n            console.log('GUI Ready');\r\n        }\r\n    }\r\n\r\n    onSavePreset() {\r\n        let presetName = GuiParams.Preset; \r\n        if (presetName.length > 0) {\r\n            // Clear the presets first. \r\n            this.disposePresets(); \r\n            let json = this.gui.exportPreset(); \r\n\r\n            // Does this preset exist? \r\n            let preset = _.find(this.presetOptions, p => {\r\n                return p.text === presetName;\r\n            });\r\n\r\n            if (preset) {\r\n                // Update local json of the preset.\r\n                console.log('Preset Exists. Updating database and local copy of the preset.');\r\n                preset.value = JSON.stringify(json);\r\n                // NOTE: Update the preset options array to maintain the order of the updated presets. \r\n                // Unfortunately, we need to rebuild the presets everytime and we want to make sure \r\n                // the order of presets doesn't change. \r\n                this.presetOptions = _.sortBy(this.presetOptions, ({text}) => { \r\n                    return text === presetName ? 0: 1;\r\n                });\r\n            } else {\r\n                console.log('Preset doesnt exist. New entry in the database.');\r\n                this.presetOptions.unshift({ text: presetName, value: JSON.stringify(json)} );\r\n            }\r\n\r\n            // Update database. \r\n            Websocket.saveGuiPreset(presetName, json); \r\n\r\n            // Rebuild the presets. \r\n            this.buildPresets(); \r\n        } else {\r\n            alert('Not an empty entry please.');\r\n        }\r\n    }\r\n\r\n    onDeletePreset() {\r\n        if (this.presetOptions.length > 0) {\r\n            let presetName = GuiParams.Preset; \r\n            console.log('Deleting preset: ' + presetName);\r\n\r\n            // Remove that element from the array. \r\n            // Updates the original array. \r\n            _.remove(this.presetOptions, p => p.text === presetName); \r\n\r\n            // Delete the preset from the database. \r\n            Websocket.deletePreset(presetName); \r\n\r\n            // Rebuild the preset list. \r\n            this.disposePresets(); \r\n            this.buildPresets();\r\n\r\n            // Maybe I'm the last entry in the database. \r\n            if (this.presetOptions.length > 0) {\r\n                // Get preset options for the first preset options entry. \r\n                let presetJson = this.presetOptions[0].value; \r\n                this.gui.importPreset(JSON.parse(presetJson));\r\n            }\r\n        }\r\n    }\r\n\r\n    disposePresets() {\r\n        GuiParams.Presets = '';\r\n        this.presetList.dispose();\r\n    }\r\n\r\n    buildPresets() {\r\n        this.presetList = this.gui.addInput(GuiParams, 'Presets', {\r\n            index: PRESETS_IDX,\r\n            options: this.presetOptions\r\n        }); \r\n        this.presetList.on('change', this.onPresetSelected.bind(this));\r\n    }\r\n\r\n    buildPatternTypeOptions() {\r\n        if (this.currentPatternType === PatternTypes.Ellipse) {\r\n            this.patternTypeOptions = { Ellipse: PatternTypes.Ellipse, RoseCurve: PatternTypes.RoseCurve };\r\n        } else if (this.currentPatternType === PatternTypes.RoseCurve) {\r\n            this.patternTypeOptions = { RoseCurve: PatternTypes.RoseCurve, Ellipse: PatternTypes.Ellipse };\r\n        } else {\r\n            this.patternTypeOptions = { Ellipse: PatternTypes.Ellipse, RoseCurve: PatternTypes.RoseCurve }; // Default pattern type. \r\n        }\r\n    }\r\n\r\n    disposePatterns() {\r\n        this.patternList.dispose();\r\n    }\r\n\r\n    buildPatterns() {\r\n        this.patternList = this.patternFolder.addInput(PatternParams, 'PatternType', {\r\n            label: 'Pattern Type',\r\n            index: PATTERN_TYPE_IDX,\r\n            options: this.patternTypeOptions\r\n        }); \r\n        this.patternList.on('change', this.onPatternSelected.bind(this)); \r\n    }\r\n\r\n    onPatternSelected(ev) {\r\n        this.currentPatternType = ev.value;\r\n        this.showPatternParams();\r\n\r\n        // Fire the callback to notify that the pattern has changed.\r\n        this.patternChangeUpdate(this.currentPatternType); \r\n    }\r\n\r\n    showPatternParams() {\r\n        if (this.currentPatternType === PatternTypes.Ellipse) {\r\n            this.ellipseParamsFolder.hidden = false; \r\n            this.roseCurveParamsFolder.hidden = true; \r\n        } else if (this.currentPatternType === PatternTypes.RoseCurve) {\r\n            this.ellipseParamsFolder.hidden = true; \r\n            this.roseCurveParamsFolder.hidden = false;\r\n        }\r\n    }\r\n\r\n    subscribeForPatternChange(callback) {\r\n        this.patternChangeUpdate = callback; \r\n    }\r\n\r\n    onBoundedBoxScalarChange(event) {\r\n\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default ServerGui;","/*\r\n  Name: GuiPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: This is the container component where the GUI is placed in the project. It needs to be outside \r\n  the way of the title. We just move it slightly lower from the top. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\nimport ServerGui from '../Utilities/ServerGui';\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'absolute',\r\n        top: '30px',\r\n        right: '35px'\r\n    }\r\n};\r\n\r\nclass GuiPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n\r\n    this.guiRef = React.createRef();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref={this.guiRef} style={styles.container}></div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    let containerComponent = this.guiRef.current; \r\n    this.gui = new ServerGui(containerComponent); \r\n  }\r\n\r\n  getFpsGraph() {\r\n      return this.gui.fpsGraph; \r\n  }\r\n\r\n  subscribeForPatternChange(callback) {\r\n    this.gui.subscribeForPatternChange(callback);\r\n  }\r\n\r\n  getCurPatternType() {\r\n    return this.gui.currentPatternType; \r\n  }\r\n}\r\n\r\nexport default Radium(GuiPanel);","export default __webpack_public_path__ + \"static/media/front.b8b47d5c.mp4\";","export default __webpack_public_path__ + \"static/media/back.4ecafa9e.mp4\";","export default __webpack_public_path__ + \"static/media/top.7fc2b771.mp4\";","export default __webpack_public_path__ + \"static/media/bottom.a29ea400.mp4\";","export default __webpack_public_path__ + \"static/media/left.3f0b9e35.mp4\";","export default __webpack_public_path__ + \"static/media/right.05bf51bd.mp4\";","/*\n  Name: World.js\n  Author: Amay Kataria\n  Date: 08/19/2021\n  Description: This is where Three.js world is initialized. It's the entry point for the three-dimensional \n  world and creating all elements. \n*/\n\nimport React from 'react'\nimport Radium from 'radium'\nimport * as THREE from 'three'\nimport * as TWEEN from \"@tweenjs/tween.js\";\n\n// Utility components\n// import Terrain from '../Environment/Terrain.js'\nimport CameraControl from '../Managers/CameraControl.js'\nimport LightingManager from '../Managers/LightingManager.js'\nimport RendererManager from '../Managers/RendererManager.js'\nimport PigeonManager from '../Managers/PigeonManager.js'\nimport RaycastManager from '../Managers/RaycastManager.js'\n\n// Interface components. \nimport GuiPanel from './GuiPanel.js'\n\n// Clouds video. \nimport front from '../../assets/videos/front.mp4'\nimport back from '../../assets/videos/back.mp4'\nimport top from '../../assets/videos/top.mp4'\nimport bottom from '../../assets/videos/bottom.mp4'\nimport left from '../../assets/videos/left.mp4'\nimport right from '../../assets/videos/right.mp4'\nimport SkyboxManager, { IsSkyboxReady } from '../Managers/SkyboxManager.js'\n\n// Set this flag to true when the world has loaded all the videos \n// has created the three.js canvas.\nexport let IsWorldReady = false; \n\n// NOTE: Change this when we have more videos loading. \nconst NUM_VIDEOS_LOADED = 6; \n\nconst styles = {\n  container: {\n    width: '100vw', \n    height: '100vh',\n    overflow: 'hidden'\n  },\n\n  crosshair: {\n    cursor: 'crosshair'\n  },\n\n  video: {\n    display: 'none'\n  }\n};\n\nclass World extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state={};\n    this.mouse = new THREE.Vector2(0, 0);\n    this.zoom = 250;\n\n    // Animation flag. \n    this.shouldAnimate = true; \n\n    // Reference to the components that need to be accesed. \n    this.worldRef = React.createRef(); \n    this.guiRef = React.createRef(); \n    this.navRef = React.createRef(); \n    this.panelRef = React.createRef(); \n\n    // Video ref. \n    this.frontVideoRef = React.createRef();\n    this.backVideoRef = React.createRef(); \n    this.leftVideoRef = React.createRef();\n    this.rightVideoRef = React.createRef();\n    this.topVideoRef = React.createRef();\n    this.bottomVideoRef = React.createRef();\n    \n    // 3D scene object where everything is added. \n    this.scene = new THREE.Scene(); \n    this.scene.background = new THREE.Color('#F9FDFF');\n\n    // Camera & Interactive controls module. \n    this.cameraControl = new CameraControl(); \n\n    // Lights.\n    this.lightingManager = new LightingManager(this.scene); \n\n    // Simple instance. Nothing happens here. \n    this.skyboxManager = new SkyboxManager(); \n\n    // Raycaster. \n    this.raycastManager = new RaycastManager(this.onShootPigeon.bind(this)); \n\n    // Three.js Renderer\n    this.rendererManager = new RendererManager(); \n\n    // Pigeons\n    this.pigeonManager = new PigeonManager(this.scene); \n\n    this.videoLoadProgress = []; \n\n    // Subscribe to events. \n    window.addEventListener('resize', this.onWindowResize.bind(this));\n    document.addEventListener('visibilitychange', event => {\n      if (document.hidden) {\n        this.updateAnimationStatus(false); \n      } else {\n        this.updateAnimationStatus(true);\n      }\n    }); \n    \n    // Mouse activites\n    window.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n    window.addEventListener('wheel', this.onMouseWheel.bind(this), false);\n  }\n\n  componentDidMount() {\n    // Mount the canvas at the current div. \n    let rendererDomElement = this.rendererManager.getDomElement(); \n    this.worldRef.current.appendChild(rendererDomElement); \n\n    // Get the handle to the FPS graph component. \n    this.fpsGraph = this.guiRef.current.getFpsGraph(); \n    this.guiRef.current.subscribeForPatternChange(this.onPatternChanged.bind(this));\n\n    // Setup texture on the skybox now that the video component is mounted. \n    this.skyboxManager.createSkybox(this.scene, \n        this.frontVideoRef, \n        this.backVideoRef, \n        this.leftVideoRef, \n        this.rightVideoRef, \n        this.topVideoRef, \n        this.bottomVideoRef);\n\n    // Initialize the recursive rendering call. \n    this.rendererManager.setAnimationLoop(this.renderThree.bind(this)); \n\n    this.checkIfReady(); \n  }\n\n  // Component render. \n  render() {\n    return (\n      <div style={styles.container} ref={this.worldRef}>\n        <GuiPanel ref={this.guiRef} />\n        <video id={'front'} ref={this.frontVideoRef} playsInline loop src={front} style={styles.video} onCanPlay={this.onVideoLoaded.bind(this) } />\n        <video id={'back'} ref={this.backVideoRef} playsInline loop src={back} style={styles.video} onCanPlay={this.onVideoLoaded.bind(this) } />\n        <video id={'left'} ref={this.leftVideoRef} playsInline loop src={left} style={styles.video} onCanPlay={this.onVideoLoaded.bind(this) } />\n        <video id={'right'} ref={this.rightVideoRef} playsInline loop src={right} style={styles.video} onCanPlay={this.onVideoLoaded.bind(this) } />\n        <video id={'top'} ref={this.topVideoRef} playsInline loop src={top} style={styles.video} onCanPlay={this.onVideoLoaded.bind(this) } />\n        <video id={'bottom'} ref={this.bottomVideoRef} playsInline loop src={bottom} style={styles.video} onCanPlay={this.onVideoLoaded.bind(this) } />\n      </div>\n    );\n  }\n\n  onVideoLoaded() {\n    if (this.videoLoadProgress.length < NUM_VIDEOS_LOADED) {\n      this.videoLoadProgress.push(true);\n      this.checkIfReady(); \n    }\n  }\n\n  checkIfReady() {\n    // Make sure to change length of the videos here. \n    if (this.videoLoadProgress.length === NUM_VIDEOS_LOADED && IsSkyboxReady) {\n      IsWorldReady = true; \n      console.log('World Ready.');\n    }\n  }\n\n  // CORE Three.js recursive render loop. \n  renderThree() {\n    this.fpsGraph.begin();\n      // Pass the bounding box to the pigeon manager for creating bounds for agents. \n      if (this.pigeonManager) {\n        let boundingBox = this.skyboxManager.getBoundingBox(); \n        this.pigeonManager.update(boundingBox);\n      }\n      \n      this.cameraControl.update(this.scene, this.mouse, this.zoom);\n\n      // This renders each frame. \n      this.rendererManager.render(this.scene, this.cameraControl.getCamera());   \n      \n      this.skyboxManager.update();   \n\n      this.rendererManager.monitorDrawCalls();\n      \n      // Wait till the camera animation has stopped before beginning Raycasting. \n      if (this.cameraControl.animationStopped) {\n        let mesh = this.skyboxManager.getMesh(); \n        // Intersect with bounding box mesh? \n        if (mesh) {\n          this.raycastManager.intersect(this.cameraControl.camera, mesh, this.shouldAnimate); \n        }\n      }\n      TWEEN.update();\n    this.fpsGraph.end();\n  }\n\n  onMouseMove(event) {\n    this.mouse.x = (event.clientX - window.innerWidth / 2) * 0.3;\n    this.mouse.y = (event.clientY - window.innerHeight / 2) * 0.7;\n  }\n\n  onMouseWheel(event) {\n      this.zoom += event.deltaY * 0.1;\n      // Constrain the zoom within the reasonable range\n      this.zoom = Math.min(Math.max(100, this.zoom), 400);\n  }\n\n  onWindowResize() {\n    if (this.cameraControl) {\n      let camera = this.cameraControl.getCamera(); \n      camera.aspect = window.innerWidth / window.innerHeight; \n      camera.updateProjectionMatrix(); \n      this.rendererManager.updateSize(window.innerWidth, window.innerHeight);\n    }\n  }\n\n  updateAnimationStatus(status) {  \n    this.shouldAnimate = status; \n    if (status) {\n      this.rendererManager.setAnimationLoop(this.renderThree.bind(this));\n    } else {\n      // Pause\n      this.pigeonManager.pausePigeons();\n      this.rendererManager.setAnimationLoop(null);\n    }\n  }\n\n  // Instantiate pigeon geometry. \n  beginWorld() {\n    // Start playing all the videos.\n    this.frontVideoRef.current.play();\n    this.backVideoRef.current.play();\n    this.leftVideoRef.current.play();\n    this.rightVideoRef.current.play();\n    this.topVideoRef.current.play();\n    this.bottomVideoRef.current.play();\n    console.log('Playing all videos.');\n\n    // Target setup.\n    let currentPatternType = this.guiRef.current.getCurPatternType();  \n    this.pigeonManager.setupTarget(currentPatternType);\n\n    // GPUPigeon and GPURenderer\n    this.pigeonManager.setupPigeonGPU(this.rendererManager.renderer, this.scene);\n  }\n\n  enterWorld() {\n    // Animate the camera zooming into the skybox. \n    let control = this.cameraControl;\n    let tween = new TWEEN.Tween(control.camera.position)\n        .to({x:0, y:0, z:this.zoom}, 5000)\n        .easing(TWEEN.Easing.Cubic.Out)\n        .onComplete(() => {\n          // Animation has finished. \n          control.animationStopped = true;\n        }).start()\n  }\n\n  onPatternChanged(newPatternType) {\n    this.pigeonManager.setNewPatternType(newPatternType);\n  }\n\n  onShootPigeon() {\n    if (this.shouldAnimate) {\n      this.pigeonManager.shootPigeon();\n    }     \n  }\n\n  scrollTo() {\n    this.worldRef.current.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start'\n    }, 100);\n  }\n}\n\nexport default Radium(World);\n","const color = {\n    white: '#ffffff',\n    darkWithAlpha: 'rgb(0, 0, 0, 0.4)',\n    button: 'rgb(255, 255, 255, 0.4)',\n    link: '#D34C00',\n    panel: '#E7EFE0',\n    lightBlue: '#E6E9EC',\n    darkBlue: '#67749C',\n    midGrey: '#B2B6C2',\n    brown: '#91614B',\n    purple: '#5C5884',\n    orange: '#B5604C'\n};\n\nconst fontSize = {\n    extraSmall: '8px',\n    verySmall: '12px',\n    lessSmall: '14px',\n    small: '16px',\n    lessBig: '18px',\n    big: '20px',\n    veryBig: '24px',\n    extraBig: '28px',\n    huge: '32px',\n    veryHuge: '36px',\n    extraHuge: '40px',\n    massive: '44px',\n    veryMassive: '48px',\n    extraMassive: '52px',\n    enormous: '56px',\n    veryEnormous: '60px',\n    extraEnormous: '64px',\n    insane: '68px',\n    veryInsane: '72px',\n    extraInsane: '76px',\n    gaia: '80px',\n    veryGaia: '84px',\n    extraGaia: '88px'\n};\n\nconst padding = {\n    // Increments of 4\n    extraSmall: '4px',\n    verySmall: '8px',\n    small: '12px',\n    // Incremenets of 8\n    big : '20px',\n    veryBig : '28px',\n    extraBig : '36px',\n    // Increments of 12\n    huge: '52px',\n    veryHuge: '64px',\n    extraHuge: '76px',\n    // Incremenets of 16\n    massive: '92px',\n    veryMassive: '108px',\n    extraMassive: '124px',\n    // Increment of 20\n    enourmous: '100px',\n    veryEnormous: '120px',\n    extraEnormous: '140px',\n    // Increment of 40\n    insane: '160px',\n    veryInsane: '200px',\n    extraInsane: '240px'\n\n};\n\nconst fontFamily = {\n    bebas: 'bebas',\n    mont: 'montserrat',\n    tenor: 'tenorsans'\n};\n\n\nexport { color, fontSize, fontFamily, padding };","export default __webpack_public_path__ + \"static/media/pigeon.fbcc625c.mp4\";","/*\r\n  Name: PassengerPigeons.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: This is the Passenger Pigeons component that gets rendered within the Section Panel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { color, fontFamily, padding, fontSize } from '../Utilities/CommonStyles';\r\nimport pp from '../../assets/pigeon.mp4'\r\n\r\nconst styles = {\r\n    container: {\r\n      display: 'flex',\r\n      flexDirection: 'row'    \r\n    },\r\n\r\n    ppVideo: {\r\n      width: '600px',\r\n      height: '100%',\r\n      objectFit: 'fill'\r\n    },\r\n\r\n    content: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center'\r\n    },\r\n    \r\n    title: {\r\n      letterSpacing: 5,\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.extraHuge,\r\n      marginTop: padding.veryBig,\r\n      color: color.darkBlue\r\n    },\r\n\r\n    info: {\r\n      letterSpacing: 3,\r\n      lineSpacing: 2,\r\n      fontFamily: fontFamily.tenor,\r\n      fontSize: fontSize.big,\r\n      color: color.darkBlue,\r\n      padding: padding.veryBig\r\n    }\r\n};\r\n\r\nconst content = \"It is obvious, that the organization of the treatment results in a complete compliance with The Facility of Environmental Flexibility (Hubert Agee in The Book of the Emergency Planning) It's a well-known fact that the major accomplishments, such as the continuing setting doctrine, the flexible production planning, the ability bias or the predictable behavior may share attitudes on the major outcomes. The situation is quite a successful matter. To be honest, the continuing hierarchy doctrine and growth opportunities of it are quite high.It's a well-known fact that the major accomplishments, such as the continuing setting doctrine, the flexible production planning, the ability bias or the predictable behavior may share attitudes on the major outcomes.It a well-known fact that the major accomplishments, such as the....\"\r\nclass PassengerPigeons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.image}>\r\n          <video style={styles.ppVideo} autoPlay playsInline muted loop src={pp} />\r\n        </div>\r\n        <div style={styles.content}>\r\n          <div style={styles.title}>\r\n            PASSENGER PIGEONS\r\n          </div>\r\n          <div style={styles.info}>\r\n            {content}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(PassengerPigeons);","export default __webpack_public_path__ + \"static/media/gaugan.8b3dea59.mp4\";","/*\r\n  Name: ClimateStatement.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: This is the Climate Statement component that gets rendered within the Section Panel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { color, fontFamily, padding, fontSize } from '../Utilities/CommonStyles';\r\nimport gaugan from '../../assets/gaugan.mp4'\r\n\r\nconst styles = {\r\n    container: {\r\n      display: 'flex',\r\n      flexDirection: 'row'  \r\n    },\r\n\r\n    \r\n    video: {\r\n      width: '600px',\r\n      height: '100%',\r\n      objectFit: 'fill'\r\n    },\r\n\r\n    content: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center'\r\n    },\r\n    \r\n    title: {\r\n      letterSpacing: 5,\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.extraHuge,\r\n      marginTop: padding.veryBig,\r\n      color: color.darkBlue\r\n    },\r\n\r\n    info: {\r\n      letterSpacing: 3,\r\n      lineSpacing: 2,\r\n      fontFamily: fontFamily.tenor,\r\n      fontSize: fontSize.big,\r\n      color: color.darkBlue,\r\n      padding: padding.veryBig\r\n    }\r\n};\r\n\r\nconst content = \"It is obvious, that the organization of the treatment results in a complete compliance with The Facility of Environmental Flexibility (Hubert Agee in The Book of the Emergency Planning) It's a well-known fact that the major accomplishments, such as the continuing setting doctrine, the flexible production planning, the ability bias or the predictable behavior may share attitudes on the major outcomes. The situation is quite a successful matter. To be honest, the continuing hierarchy doctrine and growth opportunities of it are quite high.It's a well-known fact that the major accomplishments, such as the continuing setting doctrine, the flexible production planning, the ability bias or the predictable behavior may share attitudes on the major outcomes.Its a well-known fact that the major accomplishments, such as the....\"\r\n\r\nclass ClimateStatement extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.content}>\r\n          <div style={styles.title}>\r\n            CLIMATE STATEMENT\r\n          </div>\r\n          <div style={styles.info}>\r\n            {content}\r\n          </div>\r\n        </div>\r\n        <div style={styles.videoCanvas}>\r\n          <video style={styles.video} src={gaugan} playsInline loop autoPlay muted />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(ClimateStatement);","/*\r\n  Name: Footer.js\r\n  Author: Amay Kataria\r\n  Date: 10/27/2021\r\n  Description: A simple footer components\r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { color, fontFamily, padding, fontSize } from '../Utilities/CommonStyles';\r\n\r\nconst styles = {\r\n    container: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        marginTop: padding.huge, \r\n        color: color.darkBlue,\r\n        fontFamily: fontFamily.tenor   \r\n    },\r\n\r\n    website: {      \r\n        letterSpacing: 5,\r\n        fontSize: fontSize.lessSmall\r\n    },\r\n  \r\n    message: {\r\n        color: color.orange,\r\n        marginTop: padding.extraSmall,\r\n        letterSpacing: 3,\r\n        fontSize: fontSize.lessSmall,\r\n        fontStyle: 'italic'\r\n    }\r\n};\r\n\r\nclass Footer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.website}>thelostpassage.art,  2021</div>\r\n        <div style={styles.message}>crafted with love, care, and compassion.</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(Footer);","export default __webpack_public_path__ + \"static/media/beFantastic.5719ed1c.jpg\";","export default __webpack_public_path__ + \"static/media/artahack.afc70d6b.jpg\";","export default __webpack_public_path__ + \"static/media/supernormal.04eff6ee.jpg\";","export default __webpack_public_path__ + \"static/media/dara.5d8346a9.jpg\";","export default __webpack_public_path__ + \"static/media/amay.0c2f5e8c.jpg\";","export default __webpack_public_path__ + \"static/media/shao.92ba0127.jpg\";","export default __webpack_public_path__ + \"static/media/yu.bcabd1ce.jpg\";","export default __webpack_public_path__ + \"static/media/ong2.d510c1bd.jpg\";","/*\r\n  Name: About.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: This is the About Us component that gets rendered within the Section Panel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport Footer from './Footer';\r\nimport { color, fontFamily, fontSize, padding } from '../Utilities/CommonStyles';\r\nimport beFantastic from '../../assets/beFantastic.jpg';\r\nimport artahack from '../../assets/artahack.jpg';\r\nimport supernormal from '../../assets/supernormal.jpg';\r\nimport dara from '../../assets/dara.jpg';\r\nimport amay from '../../assets/headshots/amay.jpg';\r\nimport shao from '../../assets/headshots/shao.jpg';\r\nimport yu from '../../assets/headshots/yu.jpg';\r\nimport ong from '../../assets/headshots/ong2.jpg';\r\n\r\nconst styles = {\r\n    container: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        flexDirection: 'column',\r\n        paddingTop: padding.veryBig,\r\n        paddingLeft: padding.veryBig,\r\n        paddingRight: padding.veryBig,\r\n        paddingBottom: padding.small\r\n    },\r\n\r\n    title: {\r\n      letterSpacing: 5,\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.extraHuge,\r\n      marginTop: padding.veryBig,\r\n      color: color.darkBlue\r\n    },\r\n\r\n    team: {\r\n      display: 'flex',\r\n      flexDirection: 'row',\r\n      marginTop: padding.huge,\r\n      width: '100%',\r\n      justifyContent: 'center'\r\n    },\r\n\r\n    member: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      paddingLeft: padding.huge,\r\n      paddingRight: padding.huge\r\n    },\r\n\r\n    photo: {\r\n      width: '150px',\r\n      height: '150px',\r\n      borderRadius: '75px',\r\n      backgroundColor: color.midGrey\r\n    },\r\n\r\n    infoContainer: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      fontFamily: fontFamily.tenor,\r\n      marginTop: padding.small\r\n    },\r\n\r\n    name: {\r\n      color: color.brown,\r\n      fontSize: fontSize.big\r\n    },\r\n\r\n    location: {\r\n      color: color.darkBlue,\r\n      fontSize: fontSize.small\r\n    },\r\n\r\n    moreMargin: {\r\n      marginTop: padding.veryHuge\r\n    },\r\n\r\n    sponsors: {\r\n      display: 'flex',\r\n      flexDirection: 'row',\r\n      justifyContent: 'center',\r\n      marginTop: padding.huge,\r\n      width: '100%'\r\n    },\r\n    \r\n    image: {\r\n      objectFit: 'contain',\r\n      padding: padding.big\r\n    }\r\n};\r\n\r\nclass About extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let kianPeng = this.getKianPeng();\r\n    let amay = this.getAmay();\r\n    let shao = this.getShao();\r\n    let yu = this.getYu();\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.title}>\r\n          ABOUT THE TEAM\r\n        </div>   \r\n        <div style={styles.team}>\r\n          {kianPeng}\r\n          {amay}\r\n          {shao}\r\n          {yu}\r\n        </div>\r\n        <div style={styles.sponsors}>\r\n          <img style={styles.image} src={beFantastic} alt='befantastic'/>\r\n          <img style={styles.image} src={artahack} alt='artahack' />\r\n          <img style={styles.image} src={supernormal} alt='supernormal' />\r\n          <img style={styles.image} src={dara} alt='dara' />\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getKianPeng() {\r\n    return (\r\n      <a href='https://www.ongkianpeng.art/' target='_blank' rel=\"noreferrer\" style={styles.member}>\r\n        <img src={ong} alt='ong' style={styles.photo} />\r\n        <div style={styles.infoContainer}>\r\n          <div style={styles.name}>Ong Kian-Peng</div>\r\n          <div style={styles.location}>Mentor</div>\r\n          <div style={styles.location}>Singapore</div>\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n\r\n  getAmay() {\r\n    return (\r\n      <a href='https://amaykataria.com' target='_blank' rel=\"noreferrer\"  style={styles.member}>\r\n        <img src={amay} alt='amay' style={styles.photo} />       \r\n        <div style={styles.infoContainer}>\r\n          <div style={styles.name}>Amay Kataria</div>\r\n          <div style={styles.location}>New-Media Artist</div>\r\n          <div style={styles.location}>USA</div>\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n\r\n  getShao() {\r\n    return (\r\n      <div style={styles.member}>\r\n        <img src={shao} alt='shao' style={styles.photo} />\r\n        <div style={styles.infoContainer}>\r\n          <div style={styles.name}>Shaohui Kwok</div>\r\n          <div style={styles.location}>Cultural Producer</div>\r\n          <div style={styles.location}>Singapore</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  getYu() {\r\n    return (\r\n      <div style={styles.member}>\r\n        <img src={yu} alt='yu' style={styles.photo} />\r\n        <div style={styles.infoContainer}>\r\n          <div style={styles.name}>Yu-Jeng Kuo</div>\r\n          <div style={styles.location}>Software Engineer</div>\r\n          <div style={styles.location}>Singapore</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(About);","/*\r\n  Name: SectionPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/30/2021\r\n  Description: Each section that contains information about the website. This content is passed in from ContentPanel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { PanelTitle } from './ContentPanel';\r\nimport PassengerPigeons from './PassengerPigeons'\r\nimport ClimateStatement from './ClimateStatement'\r\nimport About from './About'\r\nimport { color } from '../Utilities/CommonStyles';\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        background: '#e6e9ec',\r\n        background: '-moz-linear-gradient(top, #e6e9ec 0%, #f9fdff 100%)', /* FF3.6-15 */\r\n        background: '-webkit-linear-gradient(top, #e6e9ec 0%,#f9fdff 100%)', /* Chrome10-25,Safari5.1-6 */\r\n        background: 'linear-gradient(to bottom, #e6e9ec 0%,#f9fdff 100%)' /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\r\n    }\r\n};\r\n\r\nclass SectionPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n\r\n    this.containerRef = React.createRef(); \r\n  }\r\n\r\n  render() {\r\n    let panel = this.getPanel(); \r\n    return (\r\n      <div style={styles.container} ref={this.containerRef}>\r\n        {panel}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getPanel() {\r\n    if (this.props.title === PanelTitle.PIGEONS) {\r\n      return <PassengerPigeons />\r\n    } else if (this.props.title === PanelTitle.CLIMATE) {\r\n      return <ClimateStatement />\r\n    } else if (this.props.title === PanelTitle.ABOUT) {\r\n      return <About />\r\n    }\r\n  }\r\n\r\n  scrollTo() {\r\n    setTimeout(() => {\r\n      this.containerRef.current.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start'\r\n      });\r\n    }, 50); // Give a little timeout so the panel can be made visible first.\r\n  }\r\n}\r\n\r\nexport default Radium(SectionPanel);","/*\r\n  Name: ContentPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/30/2021\r\n  Description: Collection of information panels that contain information about the website. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport SectionPanel from './SectionPanel';\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    }\r\n};\r\n\r\nexport const PanelTitle = {\r\n  PIGEONS: 'PASSENGER PIGEONS',\r\n  CLIMATE: 'CLIMATE STATEMENT',\r\n  ABOUT: 'ABOUT US'\r\n}\r\n\r\nclass ContentPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n\r\n    this.pigeonPanelRef = React.createRef();\r\n    this.climatePanelRef = React.createRef();\r\n    this.aboutPanelRef = React.createRef(); \r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <SectionPanel ref={this.pigeonPanelRef} title={PanelTitle.PIGEONS} panelNum={0} />\r\n        <SectionPanel ref={this.climatePanelRef} title={PanelTitle.CLIMATE} panelNum={1} />\r\n        <SectionPanel ref={this.aboutPanelRef} title={PanelTitle.ABOUT} panelNum={0} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  scroll(panelTitle) {\r\n    if (panelTitle === PanelTitle.PIGEONS) {\r\n      this.pigeonPanelRef.current.scrollTo();\r\n    } else if (panelTitle === PanelTitle.CLIMATE) {\r\n      this.climatePanelRef.current.scrollTo();\r\n    } else if (panelTitle === PanelTitle.ABOUT) {\r\n      this.aboutPanelRef.current.scrollTo(); \r\n    }\r\n  }\r\n}\r\n\r\nexport default Radium(ContentPanel);","/*\r\n  Name: Navigation.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: This components holds the title of the project and the about button\r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { fontFamily, color, fontSize, padding } from '../Utilities/CommonStyles.js'\r\nimport { PanelTitle } from './ContentPanel.js';\r\nimport { ReactComponent as Pigeon } from '../../assets/pigeon.svg'\r\n\r\nconst animation = {\r\n  color: Radium.keyframes({\r\n    '0%': {\r\n      backgroundColor: color.darkBlue\r\n    },\r\n    '50%': {\r\n      backgroundColor: color.purple,\r\n    },\r\n    '100%': {\r\n      backgroundColor: color.orange,\r\n    }\r\n  })\r\n}\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'absolute',\r\n        top: '30px',\r\n        left: '30px',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        visibility: 'visible'\r\n    },\r\n\r\n    hidden: {\r\n      visibility: 'hidden'\r\n    },\r\n\r\n    homeTitle: {\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.huge,\r\n      letterSpacing: 6,\r\n      color: color.darkBlue,\r\n      cursor: 'default'\r\n    },\r\n\r\n    titleContainer: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    },\r\n\r\n    title: {\r\n        fontFamily: fontFamily.tenor,\r\n        fontSize: fontSize.small,\r\n        letterSpacing: 2,\r\n        color: color.darkBlue,\r\n        cursor: 'crosshair',\r\n        paddingTop: padding.verySmall\r\n    },\r\n\r\n    hover: {\r\n      color: color.brown\r\n    },\r\n\r\n    homeButton: {\r\n      position: 'fixed',\r\n      right: padding.big,\r\n      bottom: padding.big,\r\n      fontSize: fontSize.small,\r\n      padding: padding.verySmall,\r\n      backgroundColor: color.darkBlue,\r\n      width: fontSize.gaia,\r\n      height: fontSize.gaia,\r\n      borderRadius: fontSize.extraMassive,\r\n      zIndex: 1\r\n    },\r\n\r\n    colorFlick: {\r\n      animation: 'x 3s ease-in-out infinite',\r\n      animationName: animation.color,\r\n      animationDirection: 'alternate'\r\n    },\r\n\r\n    homeHover: {\r\n      backgroundColor: color.brown\r\n    },\r\n\r\n    svg: {\r\n      width: '100%',\r\n      height: '100%',\r\n      fill: 'white'\r\n    }\r\n};\r\n\r\nclass Navigation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={ \r\n      isHoveringPigeons: false,\r\n      isHoveringClimate: false,\r\n      isHoveringAbout: false,\r\n      isHomeButtonHovering: false, \r\n      showHomeButton: false\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let containerStyle = styles.container; \r\n    let pigeonStyle = this.state.isHoveringPigeons ? [styles.title, styles.hover] : styles.title;\r\n    let climateStyle = this.state.isHoveringClimate ? [styles.title, styles.hover] : styles.title;\r\n    let aboutStyle = this.state.isHoveringAbout ? [styles.title, styles.hover] : styles.title; \r\n    let homeButton = this.getHomeButton(); \r\n    return (\r\n      <div style={containerStyle} >\r\n        <div style={styles.homeTitle}>THE LOST PASSAGE</div>\r\n        <div style={styles.titleContainer}>\r\n          <div style={pigeonStyle}\r\n              onClick={this.onClick.bind(this, PanelTitle.PIGEONS)}\r\n              onMouseEnter={this.onHoverPigeons.bind(this)} \r\n              onMouseLeave={this.onHoverPigeons.bind(this)}>\r\n            PASSENGER PIGEONS\r\n          </div>\r\n          <div style={climateStyle} \r\n            onClick={this.onClick.bind(this, PanelTitle.CLIMATE)}\r\n            onMouseEnter={this.onHoverClimate.bind(this)}\r\n            onMouseLeave={this.onHoverClimate.bind(this)}>\r\n            CLIMATE STATEMENT\r\n          </div>\r\n          <div style={aboutStyle}\r\n              onClick={this.onClick.bind(this, PanelTitle.ABOUT)}\r\n              onMouseEnter={this.onHoverAbout.bind(this)}\r\n              onMouseLeave={this.onHoverAbout.bind(this)}>\r\n            ABOUT US\r\n          </div>\r\n        </div>\r\n        {homeButton}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getHomeButton() {\r\n    let buttonStyle = this.state.showHomeButton ? [styles.homeButton, styles.colorFlick] : [styles.homeButton, styles.hidden];\r\n    buttonStyle = this.state.isHomeButtonHovering ? [styles.homeButton, styles.homeHover] : buttonStyle; \r\n    return (\r\n      <div style={buttonStyle}\r\n          onClick={this.onHomeButtonClick.bind(this)}\r\n          onMouseEnter={this.onHomeButtonHover.bind(this)}\r\n          onMouseLeave={this.onHomeButtonHover.bind(this)}>\r\n        <Pigeon style={styles.svg} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onHomeButtonHover() {\r\n    let hovering = this.state.isHomeButtonHovering; \r\n    this.setState({\r\n      isHomeButtonHovering: !hovering\r\n    }); \r\n  }\r\n\r\n  onHoverPigeons() {\r\n    let hovering = this.state.isHoveringPigeons;\r\n    this.setState({\r\n      isHoveringPigeons: !hovering\r\n    }); \r\n  }\r\n\r\n  onHoverClimate() {\r\n    let hovering = this.state.isHoveringClimate;\r\n    this.setState({\r\n      isHoveringClimate: !hovering\r\n    }); \r\n  }\r\n\r\n  onHoverAbout() {\r\n    let hovering = this.state.isHoveringAbout;\r\n    this.setState({\r\n      isHoveringAbout: !hovering\r\n    }); \r\n  }\r\n\r\n  onClick(panelTitle) {\r\n    this.props.onClickNavTitle(panelTitle);\r\n\r\n    // TODO: Do something about stopping the WebGL loop as well. \r\n    // Stop rendering or animating the frame. \r\n    this.setState({\r\n      showHomeButton: true\r\n    });\r\n  }\r\n\r\n  onHomeButtonClick() {\r\n    this.props.onClickHomeButton(); \r\n    setTimeout(() => {\r\n      this.setState({\r\n        showHomeButton: false\r\n      }); \r\n    }, 500);\r\n  }\r\n}\r\n\r\nexport default Radium(Navigation);","/*\r\n  Name: EnterPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: This is the first panel that the user sees. It's the overlay panel when the user comes to the website. \r\n  It has a transparent finish so one can see the terrain underneath it. It shows the title of the project and the \r\n  Enter button to enter the website. \r\n*/\r\n\r\nimport React from 'react'\r\n\r\nimport Radium from 'radium'\r\nimport { bounceOut, zoomIn } from 'react-animations'\r\nimport { fontFamily, color, fontSize, padding } from '../Utilities/CommonStyles.js'\r\nimport { ReactComponent as Pigeon } from '../../assets/pigeon.svg'\r\nimport Footer from './Footer.js'\r\nimport { IsGUIReady } from '../Utilities/ServerGui.js'\r\nimport { IsPigeonManagerReady } from '../Managers/PigeonManager.js'\r\nimport { IsWorldReady } from './World.js'\r\n\r\nconst FLASH_DURATION = '1.5s';\r\nconst TopMessage = \"\\\"They existed in billions, but today they are lost and revered only in museums.\\\"\";\r\nconst BottomMessage = \"\\\"May we gather the strength to confront the reality of our climate condition.\\\"\";\r\nconst LeftMessage = \"\\\"The avarice and thoughtlessness of humankind led to the extinction of this species.\\\"\";\r\nconst RightMessage = \"\\\"No matter how abundant something is - if one's not careful, one can lose it.\\\"\";\r\n\r\nconst animation = {\r\n  pulse: Radium.keyframes({\r\n    '0%': {\r\n      transform: 'scale(0.5)'\r\n    },\r\n    '50%': {\r\n      transform: 'scale(1.1)',\r\n    },\r\n    '100%': {\r\n      transform: 'scale(0.5)',\r\n    }\r\n  })\r\n}\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'absolute',\r\n        top: '0%',\r\n        width: '100vw',\r\n        height: '100vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 1,\r\n        background: '#e6e9ec',\r\n        background: '-moz-linear-gradient(top, #e6e9ec 0%, #f9fdff 100%)', /* FF3.6-15 */\r\n        background: '-webkit-linear-gradient(top, #e6e9ec 0%,#f9fdff 100%)', /* Chrome10-25,Safari5.1-6 */\r\n        background: 'linear-gradient(to bottom, #e6e9ec 0%,#f9fdff 100%)' /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\r\n    },\r\n\r\n    hide: {\r\n        visibility: 'hidden'\r\n    },\r\n\r\n    title: {\r\n        fontFamily: fontFamily.bebas,\r\n        fontSize: fontSize.massive,\r\n        textAlign: 'center',\r\n        maxWidth: '200px',\r\n        letterSpacing: 5,\r\n        opacity: 1,\r\n        color: color.darkBlue,\r\n\r\n        '@media (min-width: 900px)': {  \r\n          fontSize: fontSize.extraInsane,\r\n          maxWidth: '100%',\r\n          letterSpacing: 6,\r\n        }\r\n    },\r\n\r\n    loadContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center'\r\n    },\r\n\r\n    svgContainer: {\r\n      fontSize: fontSize.veryBig,\r\n    },\r\n\r\n    loadTitle: {\r\n      fontFamily: fontFamily.mont,\r\n      fontSize: fontSize.small,\r\n      color: color.darkBlue,\r\n      marginTop: '-' + padding.big\r\n    },\r\n\r\n    svg: {\r\n      width: '80%',\r\n      height: '80%',\r\n      fill: color.darkBlue\r\n    },\r\n\r\n    flash: {\r\n      animationName: Radium.keyframes(bounceOut, 'bounceOut'),\r\n      animationDuration: FLASH_DURATION,\r\n      animationTimingFunction: 'ease-in-out'\r\n    },\r\n\r\n    svgSimplePulse: {\r\n      animation: 'x 5s linear infinite',\r\n      animationName: animation.pulse\r\n    },\r\n  \r\n    zoom: {\r\n      animationName: Radium.keyframes(zoomIn, 'zoom'),\r\n      animationDuration: '5.0s', // LOAD TIME...\r\n      animationTimingFunction: 'ease-in-out',\r\n      animationFillMode: 'forwards'\r\n    },\r\n\r\n    button: {\r\n        fontFamily: fontFamily.mont,\r\n        color: color.darkBlue,\r\n        fontSize: fontSize.lessBig,\r\n        borderStyle: 'solid',\r\n        borderColor: color.darkBlue,\r\n        borderWidth: '4px',\r\n        marginTop: padding.small,\r\n        padding: padding.verySmall,\r\n        letterSpacing: '5px',\r\n        cursor: 'crosshair',\r\n\r\n        '@media (min-width: 900px)': {  \r\n          fontSize: fontSize.extraBig,\r\n          paddingTop: padding.small,\r\n          paddingBottom: padding.small,\r\n          paddingLeft: padding.big,\r\n          paddingRight: padding.big,\r\n        }\r\n    },\r\n\r\n    hover: {\r\n      backgroundColor: color.midGrey,\r\n      color: color.white\r\n    },\r\n\r\n    topMessage: {\r\n      position: 'absolute',\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.lessSmall,\r\n      textAlign: 'center',\r\n      paddingLeft: padding.verySmall,\r\n      paddingRight: padding.verySmall,\r\n      fontFamily: fontFamily.tenor,\r\n      top: '15px',\r\n\r\n      '@media (min-width: 900px)': {  \r\n        fontSize: fontSize.lessBig,\r\n        top: '30px',\r\n        paddingTop: padding.small,\r\n        paddingBottom: padding.small,\r\n        paddingLeft: padding.big,\r\n        paddingRight: padding.big,\r\n      }\r\n    },\r\n\r\n    leftMessage: {\r\n      position: 'absolute',\r\n      textAlign: 'center',\r\n      maxWidth: '300px',\r\n      left: '-40%',\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.verySmall,\r\n      fontFamily: fontFamily.tenor,\r\n      transform: 'rotate(-90deg)',\r\n\r\n      '@media (min-width: 360px)': {\r\n        left: '-35%'\r\n      },\r\n\r\n      \r\n      '@media (min-width: 411px)': {\r\n        left: '-30%'\r\n      },\r\n\r\n\r\n      '@media (min-width: 900px)': {  \r\n        fontSize: fontSize.lessBig,\r\n        maxWidth: '100%',\r\n        left: '10%',\r\n        paddingTop: padding.small,\r\n        paddingBottom: padding.small,\r\n        paddingLeft: padding.big,\r\n        paddingRight: padding.big,\r\n      }\r\n    },\r\n\r\n    rightMessage: {\r\n      position: 'absolute',\r\n      right: '-40%',\r\n      textAlign: 'center',\r\n      maxWidth: '300px',\r\n      fontSize: fontSize.verySmall,\r\n      fontFamily: fontFamily.tenor,\r\n      color: color.darkBlue, \r\n      transform: 'rotate(90deg)',\r\n\r\n      '@media (min-width: 360px)': {\r\n        right: '-35%'\r\n      },\r\n\r\n      \r\n      '@media (min-width: 411px)': {\r\n        right: '-30%'\r\n      },\r\n\r\n      '@media (min-width: 900px)': {  \r\n        fontSize: fontSize.lessBig,\r\n        right: '12%',\r\n        maxWidth: '100%',\r\n        paddingTop: padding.small,\r\n        paddingBottom: padding.small,\r\n        paddingLeft: padding.big,\r\n        paddingRight: padding.big,\r\n      }\r\n    },\r\n\r\n    bottomMessage: {\r\n      position: 'absolute',\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.lessSmall,\r\n      fontFamily: fontFamily.tenor,\r\n      paddingLeft: padding.big,\r\n      paddingRight: padding.big,\r\n      textAlign: 'center',\r\n      bottom: '15px',\r\n\r\n      '@media (min-width: 900px)': {  \r\n        fontSize: fontSize.lessBig,\r\n        bottom: '30px',\r\n        paddingTop: padding.small,\r\n        paddingBottom: padding.small,\r\n        paddingLeft: padding.big,\r\n        paddingRight: padding.big,\r\n      }\r\n    }\r\n};\r\n\r\nclass EnterPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // Initial render of the component. \r\n    // NOTE: Whenever a component's state is updated, render is called. \r\n    this.state={\r\n        isHidden: false,\r\n        isLoading: false,\r\n        isHovering: false,\r\n        isDisabled: true\r\n    };\r\n  }\r\n\r\n  // Overriding React function. \r\n  render() {\r\n    let containerStyle = styles.container;\r\n    let content = this.state.isLoading ? this.getLoader() : this.getTitle(); \r\n    let messages = this.getMessages();\r\n    return (\r\n      <div style={containerStyle}>\r\n        {content}\r\n        {messages}\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getLoader() {\r\n    return (\r\n      <div style={styles.loadContainer}>\r\n        <div style={[styles.svgContainer, styles.svgSimplePulse]}>\r\n        <Pigeon style={styles.svg} />\r\n       </div>\r\n       <div style={styles.loadTitle}>\r\n         Getting things ready...\r\n       </div>\r\n      </div>\r\n\r\n    );\r\n  }\r\n\r\n  getTitle() {\r\n    let buttonStyle = this.state.isHovering ? [styles.button, styles.hover] : [styles.button]; \r\n    let button = this.state.isDisabled ? <React.Fragment></React.Fragment> : (\r\n      <button \r\n      disabled={this.state.isDisabled}\r\n      onMouseEnter={this.onHoverOn.bind(this)} \r\n      onMouseLeave={this.onHoverOff.bind(this)} \r\n      onClick={this.onEnter.bind(this)} \r\n      style={buttonStyle}>ENTER</button>\r\n    ); \r\n    return (\r\n        <React.Fragment>\r\n            <div style={[styles.title, styles.flash]}\r\n                 onAnimationEnd={this.onStartAnimationEnd.bind(this)}>THE LOST PASSAGE</div>\r\n            {button}  \r\n        </React.Fragment>\r\n    );\r\n  }\r\n  \r\n  getMessages() {\r\n    return (\r\n      <React.Fragment>\r\n        <div style={styles.topMessage}>{TopMessage}</div>\r\n        <div style={styles.leftMessage}>{LeftMessage}</div>\r\n        <div style={styles.rightMessage}>{RightMessage}</div>\r\n        <div style={styles.bottomMessage}>{BottomMessage}</div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onEnter() {\r\n    // Give a small delay, so this doesn't block the animation thread. \r\n    setTimeout(() => {\r\n      this.props.onEnterWorld();\r\n    }, 50);\r\n\r\n    // Begin animation. \r\n    this.setState({\r\n        isLoading: true\r\n    });\r\n\r\n    // Keep check if I'm ready. \r\n    this.checkIfReady(); \r\n  }\r\n\r\n  checkIfReady() {\r\n    setTimeout(() => {\r\n      if (IsGUIReady && IsPigeonManagerReady && IsWorldReady) {\r\n        this.hasFinishedLoading(); \r\n      } else {\r\n        this.checkIfReady();\r\n      }\r\n    }, 10); \r\n  }\r\n\r\n  hasFinishedLoading() {\r\n    this.setState({\r\n        isHidden: true\r\n    }); \r\n\r\n    console.log('Has Finished Loading');\r\n    // Tel the world that load is complete. \r\n    this.props.onLoadComplete(); \r\n  }\r\n  \r\n  onHoverOn() {\r\n    if (!this.state.isDisabled) {\r\n      this.setState({\r\n        isHovering: true\r\n      }); \r\n    }\r\n  }\r\n\r\n  onHoverOff() {\r\n    if (!this.state.isDisabled) {\r\n      this.setState({\r\n        isHovering: false\r\n      }); \r\n    }\r\n  }\r\n\r\n  onStartAnimationEnd() {\r\n    // Enable the button now. \r\n    this.setState({\r\n      isDisabled: false\r\n    }); \r\n  }\r\n}\r\n\r\nexport default Radium(EnterPanel);","/*\n  Name: App.js\n  Author: Amay Kataria\n  Date: 08/19/2021\n  Description: Entry point for the application.\n*/\n\nimport React from 'react'\nimport Radium from 'radium'\n\nimport World from './Interface/World.js'\nimport ContentPanel from './Interface/ContentPanel.js';\nimport Navigation from './Interface/Navigation.js'\nimport EnterPanel from './Interface/EnterPanel.js';\n\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n\n  panelStyles: {\n    position: 'relative',\n    display: 'none'\n  },\n\n  panelVisible: {\n    display: 'block'\n  }\n}\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state={\n      showContentPanel: false,\n      showNavPanel: false,\n      showEnterPanel: true\n    };\n\n    this.worldRef = React.createRef(); \n    this.contentPanelRef = React.createRef();\n    this.navRef = React.createRef();\n  }\n\n  render() {\n    let navPanel = this.state.showNavPanel ? this.getNavPanel() : <React.Fragment></React.Fragment>;\n    let enterPanel = this.state.showEnterPanel ? this.getEnterPanel() : <React.Fragment></React.Fragment>;\n    let contentPanel = this.getContentPanel();\n    return (\n      <div style={styles.container}>\n        <World ref={this.worldRef} />\n        {navPanel}\n        {enterPanel}\n        {contentPanel}\n      </div>\n    );\n  }\n\n  getNavPanel() {\n    return (\n      <Navigation ref={this.navRef} \n        onClickNavTitle={this.onClickNavTitle.bind(this)} \n        onClickHomeButton={this.onClickHomeButton.bind(this)}/>\n    );\n  }\n\n  getEnterPanel() {\n    return (\n      <EnterPanel \n        onEnterWorld={this.onEnterWorld.bind(this)} \n        onLoadComplete={this.onLoadComplete.bind(this)}\n      />\n    );\n  }\n\n  getContentPanel() {\n    let contentPanelStyles = this.state.showContentPanel ? [styles.panelStyles, styles.panelVisible] : [styles.panelStyles];\n    return (\n      <div style={contentPanelStyles}>\n        <ContentPanel ref={this.contentPanelRef} />\n      </div>\n    );\n  }\n\n  onEnterWorld() {\n    this.worldRef.current.beginWorld();  \n  }\n\n  onLoadComplete() {\n    this.setState({\n      showEnterPanel: false,\n      showNavPanel: true\n    });\n\n    // Begin zoom into the world. \n    this.worldRef.current.enterWorld(); \n  }\n    \n  onClickNavTitle(panelTitle) {\n    // Show the content panel now. \n    this.setState({\n      showContentPanel: true\n    });\n\n    // Trigger scroll.\n    this.contentPanelRef.current.scroll(panelTitle);\n\n    // Stop Renderer\n    this.worldRef.current.updateAnimationStatus(false); \n  }\n\n  onClickHomeButton() {\n    this.worldRef.current.scrollTo(); \n    this.worldRef.current.updateAnimationStatus(true);\n    setTimeout(() => {\n      this.setState({\n        showContentPanel: false\n      });\n    }, 1000); // Give a little timeout so the panel can be made visible first.\n  }\n}\n\nexport default Radium(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './font/stylesheet.css';\nimport App from './components/App';\nimport {StyleRoot} from 'radium'\n\n// Use StyleRoot to enable keyframes and media queries for Javascript type\n// styles with Radium in components. \n// Single render function for the entire application. \nReactDOM.render(<StyleRoot><App /></StyleRoot>, document.getElementById('root'));"],"sourceRoot":""}