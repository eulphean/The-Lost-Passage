{"version":3,"sources":["assets/gaugan.mp4","assets/pigeon.svg","components/Managers/CameraControl.js","components/Managers/LightingManager.js","components/Managers/RendererManager.js","components/Managers/PatternManager.js","components/Managers/OctreeManager.js","components/Utilities/Utility.js","components/Environment/Agent.js","components/Environment/Pigeon.js","components/Environment/Target.js","components/Managers/PigeonManager.js","components/Managers/RaycastManager.js","components/Utilities/Websocket.js","components/Utilities/ServerGui.js","components/Interface/GuiPanel.js","components/Interface/World.js","components/Utilities/CommonStyles.js","components/Interface/PassengerPigeons.js","components/Interface/ClimateStatement.js","components/Interface/About.js","components/Interface/SectionPanel.js","components/Interface/ContentPanel.js","components/Interface/Navigation.js","components/Interface/EnterPanel.js","components/App.js","index.js","models/New_Bird.glb"],"names":["module","exports","_defs","_g","OrbitControls","oc","THREE","OrbitParams","EnableControls","EnablePan","AutoRotate","RotateSpeed","EnableKeys","CameraControl","this","camera","window","innerWidth","innerHeight","position","set","lookAt","frustumCulled","controls","updateControls","update","enablePan","autoRotate","autoRotateSpeed","enabled","enableKeys","LightingManager","scene","directionalLight","intensity","normalize","RendererManager","renderer","antialias","setClearColor","setSize","setPixelRatio","devicePixelRatio","outputEncoding","domElement","render","PatternParams","PatternType","PatternTypes","EllipseParams","Origin","x","y","z","Radii","Amplitude","Speed","Direction","RoseCurveParams","Radius","Phase","NumPetals","Sinusoidal","Pattern","patternObj","theta_rad","amp","isClockwise","dir","originPos","pos","moveFactor","move","targetPos","maxTheta","r","Math","cos","sin","EllipsePattern","radX","radx","radZ","radz","PI","updateGuiParams","xPos","cartesianX","zPos","cartesianZ","yPos","cartesianY","updateTheta","degToRad","RosePattern","rad","phase","ph","numPetals","numP","isSin","PatternManager","curPatternType","console","log","amplitude","ellipseConstructor","curPattern","radius","isSinusoidal","roseConstructor","getTargetPos","Octree","origin","boundary","min","Vector3","max","tree","PointOctree","agent","insert","findPoints","pointCount","OctreeManager","flockOctree","flockTarget","liarbirds","setupOctree","forEach","l","insertPoint","nAgents","scanForPoints","n","a","push","getRandomNum","random","axisRotation","axis_x","axis_y","axis_z","angle_radians","q","norm","sqrt","AgentParams","SmoothFactor","AttractionForce","SeperationForce","CohesionForce","AlignmentForce","Gravity","Agent","velocity","acceleration","rotationA","rotationB","fSteer","vDesired","sumVec","diffVec","maxSpeed","Utility","target","isAlive","seek","neighbor","subVectors","seperate","cohere","align","addVectors","lerp","clampLength","add","multiplyScalar","copy","divideScalar","lengthSq","loader","GLTFLoader","Pigeon","loadPigeon","load","model","gltf","pigeon","name","parent","castShadow","receiveShadow","agentPosition","agentRotation","rotation","agentScale","scale","agentAnimations","animations","animationMixer","action","clipAction","randSeed","play","undefined","error","delta","updateBehaviour","applyForce","updatePosition","syncPosition","syncRotation","azimuth","inclination","v","atan2","acos","length","multiply","setRotationFromQuaternion","Target","geometry","material","emissive","wireframe","transparent","opacity","mesh","visible","TargetParams","ShowTarget","PigeonManager","octreeManager","patternManager","pigeons","clock","currentPatternType","spawnPigeons","setTargetPattern","patternPos","setVector","setVisibility","getDelta","p","setTarget","getNeighbours","recoverFromShock","newPatternType","i","choseOne","MathUtils","randInt","clamp","shootPigeonCallback","raycaster","mouse","callback","isIntersecting","addEventListener","onMouseMove","bind","onMouseClick","event","clientX","clientY","targetMesh","setFromCamera","intersectObject","siteURL","herokuURL","socket","io","reconnection","reconnectionDelay","reconnectionAttempts","Infinity","once","subscribe","handlePresetsCbk","on","logTime","handlePresets","data","presetName","json","payload","emit","readPresetsCallback","GuiParams","Preset","Presets","ServerGui","containerComponent","gui","Pane","title","container","expanded","registerPlugin","EssentialsPlugin","addInput","presetOptions","buildPresets","fpsGraph","addBlade","view","label","lineCount","f0","addFolder","patternFolder","buildPatternTypeOptions","buildPatterns","ellipseParamsFolder","roseCurveParamsFolder","step","showPatternParams","f2","addButton","onSavePreset","onDeletePreset","onShowPanel","onSpawnAgents","onShootPigeon","Websocket","readAllPresets","onReceivePresets","guiJson","JSON","parse","value","importPreset","d","config","text","stringify","defaultPresetJSON","disposePresets","disposePatterns","exportPreset","preset","_","find","sortBy","unshift","saveGuiPreset","alert","remove","deletePreset","presetJson","presetList","dispose","index","options","onPresetSelected","patternTypeOptions","Ellipse","RoseCurve","patternList","onPatternSelected","ev","patternChangeUpdate","hidden","onShowPanelCallback","onSpawnAgentCallback","onShootPigeonCallback","styles","top","right","GuiPanel","props","state","guiRef","React","createRef","ref","style","current","subscribeShowPanel","subscribeSpawnAgents","subscribeShootPigeon","onShowInfoPanel","subscribeForPatternChange","Component","Radium","width","height","overflow","crosshair","cursor","video","display","World","worldRef","navRef","panelRef","videoRef","cameraControl","lightingManager","pigeonManager","raycastManager","RaycastManager","rendererManager","rendererDomElement","getDomElement","appendChild","getFpsGraph","onPatternChanged","initializeRender","addSkybox","id","playsInline","loop","src","clouds","begin","intersect","getCamera","end","requestAnimationFrame","texture","side","map","cube","sphere","getCurPatternType","setup","setNewPatternType","shootPigeon","scrollIntoView","behavior","block","color","fontSize","padding","fontFamily","justifyContent","marginTop","PassengerPigeons","ClimateStatement","About","colorA","backgroundColor","colorB","SectionPanel","containerRef","containerStyles","panelNum","panel","getPanel","PanelTitle","PIGEONS","CLIMATE","ABOUT","setTimeout","flexDirection","ContentPanel","pigeonPanelRef","climatePanelRef","aboutPanelRef","panelTitle","scrollTo","_excluded","_extends","Object","assign","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref","svgRef","createElement","viewBox","in","type","values","xlinkHref","filter","fill","fillRule","stroke","clipPath","transform","ForwardRef","forwardRef","left","visibility","homeTitle","letterSpacing","titleContainer","paddingTop","hover","homeButton","bottom","borderRadius","zIndex","homeHover","svg","Navigation","isHoveringPigeons","isHoveringClimate","isHoveringAbout","isHomeButtonHovering","showHomeButton","containerStyle","pigeonStyle","climateStyle","aboutStyle","getHomeButton","onClick","onMouseEnter","onHoverPigeons","onMouseLeave","onHoverClimate","onHoverAbout","buttonStyle","onHomeButtonClick","onHomeButtonHover","hovering","setState","onClickNavTitle","onClickHomeButton","alignItems","hide","loadContainer","flash","animationName","keyframes","bounceOut","animationDuration","animationTimingFunction","zoom","zoomIn","animationFillMode","button","borderStyle","borderWidth","paddingBottom","paddingLeft","paddingRight","topMessage","leftMessage","rightMessage","bottomMessage","EnterPanel","isHidden","isLoading","isHovering","content","getLoader","getTitle","messages","getMessages","Fragment","onHover","onEnter","onEnterWorld","hasFinishedLoading","onLoadComplete","hoverState","panelStyles","panelVisible","App","showContentPanel","showNavPanel","showEnterPanel","contentPanelRef","navPanel","getNavPanel","enterPanel","getEnterPanel","contentPanel","getContentPanel","contentPanelStyles","beginWorld","scroll","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.fef67392.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/gaugan.7656d0aa.mp4\";","var _defs, _g;\n\nvar _excluded = [\"svgRef\", \"title\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgPigeon = function SvgPigeon(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"106px\",\n    height: \"159px\",\n    viewBox: \"0 0 106 159\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"filter\", {\n    id: \"filter_1\"\n  }, /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n    in: \"SourceGraphic\",\n    type: \"matrix\",\n    values: \"0 0 0 0 0.827451 0 0 0 0 0.827451 0 0 0 0 0.827451 0 0 0 1 0\"\n  })), /*#__PURE__*/React.createElement(\"filter\", {\n    id: \"filter_2\"\n  }, /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n    in: \"SourceGraphic\",\n    type: \"matrix\",\n    values: \"0 0 0 0 0.40392157 0 0 0 0 0.45490196 0 0 0 0 0.6117647 0 0 0 1 0\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0L105.925 0L105.925 158.126L0 158.126L0 0Z\",\n    id: \"path_1\"\n  }), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"mask_1\"\n  }, /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#path_1\"\n  })))), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Pigeon_Silhouette_clip_art\",\n    filter: \"url(#filter_2)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0L105.925 0L105.925 158.126L0 158.126L0 0Z\",\n    id: \"Background\",\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#mask_1)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"layer2\",\n    filter: \"url(#filter_2)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g3204\",\n    filter: \"url(#filter_1)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.96014 49.8085L11.7452 41.9783L12.8327 35.8882L13.0503 27.188L13.7028 21.0979L15.2253 15.2253L18.9229 8.70017L22.8379 4.13258L29.5806 0.652514L37.4107 0L41.7608 1.52253L45.2409 3.91508L46.5459 7.83015L44.5884 9.13518L43.9359 12.1802L46.3284 15.4428L43.5008 17.4003L38.9333 21.0979L38.0632 24.3605L37.8457 30.0156L41.3258 38.2808L45.6759 44.1534L49.8085 51.1135L52.201 56.1161L50.2435 59.8137L46.3284 60.0312L43.7183 63.9463L39.8033 69.6014L38.7157 76.779L40.2383 85.4792L46.1109 94.6144L50.6785 96.7894L52.8535 101.792L58.2911 102.88L62.2062 108.317L70.6889 108.317L75.6915 108.1L87.4367 112.015L91.1343 111.797L101.139 120.497L105.925 124.847L97.2244 123.325L93.5268 125.282L83.9566 122.02L76.9965 118.757L71.7764 115.277L67.8613 113.537L63.5112 115.712L60.0312 117.235L61.7712 121.15L60.2487 133.548L57.6386 141.813L58.9436 145.293L61.9887 144.858L59.5962 148.773L57.8561 155.516L57.8561 158.126L55.2461 157.691L53.9411 151.383L45.6759 153.776L40.4558 155.081L36.7582 154.646L37.4107 153.123L40.6733 151.818L44.5884 150.513L39.3683 150.295L36.9757 150.078L35.0182 147.468L41.1083 147.033L48.0684 147.468L52.8535 145.293L54.1586 136.81L54.8111 131.155L52.8535 129.198L49.156 123.542L49.3735 117.67L48.5034 114.842L40.2383 113.537L38.9333 116.365L39.3683 121.15L40.8908 124.195L38.7157 128.328L35.6707 132.243L32.6256 137.68L32.8431 141.16L35.4532 142.683L40.4558 141.813L42.1958 142.465L38.9333 144.858L35.8882 144.858L32.6256 144.423L31.3206 147.903L32.8431 154.211L28.9281 151.383L28.2755 147.468L25.013 147.685L17.1828 150.078L12.8327 152.035L9.78769 152.035L11.3102 148.773L15.8778 147.468L21.7504 145.728L16.3128 145.728L10.0052 146.163L8.26516 144.423L8.70017 142.465L13.0503 143.335L19.3579 143.118L25.448 142.465L28.4931 137.463L31.1031 130.285L31.1031 128.545L28.7106 124.195L27.623 116.582L26.1005 111.797L19.3579 103.967L13.2678 97.8769L7.39514 88.0892L2.17504 77.214L0.217504 67.4263L0 60.9012L3.91508 54.3761L6.96014 49.8085L6.96014 49.8085Z\",\n    id: \"path2420\",\n    fill: \"#000000\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.04251 7.1488L0 3.77865L0.306375 1.22551L1.94039 0L5.00415 2.04251L9.08918 4.28928L10.5189 6.22967L11.6423 8.78281L9.39556 8.47643L6.74029 7.45517L4.28927 7.25092L2.04251 7.1488L2.04251 7.1488Z\",\n    transform: \"translate(45.268066 8.334961)\",\n    id: \"path3194\",\n    fill: \"#000000\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.5402 0L12.7657 2.65526L12.8678 6.94455L10.8253 8.98706L7.35304 9.39556L5.92329 10.8253L3.06377 14.8082L1.12338 19.3018L0 23.1825L1.02125 28.3909L3.16589 33.293L6.43391 39.012L9.29343 42.28L11.9487 42.9949L13.8891 46.2629L14.8082 48.1012L20.0166 50.1437L22.5698 54.1266L25.9399 55.4542L32.9866 55.1479L33.8036 52.0841L39.012 50.4501L39.4205 46.5693L39.2162 43.1992L41.1566 42.3821L40.2375 36.9695L37.378 31.3526L37.378 35.744L36.1525 41.5651L32.4759 45.4459L29.1058 49.5309L24.9186 49.6331L20.2209 46.9778L18.689 44.1183L21.5485 45.0374L26.1442 47.0799L29.5143 44.1183L33.3951 41.2588L35.6418 36.4589L36.0504 30.6377L34.7227 26.9612L31.5568 22.4676L28.5952 16.7486L25.7357 11.4381L22.3655 6.12754L17.5656 1.73614L11.5402 0L11.5402 0Z\",\n    transform: \"translate(40.059692 51.944336)\",\n    id: \"path3196\",\n    fill: \"#000000\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.8295 18.2805L19.9145 17.5656L18.689 14.5018L21.5485 13.787L15.3188 8.7828L16.6465 12.3572L16.1359 14.3997L7.25092 14.5018L3.06377 13.787L4.28927 11.7444L10.3147 12.2551L14.0933 12.2551L12.7657 6.74029L9.39555 1.63401L7.76154 0L7.9658 3.57439L6.22967 3.77865L6.74029 8.88493L5.00415 10.6211L2.24676 12.153L0 13.1742L1.22551 14.8082L5.31053 15.8295L12.3572 17.9741L15.8295 18.2805L15.8295 18.2805Z\",\n    transform: \"translate(74.37427 92.28516)\",\n    id: \"path3198\",\n    fill: \"#000000\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.88537 8.22331L7.06916 7.93477L8.80039 6.05928L8.94466 2.88537L7.3577 0.721344L3.46245 0L1.58695 2.16403L0 5.19367L2.88537 8.22331L2.88537 8.22331Z\",\n    transform: \"translate(28.639648 3.0722656)\",\n    id: \"path3200\",\n    fill: \"#FFFFFF\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.432807 4.32806L0 2.59683L1.15415 0.577074L3.31818 0L4.47233 1.00988L5.0494 3.17391L3.75099 5.33794L0.432807 4.32806L0.432807 4.32806Z\",\n    transform: \"translate(31.092163 4.661133)\",\n    id: \"path3202\",\n    fill: \"#000000\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  })))))));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPigeon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/pigeon.e68ccc38.svg\";\nexport { ForwardRef as ReactComponent };","/*\r\n  Name: CameraControl.js\r\n  Author: Amay Kataria\r\n  Date: 09/24/2021\r\n  Description: A module that handles camera and user interaction component.\r\n*/\r\n\r\nimport * as THREE from 'three'\r\nimport oc from 'three-orbit-controls'\r\n\r\nconst OrbitControls = oc(THREE); \r\n\r\nexport let OrbitParams = {\r\n    EnableControls: false,\r\n    EnablePan: true,\r\n    AutoRotate: false,\r\n    RotateSpeed: 0.1, \r\n    EnableKeys: true\r\n};\r\n\r\nclass CameraControl {\r\n    constructor() {\r\n        // Camera Setup\r\n        // (FOV, AspectRatio, Near Clipping, Far Clipping)\r\n        this.camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.05, 20000);\r\n        this.camera.position.set(0, 0, 65); \r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0));\r\n        this.camera.frustumCulled = true; \r\n\r\n        this.controls = new OrbitControls(this.camera); \r\n    }\r\n\r\n    update() {\r\n        this.updateControls();\r\n    }\r\n\r\n    updateControls() {\r\n        this.controls.update();\r\n        this.controls.enablePan = OrbitParams.EnablePan;\r\n        this.controls.autoRotate = OrbitParams.AutoRotate; \r\n        this.controls.autoRotateSpeed = OrbitParams.RotateSpeed;\r\n        this.controls.enabled = OrbitParams.EnableControls; \r\n        this.controls.enableKeys = OrbitParams.EnableKeys;\r\n    }\r\n\r\n    getCamera() {\r\n        return this.camera;\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default CameraControl;","/*\r\n  Name: LightingManager.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: Lighting module to control all the lights in the world. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\nclass LightingManager {\r\n    constructor(scene) {\r\n        // -------- Lighting ----------------\r\n        // var ambientLight = new THREE.AmbientLight(0xD7D3D3);\r\n        // ambientLight.intensity = 0.5;\r\n        //this.scene.add(ambientLight);\r\n        \r\n        var directionalLight = new THREE.DirectionalLight(0xffffff);\r\n        directionalLight.intensity = 1.0;\r\n        directionalLight.position.set(0, 100, 0).normalize();\r\n        //scene.add(directionalLight);\t\r\n    }\r\n} \r\n\r\nexport default LightingManager;","/*\r\n  Name: RendererManager.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: Core renderer manager. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\nclass RendererManager {\r\n    constructor() {\r\n        // Core renderer. \r\n        this.renderer = new THREE.WebGLRenderer({\r\n            antialias: true\r\n        }); \r\n        this.renderer.setClearColor('white', 1);    // Set renderer properties\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        this.renderer.setPixelRatio(window.devicePixelRatio);\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding; \r\n\r\n        // this.renderer.setScissor(0, 0, window.innerWidth, window.innerHeight); \r\n        // this.renderer.setScissorTest(true);\r\n    }\r\n\r\n    getDomElement() {\r\n        return this.renderer.domElement; \r\n    }\r\n\r\n    render(scene, camera) {\r\n        this.renderer.render(scene, camera);\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default RendererManager;\r\n","/*\n  Name: PatternManager.js\n  Author: Amay Kataria\n  Date: 09/21/2021\n  Description: A class that holds two different patterns for birds. These are configured using \n  two param objects that are exposed in the GUI. \n*/\n\nimport * as THREE from 'three'\n\n// Pattern exports for the GUI\nexport let PatternParams = {\n    PatternType: '' // Build the list in ServerGui. Ellipse / Rose-Curve\n}; \nexport let PatternTypes = {\n    Ellipse: 0,\n    RoseCurve: 1\n}\n\n// Ellipse Params\nexport let EllipseParams = {\n    Origin: {x: 0, y: 6, z: 0},\n    Radii: {x: 10, y: 10},\n    Amplitude: 0,\n    Speed: 0.3, \n    Direction: true\n}  \n\n// Rose-Curve Params\nexport let RoseCurveParams = {\n    Origin: {x: 0, y: 6, z: 0},\n    Radius: 5,\n    Phase: 0.5, \n    NumPetals: 3, \n    Amplitude: 0,\n    Sinusoidal: true,\n    Direction: true,\n    Speed: 0.3\n}\n\nclass Pattern {\n    constructor(patternObj) {\n        this.theta_rad = 0; \n        this.amp = patternObj.amp;  \n        this.isClockwise = patternObj.dir; \n        this.originPos = patternObj.pos; \n        this.moveFactor = patternObj.move; \n        this.targetPos = new THREE.Vector3(0, 0, 0); // Agents follow this target. \n    }\n\n    updateTheta(maxTheta) {\n        // Update theta based on direction. \n        this.theta_rad = this.isClockwise ? \n            this.theta_rad + this.moveFactor : \n            this.theta_rad - this.moveFactor; \n\n        // Reset theta. \n        this.theta_rad = this.theta_rad >= maxTheta ? 0 : this.theta_rad;\n    }\n\n    cartesianX(r) {\n        return this.originPos.x + r * Math.cos(this.theta_rad);\n    }\n\n    cartesianZ(r) {\n        return this.originPos.z + r * Math.sin(this.theta_rad);\n    }\n    \n    cartesianY(r) {\n        return this.originPos.y + this.amp * Math.sin(this.theta_rad);\n    }\n\n    getTargetPos() {\n        return this.targetPos; \n    }\n}\n\nexport const ellipseConstructor = (originPos, radX, radZ, amplitude, isClockwise, moveFactor) => {\n    return {\n        pos: originPos, // C\n        radx: radX,\n        radz: radZ,\n        amp: amplitude, // C\n        dir: isClockwise, // C\n        move: moveFactor // C\n    }; \n}\n\nexport class EllipsePattern extends Pattern {\n    constructor(patternObj) {\n        super(patternObj); \n        this.radX = patternObj.radx; \n        this.radZ = patternObj.radz; \n        this.maxTheta = 2*Math.PI; \n    }\n\n    update() {\n        this.updateGuiParams(); \n        // Ellipse: Cartesian coordinates. \n        let xPos = this.cartesianX(this.radX); // Defines polar curve. \n        let zPos = this.cartesianZ(this.radZ); // Define polar curve. \n        let yPos = this.cartesianY(); // Defines height. \n        this.targetPos.set(xPos, yPos, zPos); \n\n        this.updateTheta(this.maxTheta); \n    }\n\n    updateGuiParams() {\n        this.originPos.set(EllipseParams.Origin.x, EllipseParams.Origin.y, EllipseParams.Origin.z);\n        this.radX = EllipseParams.Radii.x;\n        this.radZ = EllipseParams.Radii.y;\n        this.amp = EllipseParams.Amplitude; \n        this.moveFactor = THREE.Math.degToRad(EllipseParams.Speed); \n        this.isClockwise = EllipseParams.Direction; \n    }   \n}\n\nexport const roseConstructor = (originPos, radius, phase, numPetals, amplitude, isSinusoidal, isClockwise, moveFactor) => {\n    return {\n        pos: originPos, // C\n        rad: radius,\n        ph: phase, \n        numP: numPetals,\n        amp: amplitude, // C\n        isSin: isSinusoidal,\n        dir: isClockwise, // C\n        move: moveFactor // C\n    }\n}\n\n// r = asin(b + cTheta); \n// r = acos(b + cTheta); \n// a = radius\n// b = phase\n// c = numPetals\nexport class RosePattern extends Pattern {\n    constructor(patternObj) {\n        super(patternObj); \n        this.rad = patternObj.rad; \n        this.phase = patternObj.ph; \n        this.numPetals = patternObj.numP;\n        this.isSin = patternObj.isSin; \n        this.maxTheta = Math.PI; \n    }\n\n    update() {\n        this.updateGuiParams(); \n\n        let xPos, yPos, zPos; \n        let r = this.isSin ? this.rad * Math.sin(this.phase + this.numPetals * this.theta_rad) : \n            this.rad * Math.cos(this.phase + this.numPetals * this.theta_rad)\n\n        xPos = this.cartesianX(r); // Defines polar curve. \n        zPos = this.cartesianZ(r); // Defines polar curve. \n        yPos = this.cartesianY(); // Defines height. \n\n        this.targetPos.set(xPos, yPos, zPos); \n\n        this.updateTheta(this.maxTheta);\n    }\n\n    updateGuiParams() {\n        this.originPos.set(RoseCurveParams.Origin.x, RoseCurveParams.Origin.y, RoseCurveParams.Origin.z); \n        this.rad = RoseCurveParams.Radius; \n        this.phase = RoseCurveParams.Phase;\n        this.amp = RoseCurveParams.Amplitude; \n        this.numPetals = RoseCurveParams.NumPetals;\n        this.isSin = RoseCurveParams.Sinusoidal; \n        this.isClockwise = RoseCurveParams.Direction; \n        this.moveFactor = THREE.Math.degToRad(RoseCurveParams.Speed); \n    }\n}\n\nexport class PatternManager {\n    setTargetPattern(curPatternType) {\n        if (curPatternType === PatternTypes.Ellipse) {\n            console.log('Creating Ellipse Pattern');\n            let pos = new THREE.Vector3(0, 6, 0); // Target position\n            let radX = 10; \n            let radZ = 10;\n            let amp = 0; \n            let dir = true; \n            let moveFactor = THREE.Math.degToRad(0.3); \n            let patternObj = ellipseConstructor(pos, radX, radZ, amp, dir, moveFactor); \n            this.curPattern = new EllipsePattern(patternObj); \n        } else if (curPatternType === PatternTypes.RoseCurve) {\n            // Initialize Rose-Curve pattern. \n            console.log('Creating Rose-Curve Pattern');\n            let pos = new THREE.Vector3(0, 6, 0); \n            let rad = 10; \n            let phase = 0.5; \n            let numPetals = 3; \n            let amp = 0;\n            let isSin = true; \n            let dir = true; \n            let moveFactor = THREE.Math.degToRad(0.3); \n            let patternObj = roseConstructor(pos, rad, phase, numPetals, amp, isSin, dir, moveFactor);\n            this.curPattern = new RosePattern(patternObj);\n        }\n    }\n\n    update() {\n        if (this.curPattern) {\n            this.curPattern.update(); \n            return this.curPattern.getTargetPos();\n        }        \n    }\n}","\r\n/*\r\n  Author: Amay Kataria\r\n  Date: 09/13/2021\r\n  Title: OctreeManager.js\r\n  Description: Octree is a tree data structure where each parent can have uptill 8 children.\r\n  We use this data structure to improve the performance of the flock. Now, every agent doesn't \r\n  have to test against every other agent. This data structure helps keep a list of neighbors for each\r\n  agent. \r\n*/\r\n\r\nimport { Vector3 } from 'math-ds';\r\nimport { PointOctree } from 'sparse-octree'; \r\n\r\nconst BIAS = 0.0; // No loose octree. \r\nconst MAX_POINTS = 2.0; // Maximum points before the tree splits. \r\nexport class Octree {\r\n    constructor(origin, boundary) {\r\n        let min = new Vector3(0, 0, 0);\r\n        let max = new Vector3(0, 0, 0);\r\n\r\n        min.x = origin.x - boundary; \r\n        min.y = origin.y - boundary; \r\n        min.z = origin.z - boundary; \r\n\r\n        max.x = origin.x + boundary; \r\n        max.y = origin.y + boundary; \r\n        max.z = origin.z + boundary;\r\n\r\n        this.tree = new PointOctree(min, max, BIAS, MAX_POINTS); \r\n    }\r\n\r\n    // Insert a point into the octree along with the data that should be retried. \r\n    insertPoint(position, agent) {\r\n        this.tree.insert(position, agent); \r\n    }\r\n\r\n    // Finds all the points in the octree within a given radius. \r\n    scanForPoints(position, radius) {\r\n        return this.tree.findPoints(position, radius, true); \r\n    }\r\n\r\n    pointCount() {\r\n        return this.tree.pointCount; \r\n    } \r\n}\r\n\r\nconst OCTREE_HOOD_BOUNDARY = 20; \r\nconst NEIGHBOUR_RADIUS = 5; // Radius from the origin.\r\nexport class OctreeManager {\r\n    constructor() {\r\n        this.flockOctree = {};\r\n    }\r\n\r\n    update(flockTarget, liarbirds) {\r\n        this.setupOctree(flockTarget, liarbirds); \r\n    }\r\n\r\n    setupOctree(flockTarget, liarbirds) {\r\n        this.flockOctree = new Octree(flockTarget, OCTREE_HOOD_BOUNDARY); \r\n        liarbirds.forEach(l => {\r\n            this.flockOctree.insertPoint(l.position, l); \r\n        }); \r\n    }\r\n\r\n    // Neighbours around a point. \r\n    getNeighbours(origin) {\r\n        let neighbours; let nAgents=[]; \r\n        neighbours = this.flockOctree.scanForPoints(origin, NEIGHBOUR_RADIUS);\r\n        neighbours.forEach(n => {\r\n            let a = n['data']; \r\n            nAgents.push(a); \r\n        }); \r\n        return nAgents; \r\n    }\r\n}\r\n\r\n          ","const getRandomNum = (max = 0, min = 0) => {\n    return Math.random() * (max - min) + min;\n}\n\nconst map_range = (value, low1, high1, low2, high2) => {\n    return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\n\nconst azimuth = (v) => {\n    return Math.atan2(v.x, v.z);\n}\n\nconst inclination = (v) => {\n    return Math.acos(v.y / v.length());\n}\n\nconst axisRotation = (axis_x, axis_y, axis_z, angle_radians, q) => {\n    var norm = Math.sqrt(axis_x * axis_x + axis_y * axis_y + axis_z * axis_z);\n    axis_x /= norm;\n    axis_y /= norm;\n    axis_z /= norm;\n    var cos = Math.cos(angle_radians / 2);\n    var sin = Math.sin(angle_radians / 2);\n    q.set(axis_x * sin, axis_y * sin, axis_z * sin, cos); \n}\n\nexport {\n    getRandomNum,\n    map_range,\n    azimuth,\n    inclination,\n    axisRotation\n}","import * as THREE from 'three'\nimport * as Utility from '../Utilities/Utility'\n\nexport let AgentParams = {\n    SmoothFactor: 0.01,\n    AttractionForce : 1.5,\n    SeperationForce: 1.2,\n    CohesionForce: 1.1,\n    AlignmentForce: 1.4,\n    Gravity: new THREE.Vector3(0, -0.3, 0)\n}\n\nexport default class Agent {\n    constructor() {\n        // this.idx = i; \n        // // Construct all important variables. \n        this.position = new THREE.Vector3(Math.random() * 20, Math.random() * 20, Math.random() * 20); \n        this.velocity = new THREE.Vector3(0.0, 0.0, 0.0); \n        this.acceleration = new THREE.Vector3(0, 0, 0); \n        this.rotationA = new THREE.Quaternion(); \n        this.rotationB = new THREE.Quaternion(); \n        this.fSteer = new THREE.Vector3(0, 0, 0);\n        this.vDesired = new THREE.Vector3(0, 0, 0); \n        \n        // Helper vectors. \n        this.sumVec = new THREE.Vector3(0, 0, 0);\n        this.diffVec = new THREE.Vector3(0, 0, 0); \n\n        // Force and speeds. \n        this.maxSpeed = Utility.getRandomNum(0.03, 0.5); \n\n        // Target value that changes based on the pattern position. \n        this.target = new THREE.Vector3(0, 0, 0); \n\n        // Agent will be animated if it's alive\n        this.isAlive = true;\n    }\n\n    updateBehaviour(nAgents) {\n        // Seek target\n        this.seek();\n\n        // Flock with other nearby pigeons\n        nAgents.forEach( neighbor => {\n            // calculate a directional vec from my neighbor to me\n            this.diffVec.subVectors(this.position, neighbor.position)\n\n            // Pass it down for force calculation\n            this.seperate(this.diffVec); \n\n            this.cohere(this.diffVec);\n\n            this.align(neighbor, this.diffVec);\n        })\n    }\n\n    updatePosition() {\n        // Target velocity. \n        this.sumVec.addVectors(this.velocity, this.acceleration); \n        \n        // What's my intermediate velocity? \n        // Lerp the velocity rather than just updating straight up.\n        this.velocity = this.velocity.lerp(this.sumVec, AgentParams.SmoothFactor); \n        this.velocity.clampLength(-9999, this.maxSpeed); \n\n        this.position.add(this.velocity); \n        this.acceleration.multiplyScalar(0); \n    }\n\n    applyForce() {\n        // Add steering force to acceleration to change the position of the agent. \n        this.acceleration.add(this.fSteer); \n    }\n\n    seek() {\n        // Calculate a desired direction, and multiply it by force. \n        this.vDesired.subVectors(this.target, this.position); \n        this.vDesired.normalize();\n        this.vDesired.multiplyScalar(AgentParams.AttractionForce);\n\n        // Add steering force.\n        this.fSteer.add(this.vDesired); \n    }\n\n    seperate(diffVec) {\n        this.vDesired.copy(diffVec)\n        this.vDesired.normalize(); \n        this.vDesired.multiplyScalar(AgentParams.SeperationForce);\n        this.fSteer.add(this.vDesired)\n    }\n\n    cohere(diffVec) {\n        this.vDesired.copy(diffVec);\n        this.vDesired.multiplyScalar(-1); // Reverse the vector direction to get closer\n        this.vDesired.normalize();\n        this.vDesired.multiplyScalar(AgentParams.CohesionForce);\n        this.fSteer.add(this.vDesired); \n    }\n\n    align(neighbor, diffVec) {\n        this.vDesired.copy(neighbor.velocity);\n        this.vDesired.divideScalar(diffVec.lengthSq()); // Weighted alignment by distance\n        this.vDesired.multiplyScalar(AgentParams.AlignmentForce); // Apply alignment weight. \n        this.fSteer.add(this.vDesired); \n    }\n\n    setTarget(targetPos) {\n        this.target.copy(targetPos);\n    }\n}","/*\r\n  Author: Amay Kataria\r\n  Date: 08/19/2021\r\n  Title: Pigeon.js\r\n  Description: Pigeon class that extends the agent class. It loads the bird model \r\n  and executes high level animations, etc. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'\r\nimport Agent, { AgentParams } from '../Environment/Agent.js'\r\nimport model from '../../models/New_Bird.glb'; \r\nimport * as Utility from '../Utilities/Utility';\r\n\r\nconst loader = new GLTFLoader(); \r\n\r\nexport default class Pigeon extends Agent {\r\n    constructor(scene) {\r\n        super();\r\n        this.loadPigeon(scene); \r\n    }\r\n\r\n    loadPigeon(scene) {\r\n        loader.load(model, gltf => {\r\n            this.pigeon = gltf.scene; \r\n\r\n            this.pigeon.name = 'pChild';\r\n            \r\n            // Agent is the parent object under which pigeon sits. \r\n            this.parent = new THREE.Group();\r\n            this.parent.add(this.pigeon); \r\n            this.parent.frustumCulled = false;\r\n            this.parent.castShadow = true;\r\n            this.parent.receiveShadow = true; \r\n            this.parent.name = 'pigeon';\r\n\r\n            // Store all the parameters that we'll be changing for this agent. \r\n            this.agentPosition = this.parent.position; \r\n            this.agentRotation = this.parent.rotation; \r\n            this.agentScale = this.parent.scale\r\n            this.agentAnimations = gltf.animations; \r\n\r\n            this.agentScale.set(0.5, 0.5, 0.5); \r\n\r\n            // Setup animation. \r\n            this.animationMixer = new THREE.AnimationMixer(this.parent); \r\n            var action = this.animationMixer.clipAction(this.agentAnimations[0]);\r\n            this.randSeed = Utility.getRandomNum(0.3, 0.8); \r\n            action.play(); \r\n\r\n            // Add it to the scene. \r\n            scene.add(this.parent); \r\n        }, undefined, function ( error ) {\r\n            console.error(error);\r\n        }); \r\n    }\r\n\r\n    update(delta, nAgents) {\r\n        // Animation update. \r\n        if (this.animationMixer) {\r\n\r\n            // Reset steering force. It will accumulate over each behaviour function call \r\n            this.fSteer.set(0, 0, 0);\r\n\r\n            if (this.isAlive){\r\n                // Behaviors. \r\n                this.updateBehaviour(nAgents);  \r\n            }\r\n\r\n            // Gravity pulls agent downwards\r\n            this.fSteer.add(AgentParams.Gravity);\r\n\r\n            // Apply steering force\r\n            this.applyForce();\r\n\r\n            if (this.isAlive) {\r\n                // Animating flipping wings\r\n                this.animationMixer.update(delta * this.acceleration.lengthSq() * 0.15);\r\n            }\r\n\r\n            if (!this.isAlive && this.position.y < 0){\r\n                // Don't update dead agents if they are already on the ground\r\n                return  \r\n            }\r\n\r\n            // Sync rotation and position. \r\n            this.updatePosition();\r\n            this.syncPosition();\r\n            this.syncRotation(); \r\n        }\r\n    }\r\n\r\n    syncPosition() {\r\n        // Sync position of the agent with \r\n        // the actual agent scene. \r\n        this.parent.position.copy(this.position);\r\n    }\r\n\r\n    syncRotation() {\r\n        // // Agent rotation.\r\n        let azimuth, inclination; \r\n        azimuth = Utility.azimuth(this.velocity); \r\n        inclination = Utility.inclination(this.velocity);\r\n\r\n        Utility.axisRotation(0, 1, 0, azimuth, this.rotationA); // Azimuth rotate around Z-axis\r\n        Utility.axisRotation(0, 0, 1, inclination - Math.PI/2, this.rotationB); // Inclination rotate X-axis\r\n                    \r\n        this.rotationA.multiply(this.rotationB);\r\n        this.parent.setRotationFromQuaternion(this.rotationA);\r\n    }\r\n}\r\n\r\n\r\n","import * as THREE from 'three';\nimport threeOrbitControls from 'three-orbit-controls';\n\nexport default class Target {\n    constructor(scene) {\n        let geometry = new THREE.SphereGeometry(5, 12, 12);\n        let material = new THREE.MeshLambertMaterial(); \n        material.emissive = new THREE.Color('#CA7249');\n        material.wireframe = false;\n        material.transparent = true; \n        material.opacity = 0.5; \n        this.mesh = new THREE.Mesh(geometry, material);\n\n        scene.add(this.mesh);\n    }\n\n    getVector() {\n        return this.mesh.position; \n    }\n\n    setVector(v) {\n        this.mesh.position.copy(v);\n    }\n\n    setVisibility(v) {\n        this.mesh.visible = v;\n    }\n}","    /*\r\n  Name: PigeonManager.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: Container class that manages all the pigeons that are created in the world. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\n\r\nimport { PatternManager } from './PatternManager';\r\nimport { OctreeManager } from './OctreeManager'\r\nimport Pigeon from '../Environment/Pigeon'\r\nimport Target from '../Environment/Target'\r\nimport { MathUtils } from 'three';\r\nimport { AgentParams } from '../Environment/Agent';\r\n\r\nconst NUM_PIGEONS = 800; \r\n\r\nexport let TargetParams = {\r\n    ShowTarget: true\r\n}\r\n\r\nclass PigeonManager {\r\n    constructor() {\r\n        // Manages the octree for the pigeons. \r\n        this.octreeManager = new OctreeManager();\r\n\r\n        // Manages the current pattern for the flock. \r\n        this.patternManager = new PatternManager(); \r\n        \r\n        // Container of all the pigeons. \r\n        this.pigeons = [];\r\n        \r\n        // Clock, required for animation of the agents. \r\n        this.clock = new THREE.Clock(); \r\n    }\r\n\r\n    setup(scene, currentPatternType) {\r\n        console.log('Pigeon Manager Pattern: ' + currentPatternType);\r\n        \r\n        this.spawnPigeons(scene);\r\n\r\n        // Create the target object that the pigeons are following. \r\n        this.target = new Target(scene);\r\n\r\n        // Create the target pattern.\r\n        this.patternManager.setTargetPattern(currentPatternType); \r\n    }\r\n\r\n    update() {\r\n        // Do any pigeons exist? \r\n        if (this.pigeons.length > 0) {\r\n            // Don't do anything until we have a valid target position. \r\n            let patternPos = this.patternManager.update(); \r\n            if (patternPos) {\r\n                this.target.setVector(patternPos);\r\n                this.target.setVisibility(TargetParams.ShowTarget);\r\n\r\n                // Update octree. \r\n                // Note: On every update, we instantiate a new octree\r\n                // and populate it with the new pigeon position. So everytime, \r\n                // the neighbors get updated. \r\n                this.octreeManager.update(patternPos, this.pigeons); \r\n\r\n                let nAgents = []; // Neighboring agents. \r\n\r\n                // Delta change in time to advance the animation of the wings. \r\n                let delta = this.clock.getDelta(); \r\n                this.pigeons.forEach(p => {\r\n                    // Update the target's position \r\n                    p.setTarget(patternPos); \r\n                    // Find and update the location of neighboring agents\r\n                    nAgents = this.octreeManager.getNeighbours(p.position); \r\n                    p.update(delta, nAgents);\r\n                });\r\n            }\r\n            \r\n            // Slowly reset some of the agent params that was disturbed by the gun shot\r\n            this.recoverFromShock()\r\n        }\r\n    }\r\n\r\n    setNewPatternType(newPatternType) {\r\n        this.patternManager.setTargetPattern(newPatternType)\r\n    }\r\n\r\n    spawnPigeons(scene) {\r\n        // NOT IMPLEMENTED\r\n        // ISSUES IN CLEANING GEOMETRY!!\r\n        /// Empty the pigeons first. \r\n        // if (this.pigeons.length > 0) {\r\n        //     scene.children.forEach(child => {\r\n        //         if (child.name === 'pigeon') {\r\n        //             child.remove(child[0]);\r\n        //         }\r\n        //     });\r\n        // }\r\n\r\n        // Instantiate pigeons again. \r\n        for (let i = 0; i < NUM_PIGEONS; i++) {\r\n            let p = new Pigeon(scene); \r\n            this.pigeons.push(p);\r\n        }\r\n    }\r\n\r\n    shootPigeon() {\r\n        // Set one randome pigeon to be dead\r\n        let choseOne = MathUtils.randInt(0, this.pigeons.length - 1)\r\n        this.pigeons[choseOne].isAlive = false;\r\n        \r\n        // Gun shot will scare them away\r\n        AgentParams.SeperationForce *= 3\r\n        AgentParams.AttractionForce *= 0.1\r\n    }\r\n\r\n    recoverFromShock() {\r\n        // Separation would decay overtime to recover from gun shot\r\n        AgentParams.SeperationForce *= 0.999;\r\n        AgentParams.SeperationForce = MathUtils.clamp(AgentParams.SeperationForce, 1.2, 2);      \r\n        \r\n        // Agent would focus back on seeking target again\r\n        AgentParams.AttractionForce *= 1.001;\r\n        AgentParams.AttractionForce = MathUtils.clamp(AgentParams.AttractionForce, 0.5, 2);\r\n    }\r\n} \r\n\r\nexport default PigeonManager;","/*\r\n  Name: RaycastManager.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: Core raycast manager. \r\n*/\r\n\r\nimport * as THREE from 'three'\r\nimport { PatternParams } from './PatternManager';\r\n\r\n\r\n\r\nclass RendererManager {\r\n    constructor(shootPigeonCallback) {\r\n        this.raycaster = new THREE.Raycaster();\r\n        this.mouse = new THREE.Vector2(); \r\n\r\n        this.callback = shootPigeonCallback;\r\n        this.isIntersecting = false;  \r\n\r\n        // Listen for mouse events. \r\n        window.addEventListener('mousemove', this.onMouseMove.bind(this), false);\r\n        window.addEventListener('click', this.onMouseClick.bind(this), false);\r\n    }\r\n\r\n    onMouseMove(event) {\r\n        this.mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\r\n        this.mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\r\n    }\r\n\r\n    intersect(camera, targetMesh) {\r\n        this.raycaster.setFromCamera(this.mouse, camera);\r\n        const objects = this.raycaster.intersectObject(targetMesh); \r\n        if (objects.length > 0) {\r\n            this.isIntersecting = true;  \r\n        }\r\n    }\r\n\r\n    onMouseClick(event) {\r\n        if (this.isIntersecting) {\r\n            this.callback();\r\n        }\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default RendererManager;\r\n","/*\r\n  Name: Websocket.js\r\n  Author: Amay Kataria\r\n  Date: 09/24/2021\r\n  Description: Class responsible for communication with the webserver. We use websockets\r\n  technology for this. Here we have the websocket client, which communicates with backend\r\n  server over websockets.\r\n*/\r\n\r\nimport io  from 'socket.io-client'\r\n\r\n//const localhostURL = \"http://localhost:5000\";\r\nconst herokuURL = \"https://befantastic-martha.herokuapp.com\";\r\n\r\nclass Websocket {\r\n  constructor() {\r\n      this.siteURL = herokuURL + '/app'; \r\n\r\n      this.socket = io(this.siteURL, {\r\n          reconnection: true,\r\n          reconnectionDelay: 500,\r\n          reconnectionAttempts: Infinity\r\n      });\r\n\r\n      this.socket.once('connect', this.subscribe.bind(this));\r\n      this.handlePresetsCbk = ''; \r\n  }\r\n\r\n  subscribe() {\r\n      console.log('Connected');\r\n\r\n      // Subscribe to incoming events from the webserver here. \r\n      this.socket.on('time', this.logTime.bind(this));\r\n      this.socket.on('receivePresets', this.handlePresets.bind(this));\r\n  }\r\n\r\n  handlePresets(data) {\r\n    this.handlePresetsCbk(data); \r\n  }\r\n\r\n  // ----------------------- DATABASE CALLS --------------------- //\r\n  saveGuiPreset(presetName, json) {\r\n      let payload = {\r\n          'name':  presetName, \r\n          'data': json\r\n      }\r\n      this.socket.emit('savePreset', payload); \r\n  }\r\n\r\n  readAllPresets(readPresetsCallback) {\r\n    this.socket.emit('getPresets'); \r\n    this.handlePresetsCbk = readPresetsCallback; // Subscribe to receive data when the call completes. \r\n  }\r\n\r\n  deletePreset(presetName) {\r\n    this.socket.emit('deletePreset', presetName);\r\n  }\r\n\r\n  // -------------------- DON'T CHANGE THESE -------------------    \r\n  disconnect() {\r\n      console.log('Socket Server Disconnected.');\r\n  }\r\n\r\n  logTime(data) {\r\n      //console.log('Socket Connection Alive: ' + data);\r\n  }\r\n}\r\n\r\nexport default new Websocket();\r\n\r\n\r\n","/*\r\n  Name: ServerGui.js\r\n  Author: Amay Kataria\r\n  Date: 09/24/2021\r\n  Description: A tweakpane GUI implementation that stores and loads presets from a backend server. \r\n  The data is transmitted across using a Websocket connection that is maintained throughout the\r\n  lifetime of the application. \r\n*/\r\n\r\nimport { Pane } from 'tweakpane';\r\nimport * as EssentialsPlugin from '@tweakpane/plugin-essentials';\r\nimport _ from 'lodash';\r\n\r\nimport Websocket from './Websocket';\r\n\r\nimport { TargetParams } from '../Managers/PigeonManager';\r\nimport { PatternParams, PatternTypes, EllipseParams, RoseCurveParams } from '../Managers/PatternManager.js';\r\nimport { AgentParams } from '../Environment/Agent.js';\r\nimport { OrbitParams } from '../Managers/CameraControl.js'\r\n\r\n// Local params for the GUI. \r\n// Presets is a dynamically populated prop (critical)\r\nlet GuiParams = {\r\n    Preset: 'Global',\r\n    Presets: ''\r\n}\r\nconst PRESETS_IDX = 1; \r\nconst PATTERN_TYPE_IDX =0; \r\n\r\nclass ServerGui {\r\n    constructor(containerComponent) {\r\n        this.gui = new Pane({title: 'Pigeon GUI', container: containerComponent, expanded: false});\r\n        this.gui.registerPlugin(EssentialsPlugin);\r\n\r\n        // Preset name\r\n        this.gui.addInput(GuiParams, 'Preset');\r\n        \r\n        // Presets.\r\n        this.presetOptions = []; // Backup object of all the preset options. // Saves the truth. \r\n        this.buildPresets(); \r\n\r\n        // FPS\r\n        this.fpsGraph = this.gui.addBlade({\r\n            view: 'fpsgraph',\r\n            label: 'FPS',\r\n            lineCount: 2,\r\n        });\r\n\r\n        // Orbit controls. \r\n        let f0 = this.gui.addFolder({ title: 'Orbit Controls', expanded: true });\r\n        f0.addInput(OrbitParams, 'EnableControls', {label: 'Enable Controls'});\r\n        f0.addInput(OrbitParams, 'EnablePan', {label: 'Enable Panning'});\r\n        f0.addInput(OrbitParams, 'AutoRotate', {label: 'Enable AutoRotate'});\r\n        f0.addInput(OrbitParams, 'RotateSpeed', { label: 'Rotation Speed', min: 0.1, max: 1.0 });\r\n        f0.addInput(OrbitParams, 'EnableKeys', {label: 'Enable Keys'});\r\n\r\n        // World Parameters.\r\n        let f1 = this.gui.addFolder({ title: 'Target Params', expanded: true });\r\n        f1.addInput(TargetParams, 'ShowTarget', {label: 'Show Target'});\r\n\r\n        // Pattern Parameters.\r\n        this.patternFolder = this.gui.addFolder({ title: 'Pattern Params', expanded: true });\r\n        this.currentPatternType = PatternTypes.Ellipse; \r\n        this.buildPatternTypeOptions(); // Default pattern type.\r\n        this.buildPatterns(); \r\n\r\n        // Ellipse Parameters. \r\n        this.ellipseParamsFolder = this.patternFolder.addFolder({ title: 'Ellipse Pattern Params', expanded: true });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Origin');\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Radii', {\r\n            x: { min: 0, max: 50 },\r\n            y: { min: 0, max: 50 }\r\n        });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Amplitude', { min: 0, max: 10 });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Speed', { min: 0, max: 2 });\r\n        this.ellipseParamsFolder.addInput(EllipseParams, 'Direction'); \r\n\r\n        this.roseCurveParamsFolder = this.patternFolder.addFolder({ title: 'Rose-Curve Pattern Params', expanded: true });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Origin');\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Radius', { min: 1, max: 50 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Phase', { min: 0, max: 10 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'NumPetals', { min: 1, max: 10, step: 1 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Amplitude', { min: 0, max: 10 });\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Sinusoidal');\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Direction');\r\n        this.roseCurveParamsFolder.addInput(RoseCurveParams, 'Speed', { min: 0, max: 2 });\r\n\r\n        // Show the params based on the current pattern selected.\r\n        this.showPatternParams();\r\n\r\n        let f2 = this.gui.addFolder({ title: 'Agent Params', expanded: true});\r\n        f2.addInput(AgentParams, 'AttractionForce', {label: 'AttractionForce', min: 0.5, max: 2, step: 0.05});\r\n        f2.addInput(AgentParams, 'SmoothFactor', {label: 'Smooth Factor', min: 0.005, max: 0.1, step: 0.005});\r\n        f2.addInput(AgentParams, 'SeperationForce', {label: 'Seperation Force', min: 0.5, max: 2, step: 0.1}); \r\n        f2.addInput(AgentParams, 'CohesionForce', {label: 'Cohesion Force', min: 0.1, max: 2, step: 0.1});\r\n        f2.addInput(AgentParams, 'AlignmentForce', {label: 'Alignment Force', min: 0, max: 2, step: 0.1}); \r\n\r\n        // Save Preset button\r\n        this.gui.addButton({title: 'Save Preset'}).on('click', this.onSavePreset.bind(this));       \r\n        this.gui.addButton({title: 'Delete Preset'}).on('click', this.onDeletePreset.bind(this));\r\n        this.gui.addButton({title: 'Show Panel'}).on('click', this.onShowPanel.bind(this)); \r\n        this.gui.addButton({title: 'Spawn Agents'}).on('click', this.onSpawnAgents.bind(this));\r\n        this.gui.addButton({title: 'Shoot Pigeon'}).on('click', this.onShootPigeon.bind(this));\r\n\r\n        // Read presets from the database. \r\n        Websocket.readAllPresets(this.onReceivePresets.bind(this)); \r\n    }\r\n\r\n    onPresetSelected(event) {\r\n        // The value of the select preset is the JSON value. \r\n        let guiJson = JSON.parse(event.value); \r\n        this.gui.importPreset(guiJson);\r\n    }\r\n\r\n    onReceivePresets(data) {\r\n        console.log('All the presets received:');\r\n        console.log(data);\r\n\r\n        // If there are valid presets. \r\n        if (data.length > 0) {\r\n            // Build preset options. \r\n            data.forEach(d => {\r\n                let name = d['name'];\r\n                let config = d['config'];\r\n                // We push here rather than unshift because it's okay to just read this is in the order\r\n                // the entries were pushed in the database. \r\n                this.presetOptions.push({ text: name, value: JSON.stringify(config)});\r\n            }); \r\n            \r\n            // Dispose pattern type list. \r\n            // this.patternTypeList.dispose();   \r\n\r\n            // Get the first preset and set the GUI with that. \r\n            let defaultPresetJSON = data[0]['config'];\r\n            this.gui.importPreset(defaultPresetJSON);\r\n\r\n            // Rebuild the preset controller using this.presetOptions. \r\n            this.disposePresets();\r\n            this.buildPresets();\r\n\r\n            // Build Pattern type options. \r\n            this.currentPatternType = defaultPresetJSON['PatternType'];  \r\n            this.buildPatternTypeOptions(); \r\n            this.disposePatterns();\r\n            this.buildPatterns(); \r\n            this.showPatternParams(); \r\n        }\r\n    }\r\n\r\n    onSavePreset() {\r\n        let presetName = GuiParams.Preset; \r\n        if (presetName.length > 0) {\r\n            // Clear the presets first. \r\n            this.disposePresets(); \r\n            let json = this.gui.exportPreset(); \r\n\r\n            // Does this preset exist? \r\n            let preset = _.find(this.presetOptions, p => {\r\n                return p.text === presetName;\r\n            });\r\n\r\n            if (preset) {\r\n                // Update local json of the preset.\r\n                console.log('Preset Exists. Updating database and local copy of the preset.');\r\n                preset.value = JSON.stringify(json);\r\n                // NOTE: Update the preset options array to maintain the order of the updated presets. \r\n                // Unfortunately, we need to rebuild the presets everytime and we want to make sure \r\n                // the order of presets doesn't change. \r\n                this.presetOptions = _.sortBy(this.presetOptions, ({text}) => { \r\n                    return text === presetName ? 0: 1;\r\n                });\r\n            } else {\r\n                console.log('Preset doesnt exist. New entry in the database.');\r\n                this.presetOptions.unshift({ text: presetName, value: JSON.stringify(json)} );\r\n            }\r\n\r\n            // Update database. \r\n            Websocket.saveGuiPreset(presetName, json); \r\n\r\n            // Rebuild the presets. \r\n            this.buildPresets(); \r\n        } else {\r\n            alert('Not an empty entry please.');\r\n        }\r\n    }\r\n\r\n    onDeletePreset() {\r\n        if (this.presetOptions.length > 0) {\r\n            let presetName = GuiParams.Preset; \r\n            console.log('Deleting preset: ' + presetName);\r\n\r\n            // Remove that element from the array. \r\n            // Updates the original array. \r\n            _.remove(this.presetOptions, p => p.text === presetName); \r\n\r\n            // Delete the preset from the database. \r\n            Websocket.deletePreset(presetName); \r\n\r\n            // Rebuild the preset list. \r\n            this.disposePresets(); \r\n            this.buildPresets();\r\n\r\n            // Maybe I'm the last entry in the database. \r\n            if (this.presetOptions.length > 0) {\r\n                // Get preset options for the first preset options entry. \r\n                let presetJson = this.presetOptions[0].value; \r\n                this.gui.importPreset(JSON.parse(presetJson));\r\n            }\r\n        }\r\n    }\r\n\r\n    disposePresets() {\r\n        GuiParams.Presets = '';\r\n        this.presetList.dispose();\r\n    }\r\n\r\n    buildPresets() {\r\n        this.presetList = this.gui.addInput(GuiParams, 'Presets', {\r\n            index: PRESETS_IDX,\r\n            options: this.presetOptions\r\n        }); \r\n        this.presetList.on('change', this.onPresetSelected.bind(this));\r\n    }\r\n\r\n    buildPatternTypeOptions() {\r\n        if (this.currentPatternType === PatternTypes.Ellipse) {\r\n            this.patternTypeOptions = { Ellipse: PatternTypes.Ellipse, RoseCurve: PatternTypes.RoseCurve };\r\n        } else if (this.currentPatternType === PatternTypes.RoseCurve) {\r\n            this.patternTypeOptions = { RoseCurve: PatternTypes.RoseCurve, Ellipse: PatternTypes.Ellipse };\r\n        } else {\r\n            this.patternTypeOptions = { Ellipse: PatternTypes.Ellipse, RoseCurve: PatternTypes.RoseCurve }; // Default pattern type. \r\n        }\r\n    }\r\n\r\n    disposePatterns() {\r\n        this.patternList.dispose();\r\n    }\r\n\r\n    buildPatterns() {\r\n        this.patternList = this.patternFolder.addInput(PatternParams, 'PatternType', {\r\n            label: 'Pattern Type',\r\n            index: PATTERN_TYPE_IDX,\r\n            options: this.patternTypeOptions\r\n        }); \r\n        this.patternList.on('change', this.onPatternSelected.bind(this)); \r\n    }\r\n\r\n    onPatternSelected(ev) {\r\n        this.currentPatternType = ev.value;\r\n        this.showPatternParams();\r\n\r\n        // Fire the callback to notify that the pattern has changed.\r\n        this.patternChangeUpdate(this.currentPatternType); \r\n    }\r\n\r\n    showPatternParams() {\r\n        if (this.currentPatternType === PatternTypes.Ellipse) {\r\n            this.ellipseParamsFolder.hidden = false; \r\n            this.roseCurveParamsFolder.hidden = true; \r\n        } else if (this.currentPatternType === PatternTypes.RoseCurve) {\r\n            this.ellipseParamsFolder.hidden = true; \r\n            this.roseCurveParamsFolder.hidden = false;\r\n        }\r\n    }\r\n\r\n    subscribeForPatternChange(callback) {\r\n        this.patternChangeUpdate = callback; \r\n    }\r\n\r\n    subscribeShowPanel(callback) {\r\n        this.onShowPanelCallback = callback; \r\n    }\r\n\r\n    onShowPanel() {\r\n        this.onShowPanelCallback(); \r\n    }  \r\n\r\n    subscribeSpawnAgents(callback) {\r\n        this.onSpawnAgentCallback = callback; \r\n    }\r\n\r\n    onSpawnAgents() {\r\n        this.onSpawnAgentCallback(); \r\n    }\r\n\r\n    subscribeShootPigeon(callback) {\r\n        this.onShootPigeonCallback = callback;\r\n    }\r\n\r\n    onShootPigeon(){\r\n        this.onShootPigeonCallback();\r\n    }\r\n} \r\n\r\n// Keep a singleton instance of this - through App.js\r\nexport default ServerGui;","/*\r\n  Name: GuiPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: This is the container component where the GUI is placed in the project. It needs to be outside \r\n  the way of the title. We just move it slightly lower from the top. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\nimport ServerGui from '../Utilities/ServerGui';\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'absolute',\r\n        top: '30px',\r\n        right: '35px'\r\n    }\r\n};\r\n\r\nclass GuiPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n\r\n    this.guiRef = React.createRef();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref={this.guiRef} style={styles.container}></div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    let containerComponent = this.guiRef.current; \r\n    this.gui = new ServerGui(containerComponent); \r\n    this.gui.subscribeShowPanel(this.onShowPanel.bind(this));\r\n    this.gui.subscribeSpawnAgents(this.onSpawnAgents.bind(this));\r\n    this.gui.subscribeShootPigeon(this.onShootPigeon.bind(this));\r\n  }\r\n\r\n  getFpsGraph() {\r\n      return this.gui.fpsGraph; \r\n  }\r\n\r\n  onShowPanel() {\r\n    this.props.onShowInfoPanel(); \r\n  }\r\n\r\n  onSpawnAgents() {\r\n    this.props.onSpawnAgents();\r\n  }\r\n\r\n  onShootPigeon() {\r\n    this.props.onShootPigeon();\r\n  }\r\n\r\n  subscribeForPatternChange(callback) {\r\n    this.gui.subscribeForPatternChange(callback);\r\n  }\r\n\r\n  getCurPatternType() {\r\n    return this.gui.currentPatternType; \r\n  }\r\n}\r\n\r\nexport default Radium(GuiPanel);","/*\n  Name: World.js\n  Author: Amay Kataria\n  Date: 08/19/2021\n  Description: This is where Three.js world is initialized. It's the entry point for the three-dimensional \n  world and creating all elements. \n*/\n\nimport React from 'react'\nimport Radium from 'radium'\nimport * as THREE from 'three'\n\n// Utility components\n// import Terrain from '../Environment/Terrain.js'\nimport CameraControl from '../Managers/CameraControl.js'\nimport LightingManager from '../Managers/LightingManager.js'\nimport RendererManager from '../Managers/RendererManager.js'\nimport PigeonManager from '../Managers/PigeonManager.js'\nimport RaycastManager from '../Managers/RaycastManager.js'\n\n// Interface components. \nimport GuiPanel from './GuiPanel.js'\n\n// Clouds video. \nimport clouds from '../../assets/gaugan.mp4'\n\nconst styles = {\n  container: {\n    width: '100vw', \n    height: '100vh',\n    overflow: 'hidden'\n  },\n\n  crosshair: {\n    cursor: 'crosshair'\n  },\n\n  video: {\n    display: 'none'\n  }\n};\n\nclass World extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state={};\n\n    // Reference to the components that need to be accesed. \n    this.worldRef = React.createRef(); \n    this.guiRef = React.createRef(); \n    this.navRef = React.createRef(); \n    this.panelRef = React.createRef(); \n    this.videoRef = React.createRef();\n    \n    // 3D scene object where everything is added. \n    this.scene = new THREE.Scene(); \n\n    // Camera & Interactive controls module. \n    this.cameraControl = new CameraControl(); \n\n    // Lights.\n    this.lightingManager = new LightingManager(this.scene); \n\n    // Pigeons\n    this.pigeonManager = new PigeonManager(); \n\n    // Raycaster. \n    this.raycastManager = new RaycastManager(this.onShootPigeon.bind(this)); \n\n    // Instantiate terrain geometry.\n    // this.terrain = new Terrain(this.scene); \n\n    // Three.js Renderer\n    this.rendererManager = new RendererManager(); \n  }\n\n  componentDidMount() {\n    // Mount the canvas at the current div. \n    let rendererDomElement = this.rendererManager.getDomElement(); \n    this.worldRef.current.appendChild(rendererDomElement); \n\n    // Get the handle to the FPS graph component. \n    this.fpsGraph = this.guiRef.current.getFpsGraph(); \n    this.guiRef.current.subscribeForPatternChange(this.onPatternChanged.bind(this));\n\n    // This is the initial render. \n    // Initialize the recursive rendering call. \n    this.initializeRender(); \n\n    this.addSkybox();\n    //this.addSkySphere();\n  }\n\n  // Component render. \n  render() {\n    return (\n      <div style={styles.container} ref={this.worldRef}>\n        <GuiPanel \n          ref={this.guiRef} \n          onSpawnAgents={this.onSpawnAgents.bind(this)}\n          onShootPigeon={this.onShootPigeon.bind(this)}\n        />\n        <video id={'video'} ref={this.videoRef} playsInline loop src={clouds} style={styles.video} />\n      </div>\n    );\n  }\n\n  // CORE Three.js recursive render loop. \n  initializeRender() {\n    this.fpsGraph.begin();\n      this.pigeonManager.update(); \n      this.cameraControl.update();\n      if (this.pigeonManager.target) {\n        this.raycastManager.intersect(this.cameraControl.camera, this.pigeonManager.target.mesh); \n      }\n      // This renders each frame. \n      this.rendererManager.render(this.scene, this.cameraControl.getCamera());      \n    this.fpsGraph.end();\n\n    // Register this function as a callback to every repaint from the browser.\n    requestAnimationFrame(this.initializeRender.bind(this)); \n  }\n\n  addSkybox() {\n    // const texture = new THREE.TextureLoader().load(landscape);\n    const texture = new THREE.VideoTexture(this.videoRef.current);\n    // texture.wrapS = THREE.MirroredRepeatWrapping;\n    const geometry = new THREE.BoxGeometry(120, 70, 120);\n    const material = new THREE.MeshBasicMaterial( {side: THREE.BackSide, map: texture} );\n    const cube = new THREE.Mesh( geometry, material );\n    this.scene.add(cube);\n  }\n\n  addSkySphere() {\n    //const texture = new THREE.TextureLoader().load(landscape);   ;\n    const texture = new THREE.VideoTexture(this.videoRef.current);\n    const geometry = new THREE.SphereGeometry(100, 100, 100); \n    const material = new THREE.MeshBasicMaterial( {side: THREE.BackSide, map: texture});\n    const sphere = new THREE.Mesh (geometry, material);\n\n    this.scene.add(sphere);\n  }\n\n  // Instantiate pigeon geometry. \n  beginWorld() {\n    this.videoRef.current.play();\n    let currentPatternType = this.guiRef.current.getCurPatternType(); \n    this.pigeonManager.setup(this.scene, currentPatternType); \n  }\n\n  onPatternChanged(newPatternType) {\n    this.pigeonManager.setNewPatternType(newPatternType);\n  }\n\n  onSpawnAgents() {\n    this.pigeonManager.spawnPigeons(this.scene);\n  }\n\n  onShootPigeon() {\n    this.pigeonManager.shootPigeon();\n  }\n\n  scrollTo() {\n    this.worldRef.current.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start'\n    });\n  }\n}\n\nexport default Radium(World);\n\n\n// const Raycaster = new THREE.Raycaster();\n// const mouse = new THREE.Vector2(); \n\n// onMouseMove(event) {\n//   //mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n//   //mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n//   // console.log(mouse.x + ', ' + mouse.y);\n// }\n\n// onClick(event) {\n//   // mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n//   // mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n\n//   // Raycaster.setFromCamera(mouse, this.camera);\n\n//   // // calculate objects intersecting the picking ray\n//   // const intersects = Raycaster.intersectObject(this.terrain.getMesh(), true);\n//   // for (let i = 0; i < intersects.length; i ++) {\n//   //   //intersects[ i ].object.material.color.set( 0xff0000 );\n//   // }\n//   // console.log('Mouse Clicked');\n\n//   let a = this.gui.getSaveObject();\n//   console.log(a);\n// }\n// window.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n// //window.addEventListener('click', this.onClick.bind(this), true)","const color = {\n    white: '#ffffff',\n    darkWithAlpha: 'rgb(0, 0, 0, 0.4)',\n    button: 'rgb(255, 255, 255, 0.4)',\n    link: '#D34C00',\n    panel: '#E7EFE0',\n    lightBlue: '#E6E9EC',\n    darkBlue: '#67749C',\n    midGrey: '#B2B6C2',\n    brown: '#91614B'\n};\n\nconst fontSize = {\n    extraSmall: '8px',\n    verySmall: '12px',\n    lessSmall: '14px',\n    small: '16px',\n    lessBig: '18px',\n    big: '20px',\n    veryBig: '24px',\n    extraBig: '28px',\n    huge: '32px',\n    veryHuge: '36px',\n    extraHuge: '40px',\n    massive: '44px',\n    veryMassive: '48px',\n    extraMassive: '52px',\n    enormous: '56px',\n    veryEnormous: '60px',\n    extraEnormous: '64px',\n    insane: '68px',\n    veryInsane: '72px',\n    extraInsane: '76px',\n    gaia: '80px',\n    veryGaia: '84px',\n    extraGaia: '88px'\n};\n\nconst padding = {\n    // Increments of 4\n    extraSmall: '4px',\n    verySmall: '8px',\n    small: '12px',\n    // Incremenets of 8\n    big : '20px',\n    veryBig : '28px',\n    extraBig : '36px',\n    // Increments of 12\n    huge: '52px',\n    veryHuge: '64px',\n    extraHuge: '76px',\n    // Incremenets of 16\n    massive: '92px',\n    veryMassive: '108px',\n    extraMassive: '124px',\n    // Increment of 20\n    enourmous: '100px',\n    veryEnormous: '120px',\n    extraEnormous: '140px',\n    // Increment of 40\n    insane: '160px',\n    veryInsane: '200px',\n    extraInsane: '240px'\n\n};\n\nconst fontFamily = {\n    bebas: 'bebas',\n    mont: 'montserrat',\n    tenor: 'tenorsans'\n};\n\n\nexport { color, fontSize, fontFamily, padding };","/*\r\n  Name: PassengerPigeons.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: This is the Passenger Pigeons component that gets rendered within the Section Panel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { color, fontFamily, padding, fontSize } from '../Utilities/CommonStyles';\r\n\r\nconst styles = {\r\n    container: {\r\n      display: 'flex',\r\n      justifyContent: 'center'\r\n    },\r\n    \r\n    title: {\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.gaia,\r\n      marginTop: padding.huge,\r\n      color: color.darkBlue\r\n    }\r\n};\r\n\r\nclass PassengerPigeons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.title}>\r\n          Passenger Pigeons\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(PassengerPigeons);","/*\r\n  Name: ClimateStatement.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: This is the Climate Statement component that gets rendered within the Section Panel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { color, fontFamily, padding, fontSize } from '../Utilities/CommonStyles';\r\n\r\nconst styles = {\r\n    container: {\r\n      display: 'flex',\r\n      justifyContent: 'center'\r\n    },\r\n\r\n    title: {\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.gaia,\r\n      marginTop: padding.huge,\r\n      color: color.darkBlue\r\n    }\r\n};\r\n\r\nclass ClimateStatement extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.title}>Climate Statement</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(ClimateStatement);","/*\r\n  Name: About.js\r\n  Author: Amay Kataria\r\n  Date: 10/09/2021\r\n  Description: This is the About Us component that gets rendered within the Section Panel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { color, fontFamily, fontSize, padding } from '../Utilities/CommonStyles';\r\n\r\nconst styles = {\r\n    container: {\r\n        display: 'flex',\r\n        justifyContent: 'center'\r\n    },\r\n\r\n    title: {\r\n        fontFamily: fontFamily.bebas,\r\n        fontSize: fontSize.gaia,\r\n        marginTop: padding.huge,\r\n        color: color.darkBlue\r\n    }\r\n};\r\n\r\nclass About extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.title}>\r\n          ABOUT US\r\n        </div>   \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(About);","/*\r\n  Name: SectionPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/30/2021\r\n  Description: Each section that contains information about the website. This content is passed in from ContentPanel. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { PanelTitle } from './ContentPanel';\r\nimport PassengerPigeons from './PassengerPigeons'\r\nimport ClimateStatement from './ClimateStatement'\r\nimport About from './About'\r\nimport { color } from '../Utilities/CommonStyles';\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'relative',\r\n        width: '100vw',\r\n        height: '1000px'\r\n    },\r\n\r\n    colorA: {\r\n        backgroundColor: color.panel\r\n    },\r\n\r\n    colorB: {\r\n        backgroundColor: color.midGrey\r\n    }\r\n};\r\n\r\nclass SectionPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n\r\n    this.containerRef = React.createRef(); \r\n  }\r\n\r\n  render() {\r\n    let containerStyles = this.props.panelNum === 0 ? [styles.container, styles.colorA] : [styles.container, styles.colorB]; \r\n    let panel = this.getPanel(); \r\n    return (\r\n      <div style={containerStyles} ref={this.containerRef}>\r\n        {panel}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getPanel() {\r\n    if (this.props.title === PanelTitle.PIGEONS) {\r\n      return <PassengerPigeons />\r\n    } else if (this.props.title === PanelTitle.CLIMATE) {\r\n      return <ClimateStatement />\r\n    } else if (this.props.title === PanelTitle.ABOUT) {\r\n      return <About />\r\n    }\r\n  }\r\n\r\n  scrollTo() {\r\n    setTimeout(() => {\r\n      this.containerRef.current.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start'\r\n      });\r\n    }, 50); // Give a little timeout so the panel can be made visible first.\r\n  }\r\n}\r\n\r\nexport default Radium(SectionPanel);","/*\r\n  Name: ContentPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/30/2021\r\n  Description: Collection of information panels that contain information about the website. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport SectionPanel from './SectionPanel';\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    }\r\n};\r\n\r\nexport const PanelTitle = {\r\n  PIGEONS: 'PASSENGER PIGEONS',\r\n  CLIMATE: 'CLIMATE STATEMENT',\r\n  ABOUT: 'ABOUT US'\r\n}\r\n\r\nclass ContentPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n\r\n    this.pigeonPanelRef = React.createRef();\r\n    this.climatePanelRef = React.createRef();\r\n    this.aboutPanelRef = React.createRef(); \r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.container}>\r\n        <SectionPanel ref={this.pigeonPanelRef} title={PanelTitle.PIGEONS} panelNum={0} />\r\n        <SectionPanel ref={this.climatePanelRef} title={PanelTitle.CLIMATE} panelNum={1} />\r\n        <SectionPanel ref={this.aboutPanelRef} title={PanelTitle.ABOUT} panelNum={0} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  scroll(panelTitle) {\r\n    if (panelTitle === PanelTitle.PIGEONS) {\r\n      this.pigeonPanelRef.current.scrollTo();\r\n    } else if (panelTitle === PanelTitle.CLIMATE) {\r\n      this.climatePanelRef.current.scrollTo();\r\n    } else if (panelTitle === PanelTitle.ABOUT) {\r\n      this.aboutPanelRef.current.scrollTo(); \r\n    }\r\n  }\r\n}\r\n\r\nexport default Radium(ContentPanel);","/*\r\n  Name: Navigation.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: This components holds the title of the project and the about button\r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\n\r\nimport { fontFamily, color, fontSize, padding } from '../Utilities/CommonStyles.js'\r\nimport { PanelTitle } from './ContentPanel.js';\r\nimport { ReactComponent as Pigeon } from '../../assets/pigeon.svg'\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'absolute',\r\n        top: '50px',\r\n        left: '50px',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        visibility: 'visible'\r\n    },\r\n\r\n    hidden: {\r\n      visibility: 'hidden'\r\n    },\r\n\r\n    homeTitle: {\r\n      fontFamily: fontFamily.bebas,\r\n      fontSize: fontSize.extraHuge,\r\n      letterSpacing: 6,\r\n      color: color.darkBlue,\r\n      cursor: 'default'\r\n    },\r\n\r\n    titleContainer: {\r\n      marginTop: padding.small,\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    },\r\n\r\n    title: {\r\n        fontFamily: fontFamily.tenor,\r\n        fontSize: fontSize.big,\r\n        letterSpacing: 3,\r\n        color: color.darkBlue,\r\n        cursor: 'crosshair',\r\n        paddingTop: padding.small\r\n    },\r\n\r\n    hover: {\r\n      color: color.brown\r\n    },\r\n\r\n    homeButton: {\r\n      position: 'fixed',\r\n      right: padding.big,\r\n      bottom: padding.big,\r\n      fontSize: fontSize.small,\r\n      padding: padding.verySmall,\r\n      backgroundColor: color.lightBlue,\r\n      width: fontSize.gaia,\r\n      height: fontSize.gaia,\r\n      borderRadius: fontSize.extraMassive,\r\n      zIndex: 1\r\n    },\r\n\r\n    homeHover: {\r\n      backgroundColor: color.brown\r\n    },\r\n\r\n    svg: {\r\n      width: '100%',\r\n      height: '100%',\r\n    }\r\n};\r\n\r\nclass Navigation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={ \r\n      isHoveringPigeons: false,\r\n      isHoveringClimate: false,\r\n      isHoveringAbout: false,\r\n      isHomeButtonHovering: false, \r\n      showHomeButton: false\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let containerStyle = styles.container; \r\n    let pigeonStyle = this.state.isHoveringPigeons ? [styles.title, styles.hover] : styles.title;\r\n    let climateStyle = this.state.isHoveringClimate ? [styles.title, styles.hover] : styles.title;\r\n    let aboutStyle = this.state.isHoveringAbout ? [styles.title, styles.hover] : styles.title; \r\n    let homeButton = this.getHomeButton(); \r\n    return (\r\n      <div style={containerStyle} >\r\n        <div style={styles.homeTitle}>THE LOST PASSAGE</div>\r\n        <div style={styles.titleContainer}>\r\n          <div style={pigeonStyle}\r\n              onClick={this.onClick.bind(this, PanelTitle.PIGEONS)}\r\n              onMouseEnter={this.onHoverPigeons.bind(this)} \r\n              onMouseLeave={this.onHoverPigeons.bind(this)}>\r\n            PASSENGER PIGEONS\r\n          </div>\r\n          <div style={climateStyle} \r\n            onClick={this.onClick.bind(this, PanelTitle.CLIMATE)}\r\n            onMouseEnter={this.onHoverClimate.bind(this)}\r\n            onMouseLeave={this.onHoverClimate.bind(this)}>\r\n            CLIMATE STATEMENT\r\n          </div>\r\n          <div style={aboutStyle}\r\n              onClick={this.onClick.bind(this, PanelTitle.ABOUT)}\r\n              onMouseEnter={this.onHoverAbout.bind(this)}\r\n              onMouseLeave={this.onHoverAbout.bind(this)}>\r\n            ABOUT US\r\n          </div>\r\n        </div>\r\n        {homeButton}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getHomeButton() {\r\n    let buttonStyle = this.state.showHomeButton ? [styles.homeButton] : [styles.homeButton, styles.hidden];\r\n    buttonStyle = this.state.isHomeButtonHovering ? [buttonStyle, styles.homeHover] : buttonStyle; \r\n    return (\r\n      <div style={buttonStyle}\r\n          onClick={this.onHomeButtonClick.bind(this)}\r\n          onMouseEnter={this.onHomeButtonHover.bind(this)}\r\n          onMouseLeave={this.onHomeButtonHover.bind(this)}>\r\n        <Pigeon style={styles.svg} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onHomeButtonHover() {\r\n    let hovering = this.state.isHomeButtonHovering; \r\n    this.setState({\r\n      isHomeButtonHovering: !hovering\r\n    }); \r\n  }\r\n\r\n  onHoverPigeons() {\r\n    let hovering = this.state.isHoveringPigeons;\r\n    this.setState({\r\n      isHoveringPigeons: !hovering\r\n    }); \r\n  }\r\n\r\n  onHoverClimate() {\r\n    let hovering = this.state.isHoveringClimate;\r\n    this.setState({\r\n      isHoveringClimate: !hovering\r\n    }); \r\n  }\r\n\r\n  onHoverAbout() {\r\n    let hovering = this.state.isHoveringAbout;\r\n    this.setState({\r\n      isHoveringAbout: !hovering\r\n    }); \r\n  }\r\n\r\n  onClick(panelTitle) {\r\n    this.props.onClickNavTitle(panelTitle);\r\n\r\n    // TODO: Do something about stopping the WebGL loop as well. \r\n    // Stop rendering or animating the frame. \r\n    this.setState({\r\n      showHomeButton: true\r\n    });\r\n  }\r\n\r\n  onHomeButtonClick() {\r\n    this.props.onClickHomeButton(); \r\n    this.setState({\r\n      showHomeButton: false\r\n    }); \r\n    // Hide the home button.\r\n    // Scroll back to the top\r\n    // Turn on the renderer again...\r\n    // Show the birds maybe....\r\n  }\r\n}\r\n\r\nexport default Radium(Navigation);","/*\r\n  Name: EnterPanel.js\r\n  Author: Amay Kataria\r\n  Date: 09/26/2021\r\n  Description: This is the first panel that the user sees. It's the overlay panel when the user comes to the website. \r\n  It has a transparent finish so one can see the terrain underneath it. It shows the title of the project and the \r\n  Enter button to enter the website. \r\n*/\r\n\r\nimport React from 'react'\r\n\r\nimport Radium from 'radium'\r\nimport { bounceOut, zoomIn } from 'react-animations'\r\nimport { fontFamily, color, fontSize, padding } from '../Utilities/CommonStyles.js'\r\nimport { ReactComponent as Pigeon } from '../../assets/pigeon.svg'\r\n\r\nconst FLASH_DURATION = '1.0s';\r\nconst Load_Time = 0; // 4 seconds for now. // Change it back once we are ready.\r\nconst TopMessage = \"\\\"The avarice and thoughtlessness of humankind led to the extinction of this species.\\\"\";\r\nconst BottomMessage = \"\\\"May we gather the strength to confront the reality of our climate condition.\\\"\";\r\nconst LeftMessage = \"\\\"Its disappearance is nearly unfathomable. Still can't fully get my mind around it.\\\"\";\r\nconst RightMessage = \"\\\"No matter how abundant something is - if we're not careful, we can lose it.\\\"\";\r\n\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'absolute',\r\n        top: '0%',\r\n        width: '100vw',\r\n        height: '100vh',\r\n        backgroundColor: color.lightBlue,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 0\r\n    },\r\n\r\n    hide: {\r\n        visibility: 'hidden'\r\n    },\r\n\r\n    title: {\r\n        fontFamily: fontFamily.bebas,\r\n        fontSize: fontSize.extraInsane,\r\n        letterSpacing: 6,\r\n        opacity: 1,\r\n        color: color.darkBlue,\r\n    },\r\n\r\n    loadContainer: {\r\n        fontSize: fontSize.veryBig\r\n    },\r\n\r\n    svg: {\r\n      width: '90%',\r\n      height: '90%',\r\n      fill: color.darkBlue\r\n    },\r\n\r\n    flash: {\r\n      animationName: Radium.keyframes(bounceOut, 'bounceOut'),\r\n      animationDuration: FLASH_DURATION,\r\n      animationTimingFunction: 'ease-in-out'\r\n    },\r\n\r\n    zoom: {\r\n      animationName: Radium.keyframes(zoomIn, 'zoom'),\r\n      animationDuration: FLASH_DURATION,\r\n      animationTimingFunction: 'ease-in-out',\r\n      animationFillMode: 'forwards'\r\n    },\r\n\r\n    button: {\r\n        fontFamily: fontFamily.mont,\r\n        color: color.darkBlue,\r\n        fontSize: fontSize.extraBig,\r\n        borderStyle: 'solid',\r\n        borderWidth: '4px',\r\n        marginTop: padding.small,\r\n        paddingTop: padding.small,\r\n        paddingBottom: padding.small,\r\n        paddingLeft: padding.big,\r\n        paddingRight: padding.big,\r\n        letterSpacing: '5px',\r\n        cursor: 'crosshair'\r\n    },\r\n\r\n    hover: {\r\n      backgroundColor: color.midGrey,\r\n      color: color.white\r\n    },\r\n\r\n    topMessage: {\r\n      position: 'absolute',\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.lessBig,\r\n      fontFamily: fontFamily.tenor,\r\n      top: '30px'\r\n    },\r\n\r\n    leftMessage: {\r\n      position: 'absolute',\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.lessBig,\r\n      fontFamily: fontFamily.tenor,\r\n      left: '15%',\r\n      transform: 'rotate(-90deg)'\r\n    },\r\n\r\n    rightMessage: {\r\n      position: 'absolute',\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.lessBig,\r\n      fontFamily: fontFamily.tenor,\r\n      right: '15%',\r\n      transform: 'rotate(90deg)'\r\n    },\r\n\r\n    bottomMessage: {\r\n      position: 'absolute',\r\n      color: color.darkBlue, \r\n      fontSize: fontSize.lessBig,\r\n      fontFamily: fontFamily.tenor,\r\n      bottom: '30px'\r\n    }\r\n};\r\n\r\nclass EnterPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // Initial render of the component. \r\n    // NOTE: Whenever a component's state is updated, render is called. \r\n    this.state={\r\n        isHidden: false,\r\n        isLoading: false,\r\n        isHovering: false\r\n    };\r\n  }\r\n\r\n  // Overriding React function. \r\n  render() {\r\n    let containerStyle = styles.container;\r\n    let content = this.state.isLoading ? this.getLoader() : this.getTitle(); \r\n    let messages = this.getMessages();\r\n    return (\r\n      <div style={containerStyle}>\r\n          {content}\r\n          {messages}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getLoader() {\r\n    return (\r\n      <div style={[styles.loadContainer, styles.zoom]}>\r\n        <Pigeon style={styles.svg} />\r\n      </div>); \r\n  }\r\n\r\n  getTitle() {\r\n    let buttonStyle = this.state.isHovering ? [styles.button, styles.hover] : [styles.button]; \r\n    return (\r\n        <React.Fragment>\r\n            <div style={[styles.title, styles.flash]}>THE LOST PASSAGE</div>\r\n            <div \r\n              onMouseEnter={this.onHover.bind(this)} \r\n              onMouseLeave={this.onHover.bind(this)} \r\n              onClick={this.onEnter.bind(this)} \r\n              style={buttonStyle}>ENTER</div>\r\n        </React.Fragment>\r\n    );\r\n  }\r\n  \r\n  getMessages() {\r\n    return (\r\n      <React.Fragment>\r\n        <div style={styles.topMessage}>{TopMessage}</div>\r\n        <div style={styles.leftMessage}>{LeftMessage}</div>\r\n        <div style={styles.rightMessage}>{RightMessage}</div>\r\n        <div style={styles.bottomMessage}>{BottomMessage}</div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onEnter() {\r\n    this.setState({\r\n        isLoading: true\r\n    });\r\n\r\n    // Tell the world that the user has\r\n    // clicked on enter. \r\n    this.props.onEnterWorld(); \r\n\r\n    // Schedule a cleanup here. \r\n    setTimeout(this.hasFinishedLoading.bind(this), Load_Time); \r\n  }\r\n\r\n  hasFinishedLoading() {\r\n    this.setState({\r\n        isHidden: true\r\n    }); \r\n\r\n    // Tel the world that load is complete. \r\n    this.props.onLoadComplete(); \r\n  }\r\n\r\n  onHover() {\r\n    let hoverState = !this.state.isHovering;\r\n    this.setState({\r\n      isHovering: hoverState\r\n    });\r\n  }\r\n}\r\n\r\nexport default Radium(EnterPanel);","/*\n  Name: App.js\n  Author: Amay Kataria\n  Date: 08/19/2021\n  Description: Entry point for the application.\n*/\n\nimport React from 'react'\nimport Radium from 'radium'\n\nimport World from './Interface/World.js'\nimport ContentPanel from './Interface/ContentPanel.js';\nimport Navigation from './Interface/Navigation.js'\nimport EnterPanel from './Interface/EnterPanel.js';\n\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n\n  panelStyles: {\n    position: 'relative',\n    display: 'none'\n  },\n\n  panelVisible: {\n    display: 'block'\n  }\n}\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state={\n      showContentPanel: false,\n      showNavPanel: false,\n      showEnterPanel: true\n    };\n\n    this.worldRef = React.createRef(); \n    this.contentPanelRef = React.createRef();\n    this.navRef = React.createRef();\n  }\n\n  render() {\n    let navPanel = this.state.showNavPanel ? this.getNavPanel() : <React.Fragment></React.Fragment>;\n    let enterPanel = this.state.showEnterPanel ? this.getEnterPanel() : <React.Fragment></React.Fragment>;\n    let contentPanel = this.getContentPanel();\n    return (\n      <div style={styles.container}>\n        <World ref={this.worldRef} />\n        {navPanel}\n        {enterPanel}\n        {contentPanel}\n      </div>\n    );\n  }\n\n  getNavPanel() {\n    return (\n      <Navigation ref={this.navRef} \n        onClickNavTitle={this.onClickNavTitle.bind(this)} \n        onClickHomeButton={this.onClickHomeButton.bind(this)}/>\n    );\n  }\n\n  getEnterPanel() {\n    return (\n      <EnterPanel \n        onEnterWorld={this.onEnterWorld.bind(this)} \n        onLoadComplete={this.onLoadComplete.bind(this)}\n      />\n    );\n  }\n\n  getContentPanel() {\n    let contentPanelStyles = this.state.showContentPanel ? [styles.panelStyles, styles.panelVisible] : [styles.panelStyles];\n    return (\n      <div style={contentPanelStyles}>\n        <ContentPanel ref={this.contentPanelRef} />\n      </div>\n    );\n  }\n\n  onEnterWorld() {\n    this.worldRef.current.beginWorld();  \n  }\n\n  onLoadComplete() {\n    this.setState({\n      showEnterPanel: false,\n      showNavPanel: true\n    });\n  }\n    \n  onClickNavTitle(panelTitle) {\n    // Show the content panel now. \n    this.setState({\n      showContentPanel: true\n    });\n\n    // Trigger scroll.\n    this.contentPanelRef.current.scroll(panelTitle);\n  }\n\n  onClickHomeButton() {\n    this.worldRef.current.scrollTo(); \n    setTimeout(() => {\n      this.setState({\n        showContentPanel: false\n      });\n    }, 500); // Give a little timeout so the panel can be made visible first.\n  }\n}\n\nexport default Radium(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './font/stylesheet.css';\nimport App from './components/App';\nimport {StyleRoot} from 'radium'\n\n// Use StyleRoot to enable keyframes and media queries for Javascript type\n// styles with Radium in components. \n// Single render function for the entire application. \nReactDOM.render(<StyleRoot><App /></StyleRoot>, document.getElementById('root'));","module.exports = __webpack_public_path__ + \"static/media/New_Bird.a5ca1e59.glb\";"],"sourceRoot":""}